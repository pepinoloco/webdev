/*! For license information please see main.c18cbf27.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,i)=>{var s=i(43),n=i(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)r.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function m(e,t,i,s,n,o,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=r}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){f[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];f[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){f[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){f[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){f[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){f[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){f[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){f[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){f[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function C(e,t,i,s){var n=f.hasOwnProperty(t)?f[t]:null;(null!==n?0!==n.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,i,s){if(null===t||"undefined"===typeof t||function(e,t,i,s){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,s))return!0;if(s)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,n,s)&&(i=null),s||null===n?function(e){return!!d.call(g,e)||!d.call(p,e)&&(u.test(e)?g[e]=!0:(p[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):n.mustUseProperty?e[n.propertyName]=null===i?3!==n.type&&"":i:(t=n.attributeName,s=n.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(n=n.type)||4===n&&!0===i?"":""+i,s?e.setAttributeNS(s,t,i):e.setAttribute(t,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);f[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);f[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);f[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){f[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),f.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){f[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),R=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var O,G=Object.assign;function B(e){if(void 0===O)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var z=!1;function H(e,t){if(!e||z)return"";z=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),o=s.stack.split("\n"),r=n.length-1,a=o.length-1;1<=r&&0<=a&&n[r]!==o[a];)a--;for(;1<=r&&0<=a;r--,a--)if(n[r]!==o[a]){if(1!==r||1!==a)do{if(r--,0>--a||n[r]!==o[a]){var l="\n"+n[r].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=r&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?B(e):""}function V(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 1:return e=H(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case S:return"Portal";case D:return"Profiler";case M:return"StrictMode";case A:return"Suspense";case L:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return j(e(t))}catch(i){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function _(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=_(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var n=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){s=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=_(e)?e.checked?"true":"false":e.value),(e=s)!==i&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var i=t.checked;return G({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function Q(e,t){var i=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;i=U(null!=t.value?t.value:i),e._wrapperState={initialChecked:s,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&C(e,"checked",t,!1)}function q(e,t){X(e,t);var i=U(t.value),s=t.type;if(null!=i)"number"===s?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,i):t.hasOwnProperty("defaultValue")&&ee(e,t.type,U(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function ee(e,t,i){"number"===t&&Z(e.ownerDocument)===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var te=Array.isArray;function ie(e,t,i,s){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&s&&(e[i].defaultSelected=!0)}else{for(i=""+U(i),t=null,n=0;n<e.length;n++){if(e[n].value===i)return e[n].selected=!0,void(s&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return G({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(o(92));if(te(i)){if(1<i.length)throw Error(o(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:U(i)}}function oe(e,t){var i=U(t.value),s=U(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=s&&(e.defaultValue=""+s)}function re(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,he,de=(he=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction((function(){return he(e,t)}))}:he);function ue(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];function me(e,t,i){return null==t||"boolean"===typeof t||""===t?"":i||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function fe(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var s=0===i.indexOf("--"),n=me(i,t[i],s);"float"===i&&(i="cssFloat"),s?e.setProperty(i,n):e[i]=n}}Object.keys(pe).forEach((function(e){ge.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ce(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,xe=null,Me=null;function De(e){if(e=Cn(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=wn(t),Se(e.stateNode,e.type,t))}}function Ie(e){xe?Me?Me.push(e):Me=[e]:xe=e}function Re(){if(xe){var e=xe,t=Me;if(Me=xe=null,De(e),t)for(e=0;e<t.length;e++)De(t[e])}}function Ee(e,t){return e(t)}function Ae(){}var Le=!1;function ke(e,t,i){if(Le)return e(t,i);Le=!0;try{return Ee(e,t,i)}finally{Le=!1,(null!==xe||null!==Me)&&(Ae(),Re())}}function Te(e,t){var i=e.stateNode;if(null===i)return null;var s=wn(i);if(null===s)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(o(231,t,typeof i));return i}var Pe=!1;if(h)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(he){Pe=!1}function Fe(e,t,i,s,n,o,r,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(h){this.onError(h)}}var Oe=!1,Ge=null,Be=!1,ze=null,He={onError:function(e){Oe=!0,Ge=e}};function Ve(e,t,i,s,n,o,r,a,l){Oe=!1,Ge=null,Fe.apply(He,arguments)}function je(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ue(e){if(je(e)!==e)throw Error(o(188))}function _e(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(o(188));return t!==e?null:e}for(var i=e,s=t;;){var n=i.return;if(null===n)break;var r=n.alternate;if(null===r){if(null!==(s=n.return)){i=s;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===i)return Ue(n),e;if(r===s)return Ue(n),t;r=r.sibling}throw Error(o(188))}if(i.return!==s.return)i=n,s=r;else{for(var a=!1,l=n.child;l;){if(l===i){a=!0,i=n,s=r;break}if(l===s){a=!0,s=n,i=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===i){a=!0,i=r,s=n;break}if(l===s){a=!0,s=r,i=n;break}l=l.sibling}if(!a)throw Error(o(189))}}if(i.alternate!==s)throw Error(o(190))}if(3!==i.tag)throw Error(o(188));return i.stateNode.current===i?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Ke=n.unstable_scheduleCallback,Ze=n.unstable_cancelCallback,$e=n.unstable_shouldYield,Qe=n.unstable_requestPaint,Xe=n.unstable_now,qe=n.unstable_getCurrentPriorityLevel,Je=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,it=n.unstable_LowPriority,st=n.unstable_IdlePriority,nt=null,ot=null;var rt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ht=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var i=e.pendingLanes;if(0===i)return 0;var s=0,n=e.suspendedLanes,o=e.pingedLanes,r=268435455&i;if(0!==r){var a=r&~n;0!==a?s=dt(a):0!==(o&=r)&&(s=dt(o))}else 0!==(r=i&~n)?s=dt(r):0!==o&&(s=dt(o));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&n)&&((n=s&-s)>=(o=t&-t)||16===n&&0!==(4194240&o)))return t;if(0!==(4&s)&&(s|=16&i),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)n=1<<(i=31-rt(t)),s|=e[i],t&=~n;return s}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function ft(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function yt(e,t,i){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-rt(t)]=i}function vt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-rt(i),n=1<<s;n&t|e[s]&t&&(e[s]|=t),i&=~n}}var Ct=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,xt,Mt,Dt,It=!1,Rt=[],Et=null,At=null,Lt=null,kt=new Map,Tt=new Map,Pt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ft(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Ot(e,t,i,s,n,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:o,targetContainers:[n]},null!==t&&(null!==(t=Cn(t))&&St(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function Gt(e){var t=vn(e.target);if(null!==t){var i=je(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=We(i)))return e.blockedOn=t,void Dt(e.priority,(function(){xt(i)}))}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i)return null!==(t=Cn(i))&&St(t),e.blockedOn=i,!1;var s=new(i=e.nativeEvent).constructor(i.type,i);be=s,i.target.dispatchEvent(s),be=null,t.shift()}return!0}function zt(e,t,i){Bt(e)&&i.delete(t)}function Ht(){It=!1,null!==Et&&Bt(Et)&&(Et=null),null!==At&&Bt(At)&&(At=null),null!==Lt&&Bt(Lt)&&(Lt=null),kt.forEach(zt),Tt.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ht)))}function jt(e){function t(t){return Vt(t,e)}if(0<Rt.length){Vt(Rt[0],e);for(var i=1;i<Rt.length;i++){var s=Rt[i];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==Et&&Vt(Et,e),null!==At&&Vt(At,e),null!==Lt&&Vt(Lt,e),kt.forEach(t),Tt.forEach(t),i=0;i<Pt.length;i++)(s=Pt[i]).blockedOn===e&&(s.blockedOn=null);for(;0<Pt.length&&null===(i=Pt[0]).blockedOn;)Gt(i),null===i.blockedOn&&Pt.shift()}var Wt=b.ReactCurrentBatchConfig,Ut=!0;function _t(e,t,i,s){var n=Ct,o=Wt.transition;Wt.transition=null;try{Ct=1,Kt(e,t,i,s)}finally{Ct=n,Wt.transition=o}}function Yt(e,t,i,s){var n=Ct,o=Wt.transition;Wt.transition=null;try{Ct=4,Kt(e,t,i,s)}finally{Ct=n,Wt.transition=o}}function Kt(e,t,i,s){if(Ut){var n=$t(e,t,i,s);if(null===n)Ws(e,t,s,Zt,i),Ft(e,s);else if(function(e,t,i,s,n){switch(t){case"focusin":return Et=Ot(Et,e,t,i,s,n),!0;case"dragenter":return At=Ot(At,e,t,i,s,n),!0;case"mouseover":return Lt=Ot(Lt,e,t,i,s,n),!0;case"pointerover":var o=n.pointerId;return kt.set(o,Ot(kt.get(o)||null,e,t,i,s,n)),!0;case"gotpointercapture":return o=n.pointerId,Tt.set(o,Ot(Tt.get(o)||null,e,t,i,s,n)),!0}return!1}(n,e,t,i,s))s.stopPropagation();else if(Ft(e,s),4&t&&-1<Nt.indexOf(e)){for(;null!==n;){var o=Cn(n);if(null!==o&&wt(o),null===(o=$t(e,t,i,s))&&Ws(e,t,s,Zt,i),o===n)break;n=o}null!==n&&s.stopPropagation()}else Ws(e,t,s,null,i)}}var Zt=null;function $t(e,t,i,s){if(Zt=null,null!==(e=vn(e=we(s))))if(null===(t=je(e)))e=null;else if(13===(i=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qe()){case Je:return 1;case et:return 4;case tt:case it:return 16;case st:return 536870912;default:return 16}default:return 16}}var Xt=null,qt=null,Jt=null;function ei(){if(Jt)return Jt;var e,t,i=qt,s=i.length,n="value"in Xt?Xt.value:Xt.textContent,o=n.length;for(e=0;e<s&&i[e]===n[e];e++);var r=s-e;for(t=1;t<=r&&i[s-t]===n[o-t];t++);return Jt=n.slice(e,1<t?1-t:void 0)}function ti(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ii(){return!0}function si(){return!1}function ni(e){function t(t,i,s,n,o){for(var r in this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=n,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(n):n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ii:si,this.isPropagationStopped=si,this}return G(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),t}var oi,ri,ai,li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ci=ni(li),hi=G({},li,{view:0,detail:0}),di=ni(hi),ui=G({},hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mi,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ai&&(ai&&"mousemove"===e.type?(oi=e.screenX-ai.screenX,ri=e.screenY-ai.screenY):ri=oi=0,ai=e),oi)},movementY:function(e){return"movementY"in e?e.movementY:ri}}),pi=ni(ui),gi=ni(G({},ui,{dataTransfer:0})),mi=ni(G({},hi,{relatedTarget:0})),fi=ni(G({},li,{animationName:0,elapsedTime:0,pseudoElement:0})),yi=G({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vi=ni(yi),Ci=ni(G({},li,{data:0})),bi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Si={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Si[e])&&!!t[e]}function Mi(){return xi}var Di=G({},hi,{key:function(e){if(e.key){var t=bi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ti(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wi[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mi,charCode:function(e){return"keypress"===e.type?ti(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ti(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ii=ni(Di),Ri=ni(G({},ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ei=ni(G({},hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mi})),Ai=ni(G({},li,{propertyName:0,elapsedTime:0,pseudoElement:0})),Li=G({},ui,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ki=ni(Li),Ti=[9,13,27,32],Pi=h&&"CompositionEvent"in window,Ni=null;h&&"documentMode"in document&&(Ni=document.documentMode);var Fi=h&&"TextEvent"in window&&!Ni,Oi=h&&(!Pi||Ni&&8<Ni&&11>=Ni),Gi=String.fromCharCode(32),Bi=!1;function zi(e,t){switch(e){case"keyup":return-1!==Ti.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hi(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vi=!1;var ji={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ji[e.type]:"textarea"===t}function Ui(e,t,i,s){Ie(s),0<(t=_s(t,"onChange")).length&&(i=new ci("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var _i=null,Yi=null;function Ki(e){Gs(e,0)}function Zi(e){if(K(bn(e)))return e}function $i(e,t){if("change"===e)return t}var Qi=!1;if(h){var Xi;if(h){var qi="oninput"in document;if(!qi){var Ji=document.createElement("div");Ji.setAttribute("oninput","return;"),qi="function"===typeof Ji.oninput}Xi=qi}else Xi=!1;Qi=Xi&&(!document.documentMode||9<document.documentMode)}function es(){_i&&(_i.detachEvent("onpropertychange",ts),Yi=_i=null)}function ts(e){if("value"===e.propertyName&&Zi(Yi)){var t=[];Ui(t,Yi,e,we(e)),ke(Ki,t)}}function is(e,t,i){"focusin"===e?(es(),Yi=i,(_i=t).attachEvent("onpropertychange",ts)):"focusout"===e&&es()}function ss(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zi(Yi)}function ns(e,t){if("click"===e)return Zi(t)}function os(e,t){if("input"===e||"change"===e)return Zi(t)}var rs="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function as(e,t){if(rs(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var n=i[s];if(!d.call(t,n)||!rs(e[n],t[n]))return!1}return!0}function ls(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cs(e,t){var i,s=ls(e);for(e=0;s;){if(3===s.nodeType){if(i=e+s.textContent.length,e<=t&&i>=t)return{node:s,offset:t-e};e=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ls(s)}}function hs(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hs(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ds(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(s){i=!1}if(!i)break;t=Z((e=t.contentWindow).document)}return t}function us(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ps(e){var t=ds(),i=e.focusedElem,s=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&hs(i.ownerDocument.documentElement,i)){if(null!==s&&us(i))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if((e=(t=i.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=i.textContent.length,o=Math.min(s.start,n);s=void 0===s.end?o:Math.min(s.end,n),!e.extend&&o>s&&(n=s,s=o,o=n),n=cs(i,o);var r=cs(i,s);n&&r&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==r.node||e.focusOffset!==r.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(r.node,r.offset)):(t.setEnd(r.node,r.offset),e.addRange(t)))}for(t=[],e=i;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof i.focus&&i.focus(),i=0;i<t.length;i++)(e=t[i]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gs=h&&"documentMode"in document&&11>=document.documentMode,ms=null,fs=null,ys=null,vs=!1;function Cs(e,t,i){var s=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;vs||null==ms||ms!==Z(s)||("selectionStart"in(s=ms)&&us(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},ys&&as(ys,s)||(ys=s,0<(s=_s(fs,"onSelect")).length&&(t=new ci("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=ms)))}function bs(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var ws={animationend:bs("Animation","AnimationEnd"),animationiteration:bs("Animation","AnimationIteration"),animationstart:bs("Animation","AnimationStart"),transitionend:bs("Transition","TransitionEnd")},Ss={},xs={};function Ms(e){if(Ss[e])return Ss[e];if(!ws[e])return e;var t,i=ws[e];for(t in i)if(i.hasOwnProperty(t)&&t in xs)return Ss[e]=i[t];return e}h&&(xs=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);var Ds=Ms("animationend"),Is=Ms("animationiteration"),Rs=Ms("animationstart"),Es=Ms("transitionend"),As=new Map,Ls="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ks(e,t){As.set(e,t),l(t,[e])}for(var Ts=0;Ts<Ls.length;Ts++){var Ps=Ls[Ts];ks(Ps.toLowerCase(),"on"+(Ps[0].toUpperCase()+Ps.slice(1)))}ks(Ds,"onAnimationEnd"),ks(Is,"onAnimationIteration"),ks(Rs,"onAnimationStart"),ks("dblclick","onDoubleClick"),ks("focusin","onFocus"),ks("focusout","onBlur"),ks(Es,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fs=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ns));function Os(e,t,i){var s=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,s,n,r,a,l,c){if(Ve.apply(this,arguments),Oe){if(!Oe)throw Error(o(198));var h=Ge;Oe=!1,Ge=null,Be||(Be=!0,ze=h)}}(s,t,void 0,e),e.currentTarget=null}function Gs(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var s=e[i],n=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var r=s.length-1;0<=r;r--){var a=s[r],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&n.isPropagationStopped())break e;Os(n,a,c),o=l}else for(r=0;r<s.length;r++){if(l=(a=s[r]).instance,c=a.currentTarget,a=a.listener,l!==o&&n.isPropagationStopped())break e;Os(n,a,c),o=l}}}if(Be)throw e=ze,Be=!1,ze=null,e}function Bs(e,t){var i=t[mn];void 0===i&&(i=t[mn]=new Set);var s=e+"__bubble";i.has(s)||(js(t,e,2,!1),i.add(s))}function zs(e,t,i){var s=0;t&&(s|=4),js(i,e,s,t)}var Hs="_reactListening"+Math.random().toString(36).slice(2);function Vs(e){if(!e[Hs]){e[Hs]=!0,r.forEach((function(t){"selectionchange"!==t&&(Fs.has(t)||zs(t,!1,e),zs(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hs]||(t[Hs]=!0,zs("selectionchange",!1,t))}}function js(e,t,i,s){switch(Qt(t)){case 1:var n=_t;break;case 4:n=Yt;break;default:n=Kt}i=n.bind(null,t,i,e),n=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),s?void 0!==n?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):void 0!==n?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function Ws(e,t,i,s,n){var o=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var r=s.tag;if(3===r||4===r){var a=s.stateNode.containerInfo;if(a===n||8===a.nodeType&&a.parentNode===n)break;if(4===r)for(r=s.return;null!==r;){var l=r.tag;if((3===l||4===l)&&((l=r.stateNode.containerInfo)===n||8===l.nodeType&&l.parentNode===n))return;r=r.return}for(;null!==a;){if(null===(r=vn(a)))return;if(5===(l=r.tag)||6===l){s=o=r;continue e}a=a.parentNode}}s=s.return}ke((function(){var s=o,n=we(i),r=[];e:{var a=As.get(e);if(void 0!==a){var l=ci,c=e;switch(e){case"keypress":if(0===ti(i))break e;case"keydown":case"keyup":l=Ii;break;case"focusin":c="focus",l=mi;break;case"focusout":c="blur",l=mi;break;case"beforeblur":case"afterblur":l=mi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ei;break;case Ds:case Is:case Rs:l=fi;break;case Es:l=Ai;break;case"scroll":l=di;break;case"wheel":l=ki;break;case"copy":case"cut":case"paste":l=vi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ri}var h=0!==(4&t),d=!h&&"scroll"===e,u=h?null!==a?a+"Capture":null:a;h=[];for(var p,g=s;null!==g;){var m=(p=g).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==u&&(null!=(m=Te(g,u))&&h.push(Us(g,m,p)))),d)break;g=g.return}0<h.length&&(a=new l(a,c,null,i,n),r.push({event:a,listeners:h}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||i===be||!(c=i.relatedTarget||i.fromElement)||!vn(c)&&!c[gn])&&(l||a)&&(a=n.window===n?n:(a=n.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=s,null!==(c=(c=i.relatedTarget||i.toElement)?vn(c):null)&&(c!==(d=je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(h=pi,m="onMouseLeave",u="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(h=Ri,m="onPointerLeave",u="onPointerEnter",g="pointer"),d=null==l?a:bn(l),p=null==c?a:bn(c),(a=new h(m,g+"leave",l,i,n)).target=d,a.relatedTarget=p,m=null,vn(n)===s&&((h=new h(u,g+"enter",c,i,n)).target=p,h.relatedTarget=d,m=h),d=m,l&&c)e:{for(u=c,g=0,p=h=l;p;p=Ys(p))g++;for(p=0,m=u;m;m=Ys(m))p++;for(;0<g-p;)h=Ys(h),g--;for(;0<p-g;)u=Ys(u),p--;for(;g--;){if(h===u||null!==u&&h===u.alternate)break e;h=Ys(h),u=Ys(u)}h=null}else h=null;null!==l&&Ks(r,a,l,h,!1),null!==c&&null!==d&&Ks(r,d,c,h,!0)}if("select"===(l=(a=s?bn(s):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var f=$i;else if(Wi(a))if(Qi)f=os;else{f=ss;var y=is}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(f=ns);switch(f&&(f=f(e,s))?Ui(r,f,i,n):(y&&y(e,a,s),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=s?bn(s):window,e){case"focusin":(Wi(y)||"true"===y.contentEditable)&&(ms=y,fs=s,ys=null);break;case"focusout":ys=fs=ms=null;break;case"mousedown":vs=!0;break;case"contextmenu":case"mouseup":case"dragend":vs=!1,Cs(r,i,n);break;case"selectionchange":if(gs)break;case"keydown":case"keyup":Cs(r,i,n)}var v;if(Pi)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Vi?zi(e,i)&&(C="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(C="onCompositionStart");C&&(Oi&&"ko"!==i.locale&&(Vi||"onCompositionStart"!==C?"onCompositionEnd"===C&&Vi&&(v=ei()):(qt="value"in(Xt=n)?Xt.value:Xt.textContent,Vi=!0)),0<(y=_s(s,C)).length&&(C=new Ci(C,e,null,i,n),r.push({event:C,listeners:y}),v?C.data=v:null!==(v=Hi(i))&&(C.data=v))),(v=Fi?function(e,t){switch(e){case"compositionend":return Hi(t);case"keypress":return 32!==t.which?null:(Bi=!0,Gi);case"textInput":return(e=t.data)===Gi&&Bi?null:e;default:return null}}(e,i):function(e,t){if(Vi)return"compositionend"===e||!Pi&&zi(e,t)?(e=ei(),Jt=qt=Xt=null,Vi=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Oi&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(s=_s(s,"onBeforeInput")).length&&(n=new Ci("onBeforeInput","beforeinput",null,i,n),r.push({event:n,listeners:s}),n.data=v))}Gs(r,t)}))}function Us(e,t,i){return{instance:e,listener:t,currentTarget:i}}function _s(e,t){for(var i=t+"Capture",s=[];null!==e;){var n=e,o=n.stateNode;5===n.tag&&null!==o&&(n=o,null!=(o=Te(e,i))&&s.unshift(Us(e,o,n)),null!=(o=Te(e,t))&&s.push(Us(e,o,n))),e=e.return}return s}function Ys(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ks(e,t,i,s,n){for(var o=t._reactName,r=[];null!==i&&i!==s;){var a=i,l=a.alternate,c=a.stateNode;if(null!==l&&l===s)break;5===a.tag&&null!==c&&(a=c,n?null!=(l=Te(i,o))&&r.unshift(Us(i,l,a)):n||null!=(l=Te(i,o))&&r.push(Us(i,l,a))),i=i.return}0!==r.length&&e.push({event:t,listeners:r})}var Zs=/\r\n?/g,$s=/\u0000|\uFFFD/g;function Qs(e){return("string"===typeof e?e:""+e).replace(Zs,"\n").replace($s,"")}function Xs(e,t,i){if(t=Qs(t),Qs(e)!==t&&i)throw Error(o(425))}function qs(){}var Js=null,en=null;function tn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sn="function"===typeof setTimeout?setTimeout:void 0,nn="function"===typeof clearTimeout?clearTimeout:void 0,on="function"===typeof Promise?Promise:void 0,rn="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof on?function(e){return on.resolve(null).then(e).catch(an)}:sn;function an(e){setTimeout((function(){throw e}))}function ln(e,t){var i=t,s=0;do{var n=i.nextSibling;if(e.removeChild(i),n&&8===n.nodeType)if("/$"===(i=n.data)){if(0===s)return e.removeChild(n),void jt(t);s--}else"$"!==i&&"$?"!==i&&"$!"!==i||s++;i=n}while(i);jt(t)}function cn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var dn=Math.random().toString(36).slice(2),un="__reactFiber$"+dn,pn="__reactProps$"+dn,gn="__reactContainer$"+dn,mn="__reactEvents$"+dn,fn="__reactListeners$"+dn,yn="__reactHandles$"+dn;function vn(e){var t=e[un];if(t)return t;for(var i=e.parentNode;i;){if(t=i[gn]||i[un]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=hn(e);null!==e;){if(i=e[un])return i;e=hn(e)}return t}i=(e=i).parentNode}return null}function Cn(e){return!(e=e[un]||e[gn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wn(e){return e[pn]||null}var Sn=[],xn=-1;function Mn(e){return{current:e}}function Dn(e){0>xn||(e.current=Sn[xn],Sn[xn]=null,xn--)}function In(e,t){xn++,Sn[xn]=e.current,e.current=t}var Rn={},En=Mn(Rn),An=Mn(!1),Ln=Rn;function kn(e,t){var i=e.type.contextTypes;if(!i)return Rn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n,o={};for(n in i)o[n]=t[n];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Tn(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pn(){Dn(An),Dn(En)}function Nn(e,t,i){if(En.current!==Rn)throw Error(o(168));In(En,t),In(An,i)}function Fn(e,t,i){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return i;for(var n in s=s.getChildContext())if(!(n in t))throw Error(o(108,W(e)||"Unknown",n));return G({},i,s)}function On(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rn,Ln=En.current,In(En,e),In(An,An.current),!0}function Gn(e,t,i){var s=e.stateNode;if(!s)throw Error(o(169));i?(e=Fn(e,t,Ln),s.__reactInternalMemoizedMergedChildContext=e,Dn(An),Dn(En),In(En,e)):Dn(An),In(An,i)}var Bn=null,zn=!1,Hn=!1;function Vn(e){null===Bn?Bn=[e]:Bn.push(e)}function jn(){if(!Hn&&null!==Bn){Hn=!0;var e=0,t=Ct;try{var i=Bn;for(Ct=1;e<i.length;e++){var s=i[e];do{s=s(!0)}while(null!==s)}Bn=null,zn=!1}catch(n){throw null!==Bn&&(Bn=Bn.slice(e+1)),Ke(Je,jn),n}finally{Ct=t,Hn=!1}}return null}var Wn=[],Un=0,_n=null,Yn=0,Kn=[],Zn=0,$n=null,Qn=1,Xn="";function qn(e,t){Wn[Un++]=Yn,Wn[Un++]=_n,_n=e,Yn=t}function Jn(e,t,i){Kn[Zn++]=Qn,Kn[Zn++]=Xn,Kn[Zn++]=$n,$n=e;var s=Qn;e=Xn;var n=32-rt(s)-1;s&=~(1<<n),i+=1;var o=32-rt(t)+n;if(30<o){var r=n-n%5;o=(s&(1<<r)-1).toString(32),s>>=r,n-=r,Qn=1<<32-rt(t)+n|i<<n|s,Xn=o+e}else Qn=1<<o|i<<n|s,Xn=e}function eo(e){null!==e.return&&(qn(e,1),Jn(e,1,0))}function to(e){for(;e===_n;)_n=Wn[--Un],Wn[Un]=null,Yn=Wn[--Un],Wn[Un]=null;for(;e===$n;)$n=Kn[--Zn],Kn[Zn]=null,Xn=Kn[--Zn],Kn[Zn]=null,Qn=Kn[--Zn],Kn[Zn]=null}var io=null,so=null,no=!1,oo=null;function ro(e,t){var i=kc(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,null===(t=e.deletions)?(e.deletions=[i],e.flags|=16):t.push(i)}function ao(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,io=e,so=cn(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,io=e,so=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(i=null!==$n?{id:Qn,overflow:Xn}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},(i=kc(18,null,null,0)).stateNode=t,i.return=e,e.child=i,io=e,so=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(no){var t=so;if(t){var i=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=cn(i.nextSibling);var s=io;t&&ao(e,t)?ro(s,i):(e.flags=-4097&e.flags|2,no=!1,io=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,no=!1,io=e}}}function ho(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;io=e}function uo(e){if(e!==io)return!1;if(!no)return ho(e),no=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!tn(e.type,e.memoizedProps)),t&&(t=so)){if(lo(e))throw po(),Error(o(418));for(;t;)ro(e,t),t=cn(t.nextSibling)}if(ho(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){so=cn(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}so=null}}else so=io?cn(e.stateNode.nextSibling):null;return!0}function po(){for(var e=so;e;)e=cn(e.nextSibling)}function go(){so=io=null,no=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var fo=b.ReactCurrentBatchConfig;function yo(e,t,i){if(null!==(e=i.ref)&&"function"!==typeof e&&"object"!==typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(o(309));var s=i.stateNode}if(!s)throw Error(o(147,e));var n=s,r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:(t=function(e){var t=n.refs;null===e?delete t[r]:t[r]=e},t._stringRef=r,t)}if("string"!==typeof e)throw Error(o(284));if(!i._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Co(e){return(0,e._init)(e._payload)}function bo(e){function t(t,i){if(e){var s=t.deletions;null===s?(t.deletions=[i],t.flags|=16):s.push(i)}}function i(i,s){if(!e)return null;for(;null!==s;)t(i,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function r(t,i,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<i?(t.flags|=2,i):s:(t.flags|=2,i):(t.flags|=1048576,i)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,i,s){return null===t||6!==t.tag?((t=Gc(i,e.mode,s)).return=e,t):((t=n(t,i)).return=e,t)}function c(e,t,i,s){var o=i.type;return o===x?d(e,t,i.props.children,s,i.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===T&&Co(o)===t.type)?((s=n(t,i.props)).ref=yo(e,t,i),s.return=e,s):((s=Nc(i.type,i.key,i.props,null,e.mode,s)).ref=yo(e,t,i),s.return=e,s)}function h(e,t,i,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Bc(i,e.mode,s)).return=e,t):((t=n(t,i.children||[])).return=e,t)}function d(e,t,i,s,o){return null===t||7!==t.tag?((t=Fc(i,e.mode,s,o)).return=e,t):((t=n(t,i)).return=e,t)}function u(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Gc(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(i=Nc(t.type,t.key,t.props,null,e.mode,i)).ref=yo(e,null,t),i.return=e,i;case S:return(t=Bc(t,e.mode,i)).return=e,t;case T:return u(e,(0,t._init)(t._payload),i)}if(te(t)||F(t))return(t=Fc(t,e.mode,i,null)).return=e,t;vo(e,t)}return null}function p(e,t,i,s){var n=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i)return null!==n?null:l(e,t,""+i,s);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return i.key===n?c(e,t,i,s):null;case S:return i.key===n?h(e,t,i,s):null;case T:return p(e,t,(n=i._init)(i._payload),s)}if(te(i)||F(i))return null!==n?null:d(e,t,i,s,null);vo(e,i)}return null}function g(e,t,i,s,n){if("string"===typeof s&&""!==s||"number"===typeof s)return l(t,e=e.get(i)||null,""+s,n);if("object"===typeof s&&null!==s){switch(s.$$typeof){case w:return c(t,e=e.get(null===s.key?i:s.key)||null,s,n);case S:return h(t,e=e.get(null===s.key?i:s.key)||null,s,n);case T:return g(e,t,i,(0,s._init)(s._payload),n)}if(te(s)||F(s))return d(t,e=e.get(i)||null,s,n,null);vo(t,s)}return null}function m(n,o,a,l){for(var c=null,h=null,d=o,m=o=0,f=null;null!==d&&m<a.length;m++){d.index>m?(f=d,d=null):f=d.sibling;var y=p(n,d,a[m],l);if(null===y){null===d&&(d=f);break}e&&d&&null===y.alternate&&t(n,d),o=r(y,o,m),null===h?c=y:h.sibling=y,h=y,d=f}if(m===a.length)return i(n,d),no&&qn(n,m),c;if(null===d){for(;m<a.length;m++)null!==(d=u(n,a[m],l))&&(o=r(d,o,m),null===h?c=d:h.sibling=d,h=d);return no&&qn(n,m),c}for(d=s(n,d);m<a.length;m++)null!==(f=g(d,n,m,a[m],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?m:f.key),o=r(f,o,m),null===h?c=f:h.sibling=f,h=f);return e&&d.forEach((function(e){return t(n,e)})),no&&qn(n,m),c}function f(n,a,l,c){var h=F(l);if("function"!==typeof h)throw Error(o(150));if(null==(l=h.call(l)))throw Error(o(151));for(var d=h=null,m=a,f=a=0,y=null,v=l.next();null!==m&&!v.done;f++,v=l.next()){m.index>f?(y=m,m=null):y=m.sibling;var C=p(n,m,v.value,c);if(null===C){null===m&&(m=y);break}e&&m&&null===C.alternate&&t(n,m),a=r(C,a,f),null===d?h=C:d.sibling=C,d=C,m=y}if(v.done)return i(n,m),no&&qn(n,f),h;if(null===m){for(;!v.done;f++,v=l.next())null!==(v=u(n,v.value,c))&&(a=r(v,a,f),null===d?h=v:d.sibling=v,d=v);return no&&qn(n,f),h}for(m=s(n,m);!v.done;f++,v=l.next())null!==(v=g(m,n,f,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?f:v.key),a=r(v,a,f),null===d?h=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(n,e)})),no&&qn(n,f),h}return function e(s,o,r,l){if("object"===typeof r&&null!==r&&r.type===x&&null===r.key&&(r=r.props.children),"object"===typeof r&&null!==r){switch(r.$$typeof){case w:e:{for(var c=r.key,h=o;null!==h;){if(h.key===c){if((c=r.type)===x){if(7===h.tag){i(s,h.sibling),(o=n(h,r.props.children)).return=s,s=o;break e}}else if(h.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===T&&Co(c)===h.type){i(s,h.sibling),(o=n(h,r.props)).ref=yo(s,h,r),o.return=s,s=o;break e}i(s,h);break}t(s,h),h=h.sibling}r.type===x?((o=Fc(r.props.children,s.mode,l,r.key)).return=s,s=o):((l=Nc(r.type,r.key,r.props,null,s.mode,l)).ref=yo(s,o,r),l.return=s,s=l)}return a(s);case S:e:{for(h=r.key;null!==o;){if(o.key===h){if(4===o.tag&&o.stateNode.containerInfo===r.containerInfo&&o.stateNode.implementation===r.implementation){i(s,o.sibling),(o=n(o,r.children||[])).return=s,s=o;break e}i(s,o);break}t(s,o),o=o.sibling}(o=Bc(r,s.mode,l)).return=s,s=o}return a(s);case T:return e(s,o,(h=r._init)(r._payload),l)}if(te(r))return m(s,o,r,l);if(F(r))return f(s,o,r,l);vo(s,r)}return"string"===typeof r&&""!==r||"number"===typeof r?(r=""+r,null!==o&&6===o.tag?(i(s,o.sibling),(o=n(o,r)).return=s,s=o):(i(s,o),(o=Gc(r,s.mode,l)).return=s,s=o),a(s)):i(s,o)}}var wo=bo(!0),So=bo(!1),xo=Mn(null),Mo=null,Do=null,Io=null;function Ro(){Io=Do=Mo=null}function Eo(e){var t=xo.current;Dn(xo),e._currentValue=t}function Ao(e,t,i){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function Lo(e,t){Mo=e,Io=Do=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ca=!0),e.firstContext=null)}function ko(e){var t=e._currentValue;if(Io!==e)if(e={context:e,memoizedValue:t,next:null},null===Do){if(null===Mo)throw Error(o(308));Do=e,Mo.dependencies={lanes:0,firstContext:e}}else Do=Do.next=e;return t}var To=null;function Po(e){null===To?To=[e]:To.push(e)}function No(e,t,i,s){var n=t.interleaved;return null===n?(i.next=i,Po(t)):(i.next=n.next,n.next=i),t.interleaved=i,Fo(e,s)}function Fo(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}var Oo=!1;function Go(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ho(e,t,i){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&El)){var n=s.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),s.pending=t,Fo(e,i)}return null===(n=s.interleaved)?(t.next=t,Po(s)):(t.next=n.next,n.next=t),s.interleaved=t,Fo(e,i)}function Vo(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&i))){var s=t.lanes;i|=s&=e.pendingLanes,t.lanes=i,vt(e,i)}}function jo(e,t){var i=e.updateQueue,s=e.alternate;if(null!==s&&i===(s=s.updateQueue)){var n=null,o=null;if(null!==(i=i.firstBaseUpdate)){do{var r={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===o?n=o=r:o=o.next=r,i=i.next}while(null!==i);null===o?n=o=t:o=o.next=t}else n=o=t;return i={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:s.shared,effects:s.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function Wo(e,t,i,s){var n=e.updateQueue;Oo=!1;var o=n.firstBaseUpdate,r=n.lastBaseUpdate,a=n.shared.pending;if(null!==a){n.shared.pending=null;var l=a,c=l.next;l.next=null,null===r?o=c:r.next=c,r=l;var h=e.alternate;null!==h&&((a=(h=h.updateQueue).lastBaseUpdate)!==r&&(null===a?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(null!==o){var d=n.baseState;for(r=0,h=c=l=null,a=o;;){var u=a.lane,p=a.eventTime;if((s&u)===u){null!==h&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,m=a;switch(u=t,p=i,m.tag){case 1:if("function"===typeof(g=m.payload)){d=g.call(p,d,u);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(u="function"===typeof(g=m.payload)?g.call(p,d,u):g)||void 0===u)break e;d=G({},d,u);break e;case 2:Oo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(u=n.effects)?n.effects=[a]:u.push(a))}else p={eventTime:p,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=p,l=d):h=h.next=p,r|=u;if(null===(a=a.next)){if(null===(a=n.shared.pending))break;a=(u=a).next,u.next=null,n.lastBaseUpdate=u,n.shared.pending=null}}if(null===h&&(l=d),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=h,null!==(t=n.shared.interleaved)){n=t;do{r|=n.lane,n=n.next}while(n!==t)}else null===o&&(n.shared.lanes=0);Ol|=r,e.lanes=r,e.memoizedState=d}}function Uo(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(null!==n){if(s.callback=null,s=i,"function"!==typeof n)throw Error(o(191,n));n.call(s)}}}var _o={},Yo=Mn(_o),Ko=Mn(_o),Zo=Mn(_o);function $o(e){if(e===_o)throw Error(o(174));return e}function Qo(e,t){switch(In(Zo,t),In(Ko,e),In(Yo,_o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Dn(Yo),In(Yo,t)}function Xo(){Dn(Yo),Dn(Ko),Dn(Zo)}function qo(e){$o(Zo.current);var t=$o(Yo.current),i=le(t,e.type);t!==i&&(In(Ko,e),In(Yo,i))}function Jo(e){Ko.current===e&&(Dn(Yo),Dn(Ko))}var er=Mn(0);function tr(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ir=[];function sr(){for(var e=0;e<ir.length;e++)ir[e]._workInProgressVersionPrimary=null;ir.length=0}var nr=b.ReactCurrentDispatcher,or=b.ReactCurrentBatchConfig,rr=0,ar=null,lr=null,cr=null,hr=!1,dr=!1,ur=0,pr=0;function gr(){throw Error(o(321))}function mr(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!rs(e[i],t[i]))return!1;return!0}function fr(e,t,i,s,n,r){if(rr=r,ar=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nr.current=null===e||null===e.memoizedState?Jr:ea,e=i(s,n),dr){r=0;do{if(dr=!1,ur=0,25<=r)throw Error(o(301));r+=1,cr=lr=null,t.updateQueue=null,nr.current=ta,e=i(s,n)}while(dr)}if(nr.current=qr,t=null!==lr&&null!==lr.next,rr=0,cr=lr=ar=null,hr=!1,t)throw Error(o(300));return e}function yr(){var e=0!==ur;return ur=0,e}function vr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cr?ar.memoizedState=cr=e:cr=cr.next=e,cr}function Cr(){if(null===lr){var e=ar.alternate;e=null!==e?e.memoizedState:null}else e=lr.next;var t=null===cr?ar.memoizedState:cr.next;if(null!==t)cr=t,lr=e;else{if(null===e)throw Error(o(310));e={memoizedState:(lr=e).memoizedState,baseState:lr.baseState,baseQueue:lr.baseQueue,queue:lr.queue,next:null},null===cr?ar.memoizedState=cr=e:cr=cr.next=e}return cr}function br(e,t){return"function"===typeof t?t(e):t}function wr(e){var t=Cr(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var s=lr,n=s.baseQueue,r=i.pending;if(null!==r){if(null!==n){var a=n.next;n.next=r.next,r.next=a}s.baseQueue=n=r,i.pending=null}if(null!==n){r=n.next,s=s.baseState;var l=a=null,c=null,h=r;do{var d=h.lane;if((rr&d)===d)null!==c&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),s=h.hasEagerState?h.eagerState:e(s,h.action);else{var u={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===c?(l=c=u,a=s):c=c.next=u,ar.lanes|=d,Ol|=d}h=h.next}while(null!==h&&h!==r);null===c?a=s:c.next=l,rs(s,t.memoizedState)||(Ca=!0),t.memoizedState=s,t.baseState=a,t.baseQueue=c,i.lastRenderedState=s}if(null!==(e=i.interleaved)){n=e;do{r=n.lane,ar.lanes|=r,Ol|=r,n=n.next}while(n!==e)}else null===n&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Sr(e){var t=Cr(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var s=i.dispatch,n=i.pending,r=t.memoizedState;if(null!==n){i.pending=null;var a=n=n.next;do{r=e(r,a.action),a=a.next}while(a!==n);rs(r,t.memoizedState)||(Ca=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),i.lastRenderedState=r}return[r,s]}function xr(){}function Mr(e,t){var i=ar,s=Cr(),n=t(),r=!rs(s.memoizedState,n);if(r&&(s.memoizedState=n,Ca=!0),s=s.queue,Or(Rr.bind(null,i,s,e),[e]),s.getSnapshot!==t||r||null!==cr&&1&cr.memoizedState.tag){if(i.flags|=2048,kr(9,Ir.bind(null,i,s,n,t),void 0,null),null===Al)throw Error(o(349));0!==(30&rr)||Dr(i,t,n)}return n}function Dr(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=ar.updateQueue)?(t={lastEffect:null,stores:null},ar.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function Ir(e,t,i,s){t.value=i,t.getSnapshot=s,Er(t)&&Ar(e)}function Rr(e,t,i){return i((function(){Er(t)&&Ar(e)}))}function Er(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!rs(e,i)}catch(s){return!0}}function Ar(e){var t=Fo(e,1);null!==t&&ic(t,e,1,-1)}function Lr(e){var t=vr();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:e},t.queue=e,e=e.dispatch=Zr.bind(null,ar,e),[t.memoizedState,e]}function kr(e,t,i,s){return e={tag:e,create:t,destroy:i,deps:s,next:null},null===(t=ar.updateQueue)?(t={lastEffect:null,stores:null},ar.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e),e}function Tr(){return Cr().memoizedState}function Pr(e,t,i,s){var n=vr();ar.flags|=e,n.memoizedState=kr(1|t,i,void 0,void 0===s?null:s)}function Nr(e,t,i,s){var n=Cr();s=void 0===s?null:s;var o=void 0;if(null!==lr){var r=lr.memoizedState;if(o=r.destroy,null!==s&&mr(s,r.deps))return void(n.memoizedState=kr(t,i,o,s))}ar.flags|=e,n.memoizedState=kr(1|t,i,o,s)}function Fr(e,t){return Pr(8390656,8,e,t)}function Or(e,t){return Nr(2048,8,e,t)}function Gr(e,t){return Nr(4,2,e,t)}function Br(e,t){return Nr(4,4,e,t)}function zr(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Hr(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,Nr(4,4,zr.bind(null,t,e),i)}function Vr(){}function jr(e,t){var i=Cr();t=void 0===t?null:t;var s=i.memoizedState;return null!==s&&null!==t&&mr(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function Wr(e,t){var i=Cr();t=void 0===t?null:t;var s=i.memoizedState;return null!==s&&null!==t&&mr(t,s[1])?s[0]:(e=e(),i.memoizedState=[e,t],e)}function Ur(e,t,i){return 0===(21&rr)?(e.baseState&&(e.baseState=!1,Ca=!0),e.memoizedState=i):(rs(i,t)||(i=mt(),ar.lanes|=i,Ol|=i,e.baseState=!0),t)}function _r(e,t){var i=Ct;Ct=0!==i&&4>i?i:4,e(!0);var s=or.transition;or.transition={};try{e(!1),t()}finally{Ct=i,or.transition=s}}function Yr(){return Cr().memoizedState}function Kr(e,t,i){var s=tc(e);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},$r(e))Qr(t,i);else if(null!==(i=No(e,t,i,s))){ic(i,e,s,ec()),Xr(i,t,s)}}function Zr(e,t,i){var s=tc(e),n={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if($r(e))Qr(t,n);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var r=t.lastRenderedState,a=o(r,i);if(n.hasEagerState=!0,n.eagerState=a,rs(a,r)){var l=t.interleaved;return null===l?(n.next=n,Po(t)):(n.next=l.next,l.next=n),void(t.interleaved=n)}}catch(c){}null!==(i=No(e,t,n,s))&&(ic(i,e,s,n=ec()),Xr(i,t,s))}}function $r(e){var t=e.alternate;return e===ar||null!==t&&t===ar}function Qr(e,t){dr=hr=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Xr(e,t,i){if(0!==(4194240&i)){var s=t.lanes;i|=s&=e.pendingLanes,t.lanes=i,vt(e,i)}}var qr={readContext:ko,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useInsertionEffect:gr,useLayoutEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useMutableSource:gr,useSyncExternalStore:gr,useId:gr,unstable_isNewReconciler:!1},Jr={readContext:ko,useCallback:function(e,t){return vr().memoizedState=[e,void 0===t?null:t],e},useContext:ko,useEffect:Fr,useImperativeHandle:function(e,t,i){return i=null!==i&&void 0!==i?i.concat([e]):null,Pr(4194308,4,zr.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Pr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pr(4,2,e,t)},useMemo:function(e,t){var i=vr();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var s=vr();return t=void 0!==i?i(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Kr.bind(null,ar,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},vr().memoizedState=e},useState:Lr,useDebugValue:Vr,useDeferredValue:function(e){return vr().memoizedState=e},useTransition:function(){var e=Lr(!1),t=e[0];return e=_r.bind(null,e[1]),vr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var s=ar,n=vr();if(no){if(void 0===i)throw Error(o(407));i=i()}else{if(i=t(),null===Al)throw Error(o(349));0!==(30&rr)||Dr(s,t,i)}n.memoizedState=i;var r={value:i,getSnapshot:t};return n.queue=r,Fr(Rr.bind(null,s,r,e),[e]),s.flags|=2048,kr(9,Ir.bind(null,s,r,i,t),void 0,null),i},useId:function(){var e=vr(),t=Al.identifierPrefix;if(no){var i=Xn;t=":"+t+"R"+(i=(Qn&~(1<<32-rt(Qn)-1)).toString(32)+i),0<(i=ur++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=pr++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:ko,useCallback:jr,useContext:ko,useEffect:Or,useImperativeHandle:Hr,useInsertionEffect:Gr,useLayoutEffect:Br,useMemo:Wr,useReducer:wr,useRef:Tr,useState:function(){return wr(br)},useDebugValue:Vr,useDeferredValue:function(e){return Ur(Cr(),lr.memoizedState,e)},useTransition:function(){return[wr(br)[0],Cr().memoizedState]},useMutableSource:xr,useSyncExternalStore:Mr,useId:Yr,unstable_isNewReconciler:!1},ta={readContext:ko,useCallback:jr,useContext:ko,useEffect:Or,useImperativeHandle:Hr,useInsertionEffect:Gr,useLayoutEffect:Br,useMemo:Wr,useReducer:Sr,useRef:Tr,useState:function(){return Sr(br)},useDebugValue:Vr,useDeferredValue:function(e){var t=Cr();return null===lr?t.memoizedState=e:Ur(t,lr.memoizedState,e)},useTransition:function(){return[Sr(br)[0],Cr().memoizedState]},useMutableSource:xr,useSyncExternalStore:Mr,useId:Yr,unstable_isNewReconciler:!1};function ia(e,t){if(e&&e.defaultProps){for(var i in t=G({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}function sa(e,t,i,s){i=null===(i=i(s,t=e.memoizedState))||void 0===i?t:G({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var na={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var s=ec(),n=tc(e),o=zo(s,n);o.payload=t,void 0!==i&&null!==i&&(o.callback=i),null!==(t=Ho(e,o,n))&&(ic(t,e,n,s),Vo(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=ec(),n=tc(e),o=zo(s,n);o.tag=1,o.payload=t,void 0!==i&&null!==i&&(o.callback=i),null!==(t=Ho(e,o,n))&&(ic(t,e,n,s),Vo(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ec(),s=tc(e),n=zo(i,s);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=Ho(e,n,s))&&(ic(t,e,s,i),Vo(t,e,s))}};function oa(e,t,i,s,n,o,r){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,o,r):!t.prototype||!t.prototype.isPureReactComponent||(!as(i,s)||!as(n,o))}function ra(e,t,i){var s=!1,n=Rn,o=t.contextType;return"object"===typeof o&&null!==o?o=ko(o):(n=Tn(t)?Ln:En.current,o=(s=null!==(s=t.contextTypes)&&void 0!==s)?kn(e,n):Rn),t=new t(i,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=na,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,i,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&na.enqueueReplaceState(t,t.state,null)}function la(e,t,i,s){var n=e.stateNode;n.props=i,n.state=e.memoizedState,n.refs={},Go(e);var o=t.contextType;"object"===typeof o&&null!==o?n.context=ko(o):(o=Tn(t)?Ln:En.current,n.context=kn(e,o)),n.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(sa(e,t,o,i),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&na.enqueueReplaceState(n,n.state,null),Wo(e,i,n,s),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var i="",s=t;do{i+=V(s),s=s.return}while(s);var n=i}catch(o){n="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:n,digest:null}}function ha(e,t,i){return{value:e,source:null,stack:null!=i?i:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(i){setTimeout((function(){throw i}))}}var ua="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,i){(i=zo(-1,i)).tag=3,i.payload={element:null};var s=t.value;return i.callback=function(){Ul||(Ul=!0,_l=s),da(0,t)},i}function ga(e,t,i){(i=zo(-1,i)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var n=t.value;i.payload=function(){return s(n)},i.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(i.callback=function(){da(0,t),"function"!==typeof s&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}function ma(e,t,i){var s=e.pingCache;if(null===s){s=e.pingCache=new ua;var n=new Set;s.set(t,n)}else void 0===(n=s.get(t))&&(n=new Set,s.set(t,n));n.has(i)||(n.add(i),e=Dc.bind(null,e,t,i),t.then(e,e))}function fa(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,i,s,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((t=zo(-1,1)).tag=2,Ho(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var va=b.ReactCurrentOwner,Ca=!1;function ba(e,t,i,s){t.child=null===e?So(t,null,i,s):wo(t,e.child,i,s)}function wa(e,t,i,s,n){i=i.render;var o=t.ref;return Lo(t,n),s=fr(e,t,i,s,o,n),i=yr(),null===e||Ca?(no&&i&&eo(t),t.flags|=1,ba(e,t,s,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ua(e,t,n))}function Sa(e,t,i,s,n){if(null===e){var o=i.type;return"function"!==typeof o||Tc(o)||void 0!==o.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Nc(i.type,null,s,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,xa(e,t,o,s,n))}if(o=e.child,0===(e.lanes&n)){var r=o.memoizedProps;if((i=null!==(i=i.compare)?i:as)(r,s)&&e.ref===t.ref)return Ua(e,t,n)}return t.flags|=1,(e=Pc(o,s)).ref=t.ref,e.return=t,t.child=e}function xa(e,t,i,s,n){if(null!==e){var o=e.memoizedProps;if(as(o,s)&&e.ref===t.ref){if(Ca=!1,t.pendingProps=s=o,0===(e.lanes&n))return t.lanes=e.lanes,Ua(e,t,n);0!==(131072&e.flags)&&(Ca=!0)}}return Ia(e,t,i,s,n)}function Ma(e,t,i){var s=t.pendingProps,n=s.children,o=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},In(Pl,Tl),Tl|=i;else{if(0===(1073741824&i))return e=null!==o?o.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,In(Pl,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==o?o.baseLanes:i,In(Pl,Tl),Tl|=s}else null!==o?(s=o.baseLanes|i,t.memoizedState=null):s=i,In(Pl,Tl),Tl|=s;return ba(e,t,n,i),t.child}function Da(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function Ia(e,t,i,s,n){var o=Tn(i)?Ln:En.current;return o=kn(t,o),Lo(t,n),i=fr(e,t,i,s,o,n),s=yr(),null===e||Ca?(no&&s&&eo(t),t.flags|=1,ba(e,t,i,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ua(e,t,n))}function Ra(e,t,i,s,n){if(Tn(i)){var o=!0;On(t)}else o=!1;if(Lo(t,n),null===t.stateNode)Wa(e,t),ra(t,i,s),la(t,i,s,n),s=!0;else if(null===e){var r=t.stateNode,a=t.memoizedProps;r.props=a;var l=r.context,c=i.contextType;"object"===typeof c&&null!==c?c=ko(c):c=kn(t,c=Tn(i)?Ln:En.current);var h=i.getDerivedStateFromProps,d="function"===typeof h||"function"===typeof r.getSnapshotBeforeUpdate;d||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(a!==s||l!==c)&&aa(t,r,s,c),Oo=!1;var u=t.memoizedState;r.state=u,Wo(t,s,r,n),l=t.memoizedState,a!==s||u!==l||An.current||Oo?("function"===typeof h&&(sa(t,i,h,s),l=t.memoizedState),(a=Oo||oa(t,i,a,s,u,l,c))?(d||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),r.props=s,r.state=l,r.context=c,s=a):("function"===typeof r.componentDidMount&&(t.flags|=4194308),s=!1)}else{r=t.stateNode,Bo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ia(t.type,a),r.props=c,d=t.pendingProps,u=r.context,"object"===typeof(l=i.contextType)&&null!==l?l=ko(l):l=kn(t,l=Tn(i)?Ln:En.current);var p=i.getDerivedStateFromProps;(h="function"===typeof p||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(a!==d||u!==l)&&aa(t,r,s,l),Oo=!1,u=t.memoizedState,r.state=u,Wo(t,s,r,n);var g=t.memoizedState;a!==d||u!==g||An.current||Oo?("function"===typeof p&&(sa(t,i,p,s),g=t.memoizedState),(c=Oo||oa(t,i,c,s,u,g,l)||!1)?(h||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(s,g,l),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(s,g,l)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=g),r.props=s,r.state=g,r.context=l,s=c):("function"!==typeof r.componentDidUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),s=!1)}return Ea(e,t,i,s,o,n)}function Ea(e,t,i,s,n,o){Da(e,t);var r=0!==(128&t.flags);if(!s&&!r)return n&&Gn(t,i,!1),Ua(e,t,o);s=t.stateNode,va.current=t;var a=r&&"function"!==typeof i.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&r?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,a,o)):ba(e,t,a,o),t.memoizedState=s.state,n&&Gn(t,i,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Nn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Nn(0,t.context,!1),Qo(e,t.containerInfo)}function La(e,t,i,s,n){return go(),mo(n),t.flags|=256,ba(e,t,i,s),t.child}var ka,Ta,Pa,Na,Fa={dehydrated:null,treeContext:null,retryLane:0};function Oa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ga(e,t,i){var s,n=t.pendingProps,r=er.current,a=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&r)),s?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(r|=1),In(er,1&r),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=n.children,e=n.fallback,a?(n=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&n)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Oc(l,n,0,null),e=Fc(e,n,i,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Oa(i),t.memoizedState=Fa,e):Ba(t,l));if(null!==(r=e.memoizedState)&&null!==(s=r.dehydrated))return function(e,t,i,s,n,r,a){if(i)return 256&t.flags?(t.flags&=-257,za(e,t,a,s=ha(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(r=s.fallback,n=t.mode,s=Oc({mode:"visible",children:s.children},n,0,null),(r=Fc(r,n,a,null)).flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,0!==(1&t.mode)&&wo(t,e.child,null,a),t.child.memoizedState=Oa(a),t.memoizedState=Fa,r);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===n.data){if(s=n.nextSibling&&n.nextSibling.dataset)var l=s.dgst;return s=l,za(e,t,a,s=ha(r=Error(o(419)),s,void 0))}if(l=0!==(a&e.childLanes),Ca||l){if(null!==(s=Al)){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(s.suspendedLanes|a))?0:n)&&n!==r.retryLane&&(r.retryLane=n,Fo(e,n),ic(s,e,n,-1))}return mc(),za(e,t,a,s=ha(Error(o(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=Rc.bind(null,e),n._reactRetry=t,null):(e=r.treeContext,so=cn(n.nextSibling),io=t,no=!0,oo=null,null!==e&&(Kn[Zn++]=Qn,Kn[Zn++]=Xn,Kn[Zn++]=$n,Qn=e.id,Xn=e.overflow,$n=t),t=Ba(t,s.children),t.flags|=4096,t)}(e,t,l,n,s,r,i);if(a){a=n.fallback,l=t.mode,s=(r=e.child).sibling;var c={mode:"hidden",children:n.children};return 0===(1&l)&&t.child!==r?((n=t.child).childLanes=0,n.pendingProps=c,t.deletions=null):(n=Pc(r,c)).subtreeFlags=14680064&r.subtreeFlags,null!==s?a=Pc(s,a):(a=Fc(a,l,i,null)).flags|=2,a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,l=null===(l=e.child.memoizedState)?Oa(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~i,t.memoizedState=Fa,n}return e=(a=e.child).sibling,n=Pc(a,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n}function Ba(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,i,s){return null!==s&&mo(s),wo(t,e.child,null,i),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ha(e,t,i){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Ao(e.return,t,i)}function Va(e,t,i,s,n){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=i,o.tailMode=n)}function ja(e,t,i){var s=t.pendingProps,n=s.revealOrder,o=s.tail;if(ba(e,t,s.children,i),0!==(2&(s=er.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,i,t);else if(19===e.tag)Ha(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(In(er,s),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(i=t.child,n=null;null!==i;)null!==(e=i.alternate)&&null===tr(e)&&(n=i),i=i.sibling;null===(i=n)?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),Va(t,!1,n,i,o);break;case"backwards":for(i=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===tr(e)){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}Va(t,!0,i,null,o);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ua(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(i&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(i=Pc(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Pc(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function _a(e,t){if(!no)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;null!==i;)null!==i.alternate&&(s=i),i=i.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ya(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,s=0;if(t)for(var n=e.child;null!==n;)i|=n.lanes|n.childLanes,s|=14680064&n.subtreeFlags,s|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)i|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function Ka(e,t,i){var s=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(t),null;case 1:case 17:return Tn(t.type)&&Pn(),Ya(t),null;case 3:return s=t.stateNode,Xo(),Dn(An),Dn(En),sr(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(uo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(rc(oo),oo=null))),Ta(e,t),Ya(t),null;case 5:Jo(t);var n=$o(Zo.current);if(i=t.type,null!==e&&null!=t.stateNode)Pa(e,t,i,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(o(166));return Ya(t),null}if(e=$o(Yo.current),uo(t)){s=t.stateNode,i=t.type;var r=t.memoizedProps;switch(s[un]=t,s[pn]=r,e=0!==(1&t.mode),i){case"dialog":Bs("cancel",s),Bs("close",s);break;case"iframe":case"object":case"embed":Bs("load",s);break;case"video":case"audio":for(n=0;n<Ns.length;n++)Bs(Ns[n],s);break;case"source":Bs("error",s);break;case"img":case"image":case"link":Bs("error",s),Bs("load",s);break;case"details":Bs("toggle",s);break;case"input":Q(s,r),Bs("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},Bs("invalid",s);break;case"textarea":ne(s,r),Bs("invalid",s)}for(var l in ve(i,r),n=null,r)if(r.hasOwnProperty(l)){var c=r[l];"children"===l?"string"===typeof c?s.textContent!==c&&(!0!==r.suppressHydrationWarning&&Xs(s.textContent,c,e),n=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==r.suppressHydrationWarning&&Xs(s.textContent,c,e),n=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bs("scroll",s)}switch(i){case"input":Y(s),J(s,r,!0);break;case"textarea":Y(s),re(s);break;case"select":case"option":break;default:"function"===typeof r.onClick&&(s.onclick=qs)}s=n,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(i)),"http://www.w3.org/1999/xhtml"===e?"script"===i?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=l.createElement(i,{is:s.is}):(e=l.createElement(i),"select"===i&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,i),e[un]=t,e[pn]=s,ka(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ce(i,s),i){case"dialog":Bs("cancel",e),Bs("close",e),n=s;break;case"iframe":case"object":case"embed":Bs("load",e),n=s;break;case"video":case"audio":for(n=0;n<Ns.length;n++)Bs(Ns[n],e);n=s;break;case"source":Bs("error",e),n=s;break;case"img":case"image":case"link":Bs("error",e),Bs("load",e),n=s;break;case"details":Bs("toggle",e),n=s;break;case"input":Q(e,s),n=$(e,s),Bs("invalid",e);break;case"option":default:n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=G({},s,{value:void 0}),Bs("invalid",e);break;case"textarea":ne(e,s),n=se(e,s),Bs("invalid",e)}for(r in ve(i,n),c=n)if(c.hasOwnProperty(r)){var h=c[r];"style"===r?fe(e,h):"dangerouslySetInnerHTML"===r?null!=(h=h?h.__html:void 0)&&de(e,h):"children"===r?"string"===typeof h?("textarea"!==i||""!==h)&&ue(e,h):"number"===typeof h&&ue(e,""+h):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(a.hasOwnProperty(r)?null!=h&&"onScroll"===r&&Bs("scroll",e):null!=h&&C(e,r,h,l))}switch(i){case"input":Y(e),J(e,s,!1);break;case"textarea":Y(e),re(e);break;case"option":null!=s.value&&e.setAttribute("value",""+U(s.value));break;case"select":e.multiple=!!s.multiple,null!=(r=s.value)?ie(e,!!s.multiple,r,!1):null!=s.defaultValue&&ie(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=qs)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ya(t),null;case 6:if(e&&null!=t.stateNode)Na(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(o(166));if(i=$o(Zo.current),$o(Yo.current),uo(t)){if(s=t.stateNode,i=t.memoizedProps,s[un]=t,(r=s.nodeValue!==i)&&null!==(e=io))switch(e.tag){case 3:Xs(s.nodeValue,i,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xs(s.nodeValue,i,0!==(1&e.mode))}r&&(t.flags|=4)}else(s=(9===i.nodeType?i:i.ownerDocument).createTextNode(s))[un]=t,t.stateNode=s}return Ya(t),null;case 13:if(Dn(er),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(no&&null!==so&&0!==(1&t.mode)&&0===(128&t.flags))po(),go(),t.flags|=98560,r=!1;else if(r=uo(t),null!==s&&null!==s.dehydrated){if(null===e){if(!r)throw Error(o(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(o(317));r[un]=t}else go(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ya(t),r=!1}else null!==oo&&(rc(oo),oo=null),r=!0;if(!r)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=i,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&er.current)?0===Nl&&(Nl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ya(t),null);case 4:return Xo(),Ta(e,t),null===e&&Vs(t.stateNode.containerInfo),Ya(t),null;case 10:return Eo(t.type._context),Ya(t),null;case 19:if(Dn(er),null===(r=t.memoizedState))return Ya(t),null;if(s=0!==(128&t.flags),null===(l=r.rendering))if(s)_a(r,!1);else{if(0!==Nl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=tr(e))){for(t.flags|=128,_a(r,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=i,i=t.child;null!==i;)e=s,(r=i).flags&=14680066,null===(l=r.alternate)?(r.childLanes=0,r.lanes=e,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,e=l.dependencies,r.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return In(er,1&er.current|2),t.child}e=e.sibling}null!==r.tail&&Xe()>jl&&(t.flags|=128,s=!0,_a(r,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=tr(l))){if(t.flags|=128,s=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),_a(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!no)return Ya(t),null}else 2*Xe()-r.renderingStartTime>jl&&1073741824!==i&&(t.flags|=128,s=!0,_a(r,!1),t.lanes=4194304);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(i=r.last)?i.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Xe(),t.sibling=null,i=er.current,In(er,s?1&i|2:1&i),t):(Ya(t),null);case 22:case 23:return dc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(Ya(t),6&t.subtreeFlags&&(t.flags|=8192)):Ya(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Za(e,t){switch(to(t),t.tag){case 1:return Tn(t.type)&&Pn(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xo(),Dn(An),Dn(En),sr(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jo(t),null;case 13:if(Dn(er),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));go()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Dn(er),null;case 4:return Xo(),null;case 10:return Eo(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}ka=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Ta=function(){},Pa=function(e,t,i,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,$o(Yo.current);var o,r=null;switch(i){case"input":n=$(e,n),s=$(e,s),r=[];break;case"select":n=G({},n,{value:void 0}),s=G({},s,{value:void 0}),r=[];break;case"textarea":n=se(e,n),s=se(e,s),r=[];break;default:"function"!==typeof n.onClick&&"function"===typeof s.onClick&&(e.onclick=qs)}for(h in ve(i,s),i=null,n)if(!s.hasOwnProperty(h)&&n.hasOwnProperty(h)&&null!=n[h])if("style"===h){var l=n[h];for(o in l)l.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(a.hasOwnProperty(h)?r||(r=[]):(r=r||[]).push(h,null));for(h in s){var c=s[h];if(l=null!=n?n[h]:void 0,s.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(i||(i={}),i[o]=c[o])}else i||(r||(r=[]),r.push(h,i)),i=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(r=r||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(r=r||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(a.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Bs("scroll",e),r||l===c||(r=[])):(r=r||[]).push(h,c))}i&&(r=r||[]).push("style",i);var h=r;(t.updateQueue=h)&&(t.flags|=4)}},Na=function(e,t,i,s){i!==s&&(t.flags|=4)};var $a=!1,Qa=!1,Xa="function"===typeof WeakSet?WeakSet:Set,qa=null;function Ja(e,t){var i=e.ref;if(null!==i)if("function"===typeof i)try{i(null)}catch(s){Mc(e,t,s)}else i.current=null}function el(e,t,i){try{i()}catch(s){Mc(e,t,s)}}var tl=!1;function il(e,t,i){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var n=s=s.next;do{if((n.tag&e)===e){var o=n.destroy;n.destroy=void 0,void 0!==o&&el(t,i,o)}n=n.next}while(n!==s)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var s=i.create;i.destroy=s()}i=i.next}while(i!==t)}}function nl(e){var t=e.ref;if(null!==t){var i=e.stateNode;e.tag,e=i,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[un],delete t[pn],delete t[mn],delete t[fn],delete t[yn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,i){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=qs));else if(4!==s&&null!==(e=e.child))for(ll(e,t,i),e=e.sibling;null!==e;)ll(e,t,i),e=e.sibling}function cl(e,t,i){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==s&&null!==(e=e.child))for(cl(e,t,i),e=e.sibling;null!==e;)cl(e,t,i),e=e.sibling}var hl=null,dl=!1;function ul(e,t,i){for(i=i.child;null!==i;)pl(e,t,i),i=i.sibling}function pl(e,t,i){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(nt,i)}catch(a){}switch(i.tag){case 5:Qa||Ja(i,t);case 6:var s=hl,n=dl;hl=null,ul(e,t,i),dl=n,null!==(hl=s)&&(dl?(e=hl,i=i.stateNode,8===e.nodeType?e.parentNode.removeChild(i):e.removeChild(i)):hl.removeChild(i.stateNode));break;case 18:null!==hl&&(dl?(e=hl,i=i.stateNode,8===e.nodeType?ln(e.parentNode,i):1===e.nodeType&&ln(e,i),jt(e)):ln(hl,i.stateNode));break;case 4:s=hl,n=dl,hl=i.stateNode.containerInfo,dl=!0,ul(e,t,i),hl=s,dl=n;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(s=i.updateQueue)&&null!==(s=s.lastEffect))){n=s=s.next;do{var o=n,r=o.destroy;o=o.tag,void 0!==r&&(0!==(2&o)||0!==(4&o))&&el(i,t,r),n=n.next}while(n!==s)}ul(e,t,i);break;case 1:if(!Qa&&(Ja(i,t),"function"===typeof(s=i.stateNode).componentWillUnmount))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(a){Mc(i,t,a)}ul(e,t,i);break;case 21:ul(e,t,i);break;case 22:1&i.mode?(Qa=(s=Qa)||null!==i.memoizedState,ul(e,t,i),Qa=s):ul(e,t,i);break;default:ul(e,t,i)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new Xa),t.forEach((function(t){var s=Ec.bind(null,e,t);i.has(t)||(i.add(t),t.then(s,s))}))}}function ml(e,t){var i=t.deletions;if(null!==i)for(var s=0;s<i.length;s++){var n=i[s];try{var r=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(o(160));pl(r,a,n),hl=null,dl=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(h){Mc(n,t,h)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}function fl(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&s){try{il(3,e,e.return),sl(3,e)}catch(f){Mc(e,e.return,f)}try{il(5,e,e.return)}catch(f){Mc(e,e.return,f)}}break;case 1:ml(t,e),yl(e),512&s&&null!==i&&Ja(i,i.return);break;case 5:if(ml(t,e),yl(e),512&s&&null!==i&&Ja(i,i.return),32&e.flags){var n=e.stateNode;try{ue(n,"")}catch(f){Mc(e,e.return,f)}}if(4&s&&null!=(n=e.stateNode)){var r=e.memoizedProps,a=null!==i?i.memoizedProps:r,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===r.type&&null!=r.name&&X(n,r),Ce(l,a);var h=Ce(l,r);for(a=0;a<c.length;a+=2){var d=c[a],u=c[a+1];"style"===d?fe(n,u):"dangerouslySetInnerHTML"===d?de(n,u):"children"===d?ue(n,u):C(n,d,u,h)}switch(l){case"input":q(n,r);break;case"textarea":oe(n,r);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!r.multiple;var g=r.value;null!=g?ie(n,!!r.multiple,g,!1):p!==!!r.multiple&&(null!=r.defaultValue?ie(n,!!r.multiple,r.defaultValue,!0):ie(n,!!r.multiple,r.multiple?[]:"",!1))}n[pn]=r}catch(f){Mc(e,e.return,f)}}break;case 6:if(ml(t,e),yl(e),4&s){if(null===e.stateNode)throw Error(o(162));n=e.stateNode,r=e.memoizedProps;try{n.nodeValue=r}catch(f){Mc(e,e.return,f)}}break;case 3:if(ml(t,e),yl(e),4&s&&null!==i&&i.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(f){Mc(e,e.return,f)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(n=e.child).flags&&(r=null!==n.memoizedState,n.stateNode.isHidden=r,!r||null!==n.alternate&&null!==n.alternate.memoizedState||(Vl=Xe())),4&s&&gl(e);break;case 22:if(d=null!==i&&null!==i.memoizedState,1&e.mode?(Qa=(h=Qa)||d,ml(t,e),Qa=h):ml(t,e),yl(e),8192&s){if(h=null!==e.memoizedState,(e.stateNode.isHidden=h)&&!d&&0!==(1&e.mode))for(qa=e,d=e.child;null!==d;){for(u=qa=d;null!==qa;){switch(g=(p=qa).child,p.tag){case 0:case 11:case 14:case 15:il(4,p,p.return);break;case 1:Ja(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){s=p,i=p.return;try{t=s,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(f){Mc(s,i,f)}}break;case 5:Ja(p,p.return);break;case 22:if(null!==p.memoizedState){wl(u);continue}}null!==g?(g.return=p,qa=g):wl(u)}d=d.sibling}e:for(d=null,u=e;;){if(5===u.tag){if(null===d){d=u;try{n=u.stateNode,h?"function"===typeof(r=n.style).setProperty?r.setProperty("display","none","important"):r.display="none":(l=u.stateNode,a=void 0!==(c=u.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(f){Mc(e,e.return,f)}}}else if(6===u.tag){if(null===d)try{u.stateNode.nodeValue=h?"":u.memoizedProps}catch(f){Mc(e,e.return,f)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:ml(t,e),yl(e),4&s&&gl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var i=e.return;null!==i;){if(rl(i)){var s=i;break e}i=i.return}throw Error(o(160))}switch(s.tag){case 5:var n=s.stateNode;32&s.flags&&(ue(n,""),s.flags&=-33),cl(e,al(e),n);break;case 3:case 4:var r=s.stateNode.containerInfo;ll(e,al(e),r);break;default:throw Error(o(161))}}catch(a){Mc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,i){qa=e,Cl(e,t,i)}function Cl(e,t,i){for(var s=0!==(1&e.mode);null!==qa;){var n=qa,o=n.child;if(22===n.tag&&s){var r=null!==n.memoizedState||$a;if(!r){var a=n.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=$a;var c=Qa;if($a=r,(Qa=l)&&!c)for(qa=n;null!==qa;)l=(r=qa).child,22===r.tag&&null!==r.memoizedState?Sl(n):null!==l?(l.return=r,qa=l):Sl(n);for(;null!==o;)qa=o,Cl(o,t,i),o=o.sibling;qa=n,$a=a,Qa=c}bl(e)}else 0!==(8772&n.subtreeFlags)&&null!==o?(o.return=n,qa=o):bl(e)}}function bl(e){for(;null!==qa;){var t=qa;if(0!==(8772&t.flags)){var i=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qa||sl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Qa)if(null===i)s.componentDidMount();else{var n=t.elementType===t.type?i.memoizedProps:ia(t.type,i.memoizedProps);s.componentDidUpdate(n,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;null!==r&&Uo(t,r,s);break;case 3:var a=t.updateQueue;if(null!==a){if(i=null,null!==t.child)switch(t.child.tag){case 5:case 1:i=t.child.stateNode}Uo(t,a,i)}break;case 5:var l=t.stateNode;if(null===i&&4&t.flags){i=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&i.focus();break;case"img":c.src&&(i.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var h=t.alternate;if(null!==h){var d=h.memoizedState;if(null!==d){var u=d.dehydrated;null!==u&&jt(u)}}}break;default:throw Error(o(163))}Qa||512&t.flags&&nl(t)}catch(p){Mc(t,t.return,p)}}if(t===e){qa=null;break}if(null!==(i=t.sibling)){i.return=t.return,qa=i;break}qa=t.return}}function wl(e){for(;null!==qa;){var t=qa;if(t===e){qa=null;break}var i=t.sibling;if(null!==i){i.return=t.return,qa=i;break}qa=t.return}}function Sl(e){for(;null!==qa;){var t=qa;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{sl(4,t)}catch(l){Mc(t,i,l)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var n=t.return;try{s.componentDidMount()}catch(l){Mc(t,n,l)}}var o=t.return;try{nl(t)}catch(l){Mc(t,o,l)}break;case 5:var r=t.return;try{nl(t)}catch(l){Mc(t,r,l)}}}catch(l){Mc(t,t.return,l)}if(t===e){qa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,qa=a;break}qa=t.return}}var xl,Ml=Math.ceil,Dl=b.ReactCurrentDispatcher,Il=b.ReactCurrentOwner,Rl=b.ReactCurrentBatchConfig,El=0,Al=null,Ll=null,kl=0,Tl=0,Pl=Mn(0),Nl=0,Fl=null,Ol=0,Gl=0,Bl=0,zl=null,Hl=null,Vl=0,jl=1/0,Wl=null,Ul=!1,_l=null,Yl=null,Kl=!1,Zl=null,$l=0,Ql=0,Xl=null,ql=-1,Jl=0;function ec(){return 0!==(6&El)?Xe():-1!==ql?ql:ql=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==kl?kl&-kl:null!==fo.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=Ct)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function ic(e,t,i,s){if(50<Ql)throw Ql=0,Xl=null,Error(o(185));yt(e,i,s),0!==(2&El)&&e===Al||(e===Al&&(0===(2&El)&&(Gl|=i),4===Nl&&ac(e,kl)),sc(e,s),1===i&&0===El&&0===(1&t.mode)&&(jl=Xe()+500,zn&&jn()))}function sc(e,t){var i=e.callbackNode;!function(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes;0<o;){var r=31-rt(o),a=1<<r,l=n[r];-1===l?0!==(a&i)&&0===(a&s)||(n[r]=pt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var s=ut(e,e===Al?kl:0);if(0===s)null!==i&&Ze(i),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=i&&Ze(i),1===t)0===e.tag?function(e){zn=!0,Vn(e)}(lc.bind(null,e)):Vn(lc.bind(null,e)),rn((function(){0===(6&El)&&jn()})),i=null;else{switch(bt(s)){case 1:i=Je;break;case 4:i=et;break;case 16:default:i=tt;break;case 536870912:i=st}i=Ac(i,nc.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function nc(e,t){if(ql=-1,Jl=0,0!==(6&El))throw Error(o(327));var i=e.callbackNode;if(Sc()&&e.callbackNode!==i)return null;var s=ut(e,e===Al?kl:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=fc(e,s);else{t=s;var n=El;El|=2;var r=gc();for(Al===e&&kl===t||(Wl=null,jl=Xe()+500,uc(e,t));;)try{vc();break}catch(l){pc(e,l)}Ro(),Dl.current=r,El=n,null!==Ll?t=0:(Al=null,kl=0,t=Nl)}if(0!==t){if(2===t&&(0!==(n=gt(e))&&(s=n,t=oc(e,n))),1===t)throw i=Fl,uc(e,0),ac(e,s),sc(e,Xe()),i;if(6===t)ac(e,s);else{if(n=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var i=t.updateQueue;if(null!==i&&null!==(i=i.stores))for(var s=0;s<i.length;s++){var n=i[s],o=n.getSnapshot;n=n.value;try{if(!rs(o(),n))return!1}catch(a){return!1}}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=fc(e,s))&&(0!==(r=gt(e))&&(s=r,t=oc(e,r))),1===t))throw i=Fl,uc(e,0),ac(e,s),sc(e,Xe()),i;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,Hl,Wl);break;case 3:if(ac(e,s),(130023424&s)===s&&10<(t=Vl+500-Xe())){if(0!==ut(e,0))break;if(((n=e.suspendedLanes)&s)!==s){ec(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=sn(wc.bind(null,e,Hl,Wl),t);break}wc(e,Hl,Wl);break;case 4:if(ac(e,s),(4194240&s)===s)break;for(t=e.eventTimes,n=-1;0<s;){var a=31-rt(s);r=1<<a,(a=t[a])>n&&(n=a),s&=~r}if(s=n,10<(s=(120>(s=Xe()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Ml(s/1960))-s)){e.timeoutHandle=sn(wc.bind(null,e,Hl,Wl),s);break}wc(e,Hl,Wl);break;default:throw Error(o(329))}}}return sc(e,Xe()),e.callbackNode===i?nc.bind(null,e):null}function oc(e,t){var i=zl;return e.current.memoizedState.isDehydrated&&(uc(e,t).flags|=256),2!==(e=fc(e,t))&&(t=Hl,Hl=i,null!==t&&rc(t)),e}function rc(e){null===Hl?Hl=e:Hl.push.apply(Hl,e)}function ac(e,t){for(t&=~Bl,t&=~Gl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-rt(t),s=1<<i;e[i]=-1,t&=~s}}function lc(e){if(0!==(6&El))throw Error(o(327));Sc();var t=ut(e,0);if(0===(1&t))return sc(e,Xe()),null;var i=fc(e,t);if(0!==e.tag&&2===i){var s=gt(e);0!==s&&(t=s,i=oc(e,s))}if(1===i)throw i=Fl,uc(e,0),ac(e,t),sc(e,Xe()),i;if(6===i)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Hl,Wl),sc(e,Xe()),null}function cc(e,t){var i=El;El|=1;try{return e(t)}finally{0===(El=i)&&(jl=Xe()+500,zn&&jn())}}function hc(e){null!==Zl&&0===Zl.tag&&0===(6&El)&&Sc();var t=El;El|=1;var i=Rl.transition,s=Ct;try{if(Rl.transition=null,Ct=1,e)return e()}finally{Ct=s,Rl.transition=i,0===(6&(El=t))&&jn()}}function dc(){Tl=Pl.current,Dn(Pl)}function uc(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,nn(i)),null!==Ll)for(i=Ll.return;null!==i;){var s=i;switch(to(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&Pn();break;case 3:Xo(),Dn(An),Dn(En),sr();break;case 5:Jo(s);break;case 4:Xo();break;case 13:case 19:Dn(er);break;case 10:Eo(s.type._context);break;case 22:case 23:dc()}i=i.return}if(Al=e,Ll=e=Pc(e.current,null),kl=Tl=t,Nl=0,Fl=null,Bl=Gl=Ol=0,Hl=zl=null,null!==To){for(t=0;t<To.length;t++)if(null!==(s=(i=To[t]).interleaved)){i.interleaved=null;var n=s.next,o=i.pending;if(null!==o){var r=o.next;o.next=n,s.next=r}i.pending=s}To=null}return e}function pc(e,t){for(;;){var i=Ll;try{if(Ro(),nr.current=qr,hr){for(var s=ar.memoizedState;null!==s;){var n=s.queue;null!==n&&(n.pending=null),s=s.next}hr=!1}if(rr=0,cr=lr=ar=null,dr=!1,ur=0,Il.current=null,null===i||null===i.return){Nl=1,Fl=t,Ll=null;break}e:{var r=e,a=i.return,l=i,c=t;if(t=kl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var h=c,d=l,u=d.tag;if(0===(1&d.mode)&&(0===u||11===u||15===u)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=fa(a);if(null!==g){g.flags&=-257,ya(g,a,l,0,t),1&g.mode&&ma(r,h,t),c=h;var m=(t=g).updateQueue;if(null===m){var f=new Set;f.add(c),t.updateQueue=f}else m.add(c);break e}if(0===(1&t)){ma(r,h,t),mc();break e}c=Error(o(426))}else if(no&&1&l.mode){var y=fa(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),mo(ca(c,l));break e}}r=c=ca(c,l),4!==Nl&&(Nl=2),null===zl?zl=[r]:zl.push(r),r=a;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t,jo(r,pa(0,c,t));break e;case 1:l=c;var v=r.type,C=r.stateNode;if(0===(128&r.flags)&&("function"===typeof v.getDerivedStateFromError||null!==C&&"function"===typeof C.componentDidCatch&&(null===Yl||!Yl.has(C)))){r.flags|=65536,t&=-t,r.lanes|=t,jo(r,ga(r,l,t));break e}}r=r.return}while(null!==r)}bc(i)}catch(b){t=b,Ll===i&&null!==i&&(Ll=i=i.return);continue}break}}function gc(){var e=Dl.current;return Dl.current=qr,null===e?qr:e}function mc(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Al||0===(268435455&Ol)&&0===(268435455&Gl)||ac(Al,kl)}function fc(e,t){var i=El;El|=2;var s=gc();for(Al===e&&kl===t||(Wl=null,uc(e,t));;)try{yc();break}catch(n){pc(e,n)}if(Ro(),El=i,Dl.current=s,null!==Ll)throw Error(o(261));return Al=null,kl=0,Nl}function yc(){for(;null!==Ll;)Cc(Ll)}function vc(){for(;null!==Ll&&!$e();)Cc(Ll)}function Cc(e){var t=xl(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?bc(e):Ll=t,Il.current=null}function bc(e){var t=e;do{var i=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(i=Ka(i,t,Tl)))return void(Ll=i)}else{if(null!==(i=Za(i,t)))return i.flags&=32767,void(Ll=i);if(null===e)return Nl=6,void(Ll=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ll=t);Ll=t=e}while(null!==t);0===Nl&&(Nl=5)}function wc(e,t,i){var s=Ct,n=Rl.transition;try{Rl.transition=null,Ct=1,function(e,t,i,s){do{Sc()}while(null!==Zl);if(0!==(6&El))throw Error(o(327));i=e.finishedWork;var n=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var r=i.lanes|i.childLanes;if(function(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<i;){var n=31-rt(i),o=1<<n;t[n]=0,s[n]=-1,e[n]=-1,i&=~o}}(e,r),e===Al&&(Ll=Al=null,kl=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||Kl||(Kl=!0,Ac(tt,(function(){return Sc(),null}))),r=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||r){r=Rl.transition,Rl.transition=null;var a=Ct;Ct=1;var l=El;El|=4,Il.current=null,function(e,t){if(Js=Ut,us(e=ds())){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(s&&0!==s.rangeCount){i=s.anchorNode;var n=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{i.nodeType,r.nodeType}catch(w){i=null;break e}var a=0,l=-1,c=-1,h=0,d=0,u=e,p=null;t:for(;;){for(var g;u!==i||0!==n&&3!==u.nodeType||(l=a+n),u!==r||0!==s&&3!==u.nodeType||(c=a+s),3===u.nodeType&&(a+=u.nodeValue.length),null!==(g=u.firstChild);)p=u,u=g;for(;;){if(u===e)break t;if(p===i&&++h===n&&(l=a),p===r&&++d===s&&(c=a),null!==(g=u.nextSibling))break;p=(u=p).parentNode}u=g}i=-1===l||-1===c?null:{start:l,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(en={focusedElem:e,selectionRange:i},Ut=!1,qa=t;null!==qa;)if(e=(t=qa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,qa=e;else for(;null!==qa;){t=qa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var f=m.memoizedProps,y=m.memoizedState,v=t.stateNode,C=v.getSnapshotBeforeUpdate(t.elementType===t.type?f:ia(t.type,f),y);v.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(w){Mc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,qa=e;break}qa=t.return}m=tl,tl=!1}(e,i),fl(i,e),ps(en),Ut=!!Js,en=Js=null,e.current=i,vl(i,e,n),Qe(),El=l,Ct=a,Rl.transition=r}else e.current=i;if(Kl&&(Kl=!1,Zl=e,$l=n),r=e.pendingLanes,0===r&&(Yl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),sc(e,Xe()),null!==t)for(s=e.onRecoverableError,i=0;i<t.length;i++)n=t[i],s(n.value,{componentStack:n.stack,digest:n.digest});if(Ul)throw Ul=!1,e=_l,_l=null,e;0!==(1&$l)&&0!==e.tag&&Sc(),r=e.pendingLanes,0!==(1&r)?e===Xl?Ql++:(Ql=0,Xl=e):Ql=0,jn()}(e,t,i,s)}finally{Rl.transition=n,Ct=s}return null}function Sc(){if(null!==Zl){var e=bt($l),t=Rl.transition,i=Ct;try{if(Rl.transition=null,Ct=16>e?16:e,null===Zl)var s=!1;else{if(e=Zl,Zl=null,$l=0,0!==(6&El))throw Error(o(331));var n=El;for(El|=4,qa=e.current;null!==qa;){var r=qa,a=r.child;if(0!==(16&qa.flags)){var l=r.deletions;if(null!==l){for(var c=0;c<l.length;c++){var h=l[c];for(qa=h;null!==qa;){var d=qa;switch(d.tag){case 0:case 11:case 15:il(8,d,r)}var u=d.child;if(null!==u)u.return=d,qa=u;else for(;null!==qa;){var p=(d=qa).sibling,g=d.return;if(ol(d),d===h){qa=null;break}if(null!==p){p.return=g,qa=p;break}qa=g}}}var m=r.alternate;if(null!==m){var f=m.child;if(null!==f){m.child=null;do{var y=f.sibling;f.sibling=null,f=y}while(null!==f)}}qa=r}}if(0!==(2064&r.subtreeFlags)&&null!==a)a.return=r,qa=a;else e:for(;null!==qa;){if(0!==(2048&(r=qa).flags))switch(r.tag){case 0:case 11:case 15:il(9,r,r.return)}var v=r.sibling;if(null!==v){v.return=r.return,qa=v;break e}qa=r.return}}var C=e.current;for(qa=C;null!==qa;){var b=(a=qa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,qa=b;else e:for(a=C;null!==qa;){if(0!==(2048&(l=qa).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(S){Mc(l,l.return,S)}if(l===a){qa=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,qa=w;break e}qa=l.return}}if(El=n,jn(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(nt,e)}catch(S){}s=!0}return s}finally{Ct=i,Rl.transition=t}}return!1}function xc(e,t,i){e=Ho(e,t=pa(0,t=ca(i,t),1),1),t=ec(),null!==e&&(yt(e,1,t),sc(e,t))}function Mc(e,t,i){if(3===e.tag)xc(e,e,i);else for(;null!==t;){if(3===t.tag){xc(t,e,i);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Yl||!Yl.has(s))){t=Ho(t,e=ga(t,e=ca(i,e),1),1),e=ec(),null!==t&&(yt(t,1,e),sc(t,e));break}}t=t.return}}function Dc(e,t,i){var s=e.pingCache;null!==s&&s.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&i,Al===e&&(kl&i)===i&&(4===Nl||3===Nl&&(130023424&kl)===kl&&500>Xe()-Vl?uc(e,0):Bl|=i),sc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ht,0===(130023424&(ht<<=1))&&(ht=4194304)));var i=ec();null!==(e=Fo(e,t))&&(yt(e,t,i),sc(e,i))}function Rc(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),Ic(e,i)}function Ec(e,t){var i=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;null!==n&&(i=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(o(314))}null!==s&&s.delete(t),Ic(e,i)}function Ac(e,t){return Ke(e,t)}function Lc(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kc(e,t,i,s){return new Lc(e,t,i,s)}function Tc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var i=e.alternate;return null===i?((i=kc(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Nc(e,t,i,s,n,r){var a=2;if(s=e,"function"===typeof e)Tc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case x:return Fc(i.children,n,r,t);case M:a=8,n|=8;break;case D:return(e=kc(12,i,t,2|n)).elementType=D,e.lanes=r,e;case A:return(e=kc(13,i,t,n)).elementType=A,e.lanes=r,e;case L:return(e=kc(19,i,t,n)).elementType=L,e.lanes=r,e;case P:return Oc(i,n,r,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case R:a=9;break e;case E:a=11;break e;case k:a=14;break e;case T:a=16,s=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=kc(a,i,t,n)).elementType=e,t.type=s,t.lanes=r,t}function Fc(e,t,i,s){return(e=kc(7,e,s,t)).lanes=i,e}function Oc(e,t,i,s){return(e=kc(22,e,s,t)).elementType=P,e.lanes=i,e.stateNode={isHidden:!1},e}function Gc(e,t,i){return(e=kc(6,e,null,t)).lanes=i,e}function Bc(e,t,i){return(t=kc(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,i,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Hc(e,t,i,s,n,o,r,a,l){return e=new zc(e,t,i,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=kc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Go(o),e}function Vc(e){if(!e)return Rn;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Tn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var i=e.type;if(Tn(i))return Fn(e,i,t)}return t}function jc(e,t,i,s,n,o,r,a,l){return(e=Hc(i,s,!0,e,0,o,0,a,l)).context=Vc(null),i=e.current,(o=zo(s=ec(),n=tc(i))).callback=void 0!==t&&null!==t?t:null,Ho(i,o,n),e.current.lanes=n,yt(e,n,s),sc(e,s),e}function Wc(e,t,i,s){var n=t.current,o=ec(),r=tc(n);return i=Vc(i),null===t.context?t.context=i:t.pendingContext=i,(t=zo(o,r)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=Ho(n,t,r))&&(ic(e,n,r,o),Vo(e,n,r)),r}function Uc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function _c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function Yc(e,t){_c(e,t),(e=e.alternate)&&_c(e,t)}xl=function(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps||An.current)Ca=!0;else{if(0===(e.lanes&i)&&0===(128&t.flags))return Ca=!1,function(e,t,i){switch(t.tag){case 3:Aa(t),go();break;case 5:qo(t);break;case 1:Tn(t.type)&&On(t);break;case 4:Qo(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;In(xo,s._currentValue),s._currentValue=n;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(In(er,1&er.current),t.flags|=128,null):0!==(i&t.child.childLanes)?Ga(e,t,i):(In(er,1&er.current),null!==(e=Ua(e,t,i))?e.sibling:null);In(er,1&er.current);break;case 19:if(s=0!==(i&t.childLanes),0!==(128&e.flags)){if(s)return ja(e,t,i);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),In(er,er.current),s)break;return null;case 22:case 23:return t.lanes=0,Ma(e,t,i)}return Ua(e,t,i)}(e,t,i);Ca=0!==(131072&e.flags)}else Ca=!1,no&&0!==(1048576&t.flags)&&Jn(t,Yn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Wa(e,t),e=t.pendingProps;var n=kn(t,En.current);Lo(t,i),n=fr(null,t,s,e,n,i);var r=yr();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Tn(s)?(r=!0,On(t)):r=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Go(t),n.updater=na,t.stateNode=n,n._reactInternals=t,la(t,s,e,i),t=Ea(null,t,s,!0,r,i)):(t.tag=0,no&&r&&eo(t),ba(null,t,n,i),t=t.child),t;case 16:s=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,s=(n=s._init)(s._payload),t.type=s,n=t.tag=function(e){if("function"===typeof e)return Tc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===k)return 14}return 2}(s),e=ia(s,e),n){case 0:t=Ia(null,t,s,e,i);break e;case 1:t=Ra(null,t,s,e,i);break e;case 11:t=wa(null,t,s,e,i);break e;case 14:t=Sa(null,t,s,ia(s.type,e),i);break e}throw Error(o(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,Ia(e,t,s,n=t.elementType===s?n:ia(s,n),i);case 1:return s=t.type,n=t.pendingProps,Ra(e,t,s,n=t.elementType===s?n:ia(s,n),i);case 3:e:{if(Aa(t),null===e)throw Error(o(387));s=t.pendingProps,n=(r=t.memoizedState).element,Bo(e,t),Wo(t,s,null,i);var a=t.memoizedState;if(s=a.element,r.isDehydrated){if(r={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=La(e,t,s,i,n=ca(Error(o(423)),t));break e}if(s!==n){t=La(e,t,s,i,n=ca(Error(o(424)),t));break e}for(so=cn(t.stateNode.containerInfo.firstChild),io=t,no=!0,oo=null,i=So(t,null,s,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(go(),s===n){t=Ua(e,t,i);break e}ba(e,t,s,i)}t=t.child}return t;case 5:return qo(t),null===e&&co(t),s=t.type,n=t.pendingProps,r=null!==e?e.memoizedProps:null,a=n.children,tn(s,n)?a=null:null!==r&&tn(s,r)&&(t.flags|=32),Da(e,t),ba(e,t,a,i),t.child;case 6:return null===e&&co(t),null;case 13:return Ga(e,t,i);case 4:return Qo(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=wo(t,null,s,i):ba(e,t,s,i),t.child;case 11:return s=t.type,n=t.pendingProps,wa(e,t,s,n=t.elementType===s?n:ia(s,n),i);case 7:return ba(e,t,t.pendingProps,i),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,r=t.memoizedProps,a=n.value,In(xo,s._currentValue),s._currentValue=a,null!==r)if(rs(r.value,a)){if(r.children===n.children&&!An.current){t=Ua(e,t,i);break e}}else for(null!==(r=t.child)&&(r.return=t);null!==r;){var l=r.dependencies;if(null!==l){a=r.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===r.tag){(c=zo(-1,i&-i)).tag=2;var h=r.updateQueue;if(null!==h){var d=(h=h.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),h.pending=c}}r.lanes|=i,null!==(c=r.alternate)&&(c.lanes|=i),Ao(r.return,i,t),l.lanes|=i;break}c=c.next}}else if(10===r.tag)a=r.type===t.type?null:r.child;else if(18===r.tag){if(null===(a=r.return))throw Error(o(341));a.lanes|=i,null!==(l=a.alternate)&&(l.lanes|=i),Ao(a,i,t),a=r.sibling}else a=r.child;if(null!==a)a.return=r;else for(a=r;null!==a;){if(a===t){a=null;break}if(null!==(r=a.sibling)){r.return=a.return,a=r;break}a=a.return}r=a}ba(e,t,n.children,i),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,Lo(t,i),s=s(n=ko(n)),t.flags|=1,ba(e,t,s,i),t.child;case 14:return n=ia(s=t.type,t.pendingProps),Sa(e,t,s,n=ia(s.type,n),i);case 15:return xa(e,t,t.type,t.pendingProps,i);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:ia(s,n),Wa(e,t),t.tag=1,Tn(s)?(e=!0,On(t)):e=!1,Lo(t,i),ra(t,s,n),la(t,s,n,i),Ea(null,t,s,!0,e,i);case 19:return ja(e,t,i);case 22:return Ma(e,t,i)}throw Error(o(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function qc(){}function Jc(e,t,i,s,n){var o=i._reactRootContainer;if(o){var r=o;if("function"===typeof n){var a=n;n=function(){var e=Uc(r);a.call(e)}}Wc(t,r,e,n)}else r=function(e,t,i,s,n){if(n){if("function"===typeof s){var o=s;s=function(){var e=Uc(r);o.call(e)}}var r=jc(t,s,e,0,null,!1,0,"",qc);return e._reactRootContainer=r,e[gn]=r.current,Vs(8===e.nodeType?e.parentNode:e),hc(),r}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof s){var a=s;s=function(){var e=Uc(l);a.call(e)}}var l=Hc(e,0,!1,null,0,!1,0,"",qc);return e._reactRootContainer=l,e[gn]=l.current,Vs(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,l,i,s)})),l}(i,t,e,n,s);return Uc(r)}$c.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wc(e,t,null,null)},$c.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[gn]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mt();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Pt.length&&0!==t&&t<Pt[i].priority;i++);Pt.splice(i,0,e),0===i&&Gt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=dt(t.pendingLanes);0!==i&&(vt(t,1|i),sc(t,Xe()),0===(6&El)&&(jl=Xe()+500,jn()))}break;case 13:hc((function(){var t=Fo(e,1);if(null!==t){var i=ec();ic(t,e,1,i)}})),Yc(e,1)}},St=function(e){if(13===e.tag){var t=Fo(e,134217728);if(null!==t)ic(t,e,134217728,ec());Yc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),i=Fo(e,t);if(null!==i)ic(i,e,t,ec());Yc(e,t)}},Mt=function(){return Ct},Dt=function(e,t){var i=Ct;try{return Ct=e,t()}finally{Ct=i}},Se=function(e,t,i){switch(t){case"input":if(q(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var n=wn(s);if(!n)throw Error(o(90));K(s),q(s,n)}}}break;case"textarea":oe(e,i);break;case"select":null!=(t=i.value)&&ie(e,!!i.multiple,t,!1)}},Ee=cc,Ae=hc;var eh={usingClientEntryPoint:!1,Events:[Cn,bn,wn,Ie,Re,cc]},th={findFiberByHostInstance:vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ih={bundleType:th.bundleType,version:th.version,rendererPackageName:th.rendererPackageName,rendererConfig:th.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=_e(e))?null:e.stateNode},findFiberByHostInstance:th.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{nt=sh.inject(ih),ot=sh}catch(he){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eh,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(o(200));return function(e,t,i){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==s?null:""+s,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.createRoot=function(e,t){if(!Qc(e))throw Error(o(299));var i=!1,s="",n=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=Hc(e,1,!1,null,0,i,0,s,n),e[gn]=t.current,Vs(8===e.nodeType?e.parentNode:e),new Zc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=_e(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,i){if(!Xc(t))throw Error(o(200));return Jc(null,e,t,!0,i)},t.hydrateRoot=function(e,t,i){if(!Qc(e))throw Error(o(405));var s=null!=i&&i.hydratedSources||null,n=!1,r="",a=Kc;if(null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(n=!0),void 0!==i.identifierPrefix&&(r=i.identifierPrefix),void 0!==i.onRecoverableError&&(a=i.onRecoverableError)),t=jc(t,null,e,1,null!=i?i:null,n,0,r,a),e[gn]=t.current,Vs(e),s)for(e=0;e<s.length;e++)n=(n=(i=s[e])._getVersion)(i._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[i,n]:t.mutableSourceEagerHydrationData.push(i,n);return new $c(t)},t.render=function(e,t,i){if(!Xc(t))throw Error(o(200));return Jc(null,e,t,!1,i)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(o(40));return!!e._reactRootContainer&&(hc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[gn]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,i,s){if(!Xc(i))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Jc(e,t,i,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,i)=>{var s=i(950);t.H=s.createRoot,s.hydrateRoot},950:(e,t,i)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(730)},153:(e,t,i)=>{var s=i(43),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,i){var s,o={},c=null,h=null;for(s in void 0!==i&&(c=""+i),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(h=t.ref),t)r.call(t,s)&&!l.hasOwnProperty(s)&&(o[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===o[s]&&(o[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:h,props:o,_owner:a.current}}t.jsx=c,t.jsxs=c},202:(e,t)=>{var i=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),p=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,f={};function y(e,t,i){this.props=e,this.context=t,this.refs=f,this.updater=i||g}function v(){}function C(e,t,i){this.props=e,this.context=t,this.refs=f,this.updater=i||g}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=C.prototype=new v;b.constructor=C,m(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,x={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function D(e,t,s){var n,o={},r=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(r=""+t.key),t)S.call(t,n)&&!M.hasOwnProperty(n)&&(o[n]=t[n]);var l=arguments.length-2;if(1===l)o.children=s;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];o.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===o[n]&&(o[n]=l[n]);return{$$typeof:i,type:e,key:r,ref:a,props:o,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var R=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,n,o,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case s:l=!0}}if(l)return r=r(l=e),e=""===o?"."+E(l,0):o,w(r)?(n="",null!=e&&(n=e.replace(R,"$&/")+"/"),A(r,t,n,"",(function(e){return e}))):null!=r&&(I(r)&&(r=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(R,"$&/")+"/")+e)),t.push(r)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var h=o+E(a=e[c],c);l+=A(a,t,n,h,r)}else if(h=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof h)for(e=h.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,n,h=o+E(a,c++),r);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function L(e,t,i){if(null==e)return e;var s=[],n=0;return A(e,s,"","",(function(e){return t.call(i,e,n++)})),s}function k(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},P={transition:null},N={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:P,ReactCurrentOwner:x};function F(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:L,forEach:function(e,t,i){L(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return L(e,(function(){t++})),t},toArray:function(e){return L(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=n,t.Profiler=r,t.PureComponent=C,t.StrictMode=o,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.act=F,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=m({},e.props),o=e.key,r=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(r=t.ref,a=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!M.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=s;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];n.children=l}return{$$typeof:i,type:e.type,key:o,ref:r,props:n,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=D,t.createFactory=function(e){var t=D.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=F,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,i){return T.current.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,i){return T.current.useReducer(e,t,i)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,i){return T.current.useSyncExternalStore(e,t,i)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},43:(e,t,i)=>{e.exports=i(202)},579:(e,t,i)=>{e.exports=i(153)},234:(e,t)=>{function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var s=i-1>>>1,n=e[s];if(!(0<o(n,t)))break e;e[s]=t,e[i]=n,i=s}}function s(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var s=0,n=e.length,r=n>>>1;s<r;){var a=2*(s+1)-1,l=e[a],c=a+1,h=e[c];if(0>o(l,i))c<n&&0>o(h,l)?(e[s]=h,e[c]=i,s=c):(e[s]=l,e[a]=i,s=a);else{if(!(c<n&&0>o(h,i)))break e;e[s]=h,e[c]=i,s=c}}}return t}function o(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],h=[],d=1,u=null,p=3,g=!1,m=!1,f=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,C="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=s(h);null!==t;){if(null===t.callback)n(h);else{if(!(t.startTime<=e))break;n(h),t.sortIndex=t.expirationTime,i(c,t)}t=s(h)}}function w(e){if(f=!1,b(e),!m)if(null!==s(c))m=!0,P(S);else{var t=s(h);null!==t&&N(w,t.startTime-e)}}function S(e,i){m=!1,f&&(f=!1,v(I),I=-1),g=!0;var o=p;try{for(b(i),u=s(c);null!==u&&(!(u.expirationTime>i)||e&&!A());){var r=u.callback;if("function"===typeof r){u.callback=null,p=u.priorityLevel;var a=r(u.expirationTime<=i);i=t.unstable_now(),"function"===typeof a?u.callback=a:u===s(c)&&n(c),b(i)}else n(c);u=s(c)}if(null!==u)var l=!0;else{var d=s(h);null!==d&&N(w,d.startTime-i),l=!1}return l}finally{u=null,p=o,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,M=!1,D=null,I=-1,R=5,E=-1;function A(){return!(t.unstable_now()-E<R)}function L(){if(null!==D){var e=t.unstable_now();E=e;var i=!0;try{i=D(!0,e)}finally{i?x():(M=!1,D=null)}}else M=!1}if("function"===typeof C)x=function(){C(L)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,T=k.port2;k.port1.onmessage=L,x=function(){T.postMessage(null)}}else x=function(){y(L,0)};function P(e){D=e,M||(M=!0,x())}function N(e,i){I=y((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,n,o){var r=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?r+o:r:o=r,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:n,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>r?(e.sortIndex=o,i(h,e),null===s(c)&&e===s(h)&&(f?(v(I),I=-1):f=!0,N(w,o-r))):(e.sortIndex=a,i(c,e),m||g||(m=!0,P(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},853:(e,t,i)=>{e.exports=i(234)}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,i),o.exports}var s=i(43),n=i(391);function o(){}function r(e,t,i,s,n){for(var o,r=[];t;)r.push(t),o=t.previousComponent,delete t.previousComponent,t=o;r.reverse();for(var a=0,l=r.length,c=0,h=0;a<l;a++){var d=r[a];if(d.removed)d.value=e.join(s.slice(h,h+d.count)),h+=d.count;else{if(!d.added&&n){var u=i.slice(c,c+d.count);u=u.map((function(e,t){var i=s[h+t];return i.length>e.length?i:e})),d.value=e.join(u)}else d.value=e.join(i.slice(c,c+d.count));c+=d.count,d.added||(h+=d.count)}}return r}o.prototype={diff:function(e,t){var i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=s.callback;"function"===typeof s&&(n=s,s={});var o=this;function a(e){return e=o.postProcess(e,s),n?(setTimeout((function(){n(e)}),0),!0):e}e=this.castInput(e,s),t=this.castInput(t,s),e=this.removeEmpty(this.tokenize(e,s));var l=(t=this.removeEmpty(this.tokenize(t,s))).length,c=e.length,h=1,d=l+c;null!=s.maxEditLength&&(d=Math.min(d,s.maxEditLength));var u=null!==(i=s.timeout)&&void 0!==i?i:1/0,p=Date.now()+u,g=[{oldPos:-1,lastComponent:void 0}],m=this.extractCommon(g[0],t,e,0,s);if(g[0].oldPos+1>=c&&m+1>=l)return a(r(o,g[0].lastComponent,t,e,o.useLongestToken));var f=-1/0,y=1/0;function v(){for(var i=Math.max(f,-h);i<=Math.min(y,h);i+=2){var n=void 0,d=g[i-1],u=g[i+1];d&&(g[i-1]=void 0);var p=!1;if(u){var v=u.oldPos-i;p=u&&0<=v&&v<l}var C=d&&d.oldPos+1<c;if(p||C){if(n=!C||p&&d.oldPos<u.oldPos?o.addToPath(u,!0,!1,0,s):o.addToPath(d,!1,!0,1,s),m=o.extractCommon(n,t,e,i,s),n.oldPos+1>=c&&m+1>=l)return a(r(o,n.lastComponent,t,e,o.useLongestToken));g[i]=n,n.oldPos+1>=c&&(y=Math.min(y,i-1)),m+1>=l&&(f=Math.max(f,i+1))}else g[i]=void 0}h++}if(n)!function e(){setTimeout((function(){if(h>d||Date.now()>p)return n();v()||e()}),0)}();else for(;h<=d&&Date.now()<=p;){var C=v();if(C)return C}},addToPath:function(e,t,i,s,n){var o=e.lastComponent;return o&&!n.oneChangePerToken&&o.added===t&&o.removed===i?{oldPos:e.oldPos+s,lastComponent:{count:o.count+1,added:t,removed:i,previousComponent:o.previousComponent}}:{oldPos:e.oldPos+s,lastComponent:{count:1,added:t,removed:i,previousComponent:o}}},extractCommon:function(e,t,i,s,n){for(var o=t.length,r=i.length,a=e.oldPos,l=a-s,c=0;l+1<o&&a+1<r&&this.equals(i[a+1],t[l+1],n);)l++,a++,c++,n.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return c&&!n.oneChangePerToken&&(e.lastComponent={count:c,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=a,l},equals:function(e,t,i){return i.comparator?i.comparator(e,t):e===t||i.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],i=0;i<e.length;i++)e[i]&&t.push(e[i]);return t},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};var a=new o;function l(e,t){var i;for(i=0;i<e.length&&i<t.length;i++)if(e[i]!=t[i])return e.slice(0,i);return e.slice(0,i)}function c(e,t){var i;if(!e||!t||e[e.length-1]!=t[t.length-1])return"";for(i=0;i<e.length&&i<t.length;i++)if(e[e.length-(i+1)]!=t[t.length-(i+1)])return e.slice(-i);return e.slice(-i)}function h(e,t,i){if(e.slice(0,t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't start with prefix ").concat(JSON.stringify(t),"; this is a bug"));return i+e.slice(t.length)}function d(e,t,i){if(!t)return e+i;if(e.slice(-t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't end with suffix ").concat(JSON.stringify(t),"; this is a bug"));return e.slice(0,-t.length)+i}function u(e,t){return h(e,t,"")}function p(e,t){return d(e,t,"")}function g(e,t){return t.slice(0,function(e,t){var i=0;e.length>t.length&&(i=e.length-t.length);var s=t.length;e.length<t.length&&(s=e.length);var n=Array(s),o=0;n[0]=0;for(var r=1;r<s;r++){for(t[r]==t[o]?n[r]=n[o]:n[r]=o;o>0&&t[r]!=t[o];)o=n[o];t[r]==t[o]&&o++}o=0;for(var a=i;a<e.length;a++){for(;o>0&&e[a]!=t[o];)o=n[o];e[a]==t[o]&&o++}return o}(e,t))}var m="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",f=new RegExp("[".concat(m,"]+|\\s+|[^").concat(m,"]"),"ug"),y=new o;function v(e,t,i,s){if(t&&i){var n=t.value.match(/^\s*/)[0],o=t.value.match(/\s*$/)[0],r=i.value.match(/^\s*/)[0],a=i.value.match(/\s*$/)[0];if(e){var m=l(n,r);e.value=d(e.value,r,m),t.value=u(t.value,m),i.value=u(i.value,m)}if(s){var f=c(o,a);s.value=h(s.value,a,f),t.value=p(t.value,f),i.value=p(i.value,f)}}else if(i)e&&(i.value=i.value.replace(/^\s*/,"")),s&&(s.value=s.value.replace(/^\s*/,""));else if(e&&s){var y=s.value.match(/^\s*/)[0],v=t.value.match(/^\s*/)[0],C=t.value.match(/\s*$/)[0],b=l(y,v);t.value=u(t.value,b);var w=c(u(y,b),C);t.value=p(t.value,w),s.value=h(s.value,y,w),e.value=d(e.value,y,y.slice(0,y.length-w.length))}else if(s){var S=s.value.match(/^\s*/)[0],x=g(t.value.match(/\s*$/)[0],S);t.value=p(t.value,x)}else if(e){var M=g(e.value.match(/\s*$/)[0],t.value.match(/^\s*/)[0]);t.value=u(t.value,M)}}y.equals=function(e,t,i){return i.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e.trim()===t.trim()},y.tokenize=function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i.intlSegmenter){if("word"!=i.intlSegmenter.resolvedOptions().granularity)throw new Error('The segmenter passed must have a granularity of "word"');t=Array.from(i.intlSegmenter.segment(e),(function(e){return e.segment}))}else t=e.match(f)||[];var s=[],n=null;return t.forEach((function(e){/\s/.test(e)?null==n?s.push(e):s.push(s.pop()+e):/\s/.test(n)?s[s.length-1]==n?s.push(s.pop()+e):s.push(n+e):s.push(e),n=e})),s},y.join=function(e){return e.map((function(e,t){return 0==t?e:e.replace(/^\s+/,"")})).join("")},y.postProcess=function(e,t){if(!e||t.oneChangePerToken)return e;var i=null,s=null,n=null;return e.forEach((function(e){e.added?s=e:e.removed?n=e:((s||n)&&v(i,n,s,e),i=e,s=null,n=null)})),(s||n)&&v(i,n,s,null),e};var C=new o;C.tokenize=function(e){var t=new RegExp("(\\r?\\n)|[".concat(m,"]+|[^\\S\\n\\r]+|[^").concat(m,"]"),"ug");return e.match(t)||[]};var b=new o;function w(e,t,i){return b.diff(e,t,i)}b.tokenize=function(e,t){t.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));var i=[],s=e.split(/(\n|\r\n)/);s[s.length-1]||s.pop();for(var n=0;n<s.length;n++){var o=s[n];n%2&&!t.newlineIsToken?i[i.length-1]+=o:i.push(o)}return i},b.equals=function(e,t,i){return i.ignoreWhitespace?(i.newlineIsToken&&e.includes("\n")||(e=e.trim()),i.newlineIsToken&&t.includes("\n")||(t=t.trim())):i.ignoreNewlineAtEof&&!i.newlineIsToken&&(e.endsWith("\n")&&(e=e.slice(0,-1)),t.endsWith("\n")&&(t=t.slice(0,-1))),o.prototype.equals.call(this,e,t,i)};var S=new o;S.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var x=new o;function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}x.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var D=new o;function I(e,t,i,s,n){var o,r;for(t=t||[],i=i||[],s&&(e=s(n,e)),o=0;o<t.length;o+=1)if(t[o]===e)return i[o];if("[object Array]"===Object.prototype.toString.call(e)){for(t.push(e),r=new Array(e.length),i.push(r),o=0;o<e.length;o+=1)r[o]=I(e[o],t,i,s,n);return t.pop(),i.pop(),r}if(e&&e.toJSON&&(e=e.toJSON()),"object"===M(e)&&null!==e){t.push(e),r={},i.push(r);var a,l=[];for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&l.push(a);for(l.sort(),o=0;o<l.length;o+=1)r[a=l[o]]=I(e[a],t,i,s,a);t.pop(),i.pop()}else r=e;return r}D.useLongestToken=!0,D.tokenize=b.tokenize,D.castInput=function(e,t){var i=t.undefinedReplacement,s=t.stringifyReplacer,n=void 0===s?function(e,t){return"undefined"===typeof t?i:t}:s;return"string"===typeof e?e:JSON.stringify(I(e,null,null,n),n,"  ")},D.equals=function(e,t,i){return o.prototype.equals.call(D,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"),i)};var R=new o;R.tokenize=function(e){return e.slice()},R.join=R.removeEmpty=function(e){return e};var E=i(579);const A=e=>{let{buttonText:t,buttonOnClick:i,viewerText:s,viewerOnScroll:n}=e;return(0,E.jsxs)("div",{children:[(0,E.jsx)("button",{onClick:i,children:t}),(0,E.jsx)("div",{className:"text-viewer",onScroll:n,children:s})]})};var L=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const s=t?this.allAsyncListeners:this.allSyncListeners;let n=s.get(e);return!n&&i&&(n=new Set,s.set(e,n)),n}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.getListeners(e,i,!0).add(t)}removeEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.getListeners(e,i,!1);if(s&&(s.delete(t),0===s.size)){(i?this.allAsyncListeners:this.allSyncListeners).delete(e)}}addGlobalListener(e){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const t=e.event;t instanceof Event&&(e.eventPath=t.composedPath())}const s=(i,s)=>i.forEach((i=>{if(!s.has(i))return;const n=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming((()=>i(e))):()=>i(e);t?this.dispatchAsync(n):n()})),n=this.getListeners(i,t,!1)??new Set,o=new Set(n);o.size>0&&s(o,n);new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach((s=>{const n=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming((()=>s(i,e))):()=>s(i,e);t?this.dispatchAsync(n):n()}))}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach((e=>e()))}},k=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(k||{}),T={};function P(e,t){T[t]||(e(),T[t]=!0)}function N(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];console.log("AG Grid: "+e,...i)}function F(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];P((()=>console.warn("AG Grid: "+e,...i)),e+i?.join(""))}function O(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];P((()=>console.error("AG Grid: "+e,...i)),e+i?.join(""))}function G(e){return!!(e&&e.constructor&&e.call&&e.apply)}function B(e){!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.length>0&&window.setTimeout((()=>e.forEach((e=>e()))),t)}(e,400)}var z=[],H=!1;function V(e){z.push(e),H||(H=!0,window.setTimeout((()=>{const e=z.slice();z.length=0,H=!1,e.forEach((e=>e()))}),0))}function j(e,t){let i;return function(){for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];const r=this;window.clearTimeout(i),i=window.setTimeout((function(){e.apply(r,n)}),t)}}function W(e,t){let i=0;return function(){const s=(new Date).getTime();if(!(s-i<t)){i=s;for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];e.apply(this,o)}}}function U(e){return null==e||""===e?null:e}function _(e){return null!=e&&(""!==e||arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function Y(e){return!_(e)}function K(e){return null==e||0===e.length}function Z(e){return null!=e&&"function"===typeof e.toString?e.toString():null}function $(e){if(void 0===e)return;if(null===e||""===e)return null;if("number"===typeof e)return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Q(e){if(void 0!==e)return null!==e&&""!==e&&X(e)}function X(e){return"boolean"===typeof e?e:"string"===typeof e&&("TRUE"===e.toUpperCase()||""==e)}function q(e,t){return(e?JSON.stringify(e):null)===(t?JSON.stringify(t):null)}function J(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=null==e,n=null==t;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),s&&n)return 0;if(s)return-1;if(n)return 1;function o(e,t){return e>t?1:e<t?-1:0}if("string"!==typeof e)return o(e,t);if(!i)return o(e,t);try{return e.localeCompare(t)}catch(r){return o(e,t)}}function ee(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach((e=>t.push(e))),t}return Object.values(e)}function te(e,t){return e.get("rowModelType")===t}function ie(e){return te(e,"clientSide")}function se(e){return te(e,"serverSide")}function ne(e,t){return e.get("domLayout")===t}function oe(e){return void 0!==Ne(e)}function re(e){return!e.get("suppressAsyncEvents")}function ae(e){return"function"===typeof e.get("getRowHeight")}function le(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0;if(null==s&&(s=e.environment.getDefaultRowHeight()),ae(e)){if(i)return{height:s,estimated:!0};const n={node:t,data:t.data},o=e.getCallback("getRowHeight")(n);if(he(o))return 0===o&&F("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,o),estimated:!1}}if(t.detail&&e.get("masterDetail"))return function(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");if(he(t))return{height:t,estimated:!1};return{height:300,estimated:!1}}(e);const n=e.get("rowHeight");return{height:n&&he(n)?n:s,estimated:!1}}function ce(e){const{environment:t}=e,i=e.get("rowHeight");if(!i||Y(i))return t.getDefaultRowHeight();const s=t.refreshRowHeightVariable();return-1!==s?s:(F("row height must be a number if not using standard row model"),t.getDefaultRowHeight())}function he(e){return!isNaN(e)&&"number"===typeof e&&isFinite(e)}function de(e,t,i){const s=t[e.getDomDataKey()];return s?s[i]:void 0}function ue(e,t,i,s){const n=e.getDomDataKey();let o=t[n];Y(o)&&(o={},t[n]=o),o[i]=s}function pe(e){let t=null;const i=e.get("getDocument");return i&&_(i)?t=i():e.eGridDiv&&(t=e.eGridDiv.ownerDocument),t&&_(t)?t:document}function ge(e){return pe(e).defaultView||window}function me(e){return e.eGridDiv.getRootNode()}function fe(e){return me(e).activeElement}function ye(e){const t=pe(e),i=fe(e);return null===i||i===t.body}function ve(e){return!e.get("ensureDomOrder")&&e.get("animateRows")}function Ce(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||ne(e,"print"))}function be(e){const t=e.get("autoGroupColumnDef");return!t?.comparator&&!e.get("treeData")}function we(e){const t=e.get("groupAggFiltering");return"function"===typeof t?e.getCallback("groupAggFiltering"):!0===t?()=>!0:void 0}function Se(e){const t=e.get("grandTotalRow");if(t)return t;return e.get("groupIncludeTotalFooter")?"bottom":void 0}function xe(e){const t=e.get("groupTotalRow");if("function"===typeof t)return e.getCallback("groupTotalRow");if(t)return()=>t;const i=e.get("groupIncludeFooter");if("function"===typeof i){const t=e.getCallback("groupIncludeFooter");return e=>t(e)?"bottom":void 0}return()=>i?"bottom":void 0}function Me(e){return e.exists("groupDisplayType")?"multipleColumns"===e.get("groupDisplayType"):e.get("groupHideOpenParents")}function De(e,t){return!t&&"groupRows"===e.get("groupDisplayType")}function Ie(e){const t=e.getCallback("getRowId");return void 0===t?t:e=>{let i=t(e);return"string"!==typeof i&&(F("The getRowId callback must return a string. The ID ",i," is being cast to a string."),i=String(i)),i}}function Re(e){return e?.checkboxes??!0}function Ee(e){return"multiRow"===e?.mode&&(e.headerCheckbox??!0)}function Ae(e){const t=e.get("cellSelection");return void 0!==t?!!t:e.get("enableRangeSelection")}function Le(e){const t=e.get("cellSelection");return void 0!==t?"boolean"!==typeof t&&"fill"===t.handle?.mode:e.get("enableFillHandle")}function ke(e){const t=e.get("rowSelection")??"single";if("string"===typeof t){const t=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return(!t||!i)&&(t?"enableDeselection":!i||"enableSelection")}return("singleRow"===t.mode||"multiRow"===t.mode)&&(t.enableClickSelection??!1)}function Te(e){const t=ke(e);return!0===t||"enableDeselection"===t}function Pe(e){const t=e.get("rowSelection");return"string"===typeof t?e.get("isRowSelectable"):t?.isRowSelectable}function Ne(e){const t=e.get("rowSelection");if("string"===typeof t)switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return t?.mode}function Fe(e){return"multiRow"===Ne(e)}function Oe(e){const t=e.get("rowSelection");if("string"===typeof t){const t=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return t&&i?"filteredDescendants":t?"descendants":"self"}return"multiRow"===t?.mode?t.groupSelects:void 0}function Ge(e){const t=Oe(e);return"descendants"===t||"filteredDescendants"===t}function Be(e){return e.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!e.get("suppressSetFilterByDefault")}function ze(e){if(e&&e.length)return e[e.length-1]}function He(e,t,i){return null==e&&null==t||null!=e&&null!=t&&e.length===t.length&&e.every(((e,s)=>i?i(e,t[s]):t[s]===e))}function Ve(e,t){const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.pop())}function je(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function We(e,t,i){e.splice(i,0,t)}function Ue(e,t,i){!function(e,t){for(let i=0;i<t.length;i++)je(e,t[i])}(e,t),t.slice().reverse().forEach((t=>We(e,t,i)))}function _e(e,t){return e.indexOf(t)>-1}function Ye(e,t){null!=t&&null!=e&&t.forEach((t=>e.push(t)))}var Ke="__ag_Grid_Stop_Propagation",Ze=["touchstart","touchend","touchmove","touchcancel","scroll"],$e={};function Qe(e){e[Ke]=!0}function Xe(e){return!0===e[Ke]}var qe=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if("boolean"===typeof $e[t])return $e[t];const i=document.createElement(e[t]||"div");return $e[t="on"+t]=t in i}})();function Je(e,t,i){let s=t;for(;s;){const t=de(e,s,i);if(t)return t;s=s.parentElement}return null}function et(e,t){return!(!t||!e)&&function(e){const t=e;if(t.path)return t.path;if(t.composedPath)return t.composedPath();return function(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}(t)}(t).indexOf(e)>=0}var tt=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new L),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService&&this.localEventService.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const s in t){const n=t[s];n&&i.push(this._setupListener(e,s,n))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;e instanceof HTMLElement?function(e,t,i,s){const n=_e(Ze,i)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,i,s,n)}(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);const s=()=>(e.removeEventListener(t,i),null);return this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==s)),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);const i=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==i)),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,s=e=>{if(e.changeSet){if(e.changeSet&&e.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=e.changeSet.id}const s={type:"gridPropertyChanged",changeSet:e.changeSet,source:e.source};t(s)};e.forEach((e=>this.setupGridOptionListener(e,s)))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function it(e){return e instanceof st}var st=class extends tt{constructor(e,t,i,s){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=Mt(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=s}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some((e=>e.isVisible()))}isPadding(){return this.padding}setExpanded(e){this.expanded=void 0!==e&&e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach((t=>{Dt(t)?e.push(t):it(t)&&t.addLeafColumns(e)}))}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach((t=>t.addEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach((t=>t.removeEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const s=this.findChildrenRemovingPadding();for(let o=0,r=s.length;o<r;o++){const n=s[o];if(!n.isVisible())continue;const r=n.getColumnGroupShow();"open"===r?(e=!0,i=!0):"closed"===r?(t=!0,i=!0):(e=!0,t=!0)}const n=e&&t&&i;this.expandable!==n&&(this.expandable=n,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach((i=>{it(i)&&i.isPadding()?t(i.children):e.push(i)}))};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},nt="ag-Grid-ControlsColumn",ot=class extends tt{constructor(){super(...arguments),this.beanName="controlsColService"}createControlsCols(){const{gos:e}=this,t=e.get("rowSelection");if(!t||"object"!==typeof t)return[];const i=Re(t),s=Ee(t);if(i||s){const t=e.get("selectionColumnDef"),i={maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:e.get("enableRtl")?"right":"left",comparator(e,t,i,s){const n=i.isSelected(),o=s.isSelected();return n&&o?0:n?1:-1},editable:!1,suppressFillHandle:!0,...t,colId:`${nt}`},s=new It(i,null,i.colId,!1);return this.createBean(s),[s]}return[]}},rt="ag-Grid-AutoColumn";function at(e){const t=[],i=e=>{for(let s=0;s<e.length;s++){const n=e[s];Dt(n)?t.push(n):it(n)&&i(n.getChildren())}};return i(e),t}function lt(e){return e.reduce(((e,t)=>e+t.getActualWidth()),0)}function ct(e,t,i){const s={};if(!t)return;Lt(null,t,(e=>{s[e.getInstanceId()]=e})),i&&Lt(null,i,(e=>{s[e.getInstanceId()]=null}));const n=Object.values(s).filter((e=>null!=e));e.destroyBeans(n)}function ht(e){return e.getId().startsWith(rt)}function dt(e){return e.getColId().startsWith(nt)}function ut(e){let t=[];if(e instanceof Array){e.some((e=>"string"!==typeof e))?F("if colDef.type is supplied an array it should be of type 'string[]'"):t=e}else"string"===typeof e?t=e.split(","):F("colDef.type should be of type 'string' | 'string[]'");return t}var pt=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=t=>{this.frameworkOverrides.wrapOutgoing((()=>e(t)))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(t,i)=>{this.frameworkOverrides.wrapOutgoing((()=>e(t,i)))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}},gt=new Set(["__proto__","constructor","prototype"]);function mt(e,t){if(null!=e)if(Array.isArray(e))for(let i=0;i<e.length;i++)t(i.toString(),e[i]);else for(const[i,s]of Object.entries(e))t(i,s)}function ft(e){const t={},i=Object.keys(e);for(let s=0;s<i.length;s++){if(gt.has(i[s]))continue;const n=i[s],o=e[n];t[n]=o}return t}function yt(e,t){if(!e)return;const i=e,s={};return Object.keys(i).forEach((e=>{if(t&&t.indexOf(e)>=0||gt.has(e))return;const n=i[e],o=wt(n)&&n.constructor===Object;s[e]=o?yt(n):n})),s}function vt(e){if(!e)return[];const t=Object;if("function"===typeof t.values)return t.values(e);const i=[];for(const s in e)e.hasOwnProperty(s)&&e.propertyIsEnumerable(s)&&i.push(e[s]);return i}function Ct(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_(t)&&mt(t,((t,n)=>{if(gt.has(t))return;let o=e[t];if(o!==n){if(s){if(null==o&&null!=n){"object"===typeof n&&n.constructor===Object&&(o={},e[t]=o)}}wt(n)&&wt(o)&&!Array.isArray(o)?Ct(o,n,i,s):(i||void 0!==n)&&(e[t]=n)}}))}function bt(e,t,i){if(!t||!e)return;if(!i)return e[t];const s=t.split(".");let n=e;for(let o=0;o<s.length;o++){if(null==n)return;n=n[s[o]]}return n}function wt(e){return"object"===typeof e&&null!==e}var St={resizable:!0,sortable:!0},xt=0;function Mt(){return xt++}function Dt(e){return e instanceof It}var It=class extends tt{constructor(e,t,i,s){super(),this.isColumn=!0,this.instanceId=Mt(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new L,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=s,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){void 0!==e.sort?"asc"!==e.sort&&"desc"!==e.sort||(this.sort=e.sort):"asc"!==e.initialSort&&"desc"!==e.initialSort||(this.sort=e.initialSort);const t=e.sortIndex,i=e.initialSortIndex;void 0!==t?null!==t&&(this.sortIndex=t):null!==i&&(this.sortIndex=i);const s=e.hide,n=e.initialHide;this.visible=void 0!==s?!s:!n,void 0!==e.pinned?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const o=e.flex,r=e.initialFlex;void 0!==o?this.flex=o:void 0!==r&&(this.flex=r)}setColDef(e,t,i){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",i))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=_(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=_(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=_(this.colDef.tooltipField)||_(this.colDef.tooltipValueGetter)||_(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=$(e.width),s=$(e.initialWidth);return t=null!=i?i:null!=s?s:200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(Y(this.colDef)||Y(this.colDef.showRowGroup))return!1;const t=!0===this.colDef.showRowGroup,i=this.colDef.showRowGroup===e;return t||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,t){this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new pt(this.frameworkOverrides));const i=this.frameworkEventListenerService?.wrap(t)??t;this.columnEventService.addEventListener(e,i)}removeEventListener(e,t){const i=this.frameworkEventListenerService?.unwrap(t)??t;this.columnEventService.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if("boolean"===typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"===typeof this.colDef.suppressNavigable){const t=this.createColumnFunctionCallbackParams(e);return(0,this.colDef.suppressNavigable)(t)}return!1}isCellEditable(e){if(e.group)if(this.gos.get("treeData")){if(!e.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1;return this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){const t=this.gos.get("rowSelection");if(t&&"string"!==typeof t){const i=dt(this)&&Re(t);return this.isColumnFunc(e,i)}return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??St[e]}isColumnFunc(e,t){if("boolean"===typeof t)return t;if("function"===typeof t){return t(this.createColumnFunctionCallbackParams(e))}return!1}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.sort}isSortDescending(){return"desc"===this.sort}isSortNone(){return Y(this.sort)}isSorting(){return _(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,i){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const s=this.createColumnEvent("filterChanged",t);i&&Ct(s,i),this.columnEventService.dispatchEvent(s)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){this.pinned=!0===e||"left"===e?"left":"right"===e?"right":null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,t){const i=!0===e;this.visible!==i&&(this.visible=i,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Y(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(Y(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}},Rt={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},Et=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Z(e);let i=0;for(;;){let s;if(e?(s=e,0!==i&&(s+="_"+i)):t?(s=t,0!==i&&(s+="_"+i)):s=i,!this.existingKeys[s])return this.existingKeys[s]=!0,String(s);i++}}},At=class extends tt{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,i,s){const n=new Et,{existingCols:o,existingGroups:r,existingColKeys:a}=this.extractExistingTreeData(i);n.addExistingKeys(a);const l=this.recursivelyCreateColumns(e,0,t,o,n,r,s),c=this.findMaxDept(l,0),h=this.balanceColumnTree(l,0,c,n);return Lt(null,h,((e,t)=>{it(e)&&e.setupExpandable(),e.setOriginalParent(t)})),{columnTree:h,treeDept:c}}extractExistingTreeData(e){const t=[],i=[],s=[];return e&&Lt(null,e,(e=>{if(it(e)){const t=e;i.push(t)}else{const i=e;s.push(i.getId()),t.push(i)}})),{existingCols:t,existingGroups:i,existingColKeys:s}}balanceTreeForAutoCols(e,t){const i=[],s=this.findDepth(t);return e.forEach((e=>{let t=e;for(let i=s-1;i>=0;i--){const s=new st(null,`FAKE_PATH_${e.getId()}}_${i}`,!0,i);this.createBean(s),s.setChildren([t]),t.setOriginalParent(s),t=s}0===s&&e.setOriginalParent(null),i.push(t)})),[i,s]}findDepth(e){let t=0,i=e;for(;i&&i[0]&&it(i[0]);)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,s){const n=[];for(let o=0;o<e.length;o++){const r=e[o];if(it(r)){const e=r,o=this.balanceColumnTree(e.getChildren(),t+1,i,s);e.setChildren(o),n.push(e)}else{let o,a;for(let e=i-1;e>=t;e--){const e=s.getUniqueKey(null,null),i=this.createMergedColGroupDef(null),n=new st(i,e,!0,t);this.createBean(n),a&&a.setChildren([n]),a=n,o||(o=a)}if(o&&a){n.push(o);if(e.some((e=>it(e)))){a.setChildren([r]);continue}a.setChildren(e);break}n.push(r)}}return n}findMaxDept(e,t){let i=t;for(let s=0;s<e.length;s++){const n=e[s];if(it(n)){const e=n,s=this.findMaxDept(e.getChildren(),t+1);i<s&&(i=s)}}return i}recursivelyCreateColumns(e,t,i,s,n,o,r){if(!e)return[];const a=new Array(e.length);for(let l=0;l<a.length;l++){const c=e[l];this.isColumnGroup(c)?a[l]=this.createColumnGroup(i,c,t,s,n,o,r):a[l]=this.createColumn(i,c,s,n,r)}return a}createColumnGroup(e,t,i,s,n,o,r){const a=this.createMergedColGroupDef(t),l=n.getUniqueKey(a.groupId||null,null),c=new st(a,l,!1,i);this.createBean(c);const h=this.findExistingGroup(t,o);h&&o.splice(h.idx,1);const d=h?.group;d&&c.setExpanded(d.isExpanded());const u=this.recursivelyCreateColumns(a.children,i+1,e,s,n,o,r);return c.setChildren(u),c}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,s,n){const o=this.findExistingColumn(t,i);o&&i?.splice(o.idx,1);let r=o?.column;if(r){const e=this.addColumnDefaultAndTypes(t,r.getColId());r.setColDef(e,t,n),this.applyColumnState(r,e,n)}else{const i=s.getUniqueKey(t.colId,t.field),n=this.addColumnDefaultAndTypes(t,i);r=new It(n,t,i,e),this.createBean(r)}return this.dataTypeService?.addColumnListeners(r),r}applyColumnState(e,t,i){const s=$(t.flex);void 0!==s&&e.setFlex(s);if(e.getFlex()<=0){const s=$(t.width);if(null!=s)e.setActualWidth(s,i);else{const t=e.getActualWidth();e.setActualWidth(t,i)}}void 0!==t.sort&&("asc"==t.sort||"desc"==t.sort?e.setSort(t.sort,i):e.setSort(void 0,i));const n=$(t.sortIndex);void 0!==n&&e.setSortIndex(n);const o=Q(t.hide);void 0!==o&&e.setVisible(!o,i),void 0!==t.pinned&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){const s=t[i].getUserProvidedColDef();if(!s)continue;if(null!=e.colId){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(null!=e.field){if(s.field===e.field)return{idx:i,column:t[i]}}else if(s===e)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(null!=e.groupId)for(let i=0;i<t.length;i++){const s=t[i];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:i,group:s}}}addColumnDefaultAndTypes(e,t){const i={};Ct(i,this.gos.get("defaultColDef"),!1,!0);const s=this.updateColDefAndGetColumnType(i,e,t);s&&this.assignColumnTypes(s,i),Ct(i,e,!1,!0);const n=this.gos.get("autoGroupColumnDef"),o=be(this.gos);return e.rowGroup&&n&&o&&Ct(i,{sort:n.sort,initialSort:n.initialSort},!1,!0),this.dataTypeService?.validateColDef(i),i}updateColDefAndGetColumnType(e,t,i){const s=this.dataTypeService?.updateColDefAndGetColumnType(e,t,i),n=t.type??s??e.type;return e.type=n,n?ut(n):void 0}assignColumnTypes(e,t){if(!e.length)return;const i=Object.assign({},Rt);mt(this.gos.get("columnTypes")||{},((e,t)=>{if(e in i)F(`the column type '${e}' is a default column type and cannot be overridden.`);else{t.type&&F("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[e]=t}})),e.forEach((e=>{const s=i[e.trim()];s?Ct(t,s,!1,!0):F("colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes")}))}isColumnGroup(e){return void 0!==e.children}};function Lt(e,t,i){if(t)for(let s=0;s<t.length;s++){const n=t[s];it(n)&&Lt(n,n.getChildren(),i),i(n,e)}}var kt=class extends tt{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.ctrlsService=e.ctrlsService,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.controlsColService=e.controlsColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],(e=>this.refreshAll(Tt(e.source)))),this.addManagedPropertyListener("rowSelection",(e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,Tt(e.source))})),this.addManagedPropertyListener("autoGroupColumnDef",(e=>this.onAutoGroupColumnDefChanged(Tt(e.source)))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],(e=>this.recreateColumnDefs(Tt(e.source)))),this.addManagedPropertyListener("pivotMode",(e=>this.setPivotMode(this.gos.get("pivotMode"),Tt(e.source)))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e){const t=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();const i=this.colDefCols?.list,s=this.colDefCols?.tree,n=this.columnFactory.createColumnTree(this.colDefs,!0,s,e);ct(this.context,this.colDefCols?.tree,n.columnTree);const o=n.columnTree,r=n.treeDept,a=at(o),l={};a.forEach((e=>l[e.getId()]=e)),this.colDefCols={tree:o,treeDepth:r,list:a,map:l},this.funcColsService.extractCols(e,i),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),t&&(this.changeEventsDispatching=!0,t(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),"gridInitializing"===e&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;const t=this.cols?.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();const i=(s=this.gos,this.showingPivotResult?!s.get("enableStrictPivotColumnOrder"):s.get("maintainColumnOrder"));var s;e&&!i||this.restoreColOrder(),this.positionLockedCols(),this.showRowGroupColsService?.refresh(),this.quickFilterService?.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear();!He(t,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){const e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=null!=e,e){const{map:t,list:i,tree:s,treeDepth:n}=e;this.cols={list:i.slice(),map:{...t},tree:s.slice(),treeDepth:n};e.list.some((e=>void 0!==this.cols?.map[e.getColId()]))||(this.lastPivotOrder=null)}else{const{map:e,list:t,tree:i,treeDepth:s}=this.colDefCols;this.cols={list:t.slice(),map:{...e},tree:i.slice(),treeDepth:s}}}getColsToShow(){const e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter((i=>{const s=ht(i);if(e){const e=t&&_e(t,i);return s||e}return s||i.isVisible()}))}addAutoCols(){null!=this.autoCols&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),Pt(this.cols))}createAutoCols(){const e=De(this.gos,this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),i=this.funcColsService.getRowGroupColumns(),s=()=>{this.autoCols&&(ct(this.context,this.autoCols.tree),this.autoCols=null)};if(!(i.length>0||this.gos.get("treeData"))||t||e||!this.autoColService)return void s();const n=this.autoColService.createAutoCols(i)??[],o=Ft(n,this.autoCols?.list||null),r=this.cols.treeDepth,a=this.autoCols?this.autoCols.treeDepth:-1;if(o&&a==r)return;s();const[l,c]=this.columnFactory.balanceTreeForAutoCols(n,this.cols.tree);this.autoCols={list:n,tree:l,treeDepth:c,map:{}};const h=e=>{if(!e)return null;const t=e.filter((e=>!ht(e)));return[...n,...t]};this.lastOrder=h(this.lastOrder),this.lastPivotOrder=h(this.lastPivotOrder)}createControlsCols(){const e=()=>{ct(this.context,this.controlsCols?.tree),this.controlsCols=null};this.controlsColService||e();const t=this.cols.treeDepth,i=(this.controlsCols?.treeDepth??-1)==t,s=this.controlsColService?.createControlsCols()??[];if(Ft(s,this.controlsCols?.list??[])&&i)return;e();const[n,o]=this.columnFactory.balanceTreeForAutoCols(s,this.cols.tree);this.controlsCols={list:s,tree:n,treeDepth:o,map:{}};const r=e=>{if(!e)return null;const t=e.filter((e=>!dt(e)));return[...s,...t]};this.lastOrder=r(this.lastOrder),this.lastPivotOrder=r(this.lastPivotOrder)}addControlsCols(){null!=this.controlsCols&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),Pt(this.cols))}refreshAll(e){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(e))}setColsVisible(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;this.columnApplyStateService.applyColumnState({state:e.map((e=>({colId:"string"===typeof e?e:e.getColId(),hide:!t})))},i)}setColsPinned(e,t,i){if(!this.cols)return;if(K(e))return;if(ne(this.gos,"print"))return void F("Changing the column pinning status is not allowed with domLayout='print'");let s;this.columnAnimationService.start(),s=!0===t||"left"===t?"left":"right"===t?"right":null;const n=[];e.forEach((e=>{if(!e)return;const t=this.getCol(e);t&&t.getPinned()!==s&&(t.setPinned(s),n.push(t))})),n.length&&(this.visibleColsService.refresh(i),this.eventDispatcher.columnPinned(n,i)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let s;s=it(e)?e.getId():e||"",this.columnGroupStateService.setColumnGroupState([{groupId:s,open:t}],i)}getProvidedColGroup(e){let t=null;return Lt(null,this.cols?.tree,(i=>{it(i)&&i.getId()===e&&(t=i)})),t}isColGroupLocked(e){const t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||0===t)return!1;if(-1===t)return!0;return t>this.funcColsService.getRowGroupColumns().findIndex((t=>t.getColId()===e.getColId()))}isSuppressAutoCol(){if("custom"===this.gos.get("groupDisplayType"))return!0;return"custom"===this.gos.get("treeDataDisplayType")}setAutoHeightActive(){if(this.autoHeightActive=this.cols.list.some((e=>e.isVisible()&&e.isAutoHeight())),this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;ie(this.gos)||se(this.gos)||F("autoHeight columns only work with Client Side Row Model and Server Side Row Model.")}}restoreColOrder(){const e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;const t=new Map(e.map(((e,t)=>[e,t])));if(!this.cols.list.some((e=>t.has(e))))return;const i=new Map(this.cols.list.map((e=>[e,!0]))),s=e.filter((e=>i.has(e))),n=new Map(s.map((e=>[e,!0]))),o=this.cols.list.filter((e=>!n.has(e))),r=s.slice();o.forEach((e=>{let t=e.getOriginalParent();if(!t)return void r.push(e);const i=[];for(;!i.length&&t;){t.getLeafColumns().forEach((e=>{const t=r.indexOf(e)>=0,s=i.indexOf(e)<0;t&&s&&i.push(e)})),t=t.getOriginalParent()}if(!i.length)return void r.push(e);const s=i.map((e=>r.indexOf(e))),n=Math.max(...s);We(r,e,n+1)})),this.cols.list=r}sortColsLikeKeys(e){if(null==this.cols)return;let t=[];const i={};e.forEach((e=>{if(i[e])return;const s=this.cols.map[e];s&&(t.push(s),i[e]=!0)}));let s=0;this.cols.list.forEach((e=>{const n=e.getColId();if(null!=i[n])return;n.startsWith(rt)?We(t,e,s++):t.push(e)})),t=this.columnMoveService.placeLockedColumns(t),this.columnMoveService.doesMovePassMarryChildren(t)?this.cols.list=t:F("Applying column order broke a group where columns should be married together. Applying new order has been discarded.")}sortColsLikeCols(e){if(!e||e.length<=1)return;e.filter((e=>this.cols.list.indexOf(e)<0)).length>0||e.sort(((e,t)=>this.cols.list.indexOf(e)-this.cols.list.indexOf(t)))}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const s=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(s,i,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach((e=>e())),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,i){Ue(this.cols?.list,e,t),this.visibleColsService.refresh(i)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list:this.lastOrder=this.cols?.list}getColumnDefs(){if(!this.colDefCols)return;const e=this.colDefCols.list.slice();this.showingPivotResult?e.sort(((e,t)=>this.lastOrder.indexOf(e)-this.lastOrder.indexOf(t))):this.lastOrder&&e.sort(((e,t)=>this.cols.list.indexOf(e)-this.cols.list.indexOf(t)));const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,i)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){return this.colDefCols?.treeDepth>0}setColSpanActive(){this.colSpanActive=this.cols.list.some((e=>null!=e.getColDef().colSpan))}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)&&(this.pivotMode=e,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return!e||!this.gos.get("treeData")||(F("Pivot mode not available with treeData."),!1)}isPivotActive(){const e=this.funcColsService.getPivotColumns();return this.pivotMode&&!K(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(e))}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){ct(this.context,this.colDefCols?.tree),ct(this.context,this.autoCols?.tree),ct(this.context,this.controlsCols?.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){return this.colDefCols?.list?this.colDefCols.list:null}getCols(){return this.cols?.list??[]}getAllCols(){const e=this.pivotResultColsService.getPivotResultCols(),t=e?.list;return[this.colDefCols?.list??[],this.autoCols?.list??[],this.controlsCols?.list??[],t??[]].flat()}getColsForKeys(e){return e?e.map((e=>this.getCol(e))).filter((e=>null!=e)):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return null==e?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(null==t)return null;const{map:i,list:s}=t;if("string"==typeof e&&i[e])return i[e];for(let n=0;n<s.length;n++)if(Nt(s[n],e))return s[n];return this.getAutoCol(e)}getAutoCol(e){return this.autoCols?.list.find((t=>Nt(t,e)))??null}getAutoCols(){return this.autoCols?.list??null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&(e.isColumn?this.eventDispatcher.headerHeight(e):this.eventDispatcher.groupHeaderHeight(e))}getGroupRowsHeight(){const e=[],t=this.ctrlsService.getHeaderRowContainerCtrls();for(const i of t){if(!i)continue;const t=i.getGroupRowCount()||0;for(let s=0;s<t;s++){const t=i.getGroupRowCtrlAtIndex(s),n=e[s];if(t){const i=this.getColumnGroupHeaderRowHeight(t);(null==n||i>n)&&(e[s]=i)}}}return e}getColumnGroupHeaderRowHeight(e){const t=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight();let i=0;const s=e.getHeaderCtrls();for(const n of s){const e=n.getColumn();if(e.isAutoHeaderHeight()){const t=e.getAutoHeaderHeight();null!=t&&t>i&&(i=t)}}return Math.max(t,i)}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.visibleColsService.getAllCols().filter((e=>e.isAutoHeaderHeight())).map((e=>e.getAutoHeaderHeight()||0));return Math.max(e,...t)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if("fitCellContents"!==e?.type)return;const{colIds:t,skipHeader:i}=e;setTimeout((()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",i)}))}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}onSelectionOptionsChanged(e,t,i){const s=(t&&"string"!==typeof t?Re(t):void 0)!==(e&&"string"!==typeof e?Re(e):void 0),n=t&&"string"!==typeof t?Ee(t):void 0,o=e&&"string"!==typeof e?Ee(e):void 0;(s||n!==o)&&this.refreshAll(i)}};function Tt(e){return"gridOptionsUpdated"===e?"gridOptionsChanged":e}function Pt(e){e.map={},e.list.forEach((t=>e.map[t.getId()]=t))}function Nt(e,t){const i=e===t,s=e.getColDef()===t,n=e.getColId()==t;return i||s||n}function Ft(e,t){return He(e,t,((e,t)=>e.getColId()===t.getColId()))}var Ot=class extends tt{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation((()=>this.autoSizeCols(e)));const{colKeys:t,skipHeader:i,skipHeaderGroups:s,stopAtGroup:n,source:o="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered())return this.timesDelayed++,void setTimeout((()=>this.autoSizeCols(e)));this.timesDelayed=0;const r=[];let a=-1;const l=null!=i?i:this.gos.get("skipHeaderOnAutoSize"),c=null!=s?s:l;for(;0!==a;){a=0;const e=[];t.forEach((t=>{if(!t)return;const i=this.columnModel.getCol(t);if(!i)return;if(r.indexOf(i)>=0)return;const s=this.autoWidthCalculator.getPreferredWidthForColumn(i,l);if(s>0){const e=this.normaliseColumnWidth(i,s);i.setActualWidth(e,o),r.push(i),a++}e.push(i)})),e.length&&this.visibleColsService.refresh(o)}c||this.autoSizeColumnGroupsByColumns(t,o,n),this.eventDispatcher.columnResized(r,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const s=new Set;let n;this.columnModel.getColsForKeys(e).forEach((e=>{let t=e.getParent();for(;t&&t!=i;)t.isPadding()||s.add(t),t=t.getParent()}));for(const o of s){for(const e of this.ctrlsService.getHeaderRowContainerCtrls())if(n=e.getHeaderCtrlForColumn(o),n)break;n&&n.resizeLeafColumnsToFit(t)}return[]}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation((()=>this.autoSizeAllColumns(e,t)));const i=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}normaliseColumnWidth(e,t){const i=e.getMinWidth();t<i&&(t=i);const s=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=s),t}},Gt=class extends tt{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>je(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>je(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>je(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(!0===t)return this.rowGroupCols.slice(0);const i=this.columnModel.getColDefCol(t);return i?[i]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return K(this.rowGroupCols)}setColumnAggFunc(e,t,i){if(!e)return;const s=this.columnModel.getColDefCol(e);s&&(s.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[s],i))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,((e,i)=>this.setRowGroupActive(e,i,t)),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,i),e||this.gos.get("suppressMakeColumnVisibleAfterUnGroup")||this.columnModel.setColsVisible([t],!0,i))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,(e=>this.setRowGroupActive(!0,e,t)),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,(e=>this.setRowGroupActive(!1,e,t)),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,(e=>e.setPivotActive(!0,t)),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,((e,i)=>{i.setPivotActive(e,t)}),t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,(e=>e.setPivotActive(!1,t)),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,((e,i)=>this.setValueActive(e,i,t)),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc()&&this.aggFuncService)){const e=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(e)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,(e=>this.setValueActive(!0,e,t)),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,(e=>this.setValueActive(!1,e,t)),"columnValueChanged",t)}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;const s=this.rowGroupCols[e],n=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,s),this.eventDispatcher.rowGroupChanged(n,i)}setColList(e,t,i,s,n,o,r){if(!this.columnModel.getCols())return;const a=new Map;t.forEach(((e,t)=>a.set(e,t))),t.length=0,_(e)&&e.forEach((e=>{const i=this.columnModel.getColDefCol(e);i&&t.push(i)})),t.forEach(((e,t)=>{const i=a.get(e);void 0!==i?s&&i!==t||a.delete(e):a.set(e,0)}));(this.columnModel.getColDefCols()||[]).forEach((e=>{const i=t.indexOf(e)>=0;o(i,e)})),n&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(r),this.eventDispatcher.columnChanged(i,[...a.keys()],r)}updateColList(e,t,i,s,n,o,r){if(!e||K(e))return;let a=!1;const l=new Set;e.forEach((e=>{if(!e)return;const s=this.columnModel.getColDefCol(e);if(s){if(l.add(s),i){if(t.indexOf(s)>=0)return;t.push(s)}else{const e=t.indexOf(s);if(e<0)return;for(let i=e+1;i<t.length;i++)l.add(t[i]);je(t,s)}n(s),a=!0}})),a&&(s&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(r),this.eventDispatcher.genericColumnEvent(o,Array.from(l),r))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,((t,i)=>t.setValueActive(i,e)),(()=>{}),(()=>{}),(e=>{const t=e.aggFunc;return null===t||""===t?null:void 0!==t?!!t:void 0}),(e=>null!=e.initialAggFunc&&""!=e.initialAggFunc)),this.valueCols.forEach((e=>{const t=e.getColDef();null!=t.aggFunc&&""!=t.aggFunc?e.setAggFunc(t.aggFunc):e.getAggFunc()||e.setAggFunc(t.initialAggFunc)}))}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,((t,i)=>t.setRowGroupActive(i,e)),(e=>e.rowGroupIndex),(e=>e.initialRowGroupIndex),(e=>e.rowGroup),(e=>e.initialRowGroup))}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,((t,i)=>t.setPivotActive(i,e)),(e=>e.pivotIndex),(e=>e.initialPivotIndex),(e=>e.pivot),(e=>e.initialPivot))}extractColsCommon(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;const a=[],l=[];(this.columnModel.getColDefCols()||[]).forEach((i=>{const c=e.indexOf(i)<0,h=i.getColDef(),d=Q(o(h)),u=Q(r(h)),p=$(s(h)),g=$(n(h));let m;if(m=void 0!==d?d:void 0!==p?null!==p&&p>=0:c?void 0!==u?u:!!(void 0!==g)&&(null!=g&&g>=0):t.indexOf(i)>=0,m){(c?null!=p||null!=g:null!=p)?a.push(i):l.push(i)}}));const c=e=>{const t=s(e.getColDef()),i=n(e.getColDef());return null!=t?t:i};a.sort(((e,t)=>{const i=c(e),s=c(t);return i===s?0:i<s?-1:1}));const h=[].concat(a);return t.forEach((e=>{l.indexOf(e)>=0&&h.push(e)})),l.forEach((e=>{h.indexOf(e)<0&&h.push(e)})),t.forEach((e=>{h.indexOf(e)<0&&i(e,!1)})),h.forEach((e=>{t.indexOf(e)<0&&i(e,!0)})),h}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},s=(e,t,s,n,o,r)=>{const a=this.columnModel.getColDefCols();if(!t.length||!a)return[];const l=Object.keys(e),c=new Set(l),h=new Set(l),d=new Set(t.map((e=>{const t=e.getColId();return h.delete(t),t})).concat(l)),u=[],p={};let g=0;for(let i=0;i<a.length;i++){const e=a[i].getColId();d.has(e)&&(u.push(e),p[e]=g++)}let m=1e3,f=!1,y=0;const v=t=>{const i=p[t];for(let s=y;s<i;s++){const t=u[s];h.has(t)&&(e[t][o]=m++,h.delete(t))}y=i};t.forEach((t=>{const a=t.getColId();if(c.has(a))v(a),e[a][o]=m++;else{const l=t.getColDef();if(null===l[o]||void 0===l[o]&&null==l[r]){if(!f){l[s]||void 0===l[s]&&l[n]?v(a):(h.forEach((t=>{e[t][o]=m+p[t]})),m+=u.length,f=!0)}i[a]||(i[a]={colId:a}),i[a][o]=m++}}}))};return s(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}},Bt=class extends tt{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){const i=this.columnModel.getColDefCols()||[];if(K(i))return!1;if(e&&e.state&&!e.state.forEach)return F("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const s=this.funcColsService.getModifyColumnsNoEventsCallbacks(),n=(i,n,o)=>{const r=this.compareColumnStatesAndDispatchEvents(t),a=n.slice(),l={},c={},h=[],d=[];let u=0;const p=this.funcColsService.getRowGroupColumns().slice(),g=this.funcColsService.getPivotColumns().slice();i.forEach((i=>{const n=i.colId||"";if(n.startsWith(rt))return h.push(i),void d.push(i);const r=o(n);r?(this.syncColumnWithStateItem(r,i,e.defaultState,l,c,!1,t,s),je(a,r)):(d.push(i),u+=1)}));const m=i=>this.syncColumnWithStateItem(i,null,e.defaultState,l,c,!1,t,s);a.forEach(m),this.funcColsService.sortRowGroupColumns(zt.bind(this,l,p)),this.funcColsService.sortPivotColumns(zt.bind(this,c,g)),this.columnModel.refreshCols(!1);const f=(this.columnModel.getAutoCols()||[]).slice();return h.forEach((i=>{const n=this.columnModel.getAutoCol(i.colId);je(f,n),this.syncColumnWithStateItem(n,i,e.defaultState,null,null,!0,t,s)})),f.forEach(m),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),r(),{unmatchedAndAutoStates:d,unmatchedCount:u}};this.columnAnimationService.start();let{unmatchedAndAutoStates:o,unmatchedCount:r}=n(e.state||[],i,(e=>this.columnModel.getColDefCol(e)));if(o.length>0||_(e.defaultState)){const e=this.pivotResultColsService.getPivotResultCols(),t=e?.list;r=n(o,t||[],(e=>this.pivotResultColsService.getPivotResultCol(e))).unmatchedCount}return this.columnAnimationService.finish(),0===r}resetColumnState(e){if(K(this.columnModel.getColDefCols()))return;const t=at(this.columnModel.getColDefColTree()),i=[];let s=1e3,n=1e3,o=[];const r=this.columnModel.getAutoCols();r&&(o=o.concat(r)),t&&(o=o.concat(t)),o.forEach((e=>{const t=this.getColumnStateFromColDef(e);Y(t.rowGroupIndex)&&t.rowGroup&&(t.rowGroupIndex=s++),Y(t.pivotIndex)&&t.pivot&&(t.pivotIndex=n++),i.push(t)})),this.applyColumnState({state:i,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(e,t)=>null!=e?e:null!=t?t:null,i=e.getColDef(),s=t(i.sort,i.initialSort),n=t(i.sortIndex,i.initialSortIndex),o=t(i.hide,i.initialHide),r=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),l=t(i.flex,i.initialFlex);let c=t(i.rowGroupIndex,i.initialRowGroupIndex),h=t(i.rowGroup,i.initialRowGroup);null!=c||null!=h&&0!=h||(c=null,h=null);let d=t(i.pivotIndex,i.initialPivotIndex),u=t(i.pivot,i.initialPivot);null!=d||null!=u&&0!=u||(d=null,u=null);const p=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:s,sortIndex:n,hide:o,pinned:r,width:a,flex:l,rowGroup:h,rowGroupIndex:c,pivot:u,pivotIndex:d,aggFunc:p}}syncColumnWithStateItem(e,t,i,s,n,o,r,a){if(!e)return;const l=(e,s)=>{const n={value1:void 0,value2:void 0};let o=!1;return t&&(void 0!==t[e]&&(n.value1=t[e],o=!0),_(s)&&void 0!==t[s]&&(n.value2=t[s],o=!0)),!o&&i&&(void 0!==i[e]&&(n.value1=i[e]),_(s)&&void 0!==i[s]&&(n.value2=i[s])),n},c=l("hide").value1;void 0!==c&&e.setVisible(!c,r);const h=l("pinned").value1;void 0!==h&&e.setPinned(h);const d=e.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),u=l("flex").value1;if(void 0!==u&&e.setFlex(u),null==u){const t=l("width").value1;null!=t&&null!=d&&t>=d&&e.setActualWidth(t,r)}const p=l("sort").value1;void 0!==p&&("desc"===p||"asc"===p?e.setSort(p,r):e.setSort(void 0,r));const g=l("sortIndex").value1;if(void 0!==g&&e.setSortIndex(g),o||!e.isPrimary())return;const m=l("aggFunc").value1;void 0!==m&&("string"===typeof m?(e.setAggFunc(m),e.isValueActive()||(e.setValueActive(!0,r),a.addValueCol(e))):(_(m)&&F("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,r),a.removeValueCol(e))));const{value1:f,value2:y}=l("rowGroup","rowGroupIndex");void 0===f&&void 0===y||("number"===typeof y||f?(e.isRowGroupActive()||(e.setRowGroupActive(!0,r),a.addGroupCol(e)),s&&"number"===typeof y&&(s[e.getId()]=y)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,r),a.removeGroupCol(e)));const{value1:v,value2:C}=l("pivot","pivotIndex");void 0===v&&void 0===C||("number"===typeof C||v?(e.isPivotActive()||(e.setPivotActive(!0,r),a.addPivotCol(e)),n&&"number"===typeof C&&(n[e.getId()]=C)):e.isPivotActive()&&(e.setPivotActive(!1,r),a.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;const t=[];e.state.forEach((e=>{null!=e.colId&&t.push(e.colId)})),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},i=this.columnGetStateService.getColumnState(),s={};return i.forEach((e=>{s[e.colId]=e})),()=>{const n=this.columnModel.getAllCols(),o=(t,i,s,n)=>{if(He(i.map(n),s.map(n)))return;const o=new Set(i);s.forEach((e=>{o.delete(e)||o.add(e)}));const r=[...o];this.eventService.dispatchEvent({type:t,columns:r,column:1===r.length?r[0]:null,source:e})},r=e=>{const t=[];return n.forEach((i=>{const n=s[i.getColId()];n&&e(n,i)&&t.push(i)})),t},a=e=>e.getColId();o("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),a),o("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),a);const l=r(((e,t)=>{const i=null!=e.aggFunc,s=i!=t.isValueActive(),n=i&&e.aggFunc!=t.getAggFunc();return s||n}));l.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",l,e);this.eventDispatcher.columnResized(r(((e,t)=>e.width!=t.getActualWidth())),!0,e);this.eventDispatcher.columnPinned(r(((e,t)=>e.pinned!=t.getPinned())),e);this.eventDispatcher.columnVisible(r(((e,t)=>e.hide==t.isVisible())),e);const c=r(((e,t)=>e.sort!=t.getSort()||e.sortIndex!=t.getSortIndex()));c.length>0&&this.sortController.dispatchSortChangedEvents(e,c),this.normaliseColumnMovedEventForColumnState(i,e)}}normaliseColumnMovedEventForColumnState(e,t){const i=this.columnGetStateService.getColumnState(),s={};i.forEach((e=>s[e.colId]=e));const n={};e.forEach((e=>{s[e.colId]&&(n[e.colId]=!0)}));const o=e.filter((e=>n[e.colId])),r=i.filter((e=>n[e.colId])),a=[];r.forEach(((e,t)=>{const i=o&&o[t];if(i&&i.colId!==e.colId){const e=this.columnModel.getCol(i.colId);e&&a.push(e)}})),a.length&&this.eventDispatcher.columnMoved({movedColumns:a,source:t,finished:!0})}},zt=(e,t,i,s)=>{const n=e[i.getId()],o=e[s.getId()],r=null!=n,a=null!=o;if(r&&a)return n-o;if(r)return-1;if(a)return 1;const l=t.indexOf(i),c=t.indexOf(s),h=l>=0;return h&&c>=0?l-c:h?-1:1},Ht=class extends tt{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,i){const s=this.columnModel.getCols();if(!s)return;const n=s[e];this.moveColumns([n],t,i)}moveColumns(e,t,i){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const n=this.columnModel.getCols();if(!n)return;if(t>n.length-e.length)return F("tried to insert columns in invalid location, toIndex = ",t),void F("remember that you should not count the moving columns when calculating the new index");this.columnAnimationService.start();const o=this.columnModel.getColsForKeys(e);this.doesMovePassRules(o,t)&&(this.columnModel.moveInCols(o,t,i),this.eventDispatcher.columnMoved({movedColumns:o,source:i,toIndex:t,finished:s})),this.columnAnimationService.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!!this.doesMovePassMarryChildren(e)&&!!this.doesMovePassLockedPositions(e)}getProposedColumnOrder(e,t){const i=this.columnModel.getCols().slice();return Ue(i,e,t),i}doesMovePassLockedPositions(e){const t=this.gos.get("enableRtl");let i=t?1:-1,s=!0;return e.forEach((e=>{const n=(o=e.getColDef().lockPosition)?"left"===o||!0===o?-1:1:0;var o;t?n>i&&(s=!1):n<i&&(s=!1),i=n})),s}doesMovePassMarryChildren(e){let t=!0;return Lt(null,this.columnModel.getColTree(),(i=>{if(!it(i))return;const s=i,n=s.getColGroupDef();if(!(n&&n.marryChildren))return;const o=[];s.getLeafColumns().forEach((t=>{const i=e.indexOf(t);o.push(i)}));Math.max.apply(Math,o)-Math.min.apply(Math,o)>s.getLeafColumns().length-1&&(t=!1)})),t}placeLockedColumns(e){const t=[],i=[],s=[];e.forEach((e=>{const n=e.getColDef().lockPosition;"right"===n?s.push(e):"left"===n||!0===n?t.push(e):i.push(e)}));return this.gos.get("enableRtl")?[...s,...i,...t]:[...t,...i,...s]}},Vt=/[&<>"']/g,jt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Wt(e){const t=String.fromCharCode;function i(e,i){return t(e>>i&63|128)}function s(e){if(0==(4294967168&e))return t(e);let s="";return 0==(4294965248&e)?s=t(e>>6&31|192):0==(4294901760&e)?(!function(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}(e),s=t(e>>12&15|224),s+=i(e,6)):0==(4292870144&e)&&(s=t(e>>18&7|240),s+=i(e,12),s+=i(e,6)),s+=t(63&e|128),s}const n=function(e){const t=[];if(!e)return[];const i=e.length;let s,n,o=0;for(;o<i;)s=e.charCodeAt(o++),s>=55296&&s<=56319&&o<i?(n=e.charCodeAt(o++),56320==(64512&n)?t.push(((1023&s)<<10)+(1023&n)+65536):(t.push(s),o--)):t.push(s);return t}(e),o=n.length;let r,a=-1,l="";for(;++a<o;)r=n[a],l+=s(r);return l}function Ut(e,t){if(null==e)return null;const i=e.toString().toString();return t?i:i.replace(Vt,(e=>jt[e]))}var _t=class extends tt{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;const s=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,s):s}getDisplayNameForProvidedColumnGroup(e,t,i){const s=t?t.getColGroupDef():null;return s?this.getHeaderName(s,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,s,n){const o=e.headerValueGetter;if(o){const r=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:s,location:n});return"function"===typeof o?o(r):"string"===typeof o?this.expressionService.evaluate(o,r):(F("headerValueGetter must be a function or a string"),"")}return null!=e.headerName?e.headerName:e.field?(r=e.field)&&null!=r?r.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map((e=>e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):""))).join(" "):null:"";var r}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const i=e.getColDef().pivotValueColumn;let s,n=null;if(_(i)){const o=this.funcColsService.getValueColumns(),r=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&1===o.length,a=void 0!==e.getColDef().pivotTotalColumnIds;if(r&&!a)return t;n=i?i.getAggFunc():null,s=!0}else{const t=e.isValueActive(),i=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();t&&i?(n=e.getAggFunc(),s=!0):s=!1}if(s){const e="string"===typeof n?n:"func";return`${this.localeService.getLocaleTextFunc()(e,e)}(${t})`}return t}},Yt=class extends tt{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){ct(this.context,this.pivotResultCols?.tree),super.destroy()}isPivotResultColsPresent(){return null!=this.pivotResultCols}lookupPivotResultCol(e,t){if(null==this.pivotResultCols)return null;const i=this.columnModel.getColDefCol(t);let s=null;return this.pivotResultCols.list.forEach((t=>{const n=t.getColDef().pivotKeys,o=t.getColDef().pivotValueColumn;He(n,e)&&o===i&&(s=t)})),s}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.columnModel.isReady()&&(null!=e||null!=this.pivotResultCols)){if(e){this.processPivotResultColDef(e);const i=this.columnFactory.createColumnTree(e,!1,this.pivotResultCols?.tree||this.previousPivotResultCols||void 0,t);ct(this.context,this.pivotResultCols?.tree,i.columnTree);const s=i.columnTree,n=i.treeDept,o=at(s),r={};this.pivotResultCols={tree:s,treeDepth:n,list:o,map:r},this.pivotResultCols.list.forEach((e=>this.pivotResultCols.map[e.getId()]=e));const a=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!a)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(t)}}processPivotResultColDef(e){const t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;const s=e=>{e.forEach((e=>{if(_(e.children)){const t=e;i&&i(t),s(t.children)}else{t&&t(e)}}))};e&&s(e)}},Kt=class extends tt{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,i,s){const n=[];e.forEach((e=>{const i=this.columnModel.getColDefCol(e.key)||this.columnModel.getCol(e.key);if(!i)return;n.push({width:e.newWidth,ratios:[1],columns:[i]});if("shift"===this.gos.get("colResizeDefault")&&(t=!t),t){const t=this.visibleColsService.getColAfter(i);if(!t)return;const s=i.getActualWidth()-e.newWidth,o=t.getActualWidth()+s;n.push({width:o,ratios:[1],columns:[t]})}})),0!==n.length&&this.resizeColumnSets({resizeSets:n,finished:i,source:s})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:s}=e;if(!(!t||t.every((e=>this.checkMinAndMaxWidthsForSet(e))))){if(i){const e=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(e,i,s)}return}const n=[],o=[];t.forEach((e=>{const{width:t,columns:i,ratios:r}=e,a={},l={};i.forEach((e=>o.push(e)));let c=!0,h=0;for(;c;){if(h++,h>1e3){O("infinite loop in resizeColumnSets");break}c=!1;const e=[];let s=0,n=t;i.forEach(((t,i)=>{if(l[t.getId()])n-=a[t.getId()];else{e.push(t);const n=r[i];s+=n}}));const o=1/s;e.forEach(((i,s)=>{let h;s===e.length-1?h=n:(h=Math.round(r[s]*t*o),n-=h);const d=i.getMinWidth(),u=i.getMaxWidth();h<d?(h=d,l[i.getId()]=!0,c=!0):u>0&&h>u&&(h=u,l[i.getId()]=!0,c=!0),a[i.getId()]=h}))}i.forEach((e=>{const t=a[e.getId()];e.getActualWidth()!==t&&(e.setActualWidth(t,s),n.push(e))}))}));const r=n.length>0;let a=[];r&&(a=this.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0}),this.visibleColsService.setLeftValues(s),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());const l=o.concat(a);(r||i)&&this.eventDispatcher.columnResized(l,i,s,a)}checkMinAndMaxWidthsForSet(e){const{columns:t,width:i}=e;let s=0,n=0,o=!0;t.forEach((e=>{const t=e.getMinWidth();s+=t||0;const i=e.getMaxWidth();i>0?n+=i:o=!1}));return i>=s&&(!o||i<=n)}refreshFlexedColumns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.source?e.source:"flex";if(null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];const i=this.visibleColsService.getCenterCols();let s=-1;if(e.resizingCols){const t=new Set(e.resizingCols);for(let e=i.length-1;e>=0;e--)if(t.has(i[e])){s=e;break}}let n=0,o=[],r=0,a=0;for(let u=0;u<i.length;u++){i[u].getFlex()&&u>s?(o.push(i[u]),a+=i[u].getFlex(),r+=i[u].getMinWidth()):n+=i[u].getActualWidth()}if(!o.length)return[];let l=[];n+r>this.flexViewportWidth&&(o.forEach((e=>e.setActualWidth(e.getMinWidth(),t))),l=o,o=[]);const c=[];let h;e:for(;;){h=this.flexViewportWidth-n;const e=h/a;for(let i=0;i<o.length;i++){const s=o[i],r=e*s.getFlex();let h=0;const d=s.getMinWidth(),u=s.getMaxWidth();if(r<d?h=d:r>u&&(h=u),h){s.setActualWidth(h,t),Ve(o,s),a-=s.getFlex(),l.push(s),n+=s.getActualWidth();continue e}c[i]=Math.floor(r)}break}let d=h;return o.forEach(((e,i)=>{const s=i<o.length-1?Math.min(c[i],d):Math.max(c[i],d);e.setActualWidth(s,t),l.push(e),d-=c[i]})),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(l,!0,t,o),o}sizeColumnsToFit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sizeColumnsToFit",i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation((()=>this.sizeColumnsToFit(e,t,i,s)));const n={};s&&s?.columnLimits?.forEach((e=>{let{key:t,...i}=e;n["string"===typeof t?t:t.getColId()]=i}));const o=this.visibleColsService.getAllCols(),r=e===lt(o);if(e<=0||!o.length||r)return;const a=[],l=[];o.forEach((e=>{!0===e.getColDef().suppressSizeToFit?l.push(e):a.push(e)}));const c=a.slice(0);let h=!1;const d=e=>{je(a,e),l.push(e)};for(a.forEach((e=>{e.resetActualWidth(t);const i=n?.[e.getId()],o=i?.minWidth??s?.defaultMinWidth,r=i?.maxWidth??s?.defaultMaxWidth,a=e.getActualWidth();"number"===typeof o&&a<o?e.setActualWidth(o,t,!0):"number"===typeof r&&a>r&&e.setActualWidth(r,t,!0)}));!h;){h=!0;const i=e-lt(l);if(i<=0)a.forEach((e=>{const i=n?.[e.getId()]?.minWidth??s?.defaultMinWidth;"number"!==typeof i?e.setMinimum(t):e.setActualWidth(i,t,!0)}));else{const e=i/lt(a);let o=i;for(let i=a.length-1;i>=0;i--){const r=a[i],l=n?.[r.getId()],c=l?.minWidth??s?.defaultMinWidth,u=l?.maxWidth??s?.defaultMaxWidth,p=r.getMinWidth(),g=r.getMaxWidth(),m="number"===typeof c&&c>p?c:p,f="number"===typeof u&&u<g?u:g;let y=Math.round(r.getActualWidth()*e);y<m?(y=m,d(r),h=!1):y>f?(y=f,d(r),h=!1):0===i&&(y=o),r.setActualWidth(y,t,!0),o-=y}}}c.forEach((e=>{e.fireColumnWidthChangedEvent(t)})),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),i||this.eventDispatcher.columnResized(c,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout((()=>{if("fitGridWidth"===t){const{columnLimits:t,defaultMinWidth:i,defaultMaxWidth:s}=e,n=t?.map((e=>{let{colId:t,minWidth:i,maxWidth:s}=e;return{key:t,minWidth:i,maxWidth:s}}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:i,defaultMaxWidth:s,columnLimits:n})}else"fitProvidedWidth"===t&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")}))}};function Zt(e,t){return e+"_"+t}function $t(e){return e instanceof Qt}var Qt=class extends tt{constructor(e,t,i,s){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=s}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return Zt(this.groupId,this.partId)}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!(!e||0===e.length)&&e.every((e=>e.isMoving()))}checkLeft(){if(this.displayedChildren.forEach((e=>{$t(e)&&e.checkLeft()})),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const e=ze(this.displayedChildren).getLeft();this.setLeft(e)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach((t=>{e+=t.getActualWidth()})),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach((t=>{t.isResizable()&&(e=!0)})),e}getMinWidth(){let e=0;return this.displayedChildren.forEach((t=>{e+=t.getMinWidth()})),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach((t=>{Dt(t)?e.push(t):$t(t)&&t.addDisplayedLeafColumns(e)}))}addLeafColumns(e){this.children.forEach((t=>{Dt(t)?e.push(t):$t(t)&&t.addLeafColumns(e)}))}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return this.isPadding()&&e&&e.isPadding()?1+e.getPaddingLevel():0}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;null!=e&&e.isPadding();)e=e.getParent();if(!(!!e&&e.getProvidedColumnGroup().isExpandable()))return this.displayedChildren=this.children,void this.dispatchLocalEvent({type:"displayedChildrenChanged"});this.children.forEach((t=>{if($t(t)&&(!t.displayedChildren||!t.displayedChildren.length))return;switch(t.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(t);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(t);break;default:this.displayedChildren.push(t)}})),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},Xt=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return i="number"!==typeof t?0:t+1,this.existingIds[e]=i,i}},qt=class extends tt{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=ei(this.treeLeft),this.columnsCenter=ei(this.treeCenter),this.columnsRight=ei(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter((e=>e.isAutoHeight())),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols(e)}updateBodyWidths(){const e=lt(this.columnsCenter),t=lt(this.columnsLeft),i=lt(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e;(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,i;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,i=this.columnsRight?ze(this.columnsRight):null):(t=this.columnsLeft?ze(this.columnsLeft):null,i=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach((s=>{s.setLastLeftPinned(s===t,e),s.setFirstRightPinned(s===i,e)}))}buildTrees(){const e=this.columnModel.getColsToShow(),t=e.filter((e=>"left"==e.getPinned())),i=e.filter((e=>"right"==e.getPinned())),s=e.filter((e=>"left"!=e.getPinned()&&"right"!=e.getPinned())),n=new Xt;this.treeLeft=this.createGroups({columns:t,idCreator:n,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:i,idCreator:n,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:s,idCreator:n,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){const e=this.columnModel.getCols(),t=[],i=[],s=[];for(const n of e){const e=n.getPinned();e?!0===e||"left"===e?t.push(n):s.push(n):i.push(n)}this.ariaOrderColumns=t.concat(i).concat(s)}getAriaColIndex(e){let t;return t=$t(e)?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach((e=>{e.forEach((e=>{if($t(e)){e.checkLeft()}}))}))}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;const t=this.columnModel.getCols().slice(0),i=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach((s=>{if(i){let t=lt(s);s.forEach((i=>{t-=i.getActualWidth(),i.setLeft(t,e)}))}else{let t=0;s.forEach((i=>{i.setLeft(t,e),t+=i.getActualWidth()}))}!function(e,t){for(let i=0;i<t.length;i++)Ve(e,t[i])}(t,s)})),t.forEach((t=>{t.setLeft(null,e)}))}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,i,s){const n=[];let o=null;for(let r=0;r<t.length;r++){const a=t[r],l=t.length-r,c=Math.min(a.getColSpan(e),l),h=[a];if(c>1){const e=c-1;for(let i=1;i<=e;i++)h.push(t[r+i]);r+=e}let d;if(i?(d=!1,h.forEach((e=>{i(e)&&(d=!0)}))):d=!0,d){if(0===n.length&&o){!!s&&s(a)&&n.push(o)}n.push(a)}o=a}return n}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){const t=this.getAllCols(),i=t.indexOf(e);return i>0?t[i-1]:null}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),s=e.getDisplayedLeafColumns(),n="After"===t?ze(s):s[0],o=`getCol${t}`;for(;;){const t=this[o](n);if(!t)return null;const s=this.getColGroupAtLevel(t,i);if(s!==e)return s}}getColGroupAtLevel(e,t){let i,s,n=e.getParent();for(;;){if(i=n.getProvidedColumnGroup().getLevel(),s=n.getPaddingLevel(),i+s<=t)break;n=n.getParent()}return n}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};Jt(this.treeCenter,!1,e),Jt(this.treeLeft,!1,e),Jt(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){Jt(this.getAllTrees(),!1,(e=>{$t(e)&&e.calculateDisplayedColumns()}))}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const s=this[t[i]]();if(s.length)return e?ze(s):s[0]}return null}getColumnGroup(e,t){if(!e)return null;if($t(e))return e;const i=this.getAllTrees(),s="number"===typeof t;let n=null;return Jt(i,!1,(i=>{if($t(i)){const o=i;let r;r=s?e===o.getGroupId()&&t===o.getPartId():e===o.getGroupId(),r&&(n=o)}})),n}getColAfter(e){const t=this.getAllCols(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return lt(this.columnsLeft)}getDisplayedColumnsRightWidth(){return lt(this.columnsRight)}isColAtEdge(e,t){const i=this.getAllCols();if(!i.length)return!1;const s="first"===t;let n;if($t(e)){const t=e.getDisplayedLeafColumns();if(!t.length)return!1;n=s?t[0]:ze(t)}else n=e;return(s?i[0]:ze(i))===n}createGroups(e){const{columns:t,idCreator:i,pinned:s,oldDisplayedGroups:n,isStandaloneStructure:o}=e,r=this.mapOldGroupsById(n),a=[];let l=t;for(;l.length;){const e=l;l=[];let t=0;const n=n=>{const c=t;t=n;const h=e[c],d=($t(h)?h.getProvidedColumnGroup():h).getOriginalParent();if(null==d){for(let t=c;t<n;t++)a.push(e[t]);return}const u=this.createColGroup(d,i,r,s,o);for(let t=c;t<n;t++)u.addChild(e[t]);l.push(u)};for(let i=1;i<e.length;i++){const s=e[i],o=($t(s)?s.getProvidedColumnGroup():s).getOriginalParent(),r=e[t];o!==($t(r)?r.getProvidedColumnGroup():r).getOriginalParent()&&n(i)}t<e.length&&n(e.length)}return o||this.setupParentsIntoCols(a,null),a}createColGroup(e,t,i,s,n){const o=e.getGroupId(),r=t.getInstanceIdForKey(o);let a=i[Zt(o,r)];return a&&a.getProvidedColumnGroup()!==e&&(a=null),_(a)?a.reset():(a=new Qt(e,o,r,s),n||this.createBean(a)),a}mapOldGroupsById(e){const t={},i=e=>{e.forEach((e=>{if($t(e)){const s=e;t[e.getUniqueId()]=s,i(s.getChildren())}}))};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach((e=>{if(e.setParent(t),$t(e)){const t=e;this.setupParentsIntoCols(t.getChildren(),t)}}))}};function Jt(e,t,i){if(e)for(let s=0;s<e.length;s++){const n=e[s];if($t(n)){Jt(t?n.getDisplayedChildren():n.getChildren(),t,i)}i(n)}}function ei(e){const t=[];return Jt(e,!0,(e=>{Dt(e)&&t.push(e)})),t}var ti=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],ii=[...ti,"scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],si={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},ni=class{};ni.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"],ni.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"],ni.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],ni.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"],ni.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"],ni.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"],ni.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"],ni.ALL_PROPERTIES=[...ni.ARRAY_PROPERTIES,...ni.OBJECT_PROPERTIES,...ni.STRING_PROPERTIES,...ni.NUMBER_PROPERTIES,...ni.FUNCTION_PROPERTIES,...ni.BOOLEAN_PROPERTIES,...ni.OTHER_PROPERTIES];var oi=ni,ri=class{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}};ri.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY",ri.PUBLIC_EVENTS=ti,ri.EVENT_CALLBACKS=ii.map((e=>ri.getCallbackForEvent(e))),ri.BOOLEAN_PROPERTIES=oi.BOOLEAN_PROPERTIES,ri.ALL_PROPERTIES=oi.ALL_PROPERTIES,ri.ALL_PROPERTIES_AND_CALLBACKS=[...ri.ALL_PROPERTIES,...ri.EVENT_CALLBACKS],ri.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(ri.ALL_PROPERTIES_AND_CALLBACKS);var ai=ri;var li=class extends tt{};function ci(e,t,i){return i&&e.addDestroyFunc((()=>t.destroyBean(i))),i??e}var hi,di,ui,pi,gi,mi,fi,yi,vi,Ci,bi=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1)return void t.forEach((e=>this.addCssClass(e)));if(!0!==this.cssClassStates[e]&&e.length){const t=this.getGui();t&&t.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1)return void t.forEach((e=>this.removeCssClass(e)));if(!1!==this.cssClassStates[e]&&e.length){const t=this.getGui();t&&t.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return!!t&&t.classList.contains(e)}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const i=(e||"").split(" ");if(i.length>1)return void i.forEach((e=>this.addOrRemoveCssClass(e,t)))}if(this.cssClassStates[e]!==t&&e.length){const i=this.getGui();i&&i.classList.toggle(e,t),this.cssClassStates[e]=t}}};function wi(e,t,i){null==i||"string"===typeof i&&""==i?xi(e,t):Si(e,t,i)}function Si(e,t,i){e.setAttribute(Mi(t),i.toString())}function xi(e,t){e.removeAttribute(Mi(t))}function Mi(e){return`aria-${e}`}function Di(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function Ii(e,t){wi(e,"label",t)}function Ri(e,t){wi(e,"labelledby",t)}function Ei(e,t){wi(e,"live",t)}function Ai(e,t){wi(e,"hidden",t)}function Li(e,t){Si(e,"expanded",t)}function ki(e,t){Si(e,"rowcount",t)}function Ti(e,t){Si(e,"rowindex",t)}function Pi(e,t){Si(e,"colcount",t)}function Ni(e,t){Si(e,"colindex",t)}function Fi(e,t){Si(e,"sort",t)}function Oi(e){xi(e,"sort")}function Gi(e,t){wi(e,"selected",t)}function Bi(e,t){return void 0===t?e("ariaIndeterminate","indeterminate"):!0===t?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}function zi(){return void 0===hi&&(hi=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),hi}function Hi(){if(void 0===di)if(zi()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(di=null!=e[1]?parseFloat(e[1]):0)}else di=0;return di}function Vi(){if(void 0===ui){const e=window;ui=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return ui}function ji(){return void 0===pi&&(pi=/(firefox)/i.test(navigator.userAgent)),pi}function Wi(){return void 0===gi&&(gi=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),gi}function Ui(){return void 0===mi&&(mi=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),mi}function _i(){return!zi()||Hi()>=15}function Yi(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return-1!==t||null!==i&&(""!==i||ji())?t.toString():null}function Ki(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;0===i&&0===t.clientWidth&&(i=null),t.parentNode&&t.parentNode.removeChild(t),null!=i&&(yi=i,fi=0===i)}function Zi(){return null==fi&&Ki(),fi}var $i="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Qi(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),s=t.call(e,$i),n=us(e);return i&&!s&&n}function Xi(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:s}=i;e.classList.toggle("ag-hidden",!t),s||Ai(e,!t)}function qi(e,t){const i="disabled",s=t?e=>e.setAttribute(i,""):e=>e.removeAttribute(i);s(e),bs(e.querySelectorAll("input"),(e=>s(e)))}function Ji(e,t,i){let s=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,"number"==typeof i){if(++s>i)break}else if(e===i)break}return!1}function es(e){const{height:t,width:i,borderTopWidth:s,borderRightWidth:n,borderBottomWidth:o,borderLeftWidth:r,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:h,marginTop:d,marginRight:u,marginBottom:p,marginLeft:g,boxSizing:m}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(n||"0"),borderBottomWidth:parseFloat(o||"0"),borderLeftWidth:parseFloat(r||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(h||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(u||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(g||"0"),boxSizing:m}}function ts(e){const t=es(e);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom:t.height}function is(e){const t=es(e);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight:t.width}function ss(e){const{height:t,marginBottom:i,marginTop:s}=es(e);return Math.floor(t+i+s)}function ns(e){const{width:t,marginLeft:i,marginRight:s}=es(e);return Math.floor(t+i+s)}function os(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:s,borderRightWidth:n,borderBottomWidth:o}=es(e);return{top:t.top+(i||0),left:t.left+(s||0),right:t.right+(n||0),bottom:t.bottom+(o||0)}}function rs(){if("boolean"===typeof Ci)return Ci;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(e),e.scrollLeft=1,Ci=0===Math.floor(e.scrollLeft),document.body.removeChild(e),Ci}function as(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),Vi()&&!rs()&&(i=e.scrollWidth-e.getBoundingClientRect().width-i)),i}function ls(e,t,i){i&&(rs()?t*=-1:(zi()||Vi())&&(t=e.scrollWidth-e.getBoundingClientRect().width-t)),e.scrollLeft=t}function cs(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function hs(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ds(e){return!!e.offsetParent}function us(e){const t=e;if(t.checkVisibility)return t.checkVisibility({checkVisibilityCSS:!0});return!(!ds(e)||"visible"!==window.getComputedStyle(e).visibility)}function ps(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function gs(e,t){"flex"===t?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):ms(e,t)}function ms(e,t){t=ys(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function fs(e,t){t=ys(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function ys(e){return"number"===typeof e?`${e}px`:e}function vs(e){return e instanceof Node||e instanceof HTMLElement}function Cs(e,t,i){null==i||""===i?e.removeAttribute(t):e.setAttribute(t,i.toString())}function bs(e,t){if(null!=e)for(let i=0;i<e.length;i++)t(e[i])}var ws=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},Ss=class e extends tt{constructor(e,t,i,s){super(),this.parentComp=e,this.tooltipShowDelayOverride=t,this.tooltipHideDelayOverride=i,this.shouldDisplayTooltip=s,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupService=e.popupService,this.userComponentFactory=e.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.parentComp.getGui();0===this.tooltipTrigger&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),1===this.tooltipTrigger&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return t<0&&F(`${e} should not be lower than 0`),Math.max(200,t)}getTooltipDelay(e){return"show"===e?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return e&&"hover"!==e?1:0}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),Ui()||(e.isLocked?this.showTooltipTimeoutId=window.setTimeout((()=>{this.prepareToShowTooltip(t)}),100):this.prepareToShowTooltip(t))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&2===this.state&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){const t=e.relatedTarget,i=this.parentComp.getGui(),s=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(t)||this.interactionEnabled&&s?.contains(t)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(t){if(0!=this.state||e.isLocked)return;let i=0;t&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){return(new Date).getTime()-e.lastTooltipHideTime<1e3}setToDoNothing(e){e||2!==this.state||this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const e={...this.parentComp.getTooltipParams()};if(!_(e.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip())return void this.setToDoNothing();this.state=2,this.tooltipInstanceCount++;const t=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(t)}hideTooltip(t){!t&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),e.lastTooltipHideTime=(new Date).getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),t&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(2!==this.state||this.tooltipInstanceCount!==e)return void this.destroyBean(t);const i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),0===this.tooltipTrigger&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");const s=this.localeService.getLocaleTextFunc(),n=this.popupService.addPopup({eChild:i,ariaLabel:s("ariaLabelTooltip","Tooltip")});if(n&&(this.tooltipPopupDestroyFunc=n.hideFunc),this.positionTooltip(),1===this.tooltipTrigger){const e=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:e,columnMoved:e})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(pe(this.gos),{keydown:e=>{i.contains(e?.target)||this.onKeyDown()}}),1===this.tooltipTrigger&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:i,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){const e=this.tooltipComp?.getGui(),t=fe(this.gos);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):this.popupService.positionPopupByComponent({...e,eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=0===this.tooltipTrigger?1e3:0;window.setTimeout((()=>{e(),this.destroyBean(t)}),i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach((e=>{e&&e()})),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){e.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout((()=>{this.unlockService(),this.setToDoNothing()}),100)}unlockService(){e.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};Ss.isLocked=!1;var xs=Ss,Ms=class extends tt{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();i&&(null!=e&&""!=e?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){if(null!=this.tooltipManager)return;const e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new xs(e,this.ctrl.getTooltipShowDelayOverride?.(),this.ctrl.getTooltipHideDelayOverride?.(),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const e=this.ctrl,t=e.getColumn?.(),i=e.getColDef?.(),s=e.getRowNode?.();return{location:e.getLocation(),colDef:i,column:t,rowIndex:e.getRowIndex?.(),node:s,data:s?.data,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?.(),hideTooltipCallback:()=>this.tooltipManager?.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},Ds=new ws,Is=null,Rs=class e extends tt{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=Ds.next(),this.cssClassManager=new bi((()=>this.eGui)),this.componentSelectors=new Map((t??[]).map((e=>[e.selector,e]))),e&&this.setTemplate(e)}preWireBeans(e){super.preWireBeans(e)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e){const{newTooltipText:t,showDelayOverride:i,hideDelayOverride:s,location:n,shouldDisplayTooltip:o}=e||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==t&&(this.tooltipText=t);const r=()=>this.tooltipText;null!=t&&(this.tooltipFeature=this.createBean(new Ms({getTooltipValue:r,getGui:()=>this.getGui(),getLocation:()=>n??"UNKNOWN",getColDef:e?.getColDef,getColumn:e?.getColumn,getTooltipShowDelayOverride:null!=i?()=>i:void 0,getTooltipHideDelayOverride:null!=s?()=>s:void 0,shouldDisplayTooltip:o})))}getDataRefAttribute(e){return e.getAttribute?e.getAttribute("data-ref"):null}applyElementsToComponent(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(void 0===t&&(t=this.getDataRefAttribute(e)),t){const n=this[t];if(n===Is)this[t]=s??e;else{const e=i&&i[t];this.suppressDataRefValidation||e||F(`Issue with data-ref: ${t} on ${this.constructor.name} with ${n}`)}}}createChildComponentsFromTags(e,t){(function(e){if(null==e)return[];const t=[];return bs(e,(e=>t.push(e))),t})(e.childNodes).forEach((i=>{if(!(i instanceof HTMLElement))return;const s=this.createComponentFromElement(i,(e=>{e.getGui()&&this.copyAttributesFromNode(i,e.getGui())}),t);if(s){if(s.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);const e=Array.prototype.slice.call(i.children);s.addItems(e)}this.swapComponentForNode(s,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)}))}createComponentFromElement(t,i,s){const n=t.nodeName,o=this.getDataRefAttribute(t),r=0===n.indexOf("AG-"),a=r?this.componentSelectors.get(n):null;let l=null;if(a){e.elementGettingCreated=t;const n=s&&o?s[o]:void 0;l=new a.component(n),l.setParentComponent(this),this.createBean(l,null,i)}else r&&F(`Missing selector: ${n}`);return this.applyElementsToComponent(t,o,s,l),l}copyAttributesFromNode(e,t){!function(e,t){if(e)for(let i=0;i<e.length;i++){const s=e[i];t(s.name,s.value)}}(e.attributes,((e,i)=>t.setAttribute(e,i)))}swapComponentForNode(e,t,i){const s=e.getGui();t.replaceChild(s,i),t.insertBefore(document.createComment(i.nodeName),s),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach((e=>e.setAttribute("tabindex",t.toString())))}setTemplate(e,t,i){const s=ps(e);this.setTemplateFromElement(s,t,i)}setTemplateFromElement(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.eGui=e,this.suppressDataRefValidation=s,t)for(let n=0;n<t.length;n++){const e=t[n];this.componentSelectors.set(e.selector,e)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let i=t;return null==e?null:(i||(i=this.eGui),vs(e)?{element:e,parent:i}:{element:e.getGui(),parent:i})}prependChild(e,t){const{element:i,parent:s}=this.getContainerAndElement(e,t)||{};i&&s&&s.insertAdjacentElement("afterbegin",i)}appendChild(e,t){const{element:i,parent:s}=this.getContainerAndElement(e,t)||{};i&&s&&s.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;!function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:s}=i;e.classList.toggle("ag-invisible",!t),s||Ai(e,!t)}(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;Xi(this.eGui,e,{skipAriaHidden:i});const s={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(s)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc((()=>this.eGui.removeEventListener(e,t)))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)}},Es={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},As=(()=>{const e=new Set(Object.values(Es));return e.add("eye"),e})();function Ls(e,t,i,s){let n=null;const o=i&&i.getColDef().icons;if(o&&(n=o[e]),t&&!n){const i=t.get("icons");i&&(n=i[e])}if(!n){const t=document.createElement("span");let i=Es[e]??(As.has(e)?e:void 0);return i||(s?i=e:(F(`Did not find icon ${e}`),i="")),t.setAttribute("class",`ag-icon ag-icon-${i}`),t.setAttribute("unselectable","on"),Di(t,"presentation"),t}{let e;if("function"===typeof n)e=n();else{if("string"!==typeof n)throw new Error("icon from grid options needs to be a string or a function");e=n}if("string"===typeof e)return ps(e);if(vs(e))return e;F("iconRenderer should return back a string or a dom object")}}var ks=class extends Rs{constructor(){super(...arguments),this.dragSource=null,this.eIcon=Is,this.eLabel=Is}postConstruct(){const e=e=>function(e,t,i){const s=Ls(e,t,i);if(s){const{className:e}=s;if("string"===typeof e&&e.indexOf("ag-icon")>-1||"object"===typeof e&&e["ag-icon"])return s}const n=document.createElement("span");return n.appendChild(s),n}(e,this.gos,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate('<div class="ag-dnd-ghost ag-unselectable">\n                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>\n            </div>')}destroy(){this.dragSource=null,super.destroy()}setIcon(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];cs(this.eIcon);let i=null;e||(e=this.dragSource?.getDefaultIconName?this.dragSource?.getDefaultIconName():"notAllowed"),i=this.dropIconMap[e],this.eIcon.classList.toggle("ag-shake-left-to-right",t),i===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns")||i&&this.eIcon.appendChild(i)}setLabel(e){this.eLabel.textContent=Ut(e)}};function Ts(e,t,i){if(0===i)return!1;const s=Math.abs(e.clientX-t.clientX),n=Math.abs(e.clientY-t.clientY);return Math.max(s,n)<=i}var Ps=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new L,this.eElement=e,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),s=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",s,{passive:!0}),this.eElement.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push((()=>{this.eElement.removeEventListener("touchstart",i,{passive:!0}),this.eElement.removeEventListener("touchmove",s,{passive:!0}),this.eElement.removeEventListener("touchend",n,{passive:!1})}))}getActiveTouch(e){for(let t=0;t<e.length;t++){if(e[t].identifier===this.touchStart.identifier)return e[t]}return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout((()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const t={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(t)}}),500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!Ts(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const e={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=(new Date).getTime();if(this.lastTapTime&&this.lastTapTime>0){if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const e={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.lastTapTime=null}else this.lastTapTime=e}else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach((e=>e()))}};function Ns(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var Fs=`<span class="ag-sort-indicator-container">\n        ${Ns("Order","order")}\n        ${Ns("Asc","ascending-icon")}\n        ${Ns("Desc","descending-icon")}\n        ${Ns("Mixed","mixed-icon")}\n        ${Ns("None","none-icon")}\n    </span>`,Os=class extends Rs{constructor(e){super(),this.eSortOrder=Is,this.eSortAsc=Is,this.eSortDesc=Is,this.eSortMixed=Is,this.eSortNone=Is,e||this.setTemplate(Fs)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,i,s,n){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=s,this.eSortNone=n}setupSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),s=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:s,columnRowGroupChanged:s}),this.onSortChanged()}addInIcon(e,t,i){if(null==t)return;const s=Ls(e,this.gos,i);s&&t.appendChild(s)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t="asc"===e;Xi(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t="desc"===e;Xi(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),i=null===e||void 0===e;Xi(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;be(this.gos)&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e="mixed"===this.sortController.getDisplaySortForColumn(this.column);Xi(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;const e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,i=e.some((e=>this.sortController.getDisplaySortIndexForColumn(e)??!1)),s=t>=0&&i;Xi(this.eSortOrder,s,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():cs(this.eSortOrder)}},Gs={selector:"AG-SORT-INDICATOR",component:Os},Bs=class extends Rs{constructor(){super(...arguments),this.eFilter=Is,this.eFilterButton=Is,this.eSortIndicator=Is,this.eMenu=Is,this.eLabel=Is,this.eText=Is,this.eSortOrder=Is,this.eSortAsc=Is,this.eSortDesc=Is,this.eSortMixed=Is,this.eSortNone=Is,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&this.workOutSort()==this.currentSort&&this.shouldSuppressMenuHide()==this.currentSuppressMenuHide&&t.enableFilterButton==e.enableFilterButton&&t.enableFilterIcon==e.enableFilterIcon&&(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??'<div class="ag-cell-label-container" role="presentation">\n        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>\n        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">\n            <span data-ref="eText" class="ag-header-cell-text"></span>\n            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>\n        </div>\n    </div>';return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[Gs]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=Ut(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,i){if(null==t)return;const s=Ls(e,this.gos,i);s&&t.appendChild(s)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const t=new Ps(this.getGui(),!0),i=this.shouldSuppressMenuHide(),s=i&&_(this.eMenu),n=s?new Ps(this.eMenu,!0):t;if(this.params.enableMenu){const e=s?"tap":"longTap",t=e=>this.params.showColumnMenuAfterMouseClick(e.touchStart);this.addManagedListeners(n,{[e]:t})}if(this.params.enableSorting){const e=e=>{const t=e.touchStart.target;i&&(this.eMenu?.contains(t)||this.eFilterButton?.contains(t))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:e})}if(this.params.enableFilterButton){const e=new Ps(this.eFilterButton,!0);this.addManagedListeners(e,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc((()=>e.destroy()))}this.addDestroyFunc((()=>t.destroy())),s&&this.addDestroyFunc((()=>n.destroy()))}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return hs(this.eMenu),void(this.eMenu=void 0);const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){const t=this.params.column,i=this.menuService.isLegacyMenuEnabled();if(e&&!i){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new Os(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=(new Date).getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:e=>{const t=this.params.column.isMoving(),i=(new Date).getTime()-this.lastMovingChanged<50;if(!(t||i)){const t="ctrl"===this.gos.get("multiSortKey")?e.ctrlKey||e.metaKey:e.shiftKey;this.params.progressSort(t)}}});const e=()=>{const e=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc","asc"===e),this.addOrRemoveCssClass("ag-header-cell-sorted-desc","desc"===e),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!e),this.params.column.getColDef().showRowGroup){const e=this.funcColsService.getSourceColumnsForGroupColumn(this.params.column),t=e?.every((e=>this.params.column.getSort()==e.getSort())),i=!t;this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",i)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,i){if(!e)return hs(t),!1;const s=this.params.column;return this.addInIcon("filter",t,s),this.addManagedListeners(s,{filterChanged:i}),i(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();Xi(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},zs=class extends Rs{constructor(){super('<div class="ag-header-group-cell-label" role="presentation">\n            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>'),this.agOpened=Is,this.agClosed=Is,this.agLabel=Is}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&F("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);const e=e=>{if(Xe(e))return;const t=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),t,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);const t=e=>{Qe(e)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();const i=this.params.columnGroup.getProvidedColumnGroup(),s=this.updateIconVisibility.bind(this);this.addManagedListeners(i,{expandedChanged:s,expandableChanged:s})}addTouchAndClickListeners(e,t){const i=new Ps(e,!0);this.addManagedListeners(i,{tap:t}),this.addDestroyFunc((()=>i.destroy())),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const e=this.params.columnGroup.isExpanded();Xi(this.agOpened,e),Xi(this.agClosed,!e)}else Xi(this.agOpened,!1),Xi(this.agClosed,!1)}addInIcon(e,t){const i=Ls(e,this.gos,null);i&&t.appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable())return Xi(this.agOpened,!1),void Xi(this.agClosed,!1)}setupLabel(){const{displayName:e,columnGroup:t}=this.params;if(_(e)){const t=Ut(e,!0);this.agLabel.textContent=t}this.addOrRemoveCssClass("ag-sticky-label",!t.getColGroupDef()?.suppressStickyLabel)}},Hs=class extends Rs{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),s=e.formatValue(i),n=_(s)?s:i,o=t>=0;this.eDelta.textContent=o?"\u2191"+n:"\u2193"+n,this.eDelta.classList.toggle("ag-value-change-delta-up",o),this.eDelta.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.hideDeltaValue()}),2e3)}))}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),cs(this.eDelta)}refresh(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.value;if(i===this.lastValue)return!1;if(_(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:_(e.value)?this.eValue.textContent=i:cs(this.eValue),this.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;if("number"===typeof i&&"number"===typeof this.lastValue){const t=i-this.lastValue;this.showDelta(e,t)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}},Vs=class extends Rs{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")}),50),window.setTimeout((()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)}),3e3)}))}refresh(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.value;return Y(i)&&(i=""),i!==this.lastValue&&(!this.filterManager?.isSuppressFlashingCellsBecauseFiltering()&&(t||this.addSlideAnimation(),this.lastValue=i,_(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:_(e.value)?this.eCurrent.textContent=i:cs(this.eCurrent),!0))}},js=class{};js.BACKSPACE="Backspace",js.TAB="Tab",js.ENTER="Enter",js.ESCAPE="Escape",js.SPACE=" ",js.LEFT="ArrowLeft",js.UP="ArrowUp",js.RIGHT="ArrowRight",js.DOWN="ArrowDown",js.DELETE="Delete",js.F2="F2",js.PAGE_UP="PageUp",js.PAGE_DOWN="PageDown",js.PAGE_HOME="Home",js.PAGE_END="End",js.A="KeyA",js.C="KeyC",js.D="KeyD",js.V="KeyV",js.X="KeyX",js.Y="KeyY",js.Z="KeyZ";var Ws=class extends Rs{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:s,disabled:n}=this.config;null!=n&&this.setDisabled(n),null!=e&&this.setLabelSeparator(e),null!=t&&this.setLabel(t),null!=i&&this.setLabelWidth(i),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){cs(this.eLabel),"string"===typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(Xi(this.eLabel,!1),Di(this.eLabel,"presentation")):(Xi(this.eLabel,!0),Di(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){const t=this.getGui().classList;return t.toggle("ag-label-align-left","left"===e),t.toggle("ag-label-align-right","right"===e),t.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||gs(this.eLabel,e),this}setDisabled(e){e=!!e;const t=this.getGui();return qi(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},Us=class extends Ws{constructor(e,t,i,s){super(e,t,i),this.className=s}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;null!=e&&this.setWidth(e),null!=t&&this.setValue(t),null!=i&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();null==i||""==i||null!==e.getAttribute("aria-label")?Ri(e,""):Ri(e,t??"")}setAriaLabel(e){return Ii(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return ms(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e||(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}},_s=class extends Us{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input";super(e,e?.template??`\n            <div role="presentation">\n                <div data-ref="eLabel" class="ag-input-field-label"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <${s} data-ref="eInput" class="ag-input-field-input"></${s}>\n                </div>\n            </div>`,[],t),this.inputType=i,this.displayFieldTag=s,this.eLabel=Is,this.eWrapper=Is,this.eInput=Is}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:e,inputWidth:t}=this.config;null!=e&&this.setInputName(e),null!=t&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return gs(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return Cs(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Ii(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return qi(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(!0===e)Cs(this.eInput,"autocomplete",null);else{const t="string"===typeof e?e:"off";Cs(this.eInput,"autocomplete",t)}return this}},Ys=class extends _s{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-checkbox",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"checkbox"),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;"boolean"===typeof e&&this.setReadOnly(e),"boolean"===typeof t&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected="boolean"===typeof e?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=void 0===e,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const s=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:s.id,name:s.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",!0===e),this.eWrapper.classList.toggle("ag-indeterminate",null==e)}},Ks={selector:"AG-CHECKBOX",component:Ys},Zs=class extends Rs{constructor(){super('\n            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[Ks]),this.eCheckbox=Is}init(e){this.refresh(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),Ei(t,"polite"),this.addManagedListeners(t,{click:e=>{if(Qe(e),this.eCheckbox.isDisabled())return;const t=this.eCheckbox.getValue();this.onCheckboxChanged(t)},dblclick:e=>{Qe(e)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:e=>{if(e.key===js.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===fe(this.gos)&&this.eCheckbox.toggle();const t=this.eCheckbox.getValue();this.onCheckboxChanged(t),e.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,i=!0;if(e.node.group&&e.column)if("boolean"===typeof e.value)t=e.value;else{const s=e.column.getColId();s.startsWith(rt)?t=null==e.value||""===e.value?void 0:"true"===e.value:e.node.aggData&&void 0!==e.node.aggData[s]?t=e.value??void 0:i=!1}else t=e.value??void 0;if(!i)return void this.eCheckbox.setDisplayed(!1);this.eCheckbox.setValue(t);const s=null!=e.disabled?e.disabled:!e.column?.isCellEditable(e.node);this.eCheckbox.setDisabled(s);const n=this.localeService.getLocaleTextFunc(),o=Bi(n,t),r=s?o:`${n("ariaToggleCellValue","Press SPACE to toggle cell value")} (${o})`;this.eCheckbox.setInputAriaLabel(r)}onCheckboxChanged(e){const{column:t,node:i,value:s}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column:t,colDef:t?.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s});const n=this.params.node.setDataValue(this.params.column,e,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column:t,colDef:t?.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s,oldValue:s,newValue:e,valueChanged:n}),n||this.updateCheckbox(this.params)}},$s=class extends Rs{constructor(){super('<div class="ag-loading">\n            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" data-ref="eLoadingText"></span>\n        </div>'),this.eLoadingIcon=Is,this.eLoadingText=Is}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=Ls("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},Qs=class extends Rs{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){const t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc((()=>Ri(e.eParentOfValue))),Ri(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");Ii(this.getGui(),t)}setupLoading(e){const t=pe(this.gos).createElement("div");t.classList.add("ag-skeleton-effect");const i=e.node.rowIndex;if(null!=i){const e=75+25*(i%2===0?Math.sin(i):Math.cos(i));t.style.width=`${e}%`}this.getGui().appendChild(t);const s=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");Ii(this.getGui(),s)}refresh(e){return!1}destroy(){super.destroy()}},Xs=class extends Rs{constructor(){super()}destroy(){super.destroy()}},qs=class extends Xs{init(){const e=U(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const e=this.localeService.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("loadingOoo","Loading...")}))}}},Js=class extends Xs{init(){const e=U(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){const e=this.localeService.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("noRowsToShow","No Rows To Show")}))}}},en=class extends Rs{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},tn=class extends en{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=Ut(t,!0)}};function sn(e){const{inputValue:t,allSuggestions:i,hideIrrelevant:s,filterByPercentageOfBestMatch:n,addSequentialWeight:o}=e;let r=i.map(((e,i)=>({value:e,relevance:nn(t.toLowerCase(),e.toLocaleLowerCase(),o),idx:i})));if(r.sort(((e,t)=>t.relevance-e.relevance)),s&&(r=r.filter((e=>0!==e.relevance))),r.length>0&&n&&n>0){const e=r[0].relevance*n;r=r.filter((t=>e-t.relevance<0))}const a=[],l=[];for(const c of r)a.push(c.value),l.push(c.idx);return{values:a,indices:l}}function nn(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=e.replace(/\s/g,""),n=t.replace(/\s/g,""),o=s.length,r=n.length,a=new Array(o+1).fill(null).map((()=>new Array(r+1).fill(0)));for(let h=0;h<=o;h+=1)a[h][0]=h;for(let h=0;h<=r;h+=1)a[0][h]=h;for(let h=1;h<=o;h++)for(let e=1;e<=r;e++)s[h-1]===n[e-1]?a[h][e]=a[h-1][e-1]:a[h][e]=1+Math.min(a[h][e-1],Math.min(a[h-1][e],a[h-1][e-1]));const l=a[o][r];let c=Math.max(o,r)-l;if(i){const e=function(e){const t=[],i=e.length;for(let s=1;s<=i;s++)for(let n=0;n<=i-s;n++){const i=n+s-1;t.push(e.slice(n,i+1))}return t}(s);for(let t=0;t<e.length;t++){const i=e[t];-1!==n.indexOf(i)&&(c+=1,c*=i.length)}}return c}var on=class extends tt{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:ks,agColumnHeader:Bs,agColumnGroupHeader:zs,agSortIndicator:Os,agAnimateShowChangeCellRenderer:Hs,agAnimateSlideCellRenderer:Vs,agLoadingCellRenderer:$s,agSkeletonCellRenderer:Qs,agCheckboxCellRenderer:Zs,agLoadingOverlay:qs,agNoRowsOverlay:Js,agTooltipComponent:tn},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){const e=this.gos.get("components");null!=e&&mt(e,((e,t)=>this.registerJsComponent(e,t)))}registerDefaultComponent(e,t,i){this.agGridDefaults[e]=t,i&&(this.agGridDefaultParams[e]=i)}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const i=(e,t,i)=>({componentFromFramework:t,component:e,params:i}),s=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(null!=s)return i(s,!0);const n=this.jsComps[t];if(n){return i(n,this.getFrameworkOverrides().isFrameworkComponent(n))}const o=this.agGridDefaults[t];if(o)return i(o,!1,this.agGridDefaultParams[t]);const r=this.enterpriseAgDefaultCompsModule[t];return r?this.gos.assertModuleRegistered(r,`AG Grid '${e}' component: ${t}`):P((()=>{this.warnAboutMissingComponent(e,t)}),"MissingComp"+t),null}warnAboutMissingComponent(e,t){const i=sn({inputValue:t,allSuggestions:[...Object.keys(this.agGridDefaults).filter((e=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(e))),...Object.keys(this.jsComps)],hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;F(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),i.length>0&&F(`         Did you mean: [${i.slice(0,3)}]?`),F(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},rn=class e{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e((e=>this.onDone(e)),(e=>this.onReject(e)))}static all(t){return t.length?new e((e=>{let i=t.length;const s=new Array(i);t.forEach(((t,n)=>{t.then((t=>{s[n]=t,i--,0===i&&e(s)}))}))})):e.resolve()}static resolve(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new e((e=>e(t)))}then(t){return new e((e=>{1===this.status?e(t(this.resolution)):this.waiters.push((i=>e(t(i))))}))}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach((t=>t(e)))}onReject(e){}},an={propertyName:"dateComponent",cellRenderer:!1},ln={propertyName:"dragAndDropImageComponent",cellRenderer:!1},cn={propertyName:"headerComponent",cellRenderer:!1},hn={propertyName:"headerGroupComponent",cellRenderer:!1},dn={propertyName:"cellRenderer",cellRenderer:!0},un={propertyName:"cellRenderer",cellRenderer:!1},pn={propertyName:"loadingCellRenderer",cellRenderer:!0},gn={propertyName:"cellEditor",cellRenderer:!1},mn={propertyName:"innerRenderer",cellRenderer:!0},fn={propertyName:"loadingOverlayComponent",cellRenderer:!1},yn={propertyName:"noRowsOverlayComponent",cellRenderer:!1},vn={propertyName:"tooltipComponent",cellRenderer:!1},Cn={propertyName:"filter",cellRenderer:!1},bn={propertyName:"floatingFilterComponent",cellRenderer:!1},wn={propertyName:"toolPanel",cellRenderer:!1},Sn={propertyName:"statusPanel",cellRenderer:!1},xn={propertyName:"fullWidthCellRenderer",cellRenderer:!0},Mn={propertyName:"loadingCellRenderer",cellRenderer:!0},Dn={propertyName:"groupRowRenderer",cellRenderer:!0},In={propertyName:"detailCellRenderer",cellRenderer:!0},Rn={propertyName:"menuItem",cellRenderer:!1},En=class e extends tt{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(e){this.agComponentUtils=e.agComponentUtils,this.componentMetadataProvider=e.componentMetadataProvider,this.userComponentRegistry=e.userComponentRegistry,this.frameworkComponentWrapper=e.frameworkComponentWrapper,this.gridOptions=e.gridOptions}getDragAndDropImageCompDetails(e){return this.getCompDetails(this.gridOptions,ln,"agDragAndDropImage",e,!0)}getHeaderCompDetails(e,t){return this.getCompDetails(e,cn,"agColumnHeader",t)}getHeaderGroupCompDetails(e){const t=e.columnGroup.getColGroupDef();return this.getCompDetails(t,hn,"agColumnGroupHeader",e)}getFullWidthCellRendererDetails(e){return this.getCompDetails(this.gridOptions,xn,null,e,!0)}getFullWidthLoadingCellRendererDetails(e){return this.getCompDetails(this.gridOptions,Mn,"agLoadingCellRenderer",e,!0)}getFullWidthGroupCellRendererDetails(e){return this.getCompDetails(this.gridOptions,Dn,"agGroupRowRenderer",e,!0)}getFullWidthDetailCellRendererDetails(e){return this.getCompDetails(this.gridOptions,In,"agDetailCellRenderer",e,!0)}getInnerRendererDetails(e,t){return this.getCompDetails(e,mn,null,t)}getFullWidthGroupRowInnerCellRenderer(e,t){return this.getCompDetails(e,mn,null,t)}getCellRendererDetails(e,t){return this.getCompDetails(e,dn,null,t)}getEditorRendererDetails(e,t){return this.getCompDetails(e,un,null,t)}getLoadingCellRendererDetails(e,t){return this.getCompDetails(e,pn,"agSkeletonCellRenderer",t,!0)}getCellEditorDetails(e,t){return this.getCompDetails(e,gn,"agCellEditor",t,!0)}getFilterDetails(e,t,i){return this.getCompDetails(e,Cn,i,t,!0)}getDateCompDetails(e){return this.getCompDetails(this.gridOptions,an,"agDateInput",e,!0)}getLoadingOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,fn,"agLoadingOverlay",e,!0)}getNoRowsOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,yn,"agNoRowsOverlay",e,!0)}getTooltipCompDetails(e){return this.getCompDetails(e.colDef,vn,"agTooltipComponent",e,!0)}getSetFilterCellRendererDetails(e,t){return this.getCompDetails(e,dn,null,t)}getFloatingFilterCompDetails(e,t,i){return this.getCompDetails(e,bn,i,t)}getToolPanelCompDetails(e,t){return this.getCompDetails(e,wn,null,t,!0)}getStatusPanelCompDetails(e,t){return this.getCompDetails(e,Sn,null,t,!0)}getMenuItemCompDetails(e,t){return this.getCompDetails(e,Rn,"agMenuItem",t,!0)}getCompDetails(t,i,s,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{propertyName:r,cellRenderer:a}=i;let l,{compName:c,jsComp:h,fwComp:d,paramsFromSelector:u,popupFromSelector:p,popupPositionFromSelector:g}=e.getCompKeys(this.frameworkOverrides,t,i,n);const m=e=>{const t=this.userComponentRegistry.retrieve(r,e);t&&(h=t.componentFromFramework?void 0:t.component,d=t.componentFromFramework?t.component:void 0,l=t.params)};if(null!=c&&m(c),null==h&&null==d&&null!=s&&m(s),h&&a&&!this.agComponentUtils.doesImplementIComponent(h)&&(h=this.agComponentUtils.adaptFunction(r,h)),!h&&!d)return void(o&&O(`Could not find component ${c}, did you forget to configure this component?`));const f=this.mergeParamsWithApplicationProvidedParams(t,i,n,u,l),y=null==h,v=h||d;return{componentFromFramework:y,componentClass:v,params:f,type:i,popupFromSelector:p,popupPositionFromSelector:g,newAgStackInstance:()=>this.newAgStackInstance(v,y,f,i)}}static getCompKeys(e,t,i,s){const{propertyName:n}=i;let o,r,a,l,c,h;if(t){const i=t,d=i[n+"Selector"],u=d?d(s):null,p=t=>{if("string"===typeof t)o=t;else if(null!=t&&!0!==t){e.isFrameworkComponent(t)?a=t:r=t}};u?(p(u.component),l=u.params,c=u.popup,h=u.popupPosition):p(i[n])}return{compName:o,jsComp:r,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:h}}newAgStackInstance(e,t,i,s){const n=s.propertyName;let o;if(!t)o=new e;else{const t=this.componentMetadataProvider.retrieve(n);o=this.frameworkComponentWrapper.wrap(e,t.mandatoryMethodList,t.optionalMethodList,s)}const r=this.initComponent(o,i);return null==r?rn.resolve(o):r.then((()=>o))}mergeParamsWithApplicationProvidedParams(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4?arguments[4]:void 0;const o=this.gos.getGridCommonParams();Ct(o,i),n&&Ct(o,n);const r=e&&e[t.propertyName+"Params"];if("function"===typeof r){Ct(o,r(i))}else"object"===typeof r&&Ct(o,r);return Ct(o,s),o}initComponent(e,t){if(this.createBean(e),null!=e.init)return e.init(t)}};function An(e){const t=e;return null!=t&&null!=t.getFrameworkComponentInstance?t.getFrameworkComponentInstance():e}var Ln=class e{static register(t){e.__register(t,!0,void 0)}static registerModules(t){e.__registerModules(t,!0,void 0)}static __register(t,i,s){e.runVersionChecks(t),void 0!==s?(e.areGridScopedModules=!0,void 0===e.gridModulesMap[s]&&(e.gridModulesMap[s]={}),e.gridModulesMap[s][t.moduleName]=t):e.globalModulesMap[t.moduleName]=t,e.setModuleBased(i)}static __unRegisterGridModules(t){delete e.gridModulesMap[t]}static __registerModules(t,i,s){e.setModuleBased(i),t&&t.forEach((t=>e.__register(t,i,s)))}static isValidModuleVersion(t){const[i,s]=t.version.split(".")||[],[n,o]=e.currentModuleVersion.split(".")||[];return i===n&&s===o}static runVersionChecks(t){e.currentModuleVersion||(e.currentModuleVersion=t.version);const i=e=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${e} Please update all modules to the same version.`;if(t.version?e.isValidModuleVersion(t)||O(i(`'${t.moduleName}' is version ${t.version} but the other modules are version ${e.currentModuleVersion}.`)):O(i(`'${t.moduleName}' is incompatible.`)),t.validate){const e=t.validate();if(!e.isValid){O(`${e.message}`)}}}static setModuleBased(t){void 0===e.moduleBased?e.moduleBased=t:e.moduleBased!==t&&(O("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),O("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){e.isBundled=!0}static __assertRegistered(t,i,s){if(this.__isRegistered(t,s))return!0;let n;if(e.isBundled)n=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:\n        \n        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>\n        \nFor more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(e.moduleBased||void 0===e.moduleBased){const o=Object.entries(k).find((e=>{let[i,s]=e;return s===t}))?.[0];n=`AG Grid: unable to use ${i} as the ${o} is not registered${e.areGridScopedModules?` for gridId: ${s}`:""}. Check if you have registered the module:\n           \n    import { ModuleRegistry } from '@ag-grid-community/core';\n    import { ${o} } from '${t}';\n    \n    ModuleRegistry.registerModules([ ${o} ]);\n\nFor more info see: https://www.ag-grid.com/javascript-grid/modules/`}else n=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:\n            \n    import 'ag-grid-enterprise';`;return O(n),!1}static __isRegistered(t,i){return!!e.globalModulesMap[t]||!!e.gridModulesMap[i]?.[t]}static __getRegisteredModules(t){return[...ee(e.globalModulesMap),...ee(e.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return ee(e.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!e.moduleBased}};Ln.globalModulesMap={},Ln.gridModulesMap={},Ln.areGridScopedModules=!1;var kn=Ln,Tn=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,e&&e.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){Object.entries(e.providedBeanInstances).forEach((e=>{let[t,i]=e;this.beans[t]=i})),e.beanClasses.forEach((e=>{const t=new e;t.beanName?this.beans[t.beanName]=t:console.error(`Bean ${e.name} is missing beanName`),this.createdBeans.push(t)})),e.derivedBeans?.forEach((e=>{const{beanName:t,bean:i}=e(this);this.beans[t]=i,this.createdBeans.push(i)})),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach((e=>{e.preWireBeans?.(this.beans),e.wireBeans?.(this.beans)})),e.forEach((e=>e.preConstruct?.())),t&&e.forEach(t),e.forEach((e=>e.postConstruct?.()))}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},Pn=class extends Tn{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),kn.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}},Nn=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(Nn||{}),Fn=class extends tt{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment,this.userComponentFactory=e.userComponentFactory}addDragSource(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return e&&e.comp?e.comp:null}removeDragSource(e){const t=this.dragSourceAndParamsList.find((t=>t.dragSource===e));t&&(this.dragService.removeDragSource(t.params),je(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach((e=>this.dragService.removeDragSource(e.params))),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){if(this.dragSource?.onDragStopped?.(),this.lastDropTarget?.onDragStop){const t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.clearDragAndDropProperties()}onDragCancel(){this.dragSource?.onDragCancelled?.(),this.lastDropTarget?.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getHorizontalDirection(e),s=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const n=this.dropTargets.filter((t=>this.isMouseOnDropTarget(e,t))),o=this.findCurrentDropTarget(e,n);if(o!==this.lastDropTarget){if(this.leaveLastTargetIfExists(e,i,s,t),null!==this.lastDropTarget&&null===o&&this.dragSource?.onGridExit?.(this.dragItem),null===this.lastDropTarget&&null!==o&&this.dragSource?.onGridEnter?.(this.dragItem),this.enterDragTargetIfExists(o,e,i,s,t),o&&this.dragAndDropImageComp){const{comp:e,promise:t}=this.dragAndDropImageComp;e?e.setIcon(o.getIconName?o.getIconName():null):t.then((e=>{e&&e.setIcon(o.getIconName?o.getIconName():null)}))}this.lastDropTarget=o}else if(o&&o.onDragging){const n=this.createDropTargetEvent(o,e,i,s,t);o.onDragging(n)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(const i of t){const{width:t,height:s,left:n,right:o,top:r,bottom:a}=i.getBoundingClientRect();if(0===t||0===s)return!1;const l=e.clientX>=n&&e.clientX<o,c=e.clientY>=r&&e.clientY<a;if(!l||!c)return!1}return!0}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let s=!1;for(const r of i)if(this.allContainersIntersect(e,r)){s=!0;break}const{eElement:n,type:o}=this.dragSource;return!(t.targetContainsSource&&!t.getContainer().contains(n))&&(s&&t.isInterestedIn(o,n))}findCurrentDropTarget(e,t){const i=t.length;if(0===i)return null;if(1===i)return t[0];const s=me(this.gos).elementsFromPoint(e.clientX,e.clientY);for(const o of s)for(const e of t){if(-1!==(n=this.getAllContainersFromDropTarget(e),n?.flatMap((e=>e))??[]).indexOf(o))return e}var n;return null}enterDragTargetIfExists(e,t,i,s,n){if(e&&e.onDragEnter){const o=this.createDropTargetEvent(e,t,i,s,n);e.onDragEnter(o)}}leaveLastTargetIfExists(e,t,i,s){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){const n=this.createDropTargetEvent(this.lastDropTarget,e,t,i,s);this.lastDropTarget.onDragLeave(n)}const n=this.getDragAndDropImageComponent();n&&n.setIcon(null)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter((t=>t.getContainer()!==e.getContainer()))}hasExternalDropZones(){return this.dropTargets.some((e=>e.external))}findExternalZone(e){return this.dropTargets.filter((e=>e.external)).find((t=>t.getContainer()===e.getContainer()))||null}isDropZoneWithinThisGrid(e){const t=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:i}=e;return t.contains(i)}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?0:1}createDropTargetEvent(e,t,i,s,n){const o=e.getContainer(),r=o.getBoundingClientRect(),{dragItem:a,dragSource:l}=this,c=t.clientX-r.left,h=t.clientY-r.top;return this.gos.addGridCommonParams({event:t,x:c,y:h,vDirection:s,hDirection:i,dragSource:l,fromNudge:n,dragItem:a,dropZoneTarget:o})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();if(!t)return;const i=t.getGui(),s=i.getBoundingClientRect().height,n=(document.body?.clientWidth??(window.innerHeight||document.documentElement?.clientWidth||-1))-2,o=(document.body?.clientHeight??(window.innerHeight||document.documentElement?.clientHeight||-1))-2;if(!i.offsetParent)return;const r=os(i.offsetParent),{clientY:a,clientX:l}=e;let c=a-r.top-s/2,h=l-r.left-10;const d=pe(this.gos),u=d.defaultView||window,p=u.pageYOffset||d.documentElement.scrollTop,g=u.pageXOffset||d.documentElement.scrollLeft;n>0&&h+i.clientWidth>n+g&&(h=n+g-i.clientWidth),h<0&&(h=0),o>0&&c+i.clientHeight>o+p&&(c=o+p-i.clientHeight),c<0&&(c=0),i.style.left=`${h}px`,i.style.top=`${c}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){const{comp:e}=this.dragAndDropImageComp;if(e){const t=e.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(t),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e}=this;if(!e)return;const t=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource:e}).newAgStackInstance();this.dragAndDropImageComp={promise:t},t.then((e=>{e&&this.isAlive()&&(this.processDragAndDropImageComponent(e),this.dragAndDropImageComp.comp=e)}))}processDragAndDropImageComponent(e){const{dragSource:t,mouseEventService:i,environment:s}=this;if(!t)return;const n=e.getGui();n.style.setProperty("position","absolute"),n.style.setProperty("z-index","9999"),i.stampTopLevelGridCompWithGridInstance(n),s.applyThemeClasses(n),e.setIcon(null);let{dragItemName:o}=t;G(o)&&(o=o()),e.setLabel(o||""),n.style.top="20px",n.style.left="20px";const r=pe(this.gos);let a=null,l=null;try{a=r.fullscreenElement}catch(c){}finally{a||(a=me(this.gos));const e=a.querySelector("body");l=e||(a instanceof ShadowRoot?a:a instanceof Document?a?.documentElement:a)}this.dragAndDropImageParent=l,l?l.appendChild(n):F("Could not find document body, it is needed for drag and drop.")}},On=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=-1!==e.scrollAxis.indexOf("x"),this.scrollVertically=-1!==e.scrollAxis.indexOf("y"),this.scrollByTick=null!=e.scrollByTick?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.shouldSkipVerticalScroll();if(t&&this.shouldSkipHorizontalScroll())return;const i=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<i.left+s,this.tickRight=e.clientX>i.right-s,this.tickUp=e.clientY<i.top+s&&!t,this.tickDown=e.clientY>i.bottom-s&&!t,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},Gn=class extends tt{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){ie(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,(e=>{const t=e.gridBodyCtrl;this.autoScrollService=new On({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:e=>t.getScrollFeature().setVerticalScrollPosition(e),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})}))}getContainer(){return this.eContainer}isInterestedIn(e){return 2===e}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){if(this.funcColsService.getRowGroupColumns().length)return!0;const e=this.filterManager?.isAnyFilterPresent();if(e)return!0;return!!this.sortController.isSortActive()}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const e=[...this.selectionService.getSelectedNodes()].sort(((e,t)=>null==e.rowIndex||null==t.rowIndex?0:this.getRowIndexNumber(e)-this.getRowIndexNumber(t)));if(-1!==e.indexOf(t))return e}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach((e=>{e.setDragging(!0)})),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const i=this.isFromThisGrid(e),s=this.gos.get("rowDragManaged"),n=e.dragItem.rowNodes;s&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(n[0],t):this.moveRows(n,t))}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(ze(t.split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&1===t.highlighted,s=this.mouseEventService.getNormalisedPosition(e).y,n=e.dragItem.rowNodes;let o=i?1:0;if(this.isFromThisGrid(e))n.forEach((e=>{e.rowTop<s&&(o-=1)})),this.moveRows(n,s,o);else{const e=Ie(this.gos);let t=this.clientSideRowModel.getRowIndexAtPixel(s)+1;0===this.clientSideRowModel.getHighlightPosition(s)&&t--,this.clientSideRowModel.updateRowData({add:n.filter((t=>!this.clientSideRowModel.getRowNode(e?.({data:t.data,level:0,rowPinned:t.rowPinned})??t.data.id))).map((e=>e.data)),addIndex:t})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),this.rangeService?.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer())return void F("addRowDropZone - A container target needs to be provided");if(this.dragAndDropService.findExternalZone(e))return void F("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=t=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}),e.onDragLeave&&(t.onDragLeave=t=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}),e.onDragging&&(t.onDragging=t=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}),e.onDragStop&&(t.onDragStop=t=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}),e.onDragCancel&&(t.onDragCancel=t=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",t))}));const i={isInterestedIn:e=>2===e,getIconName:()=>"move",external:!0,...t};this.dragAndDropService.addDropTarget(i),this.addDestroyFunc((()=>this.dragAndDropService.removeDropTarget(i)))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),n=this.onDragging.bind(this),o=this.onDragStop.bind(this),r=this.onDragCancel.bind(this);let a;return a=e?{getContainer:t,onDragEnter:e.onDragEnter?t=>{i(t),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}:i,onDragLeave:e.onDragLeave?t=>{s(t),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}:s,onDragging:e.onDragging?t=>{n(t),e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}:n,onDragStop:e.onDragStop?t=>{o(t),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}:o,onDragCancel:e.onDragCancel?t=>{r(t),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",t))}:r,fromGrid:!0}:{getContainer:t,onDragEnter:i,onDragLeave:s,onDragging:n,onDragStop:o,onDragCancel:r,fromGrid:!0},a}draggingToRowDragEvent(e,t){const i=this.mouseEventService.getNormalisedPosition(t).y;let s,n,o=-1;switch(i>this.pageBoundsService.getCurrentPageHeight()||(o=this.rowModel.getRowIndexAtPixel(i),s=this.rowModel.getRow(o)),t.vDirection){case 1:n="down";break;case 0:n="up";break;default:n=null}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:o,overNode:s,y:i,vDirection:n})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach((e=>{e.setDragging(!1)}))}},Bn=class extends tt{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find((t=>t.dragSource===e));t&&(this.removeListener(t),je(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:s,stopPropagationForTouch:n}=e;i.addEventListener("mousedown",t);let o=null;const r=this.gos.get("suppressTouch");s&&!r&&(o=t=>{Qi(t.target)||(n&&t.stopPropagation(),this.onTouchStart(e,t))},i.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:o,touchEnabled:!!s})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const s=t=>this.onTouchUp(t,e.eElement),n=t.target,o=[{target:me(this.gos),type:"touchmove",listener:e=>{e.cancelable&&e.preventDefault()},options:{passive:!1}},{target:n,type:"touchmove",listener:t=>this.onTouchMove(t,e.eElement),options:{passive:!0}},{target:n,type:"touchend",listener:s,options:{passive:!0}},{target:n,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(o),0===e.dragStartPixels&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t))return;if(i._alreadyProcessedByDragService)return;if(i._alreadyProcessedByDragService=!0,0!==t.button)return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const s=me(this.gos),n=[{target:s,type:"mousemove",listener:t=>this.onMouseMove(t,e.eElement)},{target:s,type:"mouseup",listener:t=>this.onMouseUp(t,e.eElement)},{target:s,type:"contextmenu",listener:e=>e.preventDefault()},{target:s,type:"keydown",listener:t=>{t.key===js.ESCAPE&&this.cancelDrag(e.eElement)}}];this.addTemporaryEvents(n),0===e.dragStartPixels&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach((e=>{const{target:t,type:i,listener:s,options:n}=e;t.addEventListener(i,s,n)})),this.dragEndFunctions.push((()=>{e.forEach((e=>{const{target:t,type:i,listener:s,options:n}=e;t.removeEventListener(i,s,n)}))}))}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams;return Ts(e,t,_(i)?i:4)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:i}),this.currentDragParams.onDragStart(t),!this.currentDragParams)return void(this.dragging=!1);this.currentDragParams.onDragging(t)}this.currentDragParams?.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){if(zi()){const e=pe(this.gos);e.getSelection()?.removeAllRanges()}this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gos.get("enableCellTextSelection"),i="mousemove"===e.type;return t&&i&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const t=e.target,i=t?.tagName.toLocaleLowerCase();return!!i?.match("^a$|textarea|input|select|button")}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){this.eventService.dispatchEvent({type:"dragCancelled",target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach((e=>e())),this.dragEndFunctions.length=0}},zn=class extends Rs{constructor(e,t,i,s,n,o){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=s,this.dragStartPixels=n,this.suppressVisibilityChange=o,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return null!=this.customGui}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Ls("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gos.get("rowDragManaged")?new jn(this,this.beans,this.rowNode,this.column):new Vn(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const e=this.beans.selectionService.getSelectedNodes();return-1!==e.indexOf(this.rowNode)?e:[this.rowNode]}checkCompatibility(){const e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&F("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:e=>{e?.preventDefault()}})[0]);const i=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{const e=this.getDragItem(),t=e.rowNodes?.length||1,s=this.getRowDragText(this.column);return s?s(e,t):1===t?this.cellValueFn():`${t} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},Hn=class extends tt{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let e=!0,i=!1;this.column&&(e=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),i=G(this.column.getColDef().rowDrag)),i?(this.parent.setDisplayed(!0,t),this.parent.setVisible(e,t)):(this.parent.setDisplayed(e,t),this.parent.setVisible(!0,t))}}},Vn=class extends Hn{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},jn=class extends Hn{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),t=e&&e.shouldPreventRowMove(),i=this.gos.get("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones(),n=t&&!s||i;this.setDisplayedOrVisible(n)}},Wn=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),Un=class e{constructor(t){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=e.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){const i=this.data;this.data=e,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const s=this.createDataChangedEvent(e,i,t);this.localEventService?.dispatchEvent(s)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,i){return{type:"dataChanged",node:this,oldData:t,newData:e,update:i}}getRowIndexString(){return null==this.rowIndex?(O("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):"top"===this.rowPinned?e.ID_PREFIX_TOP_PINNED+this.rowIndex:"bottom"===this.rowPinned?e.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new e(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(e,t){const i=_(this.id)?this.createDaemonNode():null,s=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,i);const n=this.createDataChangedEvent(e,s,!1);this.localEventService?.dispatchEvent(n)}checkRowSelectable(){const e=Pe(this.beans.gos);this.setRowSelectable(!e||e(this))}setRowSelectable(e,t){if(this.selectable!==e){if(this.selectable=e,this.dispatchRowEvent("selectableChanged"),t)return;if(Ge(this.beans.gos)){const e=this.calculateSelectedFromChildren();return void this.setSelectedParams({newValue:e??!1,source:"selectableChanged"})}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){const i=Ie(this.beans.gos);if(i)if(this.data){const t=this.parent?.getRoute()??[];this.id=i({data:this.data,parentKeys:t.length>0?t:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(e.ID_PREFIX_ROW_GROUP)&&O(`Row IDs cannot start with ${e.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(null!==e))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setMaster(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.dispatchRowEvent("masterChanged"))}setGroup(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(e,t){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[t.getId()]=e,null!=e&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=j(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let e=!1,t=!0,i=0;const s=this.__autoHeights;if(null==s)return;if(this.beans.visibleColsService.getAllAutoHeightCols().forEach((n=>{let o=s[n.getId()];if(null==o){if(!this.beans.columnModel.isColSpanActive())return void(e=!0);{let t=[];switch(n.getPinned()){case"left":t=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":t=this.beans.visibleColsService.getRightColsForRow(this);break;case null:t=this.beans.columnViewportService.getColsWithinViewport(this)}if(t.includes(n))return void(e=!0);o=-1}}else t=!1;o>i&&(i=o)})),e)return;if((t||i<10)&&(i=le(this.beans.gos,this).height),i==this.rowHeight)return;this.setRowHeight(i);const n=this.beans.rowModel;n.onRowHeightChangedDebounced?.()}setExpanded(e,t,i){if(this.expanded===e)return;this.expanded=e,this.dispatchRowEvent("expandedChanged");const s={...this.createGlobalRowEvent("rowGroupOpened"),expanded:e,event:t||null};this.beans.rowNodeEventThrottle.dispatchExpanded(s,i),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(e){return this.beans.gos.addGridCommonParams({type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(e,t,i){const s=(()=>"string"!==typeof e?e:this.beans.columnModel.getCol(e)??this.beans.columnModel.getColDefCol(e))(),n=this.beans.valueService.getValueForDisplay(s,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:s,colDef:s.getColDef(),data:this.data,node:this,oldValue:n,newValue:t,value:t,source:i}),!1;const o=this.beans.valueService.setValue(this,s,t,i);return this.dispatchCellChangedEvent(s,t,n),this.checkRowSelectable(),o}setGroupValue(e,t){const i=this.beans.columnModel.getCol(e);Y(this.groupData)&&(this.groupData={});const s=i.getColId(),n=this.groupData[s];n!==t&&(this.groupData[s]=t,this.dispatchCellChangedEvent(i,t,n))}setAggData(e){const t=this.aggData;if(this.aggData=e,this.localEventService){const i=e=>{const i=this.aggData?this.aggData[e]:void 0,s=t?t[e]:void 0;if(i===s)return;const n=this.beans.columnModel.getCol(e);n&&this.dispatchCellChangedEvent(n,i,s)};for(const e in t)i(e);for(const s in e)t&&s in t||i(s)}}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(se(this.beans.gos)){const t=this.beans.gos.get("treeData"),i=this.beans.gos.get("isServerSideGroup");e=!this.stub&&!this.footer&&(t?!!i&&i(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,i){const s={type:"cellChanged",node:this,column:e,newValue:t,oldValue:i};this.localEventService?.dispatchEvent(s)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return!this.footer&&(this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master)}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(e){this.childrenAfterGroup&&this.childrenAfterGroup.forEach((t=>t.depthFirstSearch(e))),e(this)}calculateSelectedFromChildren(){let e=!1,t=!1;if(!this.childrenAfterGroup?.length)return this.selectable?this.selected:null;for(let i=0;i<this.childrenAfterGroup.length;i++){const s=this.childrenAfterGroup[i];let n=s.isSelected();if(!s.selectable){const e=s.calculateSelectedFromChildren();if(null===e)continue;n=e}switch(n){case!0:e=!0;break;case!1:t=!0;break;default:return}}return e&&t?void 0:!!e||!t&&(this.selectable?this.selected:null)}setSelectedInitialValue(e){this.selected=e}dispatchRowEvent(e){this.localEventService?.dispatchEvent({type:e,node:this})}selectThisNode(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";const s=!this.selectable&&e,n=this.selected===e;if(s||n)return!1;this.selected=e,this.dispatchRowEvent("rowSelected");const o=this.sibling;return o&&o.footer&&o.localEventService&&o.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent({...this.createGlobalRowEvent("rowSelected"),event:t||null,source:i}),!0}setSelected(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";"boolean"!==typeof i?this.setSelectedParams({newValue:e,clearSelection:t,rangeSelect:!1,source:i}):F("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.")}setSelectedParams(e){return this.rowPinned?(F("cannot select pinned rows"),0):void 0===this.id?(F("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected({...e,nodes:[this.footer?this.sibling:this]})}isRowPinned(){return!!this.rowPinned}addEventListener(e,t){this.localEventService||(this.localEventService=new L),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new pt(this.beans.frameworkOverrides));const i=this.frameworkEventListenerService?.wrap(t)??t;this.localEventService.addEventListener(e,i)}removeEventListener(e,t){if(!this.localEventService)return;const i=this.frameworkEventListenerService?.unwrap(t)??t;this.localEventService.removeEventListener(e,i),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(F("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this})}getRoute(){if(-1===this.level)return[];if(null==this.key)return;const e=[];let t=this;for(;t&&null!=t.key;)e.push(t.key),t=t.parent;return e.reverse()}createFooter(){if(this.sibling)return;const t=new e(this.beans);Object.keys(this).forEach((e=>{Wn.has(e)||(t[e]=this[e])})),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.dispatchRowEvent("firstChildChanged"))}setLastChild(e){this.lastChild!==e&&(this.lastChild=e,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(e){this.childIndex!==e&&(this.childIndex=e,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.dispatchRowEvent("displayedChanged"))}setDragging(e){this.dragging!==e&&(this.dragging=e,this.dispatchRowEvent("draggingChanged"))}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}};Un.ID_PREFIX_ROW_GROUP="row-group-",Un.ID_PREFIX_TOP_PINNED="t-",Un.ID_PREFIX_BOTTOM_PINNED="b-",Un.OBJECT_ID_SEQUENCE=0;var _n=Un,Yn=class extends Rs{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then((()=>{}))??rn.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then((t=>{t?.afterGuiAttached?.(e)}))}afterGuiDetached(){this.filterWrapper?.filterPromise?.then((e=>{e?.afterGuiDetached?.()}))}createFilter(e){const{column:t,source:i}=this;this.filterWrapper=this.filterManager?.getOrCreateFilterWrapper(t)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then((s=>{const n=s.getGui();_(n)||F(`getGui method from filter returned ${n}; it should be a DOM element.`),this.appendChild(n),e&&this.eventService.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()})}))}onFilterDestroyed(e){"api"!==e.source&&"paramsUpdated"!==e.source||e.column.getId()!==this.column.getId()||!this.columnModel.getColDefCol(this.column)||(cs(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},Kn="ag-resizer-wrapper",Zn=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,$n=`<div class="${Kn}">\n        ${Zn("eTopLeft","topLeft")}\n        ${Zn("eTop","top")}\n        ${Zn("eTopRight","topRight")}\n        ${Zn("eRight","right")}\n        ${Zn("eBottomRight","bottomRight")}\n        ${Zn("eBottom","bottom")}\n        ${Zn("eBottomLeft","bottomLeft")}\n        ${Zn("eLeft","left")}\n    </div>`,Qn=class extends tt{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,s=e/2-this.getHeight()/2;this.offsetElement(i,s)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:s,minHeight:n,height:o,x:r,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0;const h=us(this.element);if(h){const e=this.findBoundaryElement(),t=window.getComputedStyle(e);if(null!=t.minWidth){const i=e.offsetWidth-this.element.offsetWidth;c=parseInt(t.minWidth,10)-i}if(null!=t.minHeight){const i=e.offsetHeight-this.element.offsetHeight;l=parseInt(t.minHeight,10)-i}}if(this.minHeight=n||l,this.minWidth=i||c,s&&this.setWidth(s),o&&this.setHeight(o),s&&o||this.refreshSize(),e)this.center();else if(r||a)this.offsetElement(r,a);else if(h&&t){let e=this.boundaryEl,t=!0;if(e||(e=this.findBoundaryElement(),t=!1),e){const i=parseFloat(e.style.top),s=parseFloat(e.style.left);t?this.offsetElement(isNaN(s)?0:s,isNaN(i)?0:i):this.setPosition(s,i)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"===typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach((t=>{const i=!!e[t],s=this.getResizerElement(t),n={dragStartPixels:0,eElement:s,onDragStart:e=>this.onResizeStart(e,t),onDragging:this.onResize.bind(this),onDragStop:e=>this.onResizeEnd(e,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragService.addDragSource(n),this.resizeListeners.push(n),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=i)}))}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;-1!==t&&(this.element.style.width=`${t}px`),-1!==e&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let s=!1;if("string"===typeof e&&-1!==e.indexOf("%"))fs(i,e),e=ss(i),s=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const t=this.getAvailableHeight();t&&e>t&&(e=t)}this.getHeight()!==e&&(s?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?fs(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height="number"===typeof e?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const s=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:s.top,r=e?0:n.top;let a=0;if(t){const e=this.element.parentElement;if(e){const{bottom:t}=e.getBoundingClientRect();a=t-s.bottom}}return i+r-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let s=!1;if("string"===typeof e&&-1!==e.indexOf("%"))ms(t,e),e=ns(t),s=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:t}=this.offsetParent,s=i?this.position.x:this.element.getBoundingClientRect().left;t&&e+s>t&&(e=t-s)}this.getWidth()!==e&&(s?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?ms(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width="number"===typeof e?e:parseFloat(e)))}offsetElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{forcePopupParentAsOffsetParent:i}=this.config,s=i?this.boundaryEl:this.element;s&&(this.popupService.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const e=this.getAvailableHeight();this.element.style.setProperty("max-height",`${e}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:s,anywhereWithin:n,topBuffer:o}=e,r=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(t,!!i,!!n,r)?0:r,movementY:this.shouldSkipY(t,!!s,o,a)?0:a}}shouldSkipX(e,t,i,s){const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:n.left;let l=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=r.right;return!!l||(l=t?s<0&&e.clientX>a+o.left||s>0&&e.clientX<a+o.left:i?s<0&&e.clientX>r.right||s>0&&e.clientX<a+o.left:s<0&&e.clientX>r.right||s>0&&e.clientX<r.right,l)}shouldSkipY(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:n.top;let l=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=r.bottom;return!!l||(l=t?s<0&&e.clientY>a+o.top+i||s>0&&e.clientY<a+o.top:s<0&&e.clientY>r.bottom||s>0&&e.clientY<r.bottom,l)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const t=(new DOMParser).parseFromString($n,"text/html").body;e.appendChild(t.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${Kn}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:s}=this.config;i||s||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter((e=>!e.classList.contains("ag-hidden"))):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let s=0;s<e.length;s++){const n=e[s],o=!!n.style.flex&&"0 0 auto"!==n.style.flex;if(n===this.element)continue;let r=this.minHeight||0,a=this.minWidth||0;if(o){const e=window.getComputedStyle(n);e.minHeight&&(r=parseInt(e.minHeight,10)),e.minWidth&&(a=parseInt(e.minWidth,10))}else r=n.offsetHeight,a=n.offsetWidth;t+=r,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let s=0;s<i.length;s++){const n=i[s];n!==t&&(e?n.style.height=`${n.offsetHeight}px`:n.style.width=`${n.offsetWidth}px`,n.style.flex="0 0 auto",n===this.element&&(t=i[s+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some((e=>e))}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:s,isRight:n,isBottom:o,isLeft:r}=this.currentResizer,a=n||r,l=o||s,{movementX:c,movementY:h}=this.calculateMouseMovement({e:e,isLeft:r,isTop:s}),d=this.position.x,u=this.position.y;let p=0,g=0;if(a&&c){const e=r?-1:1,t=this.getWidth(),i=t+c*e;let s=!1;r&&(p=t-i,(d+p<=0||i<=this.minWidth)&&(s=!0,p=0)),s||this.setWidth(i)}if(l&&h){const e=s?-1:1,t=this.getHeight(),i=t+h*e;let n=!1;s?(g=t-i,(u+g<=0||i<=this.minHeight)&&(n=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&t<i&&this.getMinSizeOfSiblings().height+i>this.element.parentElement.offsetHeight&&(n=!0),n||this.setHeight(i)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&p||g)&&this.offsetElement(d+p,u+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());const{movementX:n,movementY:o}=this.calculateMouseMovement({e:e,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(t+n,i+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},Xn=class e extends tt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.eFocusableElement=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:e=>{if(e.defaultPrevented)return;const t=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e.shiftKey);t&&(t.focus(),e.preventDefault())},...t}}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.eFocusableElement.classList.add(e.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:e=>{e.defaultPrevented||Xe(e)||(this.callbacks.shouldStopEventPropagation(e)?Qe(e):e.key===js.TAB?this.callbacks.onTabKeyDown(e):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(e))}})}};Xn.FOCUS_MANAGED_CLASS="ag-focus-managed";var qn=Xn,Jn={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function eo(e,t){return to(e)?(null!=e.debounceMs&&F("debounceMs is ignored when apply button is present"),0):null!=e.debounceMs?e.debounceMs:t}function to(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var io=class extends Rs{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=Is,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new qn(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Qn(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const i=`\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">\n                    ${this.createBodyTemplate()}\n                </div>\n            </form>`;this.setTemplate(i,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then((()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()}))}setParams(e){this.providedFilterParams=e,this.applyActive=to(e),this.resetButtonsPanel(e)}updateParams(e){this.providedFilterParams=e,this.applyActive=to(e),this.resetUiToActiveModel(this.getModel(),(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()}))}resetButtonsPanel(e,t){const{buttons:i,readOnly:s}=t??{},{buttons:n,readOnly:o}=e;if(s===o&&q(i,n))return;const r=n&&n.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(cs(this.eButtonsPanel),this.buttonListeners.forEach((e=>e())),this.buttonListeners=[]):r&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!r)return void(this.eButtonsPanel&&hs(this.eButtonsPanel));const a=document.createDocumentFragment(),l=e=>{let t,i;switch(e){case"apply":t=this.translate("applyFilter"),i=e=>this.onBtApply(!1,!1,e);break;case"clear":t=this.translate("clearFilter"),i=()=>this.onBtClear();break;case"reset":t=this.translate("resetFilter"),i=()=>this.onBtReset();break;case"cancel":t=this.translate("cancelFilter"),i=e=>{this.onBtCancel(e)};break;default:return void F("Unknown button type specified")}const s=ps(`<button\n                    type="${"apply"===e?"submit":"button"}"\n                    data-ref="${e}FilterButton"\n                    class="ag-button ag-standard-button ag-filter-apply-panel-button"\n                >${t}\n                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(s,{click:i})),a.append(s)};n.forEach((e=>l(e))),this.eButtonsPanel.append(a),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=eo(this.providedFilterParams,this.getDefaultDebounceMs()),t=j(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(null!=e?this.setModelIntoUi(e):this.resetUiToDefaults()).then((()=>{this.updateUiVisibility(),this.applyModel("api")}))}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),(()=>{this.handleCancelEnd(e)}))}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),t?.()};null!=e?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then((()=>this.onUiChanged()))}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(){const e=this.getModelFromUi();if(!this.isModelValid(e))return!1;const t=this.appliedModel;return this.appliedModel=e,!this.areModelsEqual(t,e)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")){const i="columnFilter";this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:i})}const{closeOnApply:s}=this.providedFilterParams;s&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,i=t&&t.key;let s;"Enter"!==i&&"Space"!==i||(s={keyboardEvent:t}),this.hidePopup(s),this.hidePopup=null}onUiChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const e=this.isModelValid(this.getModelFromUi()),t=this.queryForHtmlElement('[data-ref="applyFilterButton"]');t&&qi(t,!e)}e&&!t||"immediately"===t?this.onBtApply(e):(this.applyActive||t)&&"debounce"!==t||this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||"toolPanel"===e)return;const t="floatingFilter"===e||"columnFilter"===e,{positionableFeature:i,gos:s}=this;t?(i.restoreLastSize(),i.setResizable(s.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){const t=this.providedFilterParams;return this.providedFilterParams=e,this.resetButtonsPanel(e,t),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,Jn[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},so=class extends Ys{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},no=class extends Rs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),this.unFocusable||this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case js.ENTER:if(this.highlightedEl){const e=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(e)}else this.setValue(this.getValue());break;case js.DOWN:case js.UP:e.preventDefault(),this.navigate(t);break;case js.PAGE_DOWN:case js.PAGE_UP:case js.PAGE_HOME:case js.PAGE_END:e.preventDefault(),this.navigateToPage(t)}}navigate(e){const t=e===js.DOWN;let i;if(this.highlightedEl){let e=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);e=Math.min(Math.max(e,0),this.itemEls.length-1),i=this.itemEls[e]}else i=this.itemEls[t?0:this.itemEls.length-1];this.highlightItem(i)}navigateToPage(e){if(!this.highlightedEl||0===this.itemEls.length)return;const t=this.itemEls.indexOf(this.highlightedEl),i=this.options.length-1,s=this.itemEls[0].clientHeight,n=Math.floor(this.getGui().clientHeight/s);let o=-1;e===js.PAGE_HOME?o=0:e===js.PAGE_END?o=i:e===js.PAGE_DOWN?o=Math.min(t+n,i):e===js.PAGE_UP&&(o=Math.max(t-n,0)),-1!==o&&this.highlightItem(this.itemEls[o])}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){const{value:t,text:i}=e,s=i||t;return this.options.push({value:t,text:s}),this.renderOption(t,s),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach((e=>{hs(e)})),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach(((t,i)=>{Si(t,"posinset",i+1),function(e,t){Si(e,"setsize",t)}(t,e.length)}))}renderOption(e,t){const i=pe(this.gos),s=i.createElement("div");Di(s,"option"),s.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const n=i.createElement("span");s.appendChild(n),n.textContent=t,this.unFocusable||(s.tabIndex=-1),this.itemEls.push(s),this.addManagedListeners(s,{mouseover:()=>this.highlightItem(s),mousedown:t=>{t.preventDefault(),t.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new Ms({getTooltipValue:()=>t,getGui:()=>s,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})),this.getGui().appendChild(s)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(t),this;const i=this.options.findIndex((t=>t.value===e));if(-1!==i){const e=this.options[i];this.value=e.value,this.displayValue=e.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex((e=>e.value===this.value));-1!==e&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!us(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),Gi(this.highlightedEl,!0);const t=this.getGui(),{scrollTop:i,clientHeight:s}=t,{offsetTop:n,offsetHeight:o}=e;(n+o>i+s||n<i)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){this.highlightedEl&&us(this.highlightedEl)&&(this.highlightedEl.classList.remove(this.activeClass),Gi(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},oo=class extends Us{constructor(e){if(super(e,e?.template||'\n            <div class="ag-picker-field" role="presentation">\n                <div data-ref="eLabel"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">\n                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Is,this.eWrapper=Is,this.eDisplayField=Is,this.eIcon=Is,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:s,minPickerWidth:n,maxPickerWidth:o}=e;null!=t&&(this.pickerGap=t),this.variableWidth=!!s,null!=i&&this.setPickerMaxHeight(i),null!=n&&this.setPickerMinWidth(n),null!=o&&this.setPickerMaxWidth(o)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:s}=this.config;if(i){const e=Ls(i,this.gos);e&&this.eIcon.appendChild(e)}null!=s&&this.setInputWidth(s)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),Li(e,!1),this.ariaRole&&Di(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case js.UP:case js.DOWN:case js.ENTER:case js.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case js.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:s,modalPicker:n=!0}=this.config,o={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{const e=ye(this.gos);this.beforeHidePicker(),e&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,s),anchorToElement:this.eWrapper};e.style.position="absolute";const r=this.popupService.addPopup(o),{maxPickerHeight:a,minPickerWidth:l,maxPickerWidth:c,variableWidth:h}=this;h?(l&&(e.style.minWidth=l),e.style.width=ys(ns(this.eWrapper)),c&&(e.style.maxWidth=c)):gs(e,c??ns(this.eWrapper));const d=a??`${ts(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",d),this.alignPickerToComponent(),r.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;Li(this.getAriaElement(),e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return gs(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return"number"===typeof e&&(e=`${e}px`),this.minPickerWidth=null==e?void 0:e,this}setPickerMaxWidth(e){return"number"===typeof e&&(e=`${e}px`),this.maxPickerWidth=null==e?void 0:e,this}setPickerMaxHeight(e){return"number"===typeof e&&(e=`${e}px`),this.maxPickerHeight=null==e?void 0:e,this}destroy(){this.hidePicker(),super.destroy()}},ro=class extends oo{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox",...e})}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;null!=e&&this.addOptions(e),null!=t&&this.setValue(t,!0),i&&null==t&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new no("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;var i,s;e.setAttribute("id",t),wi(i=this.getAriaElement(),"controls",(s=e).id),Ri(s,i.id),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){const{key:t}=e;switch(t===js.TAB&&this.hidePicker(),t){case js.ENTER:case js.UP:case js.DOWN:case js.PAGE_UP:case js.PAGE_DOWN:case js.PAGE_HOME:case js.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case js.ESCAPE:super.onKeyDown(e);break;case js.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e)}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,t,i){if(this.value===e||!this.listComponent)return this;i||this.listComponent.setValue(e,!0);if(this.listComponent.getValue()===this.getValue())return this;let s=this.listComponent.getDisplayValue();return null==s&&this.config.placeholder&&(s=this.config.placeholder),this.eDisplayField.textContent=s,this.setTooltip({newTooltipText:s??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},ao={selector:"AG-SELECT",component:ro},lo=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach((e=>{if("string"===typeof e)return;[["displayKey"],["displayName"],["predicate","test"]].every((t=>!!t.some((t=>null!=e[t]))||(F(`ignoring FilterOptionDef as it doesn't contain one of '${t}'`),!1)))?this.customFilterOptions[e.displayKey]=e:this.filterOptions=this.filterOptions.filter((t=>t===e))||[]}))}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const e=this.filterOptions[0];"string"===typeof e?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:F("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else F("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},co=class extends io{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:e}=t;return null!=e?e:1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:"inRange"===e?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach(((t,i)=>{0===i?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)}))}getModelFromUi(){const e=this.getUiCompleteConditions();return 0===e.length?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map((e=>e.getValue()))}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return 0===this.eJoinOperatorsOr.length?this.defaultJoinOperator:!0===this.eJoinOperatorsOr[0].getValue()?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const i=!e.operator,s=!t.operator;if(!i&&s||i&&!s)return!1;let n;if(i){const i=e,s=t;n=this.areSimpleModelsEqual(i,s)}else{const i=e,s=t;n=i.operator===s.operator&&He(i.conditions,s.conditions,((e,t)=>this.areSimpleModelsEqual(e,t)))}return n}shouldRefresh(e){const t=this.getModel(),i=t?t.conditions??[t]:null,s=e.filterOptions?.map((e=>"string"===typeof e?e:e.displayKey))??this.getDefaultFilterOptions();return!(i&&!i.every((e=>void 0!==s.find((t=>t===e.type)))))&&!("number"===typeof e.maxNumConditions&&i&&i.length>e.maxNumConditions)}refresh(e){if(!this.shouldRefresh(e))return!1;return!!super.refresh(e)&&(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){const t=e;let i=t.conditions;null==i&&(i=[],F("Filter model is missing 'conditions'"));const s=this.validateAndUpdateConditions(i),n=this.getNumConditions();if(s<n)this.removeConditionsAndOperators(s);else if(s>n)for(let e=n;e<s;e++)this.createJoinOperatorPanel(),this.createOption();const o="OR"===t.operator;this.eJoinOperatorsAnd.forEach((e=>e.setValue(!o,!0))),this.eJoinOperatorsOr.forEach((e=>e.setValue(o,!0))),i.forEach(((e,t)=>{this.eTypes[t].setValue(e.type,!0),this.setConditionIntoUi(e,t)}))}else{const t=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(t.type,!0),this.setConditionIntoUi(t,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),rn.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),F('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){const t=this.getModel();if(null==t)return!0;const{operator:i}=t,s=[];if(i){const e=t;s.push(...e.conditions??[])}else s.push(t);return s[i&&"OR"===i?"some":"every"]((t=>this.individualConditionPasses(e,t)))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new lo,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(F('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(F('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(F('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new ro);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,(e=>this.resetInput(e))),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const s=this.eJoinOperatorPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(t,s,n),this.resetJoinOperatorOr(i,s,n),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const s=this.createManagedBean(new so);return e.push(s),s.addCssClass("ag-filter-condition-operator"),s.addCssClass(`ag-filter-condition-operator-${i}`),t.appendChild(s.getGui()),s}getDefaultJoinOperator(e){return"AND"===e||"OR"===e?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map((e=>"string"===typeof e?this.createBoilerplateListOption(e):this.createCustomListOption(e)))}putOptionsIntoDropdown(e){this.filterListOptions.forEach((t=>{e.addOption(t)})),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const t=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<t){this.removeConditionsAndOperators(t+1);const i=e+1,s=t-i;s>0&&this.removeConditionsAndOperators(i,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach(((t,i)=>{const s=this.isConditionDisabled(i,e);t.setDisabled(s||this.filterListOptions.length<=1),1===i&&(qi(this.eJoinOperatorPanels[0],s),this.eJoinOperatorsAnd[0].setDisabled(s),this.eJoinOperatorsOr[0].setDisabled(s))})),this.eConditionBodies.forEach(((e,t)=>{Xi(e,this.isConditionBodyVisible(t))}));const i="OR"===(t??this.getJoinOperator());this.eJoinOperatorsAnd.forEach((e=>{e.setValue(!i,!0)})),this.eJoinOperatorsOr.forEach((e=>{e.setValue(i,!0)})),this.forEachInput(((t,i,s,n)=>{this.setElementDisplayed(t,i<n),this.setElementDisabled(t,this.isConditionDisabled(s,e))})),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,t),this.removeComponents(this.eJoinOperatorsAnd,i,t),this.removeComponents(this.eJoinOperatorsOr,i,t)}removeElements(e,t,i){this.removeItems(e,t,i).forEach((e=>hs(e)))}removeComponents(e,t,i){this.removeItems(e,t,i).forEach((e=>{hs(e.getGui()),this.destroyBean(e)}))}removeItems(e,t,i){return null==i?e.splice(t):e.splice(t,i)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{const e=this.getInputs(0)[0];if(!e)return;e instanceof _s&&e.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,s=!1;const n=this.getJoinOperator();for(let r=this.getNumConditions()-1;r>=0;r--)if(this.isConditionUiComplete(r))-1===t&&(t=r,i=r);else{const e=r<t;(r>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(r-1)||e)&&(this.removeConditionsAndOperators(r,1),s=!0,e&&i--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(i,n),s&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if(G(this.filterPlaceholder)){const e=this.filterPlaceholder,s=this.eTypes[t].getValue();i=e({filterOptionKey:s,filterOption:this.translate(s),placeholder:i})}else"string"===typeof this.filterPlaceholder&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput(((t,i,s,n)=>{if(!(t instanceof _s))return;const o=0===i&&n>1?"inRangeStart":0===i?"filterOoo":"inRangeEnd",r=0===i&&n>1?e("ariaFilterFromValue","Filter from value"):0===i?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,s)),t.setInputAriaLabel(r)}))}setElementValue(e,t,i){e instanceof _s&&e.setValue(null!=t?String(t):null,!0)}setElementDisplayed(e,t){e instanceof Rs&&Xi(e.getGui(),t)}setElementDisabled(e,t){e instanceof Rs&&qi(e.getGui(),t)}attachElementOnChange(e,t){e instanceof _s&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach(((t,i)=>{this.forEachPositionTypeInput(i,t,e)}))}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const s=this.getNumberOfInputs(t),n=this.getInputs(e);for(let o=0;o<n.length;o++){const t=n[o];null!=t&&i(t,o,e,s)}}isConditionDisabled(e,t){return!!this.isReadOnly()||0!==e&&e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){if(e>=this.getNumConditions())return!1;return"empty"!==this.getConditionType(e)&&!this.getValues(e).some((e=>null==e))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach((e=>this.resetType(e))),this.eJoinOperatorsAnd.forEach(((e,t)=>this.resetJoinOperatorAnd(e,t,this.joinOperatorId+t))),this.eJoinOperatorsOr.forEach(((e,t)=>this.resetJoinOperatorOr(e,t,this.joinOperatorId+t))),this.joinOperatorId++,this.forEachInput((e=>this.resetInput(e))),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),rn.resolve()}resetType(e){const t=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(t).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),i)}resetJoinOperator(e,t,i,s,n){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(s),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach(((e,t)=>this.updateJoinOperatorDisabled(e,t))),this.eJoinOperatorsOr.forEach(((e,t)=>this.updateJoinOperatorDisabled(e,t)))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e);this.forEachInput(((e,s,n)=>{n===t&&this.setElementValue(e,null!=i[s]?i[s]:null)}))}setValueFromFloatingFilter(e){this.forEachInput(((t,i,s)=>{this.setElementValue(t,0===i&&0===s?e:null,!0)}))}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,(e=>{this.attachElementOnChange(e,this.listener)})))}individualConditionPasses(e,t){const i=this.getCellValue(e.node),s=this.mapValuesFromModel(t),n=this.optionsFactory.getCustomOption(t.type),o=this.evaluateCustomFilter(n,s,i);return null!=o?o:null==i?this.evaluateNullValue(t.type):this.evaluateNonNullValue(s,i,t,e)}evaluateCustomFilter(e,t,i){if(null==e)return;const{predicate:s}=e;return null==s||t.some((e=>null==e))?void 0:s(t,i)}isBlank(e){return null==e||"string"===typeof e&&0===e.trim().length}hasInvalidInputs(){return!1}},ho=class extends co{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const s=this.comparator(),n=null!=e[0]?s(e[0],t):0;switch(i.type){case"equals":return 0===n;case"notEqual":return 0!==n;case"greaterThan":return n>0;case"greaterThanOrEqual":return n>=0;case"lessThan":return n<0;case"lessThanOrEqual":return n<=0;case"inRange":{const i=s(e[1],t);return this.scalarFilterParams.inRangeInclusive?n>=0&&i<=0:n>0&&i<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return F('Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}};function uo(e){if(e.altKey||e.ctrlKey||e.metaKey)return!1;return 1===e.key?.length}function po(e,t,i,s,n){const o=s?s.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const r=e.addGridCommonParams({event:t,editing:n,column:s,node:i,data:i.data,colDef:s.getColDef()});if(o){if(o(r))return!0}return!1}var go=class extends _s{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-text-field",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text")}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=_(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`);this.addManagedListeners(this.eInput,{keydown:t=>{uo(t)&&t.key&&!e.test(t.key)&&t.preventDefault()},paste:t=>{const i=t.clipboardData?.getData("text");i&&i.split("").some((t=>!e.test(t)))&&t.preventDefault()}})}},mo={selector:"AG-INPUT-TEXT-FIELD",component:go},fo=class extends go{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{const e=parseFloat(this.eInput.value),t=isNaN(e)?"":this.normalizeValue(e.toString());this.value!==t&&this.setValue(t)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";const{precision:e,min:t,max:i,step:s}=this.config;"number"===typeof e&&this.setPrecision(e),"number"===typeof t&&this.setMin(t),"number"===typeof i&&this.setMax(i),"number"===typeof s&&this.setStep(s)}onWheel(e){fe(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(e){if(""===e)return"";null!=this.precision&&(e=this.adjustPrecision(e));const t=parseFloat(e);return null!=this.min&&t<this.min?e=this.min.toString():null!=this.max&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(null==this.precision)return e;if(t){const t=parseFloat(e).toFixed(this.precision);return parseFloat(t).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e||(this.min=e,Cs(this.eInput,"min",e)),this}setMax(e){return this.max===e||(this.max=e,Cs(this.eInput,"max",e)),this}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e||(this.step=e,Cs(this.eInput,"step",e)),this}setValue(e,t){return this.setValueOrInputValue((e=>super.setValue(e,t)),(()=>this),e)}setStartValue(e){return this.setValueOrInputValue((e=>super.setValue(e,!0)),(e=>{this.eInput.value=e}),e)}setValueOrInputValue(e,t,i){if(_(i)){let s=this.isScientificNotation(i);if(s&&this.eInput.validity.valid)return e(i);if(!s){s=(i=this.adjustPrecision(i))!=this.normalizeValue(i)}if(s)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return"string"===typeof e&&e.includes("e")}},yo={selector:"AG-INPUT-NUMBER-FIELD",component:fo},vo=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],Co=class{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=null!=e.operator,i=this.localeService.getLocaleTextFunc();if(t){const t=e,s=(t.conditions??[]).map((e=>this.getModelAsString(e))),n="AND"===t.operator?"andCondition":"orCondition";return s.join(` ${i(n,Jn[n])} `)}if("blank"===e.type||"notBlank"===e.type)return i(e.type,e.type);{const t=e,s=this.optionsFactory.getCustomOption(t.type),{displayKey:n,displayName:o,numberOfInputs:r}=s||{};return n&&o&&0===r?(i(n,o),o):this.conditionToString(t,s)}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},bo=class extends Co{conditionToString(e,t){const{numberOfInputs:i}=t||{};return"inRange"==e.type||2===i?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:null!=e.filter?this.formatValue(e.filter):`${e.type}`}};function wo(e){const{allowedCharPattern:t}=e??{};return t??null}var So=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],xo=class extends Co{conditionToString(e,t){const{numberOfInputs:i}=t||{};return"inRange"==e.type||2===i?`${e.filter}-${e.filterTo}`:null!=e.filter?`${e.filter}`:`${e.type}`}};function Mo(e){const t=e&&e.trim();return""===t?e:t}function Do(e){if("number"===typeof e)return e;if("string"===typeof e){const t=parseInt(e);if(isNaN(t))return;return t}}function Io(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return i=>{const s=Do(i);if(!(null==s||s<e||s>t))return s}}function Ro(e,t){return e.toString().padStart(t,"0")}function Eo(e,t,i){return"number"!==typeof e?"":e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function Ao(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";if(!e)return null;let s=[e.getFullYear(),e.getMonth()+1,e.getDate()].map((e=>Ro(e,2))).join(i);return t&&(s+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map((e=>Ro(e,2))).join(":")),s}var Lo=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function ko(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";const i=Ro(e.getFullYear(),4),s=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>s[e.getMonth()],MMM:()=>s[e.getMonth()].slice(0,3),MM:()=>Ro(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${Lo(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${Lo(e.getDate())}`,DD:()=>Ro(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>n[e.getDay()],ddd:()=>n[e.getDay()].slice(0,3),dd:()=>n[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${Lo(e.getDay())}`,d:()=>`${e.getDay()}`},r=new RegExp(Object.keys(o).join("|"),"g");return t.replace(r,(e=>e in o?o[e]():e))}function To(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const s=t.split("-").map((e=>parseInt(e,10)));if(3!==s.filter((e=>!isNaN(e))).length)return null;const[n,o,r]=s,a=new Date(n,o-1,r);if(a.getFullYear()!==n||a.getMonth()!==o-1||a.getDate()!==r)return null;if(!i||"00:00:00"===i)return a;const[l,c,h]=i.split(":").map((e=>parseInt(e,10)));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),h>=0&&h<60&&a.setSeconds(h),a}var Po=class{constructor(e,t,i,s,n){this.alive=!0,this.context=e,this.eParent=s;t.getDateCompDetails(i).newAgStackInstance().then((t=>{this.alive?(this.dateComp=t,t&&(s.appendChild(t.getGui()),t.afterGuiAttached&&t.afterGuiAttached(),this.tempValue&&t.setDate(this.tempValue),null!=this.disabled&&this.setDateCompDisabled(this.disabled),n?.(this))):e.destroyBean(t)}))}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){Xi(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&"function"===typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(e)}updateParams(e){let t=!1;if(this.dateComp?.refresh&&"function"===typeof this.dateComp.refresh){null!==this.dateComp.refresh(e)&&(t=!0)}if(!t&&this.dateComp?.onParamsUpdated&&"function"===typeof this.dateComp.onParamsUpdated){null!==this.dateComp.onParamsUpdated(e)&&F("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}}setDateCompDisabled(e){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(e)}},No=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],Fo=class extends Co{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:s}=t||{},n="inRange"==i||2===s,o=To(e.dateFrom),r=To(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(n){return`${null!==o?ko(o,a):"null"}-${null!==r?ko(r,a):"null"}`}return null!=o?ko(o,a):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},Oo=1/0,Go=class extends tt{constructor(e,t,i,s){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=s,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?ze(this.colsSpanning):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const e=this.beans.gos.get("suppressColumnMoveAnimation"),t=_(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),s=this.modifyLeftForPrintLayout(e,i),n=this.modifyLeftForPrintLayout(e,t);this.setLeft(s),this.actualLeft=n,this.beans.columnAnimationService.executeNextVMTurn((()=>{this.actualLeft===n&&this.setLeft(n)}))}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!ne(this.beans.gos,"print"))return t;if("left"===e.getPinned())return t;const i=this.beans.visibleColsService.getColsLeftWidth();if("right"===e.getPinned()){return i+this.beans.visibleColsService.getBodyContainerWidth()+t}return i+t}setLeft(e){if(_(e)&&(this.eCell.style.left=`${e}px`),$t(this.columnOrGroup)){const e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&(t=this.ariaEl,i=e.length,Si(t,"colspan",i))}var t,i}};function Bo(e,t,i,s){return Y(e)?[]:Ho(e.headerClass,e,t,i,s)}function zo(e,t,i){e.addOrRemoveCssClass("ag-column-first",i.isColAtEdge(t,"first")),e.addOrRemoveCssClass("ag-column-last",i.isColAtEdge(t,"last"))}function Ho(e,t,i,s,n){if(Y(e))return[];let o;if("function"===typeof e){const r=function(e,t,i,s){return t.addGridCommonParams({colDef:e,column:i,columnGroup:s})}(t,i,s,n);o=e(r)}else o=e;return"string"===typeof o?[o]:Array.isArray(o)?[...o]:[]}var Vo=0,jo=class e extends tt{constructor(e,t,i){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=e,this.parentRowCtrl=i,this.beans=t,this.instanceId=e.getUniqueId()+"-"+Vo++}wireBeans(e){this.pinnedWidthService=e.pinnedWidthService,this.focusService=e.focusService,this.userComponentFactory=e.userComponentFactory,this.ctrlsService=e.ctrlsService,this.dragAndDropService=e.dragAndDropService,this.menuService=e.menuService}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.focusService.getFocusedHeader();return function(e,t,i,s){const n=s.getDefinition(),o=n&&n.suppressHeaderKeyboardEvent;return!!_(o)&&!!o(e.addGridCommonParams({colDef:n,column:s,headerRowIndex:i,event:t}))}(this.gos,e,t,i)}getWrapperHasFocus(){return fe(this.gos)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:i,compBean:s}=e,{animationFrameService:n,resizeObserverService:o,columnModel:r,gos:a}=this.beans,l=e=>{if(!this.isAlive()||!s.isAlive())return;const{paddingTop:i,paddingBottom:o,borderBottomWidth:c,borderTopWidth:h}=es(this.getGui()),d=i+o+c+h,u=t.offsetHeight+d;if(e<5){const i=pe(a);if(!i||!i.contains(t)||0==u)return void n.requestAnimationFrame((()=>l(e+1)))}r.setColHeaderHeight(this.column,u)};let c,h=!1;const d=()=>{const e=this.column.isAutoHeaderHeight();e&&!h&&u(),!e&&h&&p()},u=()=>{h=!0,l(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),c=o.observeResize(t,(()=>l(0)))},p=()=>{h=!1,c&&c(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),c=void 0};d(),s.addDestroyFunc((()=>p())),s.addManagedListeners(this.column,{widthChanged:()=>h&&l(0)}),s.addManagedEventListeners({sortChanged:()=>{h&&window.setTimeout((()=>l(0)))}}),i&&i(d)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:i,eGui:s}=this;e&&t&&s&&(zo(e,t,i.visibleColsService),Ni(s,i.visibleColsService.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){this.resizeFeature&&e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=this.focusService.isHeaderFocusSuppressed();this.eGui&&Cs(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=fe(this.gos),i=e.key===js.LEFT||e.key===js.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey)return;if((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),!i)return;const s=e.key===js.LEFT!==this.gos.get("enableRtl"),n=Nn[s?"Left":"Right"];if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const t=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(t,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(n)}getViewportAdjustedResizeDiff(e){let t=this.getResizeDiff(e);if(this.column.getPinned()){const e=this.pinnedWidthService.getPinnedLeftWidth(),i=this.pinnedWidthService.getPinnedRightWidth(),s=is(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(e+i+t>s){if(!(s>e+i))return 0;t=s-e-i}}return t}getResizeDiff(e){let t=e.key===js.LEFT!==this.gos.get("enableRtl");const i=this.column.getPinned(),s=this.gos.get("enableRtl");return i&&s!==("right"===i)&&(t=!t),(t?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout((()=>{this.resizeFeature?.toggleColumnResizing(!1)}),150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case js.PAGE_DOWN:case js.PAGE_UP:case js.PAGE_HOME:case js.PAGE_END:t&&e.preventDefault()}}addDomData(t){const i=e.DOM_DATA_KEY_HEADER_CTRL;ue(this.gos,this.eGui,i,this),t.addDestroyFunc((()=>ue(this.gos,this.eGui,i,null)))}getGui(){return this.eGui}focus(e){return!!this.eGui&&(this.lastFocusEvent=e||null,this.eGui.focus(),!0)}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){const s=e??t;this.gos.get("preventDefaultOnContextMenu")&&s.preventDefault(),this.menuService.isHeaderContextMenuEnabled(i)&&this.menuService.showHeaderContextMenu(i,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,t){this.eventService.dispatchEvent({type:e,column:t})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}};jo.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var Wo=jo,Uo=class extends tt{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}};var _o="32.3.3";var Yo={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},Ko=["january","february","march","april","may","june","july","august","september","october","november","december"];var Zo=class extends Rs{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e)return void(this.lastType=this.optionsFactory.getDefaultOption());let t;if(e.operator){t=e.conditions[0]}else t=e;this.lastType=t.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const t=e;return this.isTypeEditable(t.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.optionsFactory=new lo,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return null==i||1==i}isTypeEditable(e){return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&["inRange","empty","blank","notBlank"].indexOf(e)<0}getAriaLabel(e){return`${this.columnNameService.getDisplayNameForColumn(e.column,"header",!0)} ${this.localeService.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},$o=class extends tt{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=Is,this.valueChangedListener=()=>{}}setupGui(e){this.eFloatingFilterTextInput=this.createManagedBean(new go(this.params?.config));const t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);const i=e=>this.valueChangedListener(e);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},Qo=class extends Zo{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Is}postConstruct(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>\n        ')}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=to(this.params.filterParams),!this.isReadOnly()){const e=eo(this.params.filterParams,this.getDefaultDebounceMs()),t=j(this.syncUpWithParentFilter.bind(this),e);this.floatingFilterInputService.setValueChangedListener(t)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();cs(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){const t=e.key===js.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=Mo(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance((e=>{e&&e.onFloatingFilterChanged(this.getLastType()||null,i||null)}))}setEditable(e){this.floatingFilterInputService.setEditable(e)}},Xo=class extends tt{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new fo),this.eFloatingFilterTextInput=this.createManagedBean(new go),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,(e=>this.valueChangedListener(e))),this.setupListeners(i,(e=>this.valueChangedListener(e)))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}};var qo={version:_o,moduleName:"@ag-grid-community/filter-core",beans:[class extends tt{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:e=>{let{enabled:t}=e;return this.onAdvancedFilterEnabledChanged(t)},dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],(()=>{this.onFilterChanged({source:"api"})})),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",(()=>{this.updateAggFiltering(),this.onFilterChanged()})),this.addManagedPropertyListener("advancedFilterModel",(e=>this.setAdvancedFilterModel(e.currentValue))),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return"function"===typeof e&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return"function"===typeof t&&t(e)}setFilterModel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this.isAdvancedFilterEnabled()?this.warnAdvancedFilters():this.columnFilterService?.setFilterModel(e,t)}getFilterModel(){return this.columnFilterService?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.columnFilterService?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.columnFilterService?.isAggregateFilterPresent()}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){e?this.columnFilterService?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilterService?.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){return!!this.advancedFilterService?.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){this.quickFilterService?.resetQuickFilterCache()}refreshFiltersForAggregations(){we(this.gos)&&this.onFilterChanged()}onFilterChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{source:t,additionalEventAttributes:i,columns:s=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):rn.resolve()).then((()=>{const e={source:t,type:"filterChanged",columns:s};i&&Ct(e,i),this.eventService.dispatchEvent(e),this.columnFilterService?.updateAfterFilterChanged()}))}isSuppressFlashingCellsBecauseFiltering(){return!!this.columnFilterService?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilterService?.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!we(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode))&&!(this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode))&&(!(this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode))&&(!(this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip))&&!(this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))))}isFilterActive(e){return!!this.columnFilterService?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.columnFilterService?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){return!this.isAdvancedFilterEnabled()&&!!this.columnFilterService?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){return this.columnFilterService?.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){return this.columnFilterService?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this.columnFilterService?.destroyFilter(e,t)}areFilterCompsDifferent(e,t){return!!this.columnFilterService?.areFilterCompsDifferent(e,t)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){this.isAdvancedFilterEnabled()&&(this.dataTypeService?.isPendingInference()?this.advancedFilterModelUpdateQueue.push(e):(this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})))}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return!this.isAdvancedFilterEnabled()&&!!this.columnFilterService?.hasFloatingFilters()}getFilterInstance(e,t){if(!this.isAdvancedFilterEnabled())return this.columnFilterService?.getFilterInstance(e,t);this.warnAdvancedFilters()}getColumnFilterInstance(e){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):this.columnFilterService?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvancedFilters(){F("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){this.advancedFilterService?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach((e=>this.setAdvancedFilterModel(e))),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.columnFilterService?.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):this.columnFilterService?.setColumnFilterModel(e,t)??Promise.resolve()}setColDefPropertiesForDataType(e,t,i){this.columnFilterService?.setColDefPropertiesForDataType(e,t,i)}}]},Jo={version:_o,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:function(e){return!!e.filterManager?.isAnyFilterPresent()},onFilterChanged:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";e.filterManager?.onFilterChanged({source:t})}},dependantModules:[qo]},er={version:_o,moduleName:"@ag-grid-community/column-filter",beans:[class extends tt{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...this.gos.get("initialState")?.filter?.filterModel??{}}}setFilterModel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this.dataTypeService?.isPendingInference())return void this.filterModelUpdateQueue.push({model:e,source:t});const i=[],s=this.getFilterModel(!0);if(e){const t=new Set(Object.keys(e));this.allColumnFilters.forEach(((s,n)=>{const o=e[n];i.push(this.setModelOnFilterWrapper(s.filterPromise,o)),t.delete(n)})),t.forEach((t=>{const s=this.columnModel.getColDefCol(t)||this.columnModel.getCol(t);if(!s)return void F("setFilterModel() - no column found for colId: "+t);if(!s.isFilterAllowed())return void F("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+t);const n=this.getOrCreateFilterWrapper(s);n?i.push(this.setModelOnFilterWrapper(n.filterPromise,e[t])):F("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+t)}))}else this.allColumnFilters.forEach((e=>{i.push(this.setModelOnFilterWrapper(e.filterPromise,null))}));rn.all(i).then((()=>{const e=this.getFilterModel(!0),i=[];this.allColumnFilters.forEach(((t,n)=>{q(s?s[n]:null,e?e[n]:null)||i.push(t.column)})),i.length>0&&this.filterManager?.onFilterChanged({columns:i,source:t})}))}setModelOnFilterWrapper(e,t){return new rn((i=>{e.then((e=>{"function"!==typeof e.setModel&&(F("filter missing setModel method, which is needed for setFilterModel"),i()),(e.setModel(t)||rn.resolve()).then((()=>i()))}))}))}getFilterModel(e){const t={},{allColumnFilters:i,initialFilterModel:s}=this;return i.forEach(((e,i)=>{const s=this.getModelFromFilterWrapper(e);_(s)&&(t[i]=s)})),e||Object.entries(s).forEach((e=>{let[s,n]=e;_(n)&&!i.has(s)&&this.columnModel.getCol(s)?.isFilterAllowed()&&(t[s]=n)})),t}getModelFromFilterWrapper(e){const{filter:t}=e;return t?"function"!==typeof t.getModel?(F("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return!!this.allColumnFilters.size&&(this.allColumnFilters.forEach((e=>this.disposeFilterWrapper(e,"advancedFilterEnabled"))),!0)}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const e=!!we(this.gos),t=t=>{if(!t.isPrimary())return!0;const i=!this.columnModel.isPivotActive();return!(!t.isValueActive()||!i)&&(!!this.columnModel.isPivotMode()||e)},i=[],s=[];return this.forEachColumnFilter(((e,n)=>{const o=(e=>!!e&&(e.isFilterActive?e.isFilterActive():(F("Filter is missing isFilterActive() method"),!1)))(e);o&&(t(n.column)?i.push(e):s.push(e))})).then((()=>{this.activeAggregateFilters=i,this.activeColumnFilters=s}))}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter(((i,s)=>s.column.setFilterActive(i.isFilterActive(),e,t)))}forEachColumnFilter(e){return rn.all(Array.from(this.allColumnFilters.values()).map((t=>t.filterPromise.then((i=>e(i,t))))))}doColumnFiltersPass(e,t,i){const{data:s,aggData:n}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,r=i?n:s;for(let a=0;a<o.length;a++){const i=o[a];if(null!=i&&i!==t){if("function"!==typeof i.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!i.doesFilterPass({node:e,data:r}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){const t=()=>this.filterManager?.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then((()=>this.updateFilterFlagInColumns("filterChanged",i).then((()=>{this.allColumnFilters.forEach((e=>{e.filterPromise&&e.filterPromise.then((e=>{e&&e!==t&&e.onAnyFilterChanged&&e.onAnyFilterChanged()}))})),this.processingFilterChange=!0}))))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter((e=>{e.onNewRowsLoaded&&e.onNewRowsLoaded()})).then((()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0}))).then((()=>this.updateActiveFilters()))}createValueGetter(e){return t=>{let{node:i}=t;return this.valueService.getValue(e,i,!0)}}createGetValue(e){return(t,i)=>{const s=i?this.columnModel.getCol(i):e;return s?this.valueService.getValue(s,t,!0):void 0}}isFilterActive(e){const{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():null!=this.getModelFromInitialState(e)}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(Be(this.gos))t="agSetColumnFilter";else{const i=this.dataTypeService?.getBaseDataType(e);t="number"===i?"agNumberColumnFilter":"date"===i||"dateString"===i?"agDateColumnFilter":"agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(Be(this.gos))t="agSetColumnFloatingFilter";else{const i=this.dataTypeService?.getBaseDataType(e);t="number"===i?"agNumberColumnFloatingFilter":"date"===i||"dateString"===i?"agDateColumnFloatingFilter":"agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const i=this.getDefaultFilter(e),s=e.getColDef();let n;const o={...this.createFilterParams(e,s),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(n,e)(),filterChangedCallback:t=>this.filterChangedCallbackFactory(n,e)(t),doesRowPassOtherFilter:e=>!this.filterManager||this.filterManager.doesRowPassOtherFilters(n,e)},r=this.userComponentFactory.getFilterDetails(s,o,i);return r?{filterPromise:()=>{const e=r.newAgStackInstance();return null!=e&&e.then((e=>{n=e,t&&(t.filter=e)})),e},compDetails:r}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:ft(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:i,compDetails:s}=this.createFilterInstance(e,t);return t.filterPromise=i?.()??null,t.compDetails=s,t}onColumnsChanged(){const e=[];this.allColumnFilters.forEach(((t,i)=>{let s;s=t.column.isPrimary()?this.columnModel.getColDefCol(i):this.columnModel.getCol(i),s&&s===t.column||(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(i))}));const t=e.every((e=>"agGroupColumnFilter"===e.getColDef().filter));e.length>0&&!t?this.filterManager?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){const e=this.columnModel.getAutoCols();e?.forEach((e=>{"agGroupColumnFilter"===e.getColDef().filter&&this.getOrCreateFilterWrapper(e)}))}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:t}=this.allColumnFilters.get(e.getColId())??{};return!t||("function"!==typeof t?.isFilterAllowed||t.isFilterAllowed())}getFloatingFilterCompDetails(e,t){const i=t=>{const i=this.getOrCreateFilterWrapper(e)?.filterPromise;null!=i&&i.then((e=>{t(An(e))}))},s=e.getColDef(),n={...this.createFilterParams(e,s),filterChangedCallback:()=>i((t=>this.filterChangedCallbackFactory(t,e)()))},o=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(s,Cn,n);let r=function(e,t,i){if(null==t)return null;let s=null;const{compName:n,jsComp:o,fwComp:r}=En.getCompKeys(e,t,Cn);n?s={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[n]:null==o&&null==r&&!0===t.filter&&(s=i());return s}(this.frameworkOverrides,s,(()=>this.getDefaultFloatingFilter(e)));null==r&&(r="agReadOnlyFloatingFilter");const a={column:e,filterParams:o,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(s,a,r)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const i=e.getColId(),s=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],s&&(this.disposeFilterWrapper(s,t),this.filterManager?.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then((i=>{this.destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source:t,column:e.column})}))}filterModifiedCallbackFactory(e,t){return()=>{this.eventService.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return i=>{const s={filter:e,additionalEventAttributes:i,columns:[t],source:i?.source??"columnFilter"};this.callOnFilterChangedOutsideRenderCycle(s)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:s}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,s))return void this.destroyFilter(i,"paramsUpdated");const n=i.getColDef().filterParams;t.filterPromise?t.filterPromise.then((e=>{!1===(!e?.refresh||e.refresh({...this.createFilterParams(i,i.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(e,i),filterChangedCallback:this.filterChangedCallbackFactory(e,i),doesRowPassOtherFilter:t=>!this.filterManager||this.filterManager.doesRowPassOtherFilters(e,t),...n}))&&this.destroyFilter(i,"paramsUpdated")})):this.destroyFilter(i,"paramsUpdated")}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:s}=t;return!(i===s||i?.render&&s?.render&&i.render===s.render)}hasFloatingFilters(){return this.columnModel.getCols().some((e=>e.getColDef().floatingFilter))}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then((e=>{const i=An(e);t(i)}))}getColumnFilterInstance(e){return new Promise((t=>{this.getFilterInstanceImpl(e).then((e=>{t(An(e))}))}))}getFilterInstanceImpl(e){const t=this.columnModel.getColDefCol(e);if(!t)return rn.resolve(void 0);const i=this.getOrCreateFilterWrapper(t)?.filterPromise;return i??rn.resolve(null)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach((e=>{let{model:t,source:i}=e;return this.setFilterModel(t,i)})),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach((e=>{let{key:t,model:i,resolve:s}=e;this.setColumnFilterModel(t,i).then((()=>s()))})),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.dataTypeService?.isPendingInference()){let i=()=>{};const s=new Promise((e=>{i=e}));return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:i}),s}const i=this.columnModel.getColDefCol(e),s=i?this.getOrCreateFilterWrapper(i):null;return s?(n=this.setModelOnFilterWrapper(s.filterPromise,t),new Promise((e=>{n.then((t=>e(t)))}))):Promise.resolve();var n}getFilterWrapper(e){const t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,i){const s=Be(this.gos),n=this.localeService.getLocaleTextFunc(),o=t=>{const{filterParams:i}=e;e.filterParams="object"===typeof i?{...i,...t}:t};switch(t.baseDataType){case"number":s&&o({comparator:(e,t)=>{const i=null==e?0:parseInt(e),s=null==t?0:parseInt(t);return i===s?0:i>s?1:-1}});break;case"boolean":o(s?{valueFormatter:e=>_(e.value)?n(String(e.value),e.value?"True":"False"):n("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>!1===t,numberOfInputs:0}]});break;case"date":s&&o({valueFormatter:e=>{const t=i(e);return _(t)?t:n("blanks","(Blanks)")},treeList:!0,treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=Ko[Number(e)-1];return n(t,Yo[t])}return e??n("blanks","(Blanks)")}});break;case"dateString":{const e=t.dateParser;o(s?{valueFormatter:e=>{const t=i(e);return _(t)?t:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:t=>{const i=e(t??void 0);return i?[String(i.getFullYear()),String(i.getMonth()+1),String(i.getDate())]:null},treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=Ko[Number(e)-1];return n(t,Yo[t])}return e??n("blanks","(Blanks)")}}:{comparator:(t,i)=>{const s=e(i);return null==i||s<t?-1:s>t?1:0}});break}case"object":s?o({valueFormatter:e=>{const t=i(e);return _(t)?t:n("blanks","(Blanks)")}}):e.filterValueGetter=e=>i({column:e.column,node:e.node,value:this.valueService.getValue(e.column,e.node)})}}destroy(){super.destroy(),this.allColumnFilters.forEach((e=>this.disposeFilterWrapper(e,"gridDestroyed"))),this.allColumnListeners.clear()}}],dependantModules:[qo]},tr={version:_o,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:function(e){return!!e.filterManager?.isColumnFilterPresent()||!!e.filterManager?.isAggregateFilterPresent()},getFilterInstance:function(e,t,i){return e.filterManager?.getFilterInstance(t,i)},getColumnFilterInstance:function(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)},destroyFilter:function(e,t){const i=e.columnModel.getColDefCol(t);if(i)return e.filterManager?.destroyFilter(i,"api")},setFilterModel:function(e,t){e.frameworkOverrides.wrapIncoming((()=>e.filterManager?.setFilterModel(t)))},getFilterModel:function(e){return e.filterManager?.getFilterModel()??{}},getColumnFilterModel:function(e,t){return e.filterManager?.getColumnFilterModel(t)??null},setColumnFilterModel:function(e,t,i){return e.filterManager?.setColumnFilterModel(t,i)??Promise.resolve()},showColumnFilter:function(e,t){const i=e.columnModel.getCol(t);i?e.menuService.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"}):O(`column '${t}' not found`)}},dependantModules:[er,Jo]},ir={version:_o,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:class extends Wo{constructor(e,t,i){super(e,t,i),this.iconCreated=!1,this.column=e}setComp(e,t,i,s,n){this.comp=e,n=ci(this,this.beans.context,n),this.eButtonShowMainFilter=i,this.eFloatingFilterBody=s,this.setGui(t,n),this.setupActive(),this.setupWidth(n),this.setupLeft(n),this.setupHover(n),this.setupFocus(n),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(n),this.setupUi(),n.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(n),n.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(n)}),n.addDestroyFunc((()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()}))}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Ls("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new qn(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();Ii(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(fe(this.gos)===this.eGui)return;const t=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(t)return this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),void t.focus();const i=this.findNextColumnWithFloatingFilter(e.shiftKey);i&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:i},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleColsService;let i=this.column;do{if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break}while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case js.UP:case js.DOWN:t||e.preventDefault();case js.LEFT:case js.RIGHT:if(t)return;e.stopPropagation();case js.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case js.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const t=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&Ji(e.relatedTarget,"ag-floating-filter");if(t&&i&&e.target===this.eGui){const e=this.lastFocusEvent,t=!(!e||e.key!==js.TAB);if(e&&t){const t=e.shiftKey;this.focusService.focusInto(this.eGui,t)}}const s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.column)}setupHover(e){e.createManagedBean(new Uo([this.column],this.eGui));const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:t}),t()}setupLeft(e){const t=new Go(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;const e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter()));e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:t}=this.beans,i=e=>{if("filterDestroyed"===e?.source&&!this.isAlive())return;const i=this.comp.getFloatingFilterComp();i&&i.then((i=>{if(i){const s=t?.getCurrentFloatingFilterParentModel(this.column),n=e?{...e,columns:e.columns??[],source:"api"===e.source?"api":"columnFilter"}:null;i.onParentModelChanged(s,n)}}))};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:i}),t?.isFilterActive(this.column)&&i(null)}setupWidth(e){const t=()=>{const e=`${this.column.getActualWidth()}px`;this.comp.setWidth(e)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const s=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter())):null,n=this.comp.getFloatingFilterComp();n&&s?n.then((t=>{!t||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,s)?this.updateCompDetails(e,s,i):this.updateFloatingFilterParams(s)})):this.updateCompDetails(e,s,i)}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){if(!e)return;const t=e.params;this.comp.getFloatingFilterComp()?.then((e=>{let i=!1;if(e?.refresh&&"function"===typeof e.refresh){null!==e.refresh(t)&&(i=!0)}if(!i&&e?.onParamsUpdated&&"function"===typeof e.onParamsUpdated){null!==e.onParamsUpdated(t)&&F("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}}))}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}}}],dependantModules:[er]},sr={version:_o,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:class extends Rs{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>\n            </div>',[mo]),this.eFloatingFilterText=Is}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){null!=e?this.params.parentFilterInstance((t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})):this.eFloatingFilterText.setValue("")}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}}}],dependantModules:[ir]},nr={version:_o,moduleName:"@ag-grid-community/simple-filter",dependantModules:[er],userComponents:[{name:"agTextColumnFilter",classImp:class extends co{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>null==e?null:e.toString().toLowerCase(),this.defaultMatcher=e=>{let{filterOption:t,value:i,filterText:s}=e;if(null==s)return!1;switch(t){case"contains":return i.indexOf(s)>=0;case"notContains":return i.indexOf(s)<0;case"equals":return i===s;case"notEqual":return i!=s;case"startsWith":return 0===i.indexOf(s);case"endsWith":{const e=i.lastIndexOf(s);return e>=0&&e===i.length-s.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new xo(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(F("textCustomComparator is deprecated, use textMatcher instead."),t=>{let{filterOption:i,value:s,filterText:n}=t;return e(i,s,n)}):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValuesWithSideEffects(e,!0);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,((e,s,n,o)=>{if(s<o){let s=U(e.getValue());t&&this.textFilterParams.trimInput&&(s=Mo(s)??null,e.setValue(s,!0)),i.push(s)}})),i}getDefaultFilterOptions(){return So}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),Di(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const s=this.createManagedBean(new go);s.addCssClass(`ag-filter-${i}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(s))}evaluateNullValue(e){return!!e&&["notEqual","notContains","blank"].indexOf(e)>=0}evaluateNonNullValue(e,t,i,s){const n=e.map((e=>this.formatter(e)))||[],o=this.formatter(t),{api:r,colDef:a,column:l,context:c,textFormatter:h}=this.textFilterParams;if("blank"===i.type)return this.isBlank(t);if("notBlank"===i.type)return!this.isBlank(t);const d={api:r,colDef:a,column:l,context:c,node:s.node,data:s.data,filterOption:i.type,value:o,textFormatter:h};return n.some((e=>this.matcher({...d,filterText:e})))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}}},{name:"agNumberColumnFilter",classImp:class extends ho{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern===e.allowedCharPattern&&super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(s))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new bo(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return vo}setElementValue(e,t,i){const s=!i&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,s)}createValueElement(){const e=wo(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),Di(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,s){const n=this.createManagedBean(s?new go({allowedCharPattern:s}):new fo);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,((e,i,s,n)=>{i<n&&t.push(this.processValue(this.stringToFloat(e.getValue())))})),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return null==e||isNaN(e)?null:e}stringToFloat(e){if("number"===typeof e)return e;let t=U(e);return null!=t&&""===t.trim()&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):null==t||"-"===t.trim()?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValues(e);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput((t=>{t.getInputElement().validity.valid||(e=!0)})),e}}},{name:"agDateColumnFilter",classImp:class extends ho{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=1e3,this.maxValidYear=Oo,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:s}=e||{};return[t&&To(t)||null,i&&To(i)||null].slice(0,this.getNumberOfInputs(s))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){return null==t||t<e?-1:t>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(t,i)=>{if(null!=e[t]){if(!isNaN(e[t]))return null==e[t]?i:Number(e[t]);F(`DateFilter ${t} is not a number`)}return i};this.minValidYear=t("minValidYear",1e3),this.maxValidYear=t("maxValidYear",Oo),this.minValidYear>this.maxValidYear&&F("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:To(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:To(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&F("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new Fo(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new Po(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc((()=>t.destroy())),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return No}createValueElement(){const e=pe(this.gos).createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,s){const n=pe(this.gos).createElement("div");n.classList.add(`ag-filter-${s}`),n.classList.add(`ag-filter-date-${s}`),t.push(n),e.appendChild(n),i.push(this.createDateCompWrapper(n))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach((e=>e.destroy()))}isValidDateValue(e){if(null===e)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput(((i,s,n,o)=>{n!==e||!t||s>=o||(t=t&&this.isValidDateValue(i.getDate()))})),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),i={},s=this.getValues(e);return s.length>0&&(i.dateFrom=Ao(s[0])),s.length>1&&(i.dateTo=Ao(s[1])),{dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t,...i}}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput((e=>{e.setInputPlaceholder(t),e.setInputAriaLabel(i)}))}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,((e,i,s,n)=>{i<n&&t.push(e.getDate())})),t}translate(e){return"lessThan"===e?super.translate("before"):"greaterThan"===e?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}}},{name:"agDateInput",classImp:class extends Rs{constructor(){super('\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>\n            </div>',[mo]),this.eDateInput=Is}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:e=>{e.target===fe(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&zi(),t.type=i?"date":"text";const{minValidYear:s,maxValidYear:n,minValidDate:o,maxValidDate:r}=e.filterParams||{};if(o&&s&&F("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),r&&n&&F("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),o&&r){const[e,t]=[o,r].map((e=>e instanceof Date?e:To(e)));e&&t&&e.getTime()>t.getTime()&&F("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}o?o instanceof Date?t.min=ko(o):t.min=o:s&&(t.min=`${s}-01-01`),r?r instanceof Date?t.max=ko(r):t.max=r:n&&(t.max=`${n}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return To(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Ao(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e&&e.suppressFocus||this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&null!=e.filterParams.browserDatePicker?e.filterParams.browserDatePicker:Vi()||ji()||zi()&&Hi()>=14.1}}}]},or={version:_o,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[nr,ir],userComponents:[{name:"agTextColumnFloatingFilter",classImp:class extends Qo{init(e){super.init(e),this.filterModelFormatter=new xo(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return So}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new $o)}}},{name:"agNumberColumnFloatingFilter",classImp:class extends Qo{init(e){super.init(e),this.filterModelFormatter=new bo(this.localeService,this.optionsFactory,e.filterParams?.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){wo(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return vo}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=wo(e.filterParams),this.allowedCharPattern?this.createManagedBean(new $o({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new Xo)}}},{name:"agDateColumnFloatingFilter",classImp:class extends Zo{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>\n                <div data-ref="eDateWrapper" style="display: flex;"></div>\n            </div>',[mo]),this.eReadOnlyText=Is,this.eDateWrapper=Is}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return No}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new Fo(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const t=e;this.dateComp.setDate(To(t.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Xi(this.eDateWrapper,e),Xi(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=Ao(this.dateComp.getDate());this.params.parentFilterInstance((t=>{if(t){const i=To(e);t.onFloatingFilterChanged(this.getLastType()||null,i)}}))}getDateComponentParams(){const e=eo(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:j(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new Po(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,(e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))})),this.addDestroyFunc((()=>this.dateComp.destroy()))}updateDateComponent(){const e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}}}]},rr={version:_o,moduleName:"@ag-grid-community/quick-filter-core",beans:[class extends tt{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){const e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",(e=>this.setQuickFilter(e.currentValue))),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],(()=>this.onQuickFilterColumnConfigChanged())),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],(()=>this.setQuickFilterParserAndMatcher()))}refreshQuickFilterCols(){const e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),i=this.columnModel.getColDefCols();let s=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.pivotResultColsService.getPivotResultCols()?.list:i)??[];t&&(s=s.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?s:s.filter((e=>e.isVisible()||e.isRowGroupActive()))}isQuickFilterPresent(){return null!==this.quickFilter}doesRowPassQuickFilter(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every((i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i)))}resetQuickFilterCache(){this.rowModel.forEachNode((e=>e.quickFilterAggregateText=null))}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;this.quickFilterParts=e?t?t(e):e.split(" "):null}parseQuickFilter(e){return _(e)?ie(this.gos)?e.toUpperCase():(F("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(null!=e&&"string"!==typeof e)return void F("Grid option quickFilterText only supports string inputs, received: "+typeof e);const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some((i=>{const s=this.getQuickFilterTextForColumn(i,e);return _(s)&&s.indexOf(t)>=0}))}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);const{quickFilterParts:s,matcher:n}=this;return n(s,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0);const s=e.getColDef();if(s.getQuickFilterText){const n=this.gos.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:s});i=s.getQuickFilterText(n)}return _(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.colsForQuickFilter.forEach((i=>{const s=this.getQuickFilterTextForColumn(i,e);_(s)&&t.push(s)})),t.join("\n")}}],dependantModules:[qo]},ar={version:_o,moduleName:"@ag-grid-community/filter",dependantModules:[or,sr,{version:_o,moduleName:"@ag-grid-community/quick-filter",dependantModules:[rr,{version:_o,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:function(e){return!!e.filterManager?.isQuickFilterPresent()},getQuickFilter:function(e){return e.gos.get("quickFilterText")},resetQuickFilter:function(e){e.filterManager?.resetQuickFilterCache()}},dependantModules:[rr]}]},tr]},lr=(e=>(e.COLUMN_GROUP="group",e.COLUMN="column",e.FLOATING_FILTER="filter",e))(lr||{}),cr=class extends tt{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}));const e=pe(this.gos);this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){return this.ctrlsService.getHeaderRowContainerCtrl()?.getRowCount()??0}getHeaderPositionForColumn(e,t){let i;if("string"===typeof e?(i=this.columnModel.getCol(e),i||(i=this.visibleColService.getColumnGroup(e))):i=e,!i)return null;const s=this.ctrlsService.getHeaderRowContainerCtrl(),n=s?.getAllCtrls(),o="filter"===ze(n||[]).getType(),r=this.getHeaderRowCount()-1;let a=-1,l=i;for(;l;)a++,l=l.getParent();let c=a;return t&&o&&c===r-1&&c++,-1===c?null:{headerRowIndex:c,column:i}}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:s}=t,n=t.column,o=this.getHeaderRowCount(),r=0===e;let{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:c}=r?this.headerPositionUtils.getColumnVisibleParent(n,s):this.headerPositionUtils.getColumnVisibleChild(n,s),h=!1;return a<0&&(a=0,l=n,h=!0),a>=o?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):void 0!==c&&(this.currentHeaderRowWithoutSpan=c),!(!h&&!l)&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const s=this.focusService.getFocusedHeader(),n=2===e,o=this.gos.get("enableRtl");let r,a;if(-1!==this.currentHeaderRowWithoutSpan?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,n!==o?(a="Before",r=this.headerPositionUtils.findHeader(s,a)):(a="After",r=this.headerPositionUtils.findHeader(s,a)),r||!t)return this.focusService.focusHeaderPosition({headerPosition:r,direction:a,fromTab:t,allowUserOverride:!0,event:i});if(t){const e=this.gos.getCallback("tabToNextHeader");if(e)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:e,headerPosition:r,direction:a})}return this.focusNextHeaderRow(s,a,i)}focusNextHeaderRow(e,t,i){const s=e.headerRowIndex;let n,o=null;if("Before"===t?s>0&&(n=s-1,this.currentHeaderRowWithoutSpan-=1,o=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"end")):(n=s+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),o=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"start")),!o)return!1;const{column:r,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(o.column,o?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:r,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"After";if(!e.getPinned()){if($t(e)){const s=e.getDisplayedLeafColumns();t="Before"===i?ze(s):s[0]}else t=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(t)}}},hr=class extends tt{wireBeans(e){this.animationFrameService=e.animationFrameService,this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new qn(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();const s=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:s}),this.mockContextMenuForIPad(s),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>this.animationFrameService.requestAnimationFrame((()=>e())),gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:e}=this;let t=0;const i=this.columnModel.getGroupRowsHeight().reduce(((e,t)=>e+t),0),s=this.columnModel.getColumnHeaderRowHeight();if(this.filterManager?.hasFloatingFilters()&&(t+=e.getFloatingFiltersHeight()),t+=i,t+=s,this.headerHeight===t)return;this.headerHeight=t;const n=`${t+1}px`;this.comp.setHeightAndMinHeight(n),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const e=this.visibleColsService.getAllCols().some((e=>e.isSpanHeaderHeight()));this.comp.addOrRemoveCssClass("ag-header-allow-overflow",e)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,s=i!==t?2:3;(this.headerNavigationService.navigateHorizontally(s,!0,e)||!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case js.LEFT:t=2;case js.RIGHT:_(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e)&&e.preventDefault();break;case js.UP:t=0;case js.DOWN:_(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const{relatedTarget:t}=e;!t&&this.eGui.contains(fe(this.gos))||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,i){if(!e&&!i||!this.menuService.isHeaderContextMenuEnabled())return;const{target:s}=e??t;s!==this.eGui&&s!==this.ctrlsService.getHeaderRowContainerCtrl()?.getViewportElement()||this.menuService.showHeaderContextMenu(void 0,e,i)}mockContextMenuForIPad(e){if(!Ui())return;const t=new Ps(this.eGui);this.addManagedListeners(t,{longTap:t=>{e(void 0,t.touchStart,t.touchEvent)}}),this.addDestroyFunc((()=>t.destroy()))}},dr=class extends tt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=ne(this.gos,"print"),t=this.visibleColsService.getBodyContainerWidth(),i=this.visibleColsService.getColsLeftWidth(),s=this.visibleColsService.getDisplayedColumnsRightWidth();let n;if(e)n=t+i+s;else if(n=t,this.addSpacer){0===(this.gos.get("enableRtl")?i:s)&&this.scrollVisibleService.isVerticalScrollShowing()&&(n+=this.scrollVisibleService.getScrollbarWidth())}this.callback(n)}},ur=class extends tt{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach((e=>{e.isPrimary()&&(e.isAnyFunctionActive()||(e.isAllowValue()?this.columnsToAggregate.push(e):e.isAllowRowGroup()?this.columnsToGroup.push(e):e.isAllowPivot()&&this.columnsToPivot.push(e)))}))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function pr(e){const{isFromHeader:t,fromLeft:i,xPosition:s,fromEnter:n,fakeEvent:o,pinned:r,gos:a,columnModel:l,columnMoveService:c,visibleColsService:h}=e;let{allMovingColumns:d}=e;if(t){const e=[];d.forEach((t=>{let i=null,s=t.getParent();for(;null!=s&&1===s.getDisplayedLeafColumns().length;)i=s,s=s.getParent();if(null!=i){(!!i.getColGroupDef()?.marryChildren?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns()).forEach((t=>{e.includes(t)||e.push(t)}))}else e.includes(t)||e.push(t)})),d=e}const u=d.slice();l.sortColsLikeCols(u);const p=function(e){const{movingCols:t,draggingRight:i,xPosition:s,pinned:n,gos:o,columnModel:r,visibleColsService:a}=e,l=o.get("suppressMovableColumns")||t.some((e=>e.getColDef().suppressMovable));if(l)return[];const c=function(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}(a,n),h=r.getCols(),d=c.filter((e=>_e(t,e))),u=c.filter((e=>!_e(t,e))),p=h.filter((e=>!_e(t,e)));let g,m=0,f=s;if(i){let e=0;d.forEach((t=>e+=t.getActualWidth())),f-=e}if(f>0){for(let e=0;e<u.length;e++){if(f-=u[e].getActualWidth(),f<0)break;m++}i&&m++}if(m>0){const e=u[m-1];g=p.indexOf(e)+1}else g=p.indexOf(u[0]),-1===g&&(g=0);const y=[g],v=(e,t)=>e-t;if(i){let e=g+1;const t=h.length-1;for(;e<=t;)y.push(e),e++;y.sort(v)}else{let e=g;const t=h.length-1;let i=h[e];for(;e<=t&&c.indexOf(i)<0;)e++,y.push(e),i=h[e];e=g-1;const s=0;for(;e>=s;)y.push(e),e--;y.sort(v).reverse()}return y}({movingCols:u,draggingRight:i,xPosition:s,pinned:r,gos:a,columnModel:l,visibleColsService:h}),g=function(e,t){const i=t.getCols(),s=function(e){return e.sort(((e,t)=>e-t))}(e.map((e=>i.indexOf(e)))),n=s[0],o=ze(s);return o-n!==s.length-1?null:n}(u,l);if(0===p.length)return;const m=p[0];let f=null!==g&&!n;if(t&&(f=null!==g),f&&!o){if(!i&&m>=g)return;if(i&&m<=g)return}const y=h.getAllCols(),v=[];let C=null;for(let w=0;w<p.length;w++){const e=p[w],t=c.getProposedColumnOrder(u,e);if(!c.doesOrderPassRules(t))continue;const i=t.filter((e=>y.includes(e)));if(null===C)C=i;else if(!He(i,C))break;const s=mr(t);v.push({move:e,fragCount:s})}if(0===v.length)return;v.sort(((e,t)=>e.fragCount-t.fragCount));const b=v[0].move;return b>l.getCols().length-d.length?void 0:{columns:d,toIndex:b}}function gr(e){const{columns:t,toIndex:i}=pr(e)||{},{finished:s,columnMoveService:n}=e;return t&&null!=i?(n.moveColumns(t,i,"uiColumnMoved",s),s?null:{columns:t,toIndex:i}):null}function mr(e){function t(e){const t=[];let i=e.getOriginalParent();for(;null!=i;)t.push(i),i=i.getOriginalParent();return t}let i=0;for(let s=0;s<e.length-1;s++){let n=t(e[s]),o=t(e[s+1]);[n,o]=n.length>o.length?[n,o]:[o,n],n.forEach((e=>{-1===o.indexOf(e)&&i++}))}return i}function fr(e){const{pinned:t,fromKeyboard:i,gos:s,ctrlsService:n,useHeaderRow:o,skipScrollPadding:r}=e;let a=n.getHeaderRowContainerCtrl(t)?.getViewportElement(),{x:l}=e;return a?(i&&(l-=a.getBoundingClientRect().left),s.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),null!=t||r||(l+=n.get("center").getCenterViewportScrollLeft()),l):0}function yr(e,t){for(const i of e)i.setMoving(t,"uiColumnMoved")}var vr=class extends tt{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!_(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}))}getIconName(){const e=this.lastDraggingEvent?.dragItem.columns??[];for(const t of e){const e=t.getPinned();if(t.getColDef().lockPinned){if(e==this.pinned)return"move"}else{if(e===this.pinned||!this.pinned)return"move";if(!e&&this.pinned)return"pinned"}}return"notAllowed"}onDragEnter(e){const t=e.dragItem.columns;if(0===e.dragSource.type)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const i=e.dragItem.visibleState,s=(t||[]).filter((e=>i[e.getId()]));this.setColumnsVisible(s,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(t,this.pinned),this.onDragging(e,!0,!0)}onDragging(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lastDraggingEvent,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=this.gos.get("suppressMoveWhenColumnDragging");if(s&&!n)return void this.finishColumnMoving();if(this.lastDraggingEvent=e,!e||!s&&Y(e.hDirection))return;const{pinned:o,gos:r,ctrlsService:a}=this,l=fr({x:e.x,pinned:o,gos:r,ctrlsService:a});t||this.checkCenterForScrolling(l),n?this.handleColumnDragWhileSuppressingMovement(e,t,i,l,s):this.handleColumnDragWhileAllowingMovement(e,t,i,l,s)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e)return;const s=e.filter((e=>!e.getColDef().lockVisible));this.columnModel.setColsVisible(s,t,i)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;const{columns:e,toIndex:t}=this.lastMovedInfo;this.columnMoveService.moveColumns(e,t,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,i,s,n){const o=this.getAllMovingColumns(e,!0);if(n){const e=this.isAttemptingToPin(o);e&&this.attemptToPinColumns(o,void 0,!0);const{fromLeft:s,xPosition:n}=this.getNormalisedXPositionInfo(o,e)||{};if(null==s||null==n)return void this.finishColumnMoving();this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:n,fromEnter:t,fakeEvent:i,fromLeft:s})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,s)}}handleColumnDragWhileAllowingMovement(e,t,i,s,n){const o=this.getAllMovingColumns(e),r=1===this.normaliseDirection(e.hDirection),a=1===e.dragSource.type,l=gr({...this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:s,fromLeft:r,fromEnter:t,fakeEvent:i}),finished:n});l&&(this.lastMovedInfo=l)}getAllMovingColumns(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.dragSource.getDragItem();let s=null;t?(s=i.columnsInSplit,s||(s=i.columns)):s=i.columns;return s?s.filter((e=>!e.getColDef().lockPinned||e.getPinned()==this.pinned)):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:s,fromLeft:n,fromEnter:o,fakeEvent:r}=e,{pinned:a,gos:l,columnModel:c,columnMoveService:h,visibleColsService:d}=this;return{allMovingColumns:t,isFromHeader:i,fromLeft:n,xPosition:s,pinned:a,fromEnter:o,fakeEvent:r,gos:l,columnModel:c,columnMoveService:h,visibleColsService:d}}findFirstAndLastMovingColumns(e){const t=e.length;let i,s;for(let n=0;n<=t;n++){if(!i){const t=e[n];null!=t.getLeft()&&(i=t)}if(!s){const i=e[t-1-n];null!=i.getLeft()&&(s=i)}if(i&&s)break}return{firstMovingCol:i,lastMovingCol:s}}highlightHoveredColumn(e,t){const{gos:i,columnModel:s}=this,n=i.get("enableRtl"),o=s.getCols().filter((e=>e.isVisible()&&e.getPinned()===this.pinned));let r,a=null,l=null,c=null;for(const h of o){if(l=h.getActualWidth(),a=this.getNormalisedColumnLeft(h,0,n),null!=a){if(a<=t&&a+l>=t){c=h;break}}a=null,l=null}if(c)-1!==e.indexOf(c)&&(c=null);else{for(let e=o.length-1;e>=0;e--){const t=o[e],i=o[e].getParent();if(!i){c=t;break}const s=i?.getDisplayedLeafColumns();if(s.length){c=ze(s);break}}if(!c)return;a=this.getNormalisedColumnLeft(c,0,n),l=c.getActualWidth()}this.lastHighlightedColumn?.column!==c&&this.clearHighlighted(),null!=c&&null!=a&&null!=l&&(r=t-a<l/2!==n?0:1,c.setHighlighted(r),this.lastHighlightedColumn={column:c,position:r})}getNormalisedXPositionInfo(e,t){const{gos:i,visibleColsService:s}=this,n=i.get("enableRtl"),{firstMovingCol:o,column:r,position:a}=this.getColumnMoveAndTargetInfo(e,t,n);if(!o||!r||null==a)return;const l=s.getAllCols(),c=l.indexOf(o),h=l.indexOf(r),d=0===a!==n,u=c<h||c===h&&!d;let p=0;if(d?u&&(p-=1):u||(p+=1),h+p===c)return;const g=l[h+p];if(!g)return;return{fromLeft:u,xPosition:this.getNormalisedColumnLeft(g,20,n)}}getColumnMoveAndTargetInfo(e,t,i){const s=this.lastHighlightedColumn||{},{firstMovingCol:n,lastMovingCol:o}=this.findFirstAndLastMovingColumns(e);if(!n||!o||s.column||!t)return{firstMovingCol:n,...s};const r="left"===this.getPinDirection();return{firstMovingCol:n,position:r?1:0,column:r!==i?n:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0}return e}getNormalisedColumnLeft(e,t,i){const{gos:s,ctrlsService:n}=this,o=e.getLeft();if(null==o)return null;const r=e.getActualWidth();return fr({x:i?o+r-t:o+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:s,ctrlsService:n})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>7;return t&&i||e.some((e=>e.getPinned()!==this.pinned))}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:s,fakeEvent:n,fromLeft:o}=e,r=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:o,fromEnter:s,fakeEvent:n}),{columns:a,toIndex:l}=pr(r)||{};a&&null!=l&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.ctrlsService.get("center"),i=t.getCenterViewportScrollLeft(),s=i+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<i+50,this.needToMoveLeft=e>s-50):(this.needToMoveLeft=e<i+50,this.needToMoveRight=e>s-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+5*this.intervalCount,e>100&&(e=100);let t=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),0!==t)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=8)return;if(this.dragAndDropService.getDragAndDropImageComponent()?.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){const e=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(e,void 0,!0)}}}getPinDirection(){return this.needToMoveLeft||"left"===this.pinned?"left":this.needToMoveRight||"right"===this.pinned?"right":void 0}attemptToPinColumns(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=(e||[]).filter((e=>!e.getColDef().lockPinned));return s.length?(i&&(t=this.getPinDirection()),this.columnModel.setColsPinned(s,t,"uiColumnDragged"),i&&this.dragAndDropService.nudge(),s.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},Cr=class extends tt{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(this,(e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]]}})),this.moveColumnFeature=this.createManagedBean(new vr(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new ur(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc((()=>this.dragAndDropService.removeDropTarget(this)))}isInterestedIn(e){return 1===e||0===e&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&0===e.dragSource.type}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},br=class extends tt{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s,n){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=s,this.ctrl=n}postConstruct(){const e=[];let t,i;const s=()=>{if(Xi(this.eResize,t),!t)return;const s=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(s),i){const t=this.gos.get("skipHeaderOnAutoSize"),i=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",t)};this.eResize.addEventListener("dblclick",i);const s=new Ps(this.eResize);s.addEventListener("doubleTap",i),e.push((()=>{this.eResize.removeEventListener("dblclick",i),s.removeEventListener("doubleTap",i),s.destroy()}))}},n=()=>{e.forEach((e=>e())),e.length=0},o=()=>{const e=this.column.isResizable(),o=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(e!==t||o!==i)&&(t=e,i=o,n(),s())};o(),this.addDestroyFunc(n),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){const{column:i,lastResizeAmount:s,resizeStartWidth:n}=this,o=this.normaliseResizeAmount(t),r=[{key:i,newWidth:n+o}];if(this.column.getPinned()){if(this.pinnedWidthService.getPinnedLeftWidth()+this.pinnedWidthService.getPinnedRightWidth()+(o-s)>is(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50)return}this.lastResizeAmount=o,this.columnSizeService.setColumnWidths(r,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i="left"!==this.pinned,s="right"===this.pinned;return this.gos.get("enableRtl")?i&&(t*=-1):s&&(t*=-1),t}},wr=class extends tt{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(fe(this.gos))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new Ys),this.cbSelectAll.addCssClass("ag-header-select-all"),Di(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),t=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),i=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${i} (${t})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection")),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return!!Fe(this.gos)||(F(`${e} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(e){return!(!ie(this.gos)&&!se(this.gos))||(F(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox)return;if(!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),i=this.isCurrentPageOnly();let s="uiSelectAll";i?s="uiSelectAllCurrentPage":t&&(s="uiSelectAllFiltered");const n={source:s,justFiltered:t,justCurrentPage:i};e?this.selectionService.selectAllRowNodes(n):this.selectionService.deselectAllRowNodes(n)}isCheckboxSelection(){const e=this.gos.get("rowSelection"),t="object"===typeof e&&Ee(e)&&dt(this.column),i=this.column.getColDef().headerCheckboxSelection;let s=!1;return s=!!t||("function"===typeof i?i(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):!!i),s&&this.checkRightRowModelType(t?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(t?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){const e=this.gos.get("rowSelection");return"object"===typeof e?"multiRow"===e.mode&&"filtered"===e.selectAll:!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){const e=this.gos.get("rowSelection");return"object"===typeof e?"multiRow"===e.mode&&"currentPage"===e.selectAll:!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},Sr=class extends Wo{constructor(e,t,i){super(e,t,i),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,s,n){this.comp=e,n=ci(this,this.beans.context,n),this.setGui(t,n),this.updateState(),this.setupWidth(n),this.setupMovingCss(n),this.setupMenuClass(n),this.setupSortableClass(n),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:s,checkMeasuringCallback:e=>this.setRefreshFunction("measuring",e),compBean:n}),this.addColumnHoverListener(n),this.setupFilterClass(n),this.setupClassesFromColDef(),this.setupTooltip(n),this.addActiveHeaderMouseListeners(n),this.setupSelectAll(n),this.setupUserComp(n),this.refreshAria(),this.resizeFeature=n.createManagedBean(new br(this.getPinned(),this.column,i,e,this)),n.createManagedBean(new Uo([this.column],t)),n.createManagedBean(new Go(this.column,t,this.beans)),n.createManagedBean(new qn(t,{shouldStopEventPropagation:e=>this.shouldStopEventPropagation(e),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(n),n.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],(()=>this.refresh(n))),n.addManagedListeners(this.column,{colDefChanged:()=>this.refresh(n)}),n.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const o=()=>this.checkDisplayName(n);n.addManagedEventListeners({columnValueChanged:o,columnRowGroupChanged:o,columnPivotChanged:o,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),n.addDestroyFunc((()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()}))}resizeHeader(e,t){if(!this.column.isResizable())return;const i=this.column.getActualWidth(),s=this.column.getMinWidth(),n=this.column.getMaxWidth(),o=Math.min(Math.max(i+e,s),n);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:o}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,beans:i,column:s,ctrlsService:n}=this,{gos:o,columnModel:r,columnMoveService:a,visibleColsService:l}=i,c=this.getPinned(),h=t.getBoundingClientRect().left,d=s.getActualWidth(),u=fr({x:0===e!==o.get("enableRtl")?h-20:h+d+20,pinned:c,fromKeyboard:!0,gos:o,ctrlsService:n}),p=this.focusService.getFocusedHeader();gr({allMovingColumns:[s],isFromHeader:!0,fromLeft:1===e,xPosition:u,pinned:c,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:r,columnMoveService:a,visibleColsService:l,finished:!0}),n.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(s,"auto"),this.isAlive()&&!this.beans.gos.get("ensureDomOrder")||!p||this.restoreFocus(p)}restoreFocus(e){this.focusService.focusHeaderPosition({headerPosition:{...e,column:this.column}})}setupUserComp(e){const t=this.lookupUserCompDetails(e);this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(e){const t=this.createParams(e),i=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(i,t)}createParams(e){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:e=>{this.menuService.showColumnMenu({column:this.column,buttonElement:e,positionBy:"button"})},showColumnMenuAfterMouseClick:e=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:e,positionBy:"mouse"})},showFilter:e=>{this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{this.beans.sortController.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,t)=>{this.beans.sortController.setSortForColumn(this.column,e,!!t,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(t,i)=>{this.setupTooltip(e,t,i)}})}setupSelectAll(e){this.selectAllFeature=e.createManagedBean(new wr(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===js.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===js.ENTER&&this.onEnterKeyDown(e),e.key===js.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();i&&i instanceof Bs&&i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const e=this.getRowIndex();this.focusService.setFocusedHeader(e,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const s="whenTruncated"===this.gos.get("tooltipShowMode"),n=this.eGui,o=this.column.getColDef();i||!s||o.headerComponent||(i=()=>{const e=n.querySelector(".ag-header-cell-text");return!e||e.scrollWidth>e.clientWidth});const r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>n,getLocation:()=>"header",getTooltipValue:()=>{if(null!=t)return t;return this.column.getColDef().headerTooltip},shouldDisplayTooltip:i},a=e.createManagedBean(new Ms(r));this.setRefreshFunction("tooltip",(()=>a.refreshToolTip()))}setupClassesFromColDef(){const e=()=>{const e=Bo(this.column.getColDef(),this.gos,this.column,null),t=this.userHeaderClasses;this.userHeaderClasses=new Set(e),e.forEach((e=>{t.has(e)?t.delete(e):this.comp.addOrRemoveCssClass(e,!0)})),t.forEach((e=>this.comp.addOrRemoveCssClass(e,!1)))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:i,displayName:s,dragAndDropService:n,gos:o}=this,{columnModel:r}=i;let a=!this.gos.get("suppressDragLeaveHidesColumns");const l=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:s,onDragStarted:()=>{a=!o.get("suppressDragLeaveHidesColumns"),yr([t],!0)},onDragStopped:()=>yr([t],!1),onDragCancelled:()=>yr([t],!1),onGridEnter:e=>{if(a){const t=e?.columns?.filter((e=>!e.getColDef().lockVisible))||[];r.setColsVisible(t,!0,"uiColumnMoved")}},onGridExit:e=>{if(a){const t=e?.columns?.filter((e=>!e.getColDef().lockVisible))||[];r.setColsVisible(t,!1,"uiColumnMoved")}}};n.addDragSource(l,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(e){this.updateState(),this.refreshHeaderComp(e),this.refreshAria(),Object.values(this.refreshFunctions).forEach((e=>e()))}refreshHeaderComp(e){const t=this.lookupUserCompDetails(e);!!(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==t.componentClass)&&this.attemptHeaderCompRefresh(t.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();if(!t)return!1;if(!t.refresh)return!1;return t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(e){this.displayName!==this.calculateDisplayName()&&this.refresh(e)}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const e=this.column.getActualWidth();this.comp.setWidth(`${e}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const e=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=0===e,i=1===e;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:s}=this,n=this.beans.columnModel.getGroupRowsHeight(),o=0===n.reduce(((e,t)=>e+t),0);if(i.addOrRemoveCssClass("ag-header-parent-hidden",o),!t.isSpanHeaderHeight())return e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),void i.addOrRemoveCssClass("ag-header-span-total",!1);const{numberOfParents:r,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",r>0);const{columnModel:l}=s,c=l.getColumnHeaderRowHeight();if(0===r)return i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),void e.style.setProperty("height",`${c}px`);i.addOrRemoveCssClass("ag-header-span-total",a);let h=0;for(let d=0;d<r;d++)h+=n[n.length-1-d];e.style.setProperty("top",-h+"px"),e.style.setProperty("height",`${c+h}px`)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(function(e){let t;return t="asc"===e?"ascending":"desc"===e?"descending":"mixed"===e?"other":"none",t}(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){null!=t?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(fe(this.beans.gos)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort(((e,t)=>"filter"===e?-1:t.charCodeAt(0)-e.charCodeAt(0))).map((e=>this.ariaDescriptionProperties.get(e))).join(". ");this.beans.ariaAnnouncementService.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};e.addManagedEventListeners({columnHoverChanged:t}),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column)})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof Bs?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy()}},xr=class extends tt{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){const e=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",(()=>{const t=[];this.columnGroup.getDisplayedLeafColumns().forEach((e=>{e.getColDef().suppressAutoSize||t.push(e.getColId())})),t.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:e,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")}))}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"uiColumnResized";const s=this.normaliseDragChange(t),n=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(n,i,e)}getInitialValues(e){const t=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(t),s={columnsToResize:t,resizeStartWidth:i,resizeRatios:this.getSizeRatiosOfColumns(t,i)};let n=null;if(e&&(n=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),n){const e=n.getDisplayedLeafColumns(),t=s.groupAfterColumns=e.filter((e=>e.isResizable())),i=s.groupAfterStartWidth=this.getInitialSizeOfColumns(t);s.groupAfterRatios=this.getSizeRatiosOfColumns(t,i)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:s,groupAfterColumns:n,groupAfterStartWidth:o,groupAfterRatios:r}=e;this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=s,this.resizeTakeFromCols=n,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=r}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this.resizeCols||!this.resizeRatios)return;const s={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(s,e,t,i)}resizeColumns(e,t,i){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{columnsToResize:n,resizeStartWidth:o,resizeRatios:r,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,h=[];if(h.push({columns:n,ratios:r,width:t}),a){const e=t-o;h.push({columns:a,ratios:c,width:l-e})}this.columnSizeService.resizeColumnSets({resizeSets:h,finished:s,source:i}),s&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter((e=>e.isResizable()))}getInitialSizeOfColumns(e){return e.reduce(((e,t)=>e+t.getActualWidth()),0)}getSizeRatiosOfColumns(e,t){return e.map((e=>e.getActualWidth()/t))}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?"left"!==this.pinned&&(t*=-1):"right"===this.pinned&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},Mr=class extends tt{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach((t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push((()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)}))}))}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach((e=>e())),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",0===e)}},Dr=class extends Wo{constructor(e,t,i){super(e,t,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const e=this.getGui();this.setDragSource(e)}},this.column=e}setComp(e,t,i,s,n){this.comp=e,n=ci(this,this.beans.context,n),this.setGui(t,n),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(n),this.setupExpandable(n),this.setupTooltip(n),this.setupAutoHeight({wrapperElement:s,compBean:n}),this.setupUserComp(n),this.addHeaderMouseListeners(n),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const o=this.getParentRowCtrl().getPinned(),r=this.column.getProvidedColumnGroup().getLeafColumns();n.createManagedBean(new Uo(r,t)),n.createManagedBean(new Go(this.column,t,this.beans)),n.createManagedBean(new Mr(e,this.column)),this.resizeFeature=n.createManagedBean(new xr(e,i,o,this.column)),n.createManagedBean(new qn(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(n,r),n.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(n),n.addDestroyFunc((()=>this.clearComponent()))}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");null!=i?0===i?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,s=ze(t)===e;if(!i&&!s)return;const n=e.getHighlighted();let o=!1,r=!1;if(!!this.getParentRowCtrl().findHeaderCellCtrl((e=>e.getColumnGroupChild().isMoving()))){const e=this.beans.gos.get("enableRtl"),t=1===n,a=0===n;i&&(e?r=t:o=a),s&&(e?o=a:r=t)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",o),this.comp.addOrRemoveCssClass("ag-header-highlight-after",r)}getColumn(){return this.column}resizeHeader(e,t){if(!this.resizeFeature)return;const i=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:i,column:s,ctrlsService:n}=this,{gos:o,columnModel:r,columnMoveService:a,visibleColsService:l}=t,c=o.get("enableRtl"),h=0===e,d=this.getPinned(),u=i.getBoundingClientRect(),p=u.left,g=u.width,m=fr({x:h!==c?p-20:p+g+20,pinned:d,fromKeyboard:!0,gos:o,ctrlsService:n}),f=s.getGroupId(),y=this.focusService.getFocusedHeader();gr({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:1===e,xPosition:m,pinned:d,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:r,columnMoveService:a,visibleColsService:l,finished:!0});const v=s.getDisplayedLeafColumns(),C=h?v[0]:ze(v);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(C,"auto"),this.isAlive()&&!this.beans.gos.get("ensureDomOrder")||!y||this.restoreFocus(f,s,y)}restoreFocus(e,t,i){const s=t.getLeafColumns();if(!s.length)return;const n=s[0].getParent();if(!n)return;const o=this.findGroupWidthId(n,e);o&&this.focusService.focusHeaderPosition({headerPosition:{...i,column:o}})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(e){const t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:e=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),e,"gridInitializing")},setTooltip:(t,i)=>{this.setupTooltip(e,t,i)}}),i=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(i)}addHeaderMouseListeners(e){const t=e=>this.handleMouseOverChange("mouseenter"===e.type);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column.getProvidedColumnGroup())})}handleMouseOverChange(e){this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const s=this.column.getColGroupDef(),n="whenTruncated"===this.gos.get("tooltipShowMode"),o=this.eGui;i||!n||s?.headerGroupComponent||(i=()=>{const e=o.querySelector(".ag-header-group-text");return!e||e.scrollWidth>e.clientWidth});const r={getColumn:()=>this.column,getGui:()=>o,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(s&&s.headerTooltip),shouldDisplayTooltip:i};s&&(r.getColDef=()=>s),e.createManagedBean(new Ms(r))}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=Bo(e,this.gos,null,this.column);if(this.column.isPadding()){t.push("ag-header-group-cell-no-group");this.column.getLeafColumns().every((e=>e.isSpanHeaderHeight()))&&t.push("ag-header-span-height")}else t.push("ag-header-group-cell-with-group"),e?.wrapHeaderText&&t.push("ag-header-cell-wrap-text");t.forEach((e=>this.comp.addOrRemoveCssClass(e,!0)))}setupMovingCss(e){const t=this.column.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());t.forEach((t=>{e.addManagedListeners(t,{movingChanged:i})})),i()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const e=this.getRowIndex();this.beans.focusService.setFocusedHeader(e,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(this.expandable&&t&&e.key===js.ENTER){const e=this.column,t=!e.isExpanded();this.beans.columnModel.setColumnGroupOpened(e.getProvidedColumnGroup(),t,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving())return;if(this.removeDragSource(),!e)return;const{beans:t,column:i,displayName:s,gos:n,dragAndDropService:o}=this,{columnModel:r}=t,a=i.getProvidedColumnGroup().getLeafColumns();let l=!n.get("suppressDragLeaveHidesColumns");const c=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",dragItemName:s,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{l=!n.get("suppressDragLeaveHidesColumns"),yr(a,!0)},onDragStopped:()=>yr(a,!1),onDragCancelled:()=>yr(a,!1),onGridEnter:e=>{if(l){const{columns:t=[],visibleState:i}=e??{},s=t.filter((e=>!e.getColDef().lockVisible&&(!i||i[e.getColId()])));r.setColsVisible(s,!0,"uiColumnMoved")}},onGridExit:e=>{if(l){const t=e?.columns?.filter((e=>!e.getColDef().lockVisible))||[];r.setColsVisible(t,!1,"uiColumnMoved")}}};o.addDragSource(c,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),i={};t.forEach((e=>i[e.getId()]=e.isVisible()));const s=[];this.beans.visibleColsService.getAllCols().forEach((e=>{t.indexOf(e)>=0&&(s.push(e),je(t,e))})),t.forEach((e=>s.push(e)));const n=[],o=e.getLeafColumns();for(const r of s)-1!==o.indexOf(r)&&n.push(r);return{columns:s,columnsInSplit:n,visibleState:i}}isSuppressMoving(){let e=!1;this.column.getLeafColumns().forEach((t=>{(t.getColDef().suppressMovable||t.getColDef().lockPosition)&&(e=!0)}));return e||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},Ir=0,Rr=class extends tt{constructor(e,t,i){super(),this.instanceId=Ir++,this.rowIndex=e,this.pinned=t,this.type=i;const s="group"==i?"ag-header-row-column-group":"filter"==i?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${s}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=ne(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return!!this.comp&&this.getHeaderCellCtrls().every((e=>null!=e.getGui()))}setComp(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.comp=e,t=ci(this,this.beans.context,t),i&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:e=>this.onVirtualColumnsChanged(e.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",(e=>this.isEnsureDomOrder=e.currentValue)),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return ee(this.headerCellCtrls).find((t=>t.getColumnGroupChild()===e))}onDisplayedColumnsChanged(){this.isPrintLayout=ne(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleColsService:e}=this.beans;if(this.isPrintLayout){return null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null)}return e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans,i=[],s=e.getGroupRowsHeight(),n=e.getColumnHeaderRowHeight();i.push(...s),i.push(n),t?.hasFloatingFilters()&&i.push(e.getFloatingFiltersHeight());let o=0;for(let r=0;r<this.rowIndex;r++)o+=i[r];return{topOffset:o,rowHeight:i[this.rowIndex]}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const s of t)this.recycleAndCreateHeaderCtrls(s,e);const i=e=>{const{focusService:t,visibleColsService:i}=this.beans;if(!t.isHeaderWrapperFocused(e))return!1;return i.isVisible(e.getColumnGroupChild())};if(e)for(const[s,n]of e){i(n)?this.headerCellCtrls.set(s,n):this.destroyBean(n)}return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls)return;if(e.isEmptyGroup())return;const i=e.getUniqueId();let s;t&&(s=t.get(i),t.delete(i));if(s&&s.getColumnGroupChild()!=e&&(this.destroyBean(s),s=void 0),null==s)switch(this.type){case"filter":s=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break;case"group":s=this.createBean(new Dr(e,this.beans,this));break;default:s=this.createBean(new Sr(e,this.beans,this))}this.headerCellCtrls.set(i,s)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(null!=this.pinned)return[];let e=[];const t=this.getActualDepth(),{columnViewportService:i}=this.beans;return["left",null,"right"].forEach((s=>{const n=i.getHeadersToRender(s,t);e=e.concat(n)})),e}getActualDepth(){return"filter"==this.type?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;const t=this.getHeaderCellCtrls();let i;return i="function"===typeof e?t.find(e):t.find((t=>t.getColumnGroupChild()==e)),i}focusHeader(e,t){const i=this.findHeaderCellCtrl(e);if(!i)return!1;return i.focus(t)}destroy(){this.headerCellCtrls?.forEach((e=>{this.destroyBean(e)})),this.headerCellCtrls=void 0,super.destroy()}},Er=class extends tt{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);const i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:i,advancedFilterEnabledChanged:i});const s=`${"string"===typeof this.pinned?this.pinned:"center"}Header`;this.ctrlsService.register(s,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=new ws,i=this.focusService.getFocusHeaderToUseAfterRefresh();(()=>{const e=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let i=0;i<e;i++){const e=this.createBean(new Rr(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(e)}})(),(()=>{const i=t.next(),s=!this.hidden&&(null==this.columnsRowCtrl||!e||this.columnsRowCtrl.getRowIndex()!==i);(s||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),s&&(this.columnsRowCtrl=this.createBean(new Rr(i,this.pinned,"column")))})(),(()=>{this.includeFloatingFilter=!!this.filterManager?.hasFloatingFilters()&&!this.hidden;const i=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void i();const s=t.next();if(this.filtersRowCtrl){const t=this.filtersRowCtrl.getRowIndex()!==s;e&&!t||i()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new Rr(s,this.pinned,"filter")))})();const s=this.getAllCtrls();this.comp.setCtrls(s),this.restoreFocusOnHeader(i)}getHeaderCtrlForColumn(e){if(Dt(e))return this.columnsRowCtrl?.getHeaderCellCtrl(e);if(0!==this.groupsRowCtrls.length)for(let t=0;t<this.groupsRowCtrls.length;t++){const i=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(i)return i}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const t=this.getAllCtrls()[e];return t?t.getType():void 0}focusHeader(e,t,i){const s=this.getAllCtrls()[e];return!!s&&s.focusHeader(t,i)}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){const t=new Cr(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;const{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const e=this.filterManager?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new dr((e=>this.comp.setCenterWidth(`${e}px`)),!0))}setupPinnedWidth(){if(null==this.pinned)return;const e="left"===this.pinned,t="right"===this.pinned;this.hidden=!0;const i=()=>{const i=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(null==i)return;const s=0==i,n=this.hidden!==s,o=this.gos.get("enableRtl"),r=this.scrollVisibleService.getScrollbarWidth(),a=this.scrollVisibleService.isVerticalScrollShowing()&&(o&&e||!o&&t)?i+r:i;this.comp.setPinnedContainerWidth(`${a}px`),this.comp.setDisplayed(!s),n&&(this.hidden=s,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}},Ar=class extends tt{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e},i=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,t)}getDomLayout(){const e=this.gos.get("domLayout")??"normal";return-1===["normal","print","autoHeight"].indexOf(e)?(F(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},Lr=class extends Rs{constructor(){super('\n            <div class="ag-overlay" role="presentation">\n                <div class="ag-overlay-panel" role="presentation">\n                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>\n                </div>\n            </div>'),this.eOverlayWrapper=Is,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(e){this.overlayService=e.overlayService,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}handleKeyDown(e){if(e.key!==js.TAB||e.defaultPrevented||Xe(e))return;if(this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let t=!1;t=e.shiftKey?this.focusService.focusGridView(ze(this.visibleColsService.getAllCols()),!0,!1):this.focusService.focusNextGridCoreContainer(!1),t&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new Ar(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,s){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.focusService.isGridFocused()){const e=fe(this.gos);e&&!ye(this.gos)&&(this.elToFocusAfter=e)}e.then((t=>{if(this.activePromise!==e)return void(this.activeOverlay!==t&&(this.destroyBean(t),t=null));if(this.activePromise=null,!t)return;if(this.activeOverlay!==t&&(this.eOverlayWrapper.appendChild(t.getGui()),this.activeOverlay=t,s)){const e=t;this.updateListenerDestroyFunc=this.addManagedPropertyListener(s,(t=>{let{currentValue:i}=t;e.refresh?.(this.gos.addGridCommonParams({...i??{}}))}))}const n=this.focusService;i&&n.isGridFocused()&&n.focusInto(this.eOverlayWrapper)}))}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.focusService.isGridFocused()&&(t=null);const i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),cs(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}},kr=class extends Rs{constructor(e,t){super(),this.direction=t,this.eViewport=Is,this.eContainer=Is,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",Wi()||Ui())}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=Zi(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame((()=>this.setScrollVisible()))}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(null!==this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout((()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null}),400)}})}attemptSettingScrollPosition(e){const t=this.getViewportElement();!function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,s=arguments.length>3?arguments[3]:void 0;const n=(new Date).getTime();let o=null,r=!1;const a=()=>{const a=(new Date).getTime()-n>i;(e()||a)&&(t(),r=!0,null!=o&&(window.clearInterval(o),o=null),a&&s&&F(s))};a(),r||(o=window.setInterval(a,10))}((()=>us(t)),(()=>this.setScrollPosition(e)),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}},Tr=class extends kr{constructor(){super('<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>\n        </div>',"horizontal"),this.eLeftSpacer=Is,this.eRightSpacer=Is}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new dr((e=>this.eContainer.style.width=`${e}px`))),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.visibleColsService.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,s=this.scrollVisibleService.getScrollbarWidth();i&&(t+=s),ms(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=s);let n=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(n+=s),ms(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=s)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),s=e&&this.scrollVisibleService.getScrollbarWidth()||0,n=i?0:0===s&&t?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),fs(this.getGui(),n),fs(this.eViewport,n),fs(this.eContainer,n),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return as(this.getViewportElement(),this.enableRtl)}setScrollPosition(e){us(this.getViewportElement())||this.attemptSettingScrollPosition(e),ls(this.getViewportElement(),e,this.enableRtl)}},Pr=class extends tt{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=null!=e?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},Nr=class extends kr{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super('<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>\n            </div>\n        </div>',"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new Pr(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.scrollVisibleService.getScrollbarWidth()||0,s=0===i&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),ms(this.getGui(),s),ms(this.eViewport,s),ms(this.eContainer,s),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,t=e.getGridBodyCtrl().getBodyViewportElement(),i=this.getScrollPosition(),s=t.scrollTop;i!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(e,t){t||us(this.getViewportElement())||this.attemptSettingScrollPosition(e),this.getViewportElement().scrollTop=e}},Fr=(e=>(e.FakeHScrollbar="fakeHScrollComp",e.Header="centerHeader",e.PinnedTop="topCenter",e.PinnedBottom="bottomCenter",e.StickyTop="stickyTopCenter",e.StickyBottom="stickyBottomCenter",e))(Fr||{}),Or=class extends tt{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=j((()=>this.lastScrollSource[1]=null),500),this.resetLastVScrollDebounced=j((()=>this.lastScrollSource[0]=null),500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,(e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()}))}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(const e of Object.values(Fr)){const t=this.ctrlsService.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsService.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?j(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),s=t?j(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,s)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){null==this.centerRowsCtrl||(void 0===e&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...Object.values(Fr),"Viewport"]){if(this.lastScrollSource[1]===t)continue;ls(this.getViewportForSource(t),e,this.enableRtl)}}getViewportForSource(e){return"Viewport"===e?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(e).getViewportElement()}isControllingScroll(e,t){return null==this.lastScrollSource[t]?(0===t?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const s=as(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(s),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;t="Viewport"===e?this.eBodyViewport.scrollTop:this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0)||(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,"Viewport"===e?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:1===e?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout((()=>{this.eventService.dispatchEvent({...t,type:"bodyScrollEnd"})}),100)}shouldBlockScrollUpdate(e,t){return!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&!Ui())&&(0===e?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t))}shouldBlockVerticalScroll(e){const t=ts(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&rs()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(e=this.enableRtl&&rs()?e>0?0:i:Math.min(Math.max(e,0),i)),ls(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight;return{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=this.rowModel.getRowCount();let s=-1;for(let n=0;n<i;n++){const t=this.rowModel.getRow(n);if("function"===typeof e){if(t&&e(t)){s=n;break}}else if(e===t||e===t.data){s=n;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t){if(ne(this.gos,"print"))return;const i=this.rowModel.getRowCount();if("number"!==typeof e||e<0||e>=i)return void F("Invalid row index for ensureIndexVisible: "+e);const s=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming((()=>{s||this.paginationService?.goToPageWithIndex(e);const i=this.ctrlsService.getGridBodyCtrl(),n=i.getStickyTopHeight(),o=i.getStickyBottomHeight(),r=this.rowModel.getRow(e);let a;do{const e=r.rowTop,i=r.rowHeight,s=this.pageBoundsService.getPixelOffset(),l=r.rowTop-s,c=l+r.rowHeight,h=this.getVScrollPosition(),d=this.heightScaler.getDivStretchOffset(),u=h.top+d,p=h.bottom+d,g=p-u,m=this.heightScaler.getScrollPositionForPixel(l),f=this.heightScaler.getScrollPositionForPixel(c-g),y=Math.min((m+f)/2,l);let v=null;"top"===t?v=m:"bottom"===t?v=f:"middle"===t?v=y:u+n>l?v=m-n:p-o<c&&(v=f+o),null!==v&&(this.setVerticalScrollPosition(v),this.rowRenderer.redraw({afterScroll:!0})),a=e!==r.rowTop||i!==r.rowHeight}while(a);this.animationFrameService.flushAllFrames()}))}ensureColumnVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";const i=this.columnModel.getCol(e);if(!i)return;if(i.isPinned())return;if(!this.visibleColsService.isColDisplayed(i))return;const s=this.getPositionedHorizontalScroll(i,t);this.getFrameworkOverrides().wrapIncoming((()=>{null!==s&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}))}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming((()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()}))}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:s}=this.isColumnOutsideViewport(e),n=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let a=(r?i:s)||n,l=r?s:i;"auto"!==t&&(a="start"===t,l="end"===t);const c="middle"===t;if(a||l||c){const{colLeft:t,colMiddle:i,colRight:s}=this.getColumnBounds(e);return c?i-o/2:a?r?s:t:r?t-o:s-o}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:s,colRight:n}=this.getColumnBounds(e),o=this.enableRtl;return{columnBeforeStart:o?t>n:i<n,columnAfterEnd:o?i<s:t>s}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleColsService.getBodyContainerWidth(),s=e.getActualWidth(),n=e.getLeft(),o=t?-1:1,r=t?i-n:n;return{colLeft:r,colMiddle:r+s/2*o,colRight:r+s*o}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}},Gr=class extends tt{wireBeans(e){this.animationFrameService=e.animationFrameService,this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()})),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],(()=>{this.checkViewportAndScrolls()}))}listenForResize(){const e=()=>{this.animationFrameService.requestAnimationFrame((()=>{this.onCenterViewportResized()}))};this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=is(this.gridBodyCtrl.getBodyViewportElement());if(e<=50)return;let t=this.getPinnedColumnsOverflowingViewport(e-50);const i=this.gos.getCallback("processUnpinnedColumns");if(t.length){if(i){t=i({columns:t,viewportWidth:e})}this.columnModel.setColsPinned(t,null,"viewportSizeFeature")}}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth()+this.pinnedWidthService.getPinnedLeftWidth();if(t<e)return[];const i=[...this.visibleColsService.getLeftCols()],s=[...this.visibleColsService.getRightCols()];let n=0,o=0;const r=[];let a=t-0-e;for(;(o<i.length||n<s.length)&&a>0;){if(n<s.length){const e=s[n++];a-=e.getActualWidth(),r.push(e)}if(o<i.length&&a>0){const e=i[o++];a-=e.getActualWidth(),r.push(e)}}return r}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=ts(this.gridBodyCtrl.getBodyViewportElement());this.bodyHeight!==e&&(this.bodyHeight=e,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},Br=class extends tt{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],(()=>{Ae(this.gos)?this.enableFeature():this.disableFeature()})),this.addDestroyFunc((()=>this.disableFeature()));Ae(this.gos)&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},zr=class extends Rs{constructor(){super('\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[Ks]),this.eCheckbox=Is}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=Bi(e,t),[s,n]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],o=e(s,n);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${o} (${i})`)}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:e=>Qe(e),click:e=>{Qe(e);const t="filteredDescendants"===Oe(this.gos),i=this.eCheckbox.getValue();if(this.shouldHandleIndeterminateState(i,t)){0===this.onClicked(!0,t,e||{})&&this.onClicked(!1,t,e)}else i?this.onClicked(!1,t,e):this.onClicked(!0,t,e||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)});if(Pe(this.gos)||"function"===typeof this.getIsVisible()){const e=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(void 0===this.eCheckbox.getPreviousValue()||void 0===e)&&ie(this.gos)}showOrHideSelect(){let e=this.rowNode.selectable;const t=this.getIsVisible();if(e)if("function"===typeof t){const i=this.overrides?.callbackParams;if(this.column){const s=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t({...i,...s})}else e=t({...i,node:this.rowNode,data:this.rowNode.data})}else e=t??!1;const i=this.gos.get("rowSelection");var s;if(i&&"string"!==typeof i?(s=i,!s?.hideDisabledCheckboxes):this.column?.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!e),this.setVisible(!0),void this.setDisplayed(!0);this.overrides?.removeHidden?this.setDisplayed(e):this.setVisible(e)}getIsVisible(){if(this.overrides)return this.overrides.isVisible;const e=this.gos.get("rowSelection");return e&&"string"!==typeof e?Re(e):this.column?.getColDef()?.checkboxSelection}},Hr=class extends Rs{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(Ls("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",(e=>{e.stopPropagation()})),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const i=()=>{try{const t=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",t),e.dataTransfer.setData("text/plain",t)}catch(t){}};if(t){t(this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e}))}else i()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},Vr=class extends tt{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,i,(e=>this.cellComp.addOrRemoveCssClass(e,!0)),(e=>this.cellComp.addOrRemoveCssClass(e,!1))),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if("function"===typeof e.cellStyle){const i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex});t=(0,e.cellStyle)(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach((e=>this.cellComp.addOrRemoveCssClass(e,!1))),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach((e=>this.cellComp.addOrRemoveCssClass(e,!0)))}destroy(){super.destroy()}},jr=class extends tt{constructor(e,t,i,s,n){super(),this.cellCtrl=e,this.beans=t,this.rowNode=s,this.rowCtrl=n}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case js.ENTER:this.onEnterKeyDown(e);break;case js.F2:this.onF2KeyDown(e);break;case js.ESCAPE:this.onEscapeKeyDown(e);break;case js.TAB:this.onTabKeyDown(e);break;case js.BACKSPACE:case js.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case js.DOWN:case js.UP:case js.RIGHT:case js.LEFT:this.onNavigationKeyDown(e,t)}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:s,rowNode:n}=this,{gos:o,rangeService:r,eventService:a}=s;if(!i.isEditing()){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e===js.DELETE||!t&&e===js.BACKSPACE&&Wi()}(e,o.get("enableCellEditingOnBackspace"))){if(r&&Ae(o))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const e=i.getColumn(),t=this.beans.valueService.getDeleteValue(e,n);n.setDataValue(e,t,"cellClear")}}else i.startRowOrCellEdit(e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const t=e.shiftKey?js.UP:js.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(js.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(js.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const t=e.key;" "===t?this.onSpaceKeyDown(e):this.cellCtrl.startRowOrCellEdit(t,e)&&e.preventDefault()}onSpaceKeyDown(e){const{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&oe(t)){const i=this.rowNode.isSelected(),s=!i,n="filteredDescendants"===Oe(t),o=this.rowNode.setSelectedParams({newValue:s,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"});void 0===i&&0===o&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"})}e.preventDefault()}destroy(){super.destroy()}},Wr=class extends tt{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!Xe(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}}onCellClicked(e){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(e),void e.preventDefault();const{eventService:t,rangeService:i,gos:s}=this.beans,n=e.ctrlKey||e.metaKey;i&&n&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const o=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(o);const r=this.column.getColDef();r.onCellClicked&&window.setTimeout((()=>{this.beans.frameworkOverrides.wrapOutgoing((()=>{r.onCellClicked(o)}))}),0);!((s.get("singleClickEdit")||r.singleClickEdit)&&!s.get("suppressClickEdit"))||e.shiftKey&&0!=i?.getCellRanges().length||this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Ui()||qe("dblclick"))return!1;const e=(new Date).getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:s}=this,{eventService:n,frameworkOverrides:o,gos:r}=i,a=t.getColDef(),l=s.createEvent(e,"cellDoubleClicked");n.dispatchEvent(l),"function"===typeof a.onCellDoubleClicked&&window.setTimeout((()=>{o.wrapOutgoing((()=>{a.onCellDoubleClicked(l)}))}),0);!r.get("singleClickEdit")&&!r.get("suppressClickEdit")&&s.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:s}=e,n=e.target,{cellCtrl:o,beans:r}=this,{eventService:a,rangeService:l,focusService:c,gos:h}=r;if(this.isRightClickInExistingRange(e))return;const d=l&&0!=l.getCellRanges().length;if(!s||!d){const t=h.get("enableCellTextSelection")&&e.defaultPrevented,i=(zi()||t)&&!o.isEditing()&&!Qi(n);o.focusCell(i)}if(s&&d&&!c.isCellFocused(o.getCellPosition())){e.preventDefault();const t=c.getFocusedCell();if(t){const{column:e,rowIndex:i,rowPinned:s}=t,n=r.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:s}),o=n?.getCellCtrl(e);o?.isEditing()&&o.stopEditing(),c.setFocusedCell({column:e,rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(n)){if(l){const e=this.cellCtrl.getCellPosition();if(s)l.extendLatestRangeToCell(e);else{const s=t||i;l.setRangeToCell(e,s)}}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),s=2===e.button||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&s)return!0}return!1}containsWidget(e){return Ji(e,"ag-selection-checkbox",3)}onMouseOut(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),i=t.contains(e.target),s=t.contains(e.relatedTarget);return i&&s}destroy(){super.destroy()}},Ur=class extends tt{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();He(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce(((e,t)=>e+t.getActualWidth()),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(1===e)t.push(this.column);else{let i=this.column;const s=this.column.getPinned();for(let n=0;i&&n<e&&(t.push(i),i=this.beans.visibleColsService.getColAfter(i),i&&!Y(i))&&s===i.getPinned();n++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return e=this.beans.gos.get("enableRtl")&&this.colsSpanning?ze(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||"left"===this.column.getPinned())return e;const t=this.beans.visibleColsService.getColsLeftWidth();if("right"===this.column.getPinned()){return t+this.beans.visibleColsService.getBodyContainerWidth()+(e||0)}return t+(e||0)}applyRowSpan(e){if(1===this.rowSpan&&!e)return;const t=ce(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${t}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},_r="ag-cell-range-selected",Yr=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(_r,0!==this.rangeCount),this.cellComp.addOrRemoveCssClass(`${_r}-1`,1===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${_r}-2`,2===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${_r}-3`,3===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${_r}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),Gi(this.eGui,this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,s=!t&&e.right,n=!t&&e.bottom,o=!t&&e.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",i),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",s),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",n),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",o)}isSingleCell(){const{rangeService:e}=this.beans;return 1===this.rangeCount&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every((e=>_e([1,0],e.type)))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,i=!1,s=!1,n=!1;const o=this.cellCtrl.getCellPosition().column,r=this.beans.visibleColsService;let a,l;e?(a=r.getColAfter(o),l=r.getColBefore(o)):(a=r.getColBefore(o),l=r.getColAfter(o));const c=this.rangeService.getCellRanges().filter((e=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),e)));a||(n=!0),l||(i=!0);for(let h=0;h<c.length&&!(t&&i&&s&&n);h++){const e=c[h],o=this.rangeService.getRangeStartRow(e),r=this.rangeService.getRangeEndRow(e);!t&&this.beans.rowPositionUtils.sameRow(o,this.cellCtrl.getCellPosition())&&(t=!0),!s&&this.beans.rowPositionUtils.sameRow(r,this.cellCtrl.getCellPosition())&&(s=!0),!n&&a&&e.columns.indexOf(a)<0&&(n=!0),!i&&l&&e.columns.indexOf(l)<0&&(i=!0)}return{top:t,right:i,bottom:s,left:n}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,t=this.rangeService.getCellRanges(),i=t.length;if(this.rangeCount<1||i<1)return!1;const s=ze(t),n=this.cellCtrl.getCellPosition(),o=Le(e)&&!this.cellCtrl.isSuppressFillHandle(),r=function(e){const t=e.get("cellSelection");return void 0!==t?"boolean"!==typeof t&&"range"===t.handle?.mode:e.get("enableRangeHandle")}(e);let a=1===i&&!this.cellCtrl.isEditing()&&(o||r);if(this.hasChartRange){const e=1===t[0].type&&this.rangeService.isCellInSpecificRange(n,t[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",e),a=0===s.type}return a&&null!=s.endRow&&this.rangeService.isContiguousRange(s)&&this.rangeService.isBottomRightCell(s,n)}addSelectionHandle(){const e=ze(this.rangeService.getCellRanges()).type,t=Le(this.beans.gos)&&Y(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(t)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},Kr=0,Zr=class e extends tt{constructor(e,t,i,s){super(),this.column=e,this.rowNode=t,this.beans=i,this.rowCtrl=s,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=e.getId()+"-"+Kr++,this.colIdSanitised=Ut(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new Ur(this,this.beans),this.cellCustomStyleFeature=new Vr(this,this.beans),this.cellMouseListenerFeature=new Wr(this,this.beans,this.column),this.cellKeyboardListenerFeature=new jr(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature();this.beans.rangeService&&Ae(this.beans.gos)&&(this.cellRangeFeature=new Yr(this.beans,this))}removeFeatures(){const e=this.beans.context;this.cellPositionFeature=e.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=e.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=e.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=e.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=e.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){const i="whenTruncated"===this.beans.gos.get("tooltipShowMode");t||!i||this.isCellRenderer()||(t=()=>{const e=this.getGui(),t=0===e.children.length?e:e.querySelector(".ag-cell-value");return!t||t.scrollWidth>t.clientWidth});const s={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:null!=e?()=>e:()=>{const e=this.column.getColDef(),t=this.rowNode.data;if(e.tooltipField&&_(t))return bt(t,e.tooltipField,this.column.isTooltipFieldContainsDots());const i=e.tooltipValueGetter;return i?i(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:t};this.tooltipFeature=new Ms(s,this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(e,t,i,s,n,o){this.cellComp=e,this.eGui=t,this.printLayout=s,o??(o=this),this.addDomData(o),this.addFeatures(),o.addDestroyFunc((()=>this.removeFeatures())),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,o),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.cellPositionFeature?.setComp(t),this.cellCustomStyleFeature?.setComp(e),this.tooltipFeature?.refreshToolTip(),this.cellKeyboardListenerFeature?.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,t),n&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach((e=>e())),this.onCellCompAttachedFuncs=[])}setupAutoHeight(e,t){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!e)return;const i=e.parentElement,s=le(this.beans.gos,this.rowNode).height,n=o=>{if(this.editing)return;if(!this.isAlive()||!t.isAlive())return;const{paddingTop:r,paddingBottom:a,borderBottomWidth:l,borderTopWidth:c}=es(i),h=r+a+l+c,d=e.offsetHeight+h;if(o<5){const t=pe(this.beans.gos);if(!t||!t.contains(e)||0==d)return void window.setTimeout((()=>n(o+1)),0)}const u=Math.max(d,s);this.rowNode.setRowAutoHeight(u,this.column)},o=()=>n(0);o();const r=this.beans.resizeObserverService.observeResize(e,o);t.addDestroyFunc((()=>{r(),this.rowNode.setRowAutoHeight(void 0,this.column)}))}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return null!=e.cellRenderer||null!=e.cellRendererSelector}getValueToDisplay(){return this.valueFormatted??this.value}showValue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{beans:t,column:i,rowNode:s,cellRangeFeature:n,cellComp:o}=this,{userComponentFactory:r,animationFrameService:a}=t,l=this.getValueToDisplay();let c;if(s.stub&&null==s.groupData?.[this.column.getId()]){const e=this.createCellRendererParams();c=r.getLoadingCellRendererDetails(i.getColDef(),e)}else if(this.isCellRenderer()){const e=this.createCellRendererParams();c=r.getCellRendererDetails(i.getColDef(),e)}o.setRenderDetails(c,l,e),a.requestAnimationFrame((()=>n?.refreshHandle()))}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e)),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return!(null!=this.rowNode.rowPinned)&&("function"===typeof e||!0===e)}isCheckboxSelection(e){const{rowSelection:t}=this.beans.gridOptions;return e.checkboxSelection||dt(this.column)&&t&&"string"!==typeof t&&Re(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e)),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),s=this.includeDndSource!=this.isIncludeControl(e.dndSource),n=this.isAutoHeight!=this.column.isAutoHeight();return t||i||s||n}startEditing(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{editService:s}=this.beans;return!(this.isCellEditable()&&!this.editing&&s)||(this.cellComp?s.startEditing(this,e,t,i):(this.onCellCompAttachedFuncs.push((()=>{this.startEditing(e,t,i)})),!0))}setEditing(e,t){this.editCompDetails=t,this.editing!==e&&(this.editing=e)}stopRowOrCellEdit(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"fullRow"===this.beans.gos.get("editType")?this.rowCtrl.stopEditing(e):this.stopEditing(e)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.onCellEditorAttachedFuncs=[];const{editService:t}=this.beans;return!(!this.editing||!t)&&t.stopEditing(this,e)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),setValue:e=>this.beans.valueService.setValue(this.rowNode,this.column,e),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(e,t,i,s)=>this.registerRowDragger(e,t,s),setTooltip:(e,t)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,t),this.tooltipFeature?.refreshToolTip()}})}setFocusOutOnEditor(){this.editing&&this.beans.editService?.setFocusOutOnEditor(this)}setFocusInOnEditor(){this.editing&&this.beans.editService?.setFocusInOnEditor(this)}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e)}refreshCell(e){if(this.suppressRefreshCell||this.editing)return;const t=this.column.getColDef(),i=null!=e&&!!e.newData,s=null!=e&&!!e.suppressFlash||!!t.suppressCellFlash,n=null==t.field&&null==t.valueGetter&&null==t.showRowGroup,o=e&&e.forceRefresh||n||i,r=!!this.cellComp,a=this.updateAndFormatValue(r);if(r){if(o||a){this.showValue(i);const e=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!s&&!e&&(this.beans.gos.get("enableCellChangeFlash")||t.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature?.applyUserStyles(),this.cellCustomStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshToolTip(),this.cellCustomStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.beans.editService?.stopEditingAndFocus(this,e,t)}flashCell(e){const t=e?.flashDuration??e?.flashDelay,i=e?.fadeDuration??e?.fadeDelay;this.animateCell("data-changed",t,i)}animateCell(e,t,i){if(!this.cellComp)return;const{gos:s}=this.beans;if(t||(t=s.get("cellFlashDuration")),0===t)return;_(i)||(i=s.get("cellFadeDuration"));const n=`ag-cell-${e}`,o=`ag-cell-${e}-animation`;this.cellComp.addOrRemoveCssClass(n,!0),this.cellComp.addOrRemoveCssClass(o,!1),this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(n,!1),this.cellComp.addOrRemoveCssClass(o,!0),this.eGui.style.transition=`background-color ${i}ms`,window.setTimeout((()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.eGui.style.transition="")}),i))}),t)}))}onFlashCells(e){if(!this.cellComp)return;const t=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[t]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueService.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,i=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),!e||(!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i)}valuesAreEqual(e,t){const i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}getComp(){return this.cellComp}getValue(){return this.value}addDomData(t){const i=this.getGui();ue(this.beans.gos,i,e.DOM_DATA_KEY_CELL_CTRL,this),t.addDestroyFunc((()=>ue(this.beans.gos,i,e.DOM_DATA_KEY_CELL_CTRL,null)))}createEvent(e,t){return this.beans.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex})}processCharacter(e){this.cellKeyboardListenerFeature?.processCharacter(e)}onKeyDown(e){this.cellKeyboardListenerFeature?.onKeyDown(e)}onMouseEvent(e,t){this.cellMouseListenerFeature?.onMouseEvent(e,t)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){this.cellComp&&this.cellPositionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:e,column:t,beans:i}=this;zo(e,t,i.visibleColsService)}refreshAriaColIndex(){const e=this.beans.visibleColsService.getAriaColIndex(this.column);Ni(this.getGui(),e)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){return this.cellPositionFeature?.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cellComp?"fullRow"===this.beans.gos.get("editType")?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,t):(this.onCellCompAttachedFuncs.push((()=>{this.startRowOrCellEdit(e,t)})),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return null!=this.cellRangeFeature}focusCell(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(e){this.eGui&&Cs(this.eGui,"tabindex",e?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;const e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",e)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",e)}onCellFocused(e){if(this.beans.focusService.isCellFocusSuppressed())return;const t=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp)return void(t&&e?.forceBrowserFocus&&(this.focusEventToRestore=e));if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass("ag-cell-focus",t),t&&e&&e.forceBrowserFocus){let t=this.cellComp.getFocusableElement();if(this.editing){const e=this.beans.focusService.findFocusableElements(t,null,!0);e.length&&(t=e[0])}t.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}const i="fullRow"===this.beans.gos.get("editType");t||i||!this.editing||this.stopRowOrCellEdit(),t&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:U(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);const e=1==this.column.isAutoHeight();this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",e),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!e)}onColumnHover(){if(!this.cellComp)return;if(!this.beans.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",e)}onColDefChanged(){if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editService?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){const e=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu");this.beans.eventService.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout((()=>{this.beans.frameworkOverrides.wrapOutgoing((()=>{t.onCellContextMenu(i)}))}),0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const e=new zr;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=new Hr(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(e,t);const s=this.createRowDragComp(e,t,i);s&&(this.customRowDragComp=s,this.addDestroyFunc((()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null})))}createRowDragComp(e,t,i){const s=this.beans.gos.get("pagination"),n=this.beans.gos.get("rowDragManaged"),o=ie(this.beans.gos);if(n){if(!o)return void F("managed row dragging is only allowed in the Client Side Row Model");if(s)return void F("managed row dragging is not possible when doing pagination")}const r=new zn((()=>this.value),this.rowNode,this.column,e,t,i);return this.beans.context.createBean(r),r}setSuppressRefreshCell(e){this.suppressRefreshCell=e}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(e){this.onCellEditorAttachedFuncs.push(e)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach((e=>e())),this.onCellEditorAttachedFuncs=[]}};Zr.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var $r=Zr,Qr=0,Xr=class e extends tt{constructor(e,t,i,s,n){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=t,this.gos=t.gos,this.rowNode=e,this.paginationPage=t.paginationService?.getCurrentPage()??0,this.useAnimationFrameForCreate=s,this.printLayout=n,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+Qr++,this.rowId=Ut(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=t.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!==typeof this.businessKeyForNodeFunc)return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=Ut(e)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(e,t){"left"===e?this.leftGui=t:"right"===e?this.rightGui=t:"fullWidth"===e?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,i,s){const n={rowComp:e,element:t,containerType:i,compBean:s=ci(this,this.beans.context,s)};this.allRowGuis.push(n),this.updateGui(i,n),this.initialiseRowComp(n),"FullWidthLoading"===this.rowType||this.rowNode.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){this.allRowGuis=this.allRowGuis.filter((t=>t.containerType!==e)),this.updateGui(e,void 0)}isCacheable(){return"FullWidthDetail"===this.rowType&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach((e=>e.element.style.display=t))}initialiseRowComp(t){const i=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),oe(i)&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const s=t.rowComp;this.getInitialRowClasses(t.containerType).forEach((e=>s.addOrRemoveCssClass(e,!0))),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&Li(t.element,1==this.rowNode.expanded),this.setRowCompRowId(s),this.setRowCompRowBusinessKey(s),ue(i,t.element,e.DOM_DATA_KEY_ROW_CTRL,this),t.compBean.addDestroyFunc((()=>ue(i,t.element,e.DOM_DATA_KEY_ROW_CTRL,null))),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t),this.isFullWidth()&&this.setupFullWidth(t),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask((()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)})),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){null!=this.businessKeySanitised&&e.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(e){this.rowId=Ut(this.rowNode.id),null!=this.rowId&&e.setRowId(this.rowId)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(V((()=>{this.onTopChanged()})),this.slideInAnimation[t]=!1);this.fadeInAnimation[t]&&(V((()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)})),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){if(Ae(this.gos))return void F("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");const t=this.beans.localeService.getLocaleTextFunc(),i=new zn((()=>`1 ${t("rowDragRow","row")}`),this.rowNode,void 0,e.element,void 0,!0),s=this.createBean(i,this.beans.context);this.rowDragComps.push(s),e.compBean.addDestroyFunc((()=>{this.rowDragComps=this.rowDragComps.filter((e=>e!==s)),this.destroyBean(s,this.beans.context)}))}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType);if("FullWidthDetail"==this.rowType&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;const i=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(i)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map((e=>e?.rowComp?.getFullWidthCellRenderer())):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}getCellElement(e){const t=this.getCellCtrl(e);return t?t.getGui():null}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){const e=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),t=!!this.centerGui,i=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return e&&t&&i}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this.rowNode})}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,s=this.beans.columnModel.isPivotMode(),n=!!this.rowNode.group&&!this.rowNode.footer&&De(this.gos,s);this.rowType=e?"FullWidthLoading":i?"FullWidthDetail":t?"FullWidth":n?"FullWidthGroup":"Normal"}updateColumnLists(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isFullWidth())return;e||this.gos.get("suppressAnimationFrame")||this.printLayout?this.updateColumnListsImpl(t):this.updateColumnListsPending||(this.beans.animationFrameService.createTask((()=>{this.active&&this.updateColumnListsImpl(!0)}),this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s={list:[],map:{}},n=(e,t)=>{s.list.push(t),s.map[e]=t};return t.forEach((t=>{const i=t.getInstanceId();let s=e.map[i];s||(s=new $r(t,this.rowNode,this.beans,this)),n(i,s)})),e.list.forEach((e=>{const t=e.getColumn().getInstanceId();if(null!=s.map[t])return;this.isCellEligibleToBeRemoved(e,i)?e.destroy():n(t,e)})),s}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach((t=>{const i=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(i,e)}))}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.columnViewportService,t=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const s=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");const n=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,n,"right")}}isCellEligibleToBeRemoved(e,t){const i=!0;if(e.getColumn().getPinned()!=t)return i;const s=e.isEditing(),n=this.beans.focusService.isCellFocused(e.getCellPosition());if(s||n){const t=e.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(t)>=0)&&i}return i}getDomOrder(){return this.gos.get("ensureDomOrder")||ne(this.gos,"print")}listenOnDomOrder(e){e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],(()=>{e.rowComp.setDomOrder(this.getDomOrder())}))}setAnimateFlags(e){if(this.isSticky()||!e)return;const t=_(this.rowNode.oldRowTop),i=this.beans.visibleColsService.isPinningLeft(),s=this.beans.visibleColsService.isPinningRight();if(t){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(this.slideInAnimation.fullWidth=!0);this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=s}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(this.fadeInAnimation.fullWidth=!0);this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=s}}isEditing(){return this.editingRow}isFullWidth(){return"Normal"!==this.rowType}refreshFullWidth(){const e=(e,t)=>!e||e.rowComp.refreshFullWidth((()=>this.createFullWidthCompDetails(e.element,t).params)),t=e(this.fullWidthGui,null),i=e(this.centerGui,null),s=e(this.leftGui,"left"),n=e(this.rightGui,"right");return t&&i&&s&&n}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc((()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))})),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",(()=>{this.gos.get("rowDragEntireRow")?this.allRowGuis.forEach((e=>{this.addRowDraggerToRow(e)})):this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)})),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onRowIndexChanged()))},cellChanged:e=>{this.getAllCellCtrls().forEach((t=>t.onCellChanged(e)))}})}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell())this.beans.rowRenderer.redrawRow(this.rowNode);else if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode)}else this.getAllCellCtrls().forEach((t=>t.refreshCell({suppressFlash:!e.update,newData:!e.update}))),this.allRowGuis.forEach((e=>{this.setRowCompRowId(e.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(e.rowComp)})),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach((t=>{const i=0===e,s=1===e;t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",s)}))}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-dragging",e)))}updateExpandedCss(){const e=this.rowNode.isExpandable(),t=1==this.rowNode.expanded;this.allRowGuis.forEach((i=>{i.rowComp.addOrRemoveCssClass("ag-row-group",e),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&t),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!t),Li(i.element,e&&t)}))}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:U(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(e){return this.allRowGuis.find((t=>t.element.contains(e)))}onKeyboardNavigate(e){const t=this.findFullWidthRowGui(e.target);if(!((t?t.element:null)===e.target))return;const i=this.rowNode,s=this.beans.focusService.getFocusedCell(),n={rowIndex:i.rowIndex,rowPinned:i.rowPinned,column:s?.column??this.getColumnForFullWidth(t)};this.beans.navigationService.navigateToNextCell(e,e.key,n,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||Xe(e))return;const t=this.allRowGuis.find((t=>t.element.contains(e.target))),i=t?t.element:null,s=i===e.target,n=fe(this.gos);let o=!1;i&&n&&(o=i.contains(n)&&n.classList.contains("ag-cell"));let r=null;s||o||(r=this.beans.focusService.findNextFocusableElement(i,!1,e.shiftKey)),(this.isFullWidth()&&s||!r)&&this.beans.navigationService.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){const e=this.allRowGuis.find((e=>us(e.element)))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:-1;this.allRowGuis.forEach((e=>{Cs(e.element,"tabindex",t)}))}onFullWidthRowFocused(e){const t=this.rowNode,i=!!e&&(this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned),s=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;s&&(s.classList.toggle("ag-full-width-focus",i),i&&e?.forceBrowserFocus&&s.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const i={list:[],map:{}};return e.list.forEach((e=>{e!==t&&(i.list.push(e),i.map[e.getColumn().getInstanceId()]=e)})),i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t)}}createRowEvent(e,t){return this.gos.addGridCommonParams({type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:t})}createRowEventWithSource(e,t){const i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){Xe(e)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",e))}getColumnForFullWidth(e){const{visibleColsService:t}=this.beans;switch(e?.containerType){case"center":return t.getCenterCols()[0];case"left":return t.getLeftCols()[0];case"right":return t.getRightCols()[0];default:return t.getAllCols()[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=Ji(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();const i=this.findFullWidthRowGui(e.target),s=i?.element,n=e.target;let o=!0;s&&s.contains(n)&&Qi(n)&&(o=!1),this.beans.focusService.setFocusedCell({rowIndex:t.rowIndex,column:this.getColumnForFullWidth(i),rowPinned:t.rowPinned,forceBrowserFocus:o})}onRowClick(e){if(Xe(e)||this.lastMouseDownOnDragger)return;const{gos:t}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",e));const i=e.ctrlKey||e.metaKey,s=e.shiftKey,n=this.rowNode.isSelected(),o=Ge(t),r=Te(t),a=function(e){const t=ke(e);return!0===t||"enableSelection"===t}(t);if(o&&this.rowNode.group||this.isRowSelectionBlocked()||!a&&!n||!r&&n)return;const l=function(e){const t=e.get("rowSelection");return"string"===typeof t?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}(t),c="rowClicked";if(n)l?this.rowNode.setSelectedParams({newValue:!1,event:e,source:c}):i?r&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:c}):a&&this.rowNode.setSelectedParams({newValue:!0,clearSelection:!s,rangeSelect:s,event:e,source:c});else{const t=!l&&!i;this.rowNode.setSelectedParams({newValue:!0,clearSelection:t,rangeSelect:s,event:e,source:c})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!oe(this.gos)}setupDetailRowAutoHeight(e){if("FullWidthDetail"!==this.rowType)return;if(!this.gos.get("detailRowAutoHeight"))return;const t=()=>{const t=e.clientHeight;if(null!=t&&t>0){const e=()=>{this.rowNode.setRowHeight(t),(ie(this.gos)||se(this.gos))&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(e,0)}},i=this.beans.resizeObserverService.observeResize(e,t);this.addDestroyFunc(i),t()}createFullWidthCompDetails(e,t){const{gos:i,rowNode:s}=this,n=i.addGridCommonParams({fullWidth:!0,data:s.data,node:s,value:s.key,valueFormatted:s.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(e,t,i,s)=>this.addFullWidthRowDragging(e,t,i,s),setTooltip:(e,t)=>this.refreshRowTooltip(e,t)}),o=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return o.getFullWidthDetailCellRendererDetails(n);case"FullWidthGroup":return o.getFullWidthGroupCellRendererDetails(n);case"FullWidthLoading":return o.getFullWidthLoadingCellRendererDetails(n);default:return o.getFullWidthCellRendererDetails(n)}}refreshRowTooltip(e,t){if(!this.fullWidthGui)return;const i={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>e,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:t};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Ms(i,this.beans))}addFullWidthRowDragging(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3?arguments[3]:void 0;if(!this.isFullWidth())return;const n=new zn((()=>i),this.rowNode,void 0,e,t,s);this.createBean(n,this.beans.context),this.addDestroyFunc((()=>{this.destroyBean(n,this.beans.context)}))}onUiLevelChanged(){const e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach((e=>{e.rowComp.addOrRemoveCssClass(t,!0),e.rowComp.addOrRemoveCssClass(i,!1)}))}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-first",e)))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach((e=>e.rowComp.addOrRemoveCssClass("ag-row-last",t))))}stopEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stoppingRowEdit||this.beans.rowEditService?.stopEditing(this,e)}setInlineEditingCss(){const e=this.editingRow||this.getAllCellCtrls().some((e=>e.isEditing()));this.allRowGuis.forEach((t=>{t.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),t.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)}))}setEditingRow(e){this.editingRow=e}startRowEditing(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return!!this.editingRow||(this.beans.rowEditService?.startEditing(this,e,t,i)??!0)}getAllCellCtrls(){if(0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length)return this.centerCellCtrls.list;return[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);e&&e.length&&e.forEach((e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!0)))}))}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,(e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!0)))}),(e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!1)))}))}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,(e=>e.rowComp.setUserStyles(this.rowStyles)))}getPinnedForContainer(e){return"left"===e||"right"===e?e:null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:t};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)}processStylesFromGridOptions(){const e=this.gos.get("rowStyle");if(e&&"function"===typeof e)return void F("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");const t=this.gos.getCallback("getRowStyle");let i;if(t){i=t({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex})}return i||e?Object.assign({},e,i):this.emptyStyle}onRowSelected(e){const t=!!this.rowNode.isSelected();this.forEachGui(e,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-selected",t),Gi(e.element,t);!e.element.contains(fe(this.gos))||e!==this.centerGui&&e!==this.fullWidthGui||this.announceDescription()}))}announceDescription(){if(this.isRowSelectionBlocked())return;const e=this.rowNode.isSelected();if(e&&!Te(this.gos))return;const t=this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${e?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(t,"rowSelection")}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:i}=e,{rowNode:s,beans:n,gos:o}=this;i.addManagedListeners(t,{mouseenter:()=>s.onMouseEnter(),mouseleave:()=>s.onMouseLeave()}),i.addManagedListeners(s,{mouseEnter:()=>{n.dragService.isDragging()||o.get("suppressRowHoverHighlight")||(t.classList.add("ag-row-hover"),s.setHovered(!0))},mouseLeave:()=>{t.classList.remove("ag-row-hover"),s.setHovered(!1)}})}roundRowTopToBounds(e){const t=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(t.top,!0)-100,s=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(i,e),s)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}onRowHeightChanged(e){if(null==this.rowNode.rowHeight)return;const t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),s=ae(this.gos)?le(this.gos,this.rowNode).height:void 0,n=s?Math.min(i,s)-2+"px":void 0;this.forEachGui(e,(e=>{e.element.style.height=`${t}px`,n&&e.element.style.setProperty("--ag-line-height",n)}))}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}destroyFirstPass(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.active=!1,!e&&ve(this.gos)&&!this.isSticky()){if(null!=this.rowNode.rowTop){const e=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(e)}else this.allRowGuis.forEach((e=>e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)))}this.rowNode.setHovered(!1);const t=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(t),this.beans.eventService.dispatchEvent(t),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const e=e=>(e.list.forEach((e=>e.destroy())),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),e.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)}))}onCellFocusChanged(){const e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const e=this.beans.paginationService?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;return e+this.beans.pageBoundsService.getPixelOffset()*(t?1:-1)}setRowTop(e){if(!this.printLayout&&_(e)){const t=this.applyPaginationOffset(e),i=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeightService.getRealPixelPosition(t)}px`;this.setRowTopStyle(i)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let i;if(this.isSticky())i=t.stickyRowTop;else{const s=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,n=this.applyPaginationOffset(s);i=t.isRowPinned()?n:this.beans.rowContainerHeightService.getRealPixelPosition(n)}return i+"px"}setRowTopStyle(e){this.allRowGuis.forEach((t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)))}getRowNode(){return this.rowNode}getCellCtrl(e){let t=null;return this.getAllCellCtrls().forEach((i=>{i.getColumn()==e&&(t=i)})),null!=t||this.getAllCellCtrls().forEach((i=>{i.getColSpanningList().indexOf(e)>=0&&(t=i)})),t}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(e){const t=this.rowNode.getRowIndexString();if(null===t)return;const i=this.beans.headerNavigationService.getHeaderRowCount()+(this.beans.filterManager?.getHeaderRowCount()??0),s=this.rowNode.rowIndex%2===0,n=i+this.rowNode.rowIndex+1;this.forEachGui(e,(e=>{e.rowComp.setRowIndex(t),e.rowComp.addOrRemoveCssClass("ag-row-even",s),e.rowComp.addOrRemoveCssClass("ag-row-odd",!s),Ti(e.element,n)}))}setStoppingRowEdit(e){this.stoppingRowEdit=e}};Xr.DOM_DATA_KEY_ROW_CTRL="renderedRow";var qr=Xr,Jr=class extends tt{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",qe("touchstart")?"touchstart":"mousedown"].forEach((e=>{const t=this.processMouseEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}))}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||Xe(t))return;const i=this.getRowForEvent(t),s=this.mouseEventService.getRenderedCellForEvent(t);"contextmenu"===e?this.handleContextMenuMouseEvent(t,void 0,i,s):(s&&s.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!Ui())return;const e=new Ps(this.element);this.addManagedListeners(e,{longTap:e=>{const t=this.getRowForEvent(e.touchEvent),i=this.mouseEventService.getRenderedCellForEvent(e.touchEvent);this.handleContextMenuMouseEvent(void 0,e.touchEvent,t,i)}}),this.addDestroyFunc((()=>e.destroy()))}getRowForEvent(e){let t=e.target;for(;t;){const e=de(this.gos,t,qr.DOM_DATA_KEY_ROW_CTRL);if(e)return e;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,s){const n=i?i.getRowNode():null,o=s?s.getColumn():null;let r=null;if(o){const i=e||t;s.dispatchCellContextMenuEvent(i??null),r=this.valueService.getValue(o,n)}const a=this.ctrlsService.getGridBodyCtrl(),l=s?s.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:n,column:o,value:r,anchorToElement:l})}getControlsForEventTarget(e){return{cellCtrl:Je(this.gos,e,$r.DOM_DATA_KEY_CELL_CTRL),rowCtrl:Je(this.gos,e,qr.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,e,t))}processCellKeyboardEvent(e,t,i){const s=e.getRowNode(),n=e.getColumn(),o=e.isEditing();if(!po(this.gos,i,s,n,o)&&"keydown"===t){!o&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),uo(i)&&e.processCharacter(i)}"keydown"===t&&this.eventService.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const s=e.getRowNode(),n=this.focusService.getFocusedCell(),o=n&&n.column;if(!po(this.gos,i,s,o,!1)){const s=i.key;if("keydown"===t)switch(s){case js.PAGE_HOME:case js.PAGE_END:case js.PAGE_UP:case js.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case js.UP:case js.DOWN:e.onKeyboardNavigate(i);break;case js.TAB:e.onTabKeyDown(i)}}"keydown"===t&&this.eventService.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey)return;if(t)return;if(!this.mouseEventService.isEventFromThisGrid(e))return;const i=function(e){const{keyCode:t}=e;let i;switch(t){case 65:i=js.A;break;case 67:i=js.C;break;case 86:i=js.V;break;case 68:i=js.D;break;case 90:i=js.Z;break;case 89:i=js.Y;break;default:i=e.code}return i}(e);return i===js.A?this.onCtrlAndA(e):i===js.C?this.onCtrlAndC(e):i===js.D?this.onCtrlAndD(e):i===js.V?this.onCtrlAndV(e):i===js.X?this.onCtrlAndX(e):i===js.Y?this.onCtrlAndY():i===js.Z?this.onCtrlAndZ(e):void 0}onCtrlAndA(e){const{pinnedRowModel:t,rowModel:i,rangeService:s}=this;if(s&&i.isRowsToRender()){const[e,n]=[t.isEmpty("top"),t.isEmpty("bottom")],o=e?null:"top";let r,a;n?(r=null,a=i.getRowCount()-1):(r="bottom",a=t.getPinnedBottomRowCount()-1);const l=this.visibleColsService.getAllCols();if(K(l))return;s.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:a,rowEndPinned:r,columnStart:l[0],columnEnd:ze(l)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){this.gos.get("undoRedoCellEditing")&&this.undoRedoService&&(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService?.redo("ui")}},ea=class extends tt{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;Xi(this.element,t),ms(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},ta=class extends tt{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;Xi(this.element,t),ms(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},ia=e=>e.getTopRowCtrls(),sa=e=>e.getStickyTopRowCtrls(),na=e=>e.getStickyBottomRowCtrls(),oa=e=>e.getBottomRowCtrls(),ra=e=>e.getCentreRowCtrls(),aa={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:ra},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:ra},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:ra},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:ra},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:ia},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:ia},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:ia},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:ia},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:sa},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:sa},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:sa},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:sa},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:na},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:na},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:na},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:na},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:oa},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:oa},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:oa},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:oa}};function la(e){return aa[e]}var ca=["center","left","right","fullWidth"],ha=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],da=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],ua=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],pa=["stickyTopCenter","stickyTopLeft","stickyTopRight"],ga=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],ma=[...pa,"stickyTopFullWidth",...ga,"stickyBottomFullWidth"],fa=["topCenter","topLeft","topRight","bottomCenter","bottomLeft","bottomRight","center","left","right",...pa,...ga],ya=class extends tt{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=la(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],(()=>{this.viewportSizeFeature=this.createManagedBean(new Gr(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})}))}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new Jr(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const s=()=>this.onPinnedWidthChanged();this.forContainers(da,(()=>{this.pinnedWidthFeature=this.createManagedBean(new ea(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:s})})),this.forContainers(ua,(()=>{this.pinnedWidthFeature=this.createManagedBean(new ta(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:s})})),this.forContainers(ca,(()=>this.createManagedBean(new Pr(this.eContainer,"center"===this.name?i:void 0)))),this.forContainers(fa,(()=>this.createManagedBean(new Br(this.eContainer)))),this.forContainers(ha,(()=>this.createManagedBean(new dr((e=>this.comp.setContainerWidth(`${e}px`)))))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(ma.indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);const e=()=>{const e=this.gos.get("ensureDomOrder"),t=ne(this.gos,"print");this.comp.setDomOrder(e||t)};this.addManagedPropertyListener("domLayout",e),e()}onDisplayedColumnsChanged(){this.forContainers(["center"],(()=>this.onHorizontalViewportChanged()))}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],(()=>this.onHorizontalViewportChanged()))}addPreventScrollWhileDragging(){const e=e=>{this.dragService.isDragging()&&e.cancelable&&e.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc((()=>this.eContainer.removeEventListener("touchmove",e)))}onHorizontalViewportChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return is(this.eViewport)}getCenterViewportScrollLeft(){return as(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc((()=>t()))}isViewportInTheDOMTree(){return ds(this.eViewport)}getViewportScrollLeft(){return as(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||(e=this.eViewport).clientWidth<e.scrollWidth;var e}getViewportElement(){return this.eViewport}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){ls(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(null!=this.options.pinnedType)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||0===t.length)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});const i=ne(this.gos,"print"),s=this.gos.get("embedFullWidthRows")||i,n=t.filter((e=>{const t=e.isFullWidth();return this.options.fullWidth?!s&&t:s||!t}));this.comp.setRowCtrls({rowCtrls:n,useFlushSync:e})}},va="ag-force-vertical-scroll",Ca=class extends tt{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,s,n,o,r){this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=s,this.eBottom=n,this.eStickyTop=o,this.eStickyBottom=r,this.eCenterColsViewport=i.querySelector(`.${la("center").viewport}`),this.eFullWidthContainer=i.querySelector(`.${la("fullWidth").container}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${la("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=r.querySelector(`.${la("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",(e=>this.setCellTextSelection(e.currentValue))),this.createManagedBean(new Ar(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Or(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,i,n,o,r]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvancedFilterHeaderComp(s),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){const e=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach((e=>{this.addManagedElementListeners(e,{focusin:t=>{const{target:i}=t,s=Ji(i,"ag-root",e);e.classList.toggle("ag-has-focus",!s)},focusout:t=>{const{target:i,relatedTarget:s}=t,n=e.contains(s),o=Ji(s,"ag-root",e);Ji(i,"ag-root",e)||n&&!o||e.classList.remove("ag-has-focus")}})}))}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.comp.setCellSelectableCss("ag-selectable",e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const t=`calc(100% + ${(e&&this.scrollVisibleService.getScrollbarWidth()||0)+(Zi()?16:0)}px)`;this.animationFrameService.requestAnimationFrame((()=>this.comp.setBodyViewportWidth(t))),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){const e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const e=e=>{const i=e.relatedTarget;if(null===Yi(i))return void this.rowRenderer.stopEditing();let s=t.some((e=>e.contains(i)))&&this.mouseEventService.isElementInThisGrid(i);if(!s){const e=this.popupService;s=e.getActivePopups().some((e=>e.contains(i)))||e.isElementWithinCustomPopup(i)}s||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach((t=>this.addManagedElementListeners(t,{focusout:e})))}updateRowCount(){const e=this.headerNavigationService.getHeaderRowCount()+(this.filterManager?.getHeaderRowCount()??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=-1===t?-1:e+t;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?va:null,i=ne(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&(s=this.eBodyViewport).clientHeight<s.scrollHeight;var s}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes();const t=()=>{const t=e&&ve(this.gos)&&!this.rowContainerHeightService.isStretching(),i=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,t)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:s}=e;(s||Math.abs(t)>Math.abs(i))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX:t,deltaY:i,shiftKey:s}=e,n=s||Math.abs(t)>Math.abs(i),o=e.target;n?(this.eStickyTopFullWidthContainer.contains(o)||this.eStickyBottomFullWidthContainer.contains(o))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(i))}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;if(this.gos.get("preventDefaultOnContextMenu")){(e||i).preventDefault()}const{target:s}=e||t;s!==this.eBodyViewport&&s!==this.ctrlsService.get("center").getViewportElement()||this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!Ui())return;const t=new Ps(this.eBodyViewport);this.addManagedListeners(t,{longTap:t=>{e(void 0,t.touchStart,t.touchEvent)}}),this.addDestroyFunc((()=>t.destroy()))}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new Gn(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc((()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature)))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){const{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),i=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(e){const e=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}else this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%")}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const e=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(this.filterManager?.getHeaderHeight()??0),t=this.pinnedRowModel.getPinnedTopTotalHeight();let i=0;e>0&&(i+=e),t>0&&(i+=t),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){const e=this.pinnedRowModel.getPinnedBottomTotalHeight()+(this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0);this.comp.setStickyBottomBottom(`${e}px`)}sizeColumnsToFit(e,t){const i=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,s=is(this.eGridBody)-i;s>0?this.columnSizeService.sizeColumnsToFit(s,"sizeColumnsToFit",!1,e):void 0===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,100)}),0):100===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,500)}),100):500===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,-1)}),500):F("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}};function ba(e){return e.map((e=>`<ag-row-container name="${e}"></ag-row-container>`)).join("")}ba(["topLeft","topCenter","topRight","topFullWidth"]),ba(["left","center","right","fullWidth"]),ba(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]),ba(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]),ba(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]);var wa=class extends tt{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn((()=>{this.columnAnimationService.executeLaterVMTurn((()=>this.updateScrollVisibleImpl()))})):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsService.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(null==this.scrollbarWidth){const e=this.gos.get("scrollbarWidth"),t="number"===typeof e&&e>=0?e:(null==yi&&Ki(),yi);null!=t&&(this.scrollbarWidth=t,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},Sa="__ag_grid_instance",xa=class e extends tt{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=e.gridInstanceSequence.next()}wireBeans(e){this.ctrlsService=e.ctrlsService}stampTopLevelGridCompWithGridInstance(e){e[Sa]=this.gridInstanceId}getRenderedCellForEvent(e){return Je(this.gos,e.target,$r.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(e){return this.isElementInThisGrid(e.target)}isElementInThisGrid(e){let t=e;for(;t;){const e=t[Sa];if(_(e)){return e===this.gridInstanceId}t=t.parentElement}return!1}getCellPositionForEvent(e){const t=this.getRenderedCellForEvent(e);return t?t.getCellPosition():null}getNormalisedPosition(e){const t=ne(this.gos,"normal"),i=e;let s,n;if(null!=i.clientX||null!=i.clientY?(s=i.clientX,n=i.clientY):(s=i.x,n=i.y),t){const e=this.ctrlsService.getGridBodyCtrl(),t=e.getScrollFeature().getVScrollPosition();s+=e.getScrollFeature().getHScrollPosition().left,n+=t.top}return{x:s,y:n}}};xa.gridInstanceSequence=new ws;var Ma=xa,Da=class extends tt{constructor(){super(),this.beanName="navigationService",this.onPageDown=W(this.onPageDown,100),this.onPageUp=W(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.scrollVisibleService=e.scrollVisibleService,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCon=e.gridBodyCtrl}))}handlePageScrollingKey(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.key,s=e.altKey,n=e.ctrlKey||e.metaKey,o=!!this.rangeService&&e.shiftKey,r=this.mouseEventService.getCellPositionForEvent(e);let a=!1;switch(i){case js.PAGE_HOME:case js.PAGE_END:n||s||(this.onHomeOrEndKey(i),a=!0);break;case js.LEFT:case js.RIGHT:case js.UP:case js.DOWN:if(!r)return!1;!n||s||o||(this.onCtrlUpDownLeftRight(i,r),a=!0);break;case js.PAGE_DOWN:case js.PAGE_UP:n||s||(a=this.handlePageUpDown(i,r,t))}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),!!t&&(e===js.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0)}navigateTo(e){const{scrollIndex:t,scrollType:i,scrollColumn:s,focusIndex:n,focusColumn:o}=e;_(s)&&!s.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(s),_(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:o,rowPinned:null,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:n,rowPinned:null,column:o})}onPageDown(e){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.getViewportHeight(),s=this.pageBoundsService.getPixelOffset(),n=t.top+i,o=this.rowModel.getRowIndexAtPixel(n+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o):this.navigateToNextPage(e,o)}onPageUp(e){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.pageBoundsService.getPixelOffset(),s=t.top,n=this.rowModel.getRowIndexAtPixel(s+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,n,!0):this.navigateToNextPage(e,n,!0)}navigateToNextPage(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.getViewportHeight(),n=this.pageBoundsService.getFirstRow(),o=this.pageBoundsService.getLastRow(),r=this.pageBoundsService.getPixelOffset(),a=this.rowModel.getRow(e.rowIndex),l=i?a?.rowHeight-s-r:s-r,c=a?.rowTop+l;let h,d=this.rowModel.getRowIndexAtPixel(c+r);if(d===e.rowIndex){const s=i?-1:1;t=d=e.rowIndex+s}i?(h="bottom",d<n&&(d=n),t<n&&(t=n)):(h="top",d>o&&(d=o),t>o&&(t=o)),this.isRowTallerThanView(d)&&(t=d,h="top"),this.navigateTo({scrollIndex:t,scrollType:h,scrollColumn:null,focusIndex:d,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout((()=>{const s=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})}),50)}getNextFocusIndexForAutoHeight(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?-1:1,i=this.getViewportHeight(),s=this.pageBoundsService.getLastRow();let n=0,o=e.rowIndex;for(;o>=0&&o<=s;){const e=this.rowModel.getRow(o);if(e){const t=e.rowHeight??0;if(n+t>i)break;n+=t}o+=t}return Math.max(0,Math.min(o,s))}getViewportHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),t=this.scrollVisibleService.getScrollbarWidth();let i=e.bottom-e.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(i-=t),i}isRowTallerThanView(e){const t=this.rowModel.getRow(e);if(!t)return!1;const i=t.rowHeight;return"number"===typeof i&&i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:s}=i,n=i.column;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:n,focusIndex:s,focusColumn:n})}onHomeOrEndKey(e){const t=e===js.PAGE_HOME,i=this.visibleColsService.getAllCols(),s=t?i[0]:ze(i),n=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:s,focusIndex:n,focusColumn:s})}onTabKeyDown(e,t){const i=t.shiftKey,s=this.tabToNextCellCommon(e,i,t);if(!1===s)if(i){const{rowIndex:i,rowPinned:s}=e.getRowPosition();(s?0===i:i===this.pageBoundsService.getFirstRow())&&(0===this.gos.get("headerHeight")||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof $r&&e.focusCell(!0),(!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i))&&t.preventDefault();else s?t.preventDefault():null===s&&this.focusService.allowFocusForNextGridCoreContainer(i)}tabToNextCell(e,t){const i=this.focusService.getFocusedCell();if(!i)return!1;let s=this.getCellByPosition(i);return!!(s||(s=this.rowRenderer.getRowByPosition(i),s&&s.isFullWidth()))&&!!this.tabToNextCellCommon(s,e,t)}tabToNextCellCommon(e,t,i){let s,n=e.isEditing();if(!n&&e instanceof $r){const t=e.getRowCtrl();t&&(n=t.isEditing())}return s=n?"fullRow"===this.gos.get("editType")?this.moveToNextEditingRow(e,t,i):this.moveToNextEditingCell(e,t,i):this.moveToNextCellNotEditing(e,t),null===s?s:s||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.getCellPosition();e.getGui().focus(),e.stopEditing();const n=this.findNextCellToFocusOn(s,t,!0);return!1===n?null:null!=n&&(n.startEditing(null,!0,i),n.focusCell(!1),!0)}moveToNextEditingRow(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.getCellPosition(),n=this.findNextCellToFocusOn(s,t,!0);if(!1===n)return null;if(null==n)return!1;const o=n.getCellPosition(),r=this.isCellEditable(s),a=this.isCellEditable(o),l=o&&s.rowIndex===o.rowIndex&&s.rowPinned===o.rowPinned;if(r&&e.setFocusOutOnEditor(),!l){e.getRowCtrl().stopEditing();n.getRowCtrl().startRowEditing(void 0,void 0,i)}return a?(n.setFocusInOnEditor(),n.focusCell()):n.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.visibleColsService.getAllCols();let s;s=e instanceof qr?{...e.getRowPosition(),column:t?i[0]:ze(i)}:e.getCellPosition();const n=this.findNextCellToFocusOn(s,t,!1);if(!1===n)return null;if(n instanceof $r)n.focusCell(!0);else if(n)return this.tryToFocusFullWidthRow(n.getRowPosition(),t);return _(n)}findNextCellToFocusOn(e,t,i){let s=e;for(;;){e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextTabbedCell(s,t);const n=this.gos.getCallback("tabToNextCell");if(_(n)){const o=n({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:s||null});if(!0===o||null===o)null===o&&F("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),s=e;else{if(!1===o)return!1;s={rowIndex:o.rowIndex,column:o.column,rowPinned:o.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const e=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:e+s.rowIndex,column:s.column},fromCell:!0}),null}const o="fullRow"===this.gos.get("editType");if(i&&!o){if(!this.isCellEditable(s))continue}this.ensureCellVisible(s);const r=this.getCellByPosition(s);if(!r){const e=this.rowRenderer.getRowByPosition(s);if(!e||!e.isFullWidth()||i)continue;return e}if(!r.isSuppressNavigable())return this.rangeService?.setRangeToCell(s),r}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return!!t&&e.column.isCellEditable(t)}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return"top"===e.rowPinned?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):"bottom"===e.rowPinned?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,i,s){let n=i,o=!1;for(;n&&(n===i||!this.isValidNavigateCell(n));)this.gos.get("enableRtl")?t===js.LEFT&&(n=this.getLastCellOfColSpan(n)):t===js.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextCellToFocus(t,n),o=Y(n);if(o&&e&&e.key===js.UP&&(n={rowIndex:-1,rowPinned:null,column:i.column}),s){const s=this.gos.getCallback("navigateToNextCell");if(_(s)){const o=s({key:t,previousCellPosition:i,nextCellPosition:n||null,event:e});n=_(o)?{rowPinned:o.rowPinned,rowIndex:o.rowIndex,column:o.column}:null}}if(!n)return;if(n.rowIndex<0){const t=this.headerNavigationService.getHeaderRowCount();return void this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:t+n.rowIndex,column:i.column},event:e||void 0,fromCell:!0})}const r=this.getNormalisedPosition(n);r?this.focusPosition(r):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const i=this.visibleColsService.getAllCols(),s=this.rowRenderer.getRowByPosition(e);if(!s||!s.isFullWidth())return!1;const n=this.focusService.getFocusedCell(),o={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?ze(i):i[0])};this.focusPosition(o);const r=null==t?null!=n&&this.rowPositionUtils.before(o,n):t;return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:o.column,isFullWidthCell:!0,fromBelow:r}),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const i=t.getColSpanningList();return 1===i.length?e:{rowIndex:e.rowIndex,column:ze(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=Ce(this.gos),i=this.rowModel.getRow(e.rowIndex);!(t&&i?.sticky)&&Y(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},Ia=class extends tt{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};this.dragService.addDragSource(t);return()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(i)}setResizeIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},Ra=class extends tt{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,(s=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:s})}),i,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,i){let s=-1,n="left";const o=this.menuService.isLegacyMenuEnabled();!o&&this.gos.get("enableRtl")&&(s=1,n="right");const r=o?void 0:4*s,a=o?void 0:4;this.showPopup(e,(s=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:s,nudgeX:r,nudgeY:a,alignSide:n,keepWithinBounds:!0,position:"under",column:e})}),i,t,o)}showPopup(e,t,i,s,n){const o=e?this.createBean(new Yn(e,"COLUMN_MENU")):void 0;if(this.activeMenu=o,!o?.hasFilter()||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const r=document.createElement("div");let a;Di(r,"presentation"),r.classList.add("ag-menu"),n||r.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(r,{keydown:e=>this.trapFocusWithin(e,r)}),r.appendChild(o?.getGui());const l=this.menuService.isColumnMenuAnchoringEnabled()?s??this.ctrlsService.getGridBodyCtrl().getGui():void 0,c=this.localeService.getLocaleTextFunc(),h=n&&"columnFilter"!==i?c("ariaLabelColumnMenu","Column Menu"):c("ariaLabelColumnFilter","Column Filter"),d=this.popupService.addPopup({modal:!0,eChild:r,closeOnEsc:!0,closedCallback:t=>{e.setMenuVisible(!1,"contextMenu");const n=t instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),n&&s&&us(s)){const e=this.focusService.findTabbableParent(s);e&&e.focus()}o?.afterGuiDetached(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e)},positionCallback:()=>t(r),anchorToElement:l,ariaLabel:h});d&&(this.hidePopup=a=d.hideFunc),o.afterInit().then((()=>{t(r),o.afterGuiAttached({container:i,hidePopup:a})})),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==js.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},Ea=class extends tt{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(e,t){const i=ge(this.gos).ResizeObserver,s=i?new i(t):null;return s?.observe(e),()=>s?.disconnect()}},Aa=class extends tt{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){const t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&0===e){const e=this.paginationService?.getCurrentPage()??0;e!==this.lastPage&&(this.lastPage=e,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){!1===this.useAnimationFrame&&F(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);const s={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],s),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort(((e,i)=>e.index!==i.index?t*(i.index-e.index):i.createOrder-e.createOrder)),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,s=this.createTasksP2,n=s.list,o=this.destroyTasks,r=(new Date).getTime();let a=(new Date).getTime()-r;const l=e<=0,c=this.ctrlsService.getGridBodyCtrl();for(;l||a<e;){if(!c.getScrollFeature().scrollGridIfNeeded()){let e;if(i.length)this.sortTaskList(t),e=i.pop().task;else if(n.length)this.sortTaskList(s),e=n.pop().task;else{if(!o.length){this.cancelledTasks.clear();break}e=o.pop()}this.cancelledTasks.has(e)||e()}a=(new Date).getTime()-r}i.length||n.length||o.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=ge(this.gos);t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{this.isOn()?t||(t=!0,this.addDestroyTask((()=>{t=!1,e()}))):window.setTimeout(e,0)}}},La=class extends tt{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=ie(this.gos)}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode((e=>{e.id&&t.has(e.id)&&(e.expanded=!0)})),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode((t=>{let{expanded:i,id:s}=t;i&&s&&e.push(s)})),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,i,s){e&&(i&&e.parent&&-1!==e.parent.level&&this.setRowNodeExpanded(e.parent,t,i,s),e.setExpanded(t,void 0,s))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},ka=class extends tt{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.valueService=e.valueService,this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,i)}getContextMenuPosition(e,t){const i=this.getRowCtrl(e),s=this.getCellGui(i,t);if(!s)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};const n=s.getBoundingClientRect();return{x:n.x+n.width/2,y:n.y+n.height/2}}showContextMenu(e){const t=e.rowNode,i=e.column;let{anchorToElement:s,value:n}=e;t&&i&&null==n&&(n=this.valueService.getValueForDisplay(i,t)),null==s&&(s=this.getContextMenuAnchorElement(t,i)),this.contextMenuFactory?.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,i??null,n,s)}showColumnChooser(e){this.columnChooserFactory?.showColumnChooser(e)}hidePopupMenu(){this.contextMenuFactory?.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){this.columnChooserFactory?.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:i}=e.getColDef();return!(i??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){const t=e&&Dt(e)?e.getColDef():e?.getColGroupDef();return!t?.suppressHeaderContextMenu&&"new"===this.getColumnMenuType()}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Ui()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.filterManager?.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return"new"===this.getColumnMenuType()}isLegacyMenuEnabled(){return"legacy"===this.getColumnMenuType()}isFloatingFilterButtonEnabled(e){const t=e.getColDef(),i=t.floatingFilterComponentParams?.suppressFilterButton;return null!=i&&F("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),null==t.suppressFloatingFilterButton?!i:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?!!this.gos.exists("suppressMenuHide")&&e:e}showColumnMenuCommon(e,t,i,s){const{positionBy:n}=t,o=t.column;if("button"===n){const{buttonElement:n}=t;e.showMenuAfterButtonClick(o,n,i,s)}else if("mouse"===n){const{mouseEvent:n}=t;e.showMenuAfterMouseEvent(o,n,i,s)}else o&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(o,"auto"),this.animationFrameService.requestAnimationFrame((()=>{const t=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned())?.getHeaderCtrlForColumn(o);t&&e.showMenuAfterButtonClick(o,t.getAnchorElementForMenu(s),i,!0)})))}getRowCtrl(e){const{rowIndex:t,rowPinned:i}=e||{};if(null!=t)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){if(!e||!t)return;const i=e.getCellCtrl(t);return i?.getGui()||void 0}getContextMenuAnchorElement(e,t){const i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),s=this.getRowCtrl(e);if(!s)return i;const n=this.getCellGui(s,t);return n||(s.isFullWidth()?s.getFullWidthElement():i)}},Ta={selector:"AG-INPUT-TEXT-AREA",component:class extends _s{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}},Pa=class extends en{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){ue(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params;this.addManagedElementListeners(e,{keydown:e=>{po(this.gos,e,t.node,t.column,!0)||t.onKeyDown(e)}})}},Na=class extends en{constructor(e){super(`\n            <div class="ag-cell-edit-wrapper">\n                ${e.getTemplate()}\n            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=Is}init(e){this.params=e;const{cellStartedEdit:t,eventKey:i,suppressPreventDefault:s}=e,n=this.eInput;let o;this.cellEditorInput.init(n,e);let r=!0;t?(this.focusAfterAttached=!0,i===js.BACKSPACE||i===js.DELETE?o="":i&&1===i.length?s?r=!1:o=i:(o=this.cellEditorInput.getStartValue(),i!==js.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,o=this.cellEditorInput.getStartValue()),r&&null!=o&&n.setStartValue(o),this.addManagedElementListeners(n.getGui(),{keydown:e=>{const{key:t}=e;t!==js.PAGE_UP&&t!==js.PAGE_DOWN||e.preventDefault()}})}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;zi()||t.getFocusableElement().focus();const i=t.getInputElement();this.highlightAllOnFocus?i.select():this.cellEditorInput.setCaret?.()}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},Fa=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[mo]}init(e,t){this.eInput=e,this.params=t,null!=t.maxLength&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return _(e)||_(this.params.value)?this.params.parseValue(e):this.params.value}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=_(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},Oa=class extends Na{constructor(){super(new Fa)}},Ga=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[yo]}init(e,t){this.eInput=e,this.params=t,null!=t.max&&e.setMax(t.max),null!=t.min&&e.setMin(t.min),null!=t.precision&&e.setPrecision(t.precision),null!=t.step&&e.setStep(t.step);const i=e.getInputElement();t.preventStepping?e.addManagedElementListeners(i,{keydown:this.preventStepping}):t.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(e){e.key!==js.UP&&e.key!==js.DOWN||e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!_(e)&&!_(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(null==t)return t;if("string"===typeof t){if(""===t)return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}setCaret(){zi()&&this.eInput.getInputElement().focus({preventScroll:!0})}},Ba={selector:"AG-INPUT-DATE-FIELD",component:class extends go{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=zi();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){fe(this.gos)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?Ao(e??null,!1)??void 0:e;return this.min===t||(this.min=t,Cs(this.eInput,"min",t)),this}setMax(e){const t=e instanceof Date?Ao(e??null,!1)??void 0:e;return this.max===t||(this.max=t,Cs(this.eInput,"max",t)),this}setStep(e){return this.step===e||(this.step=e,Cs(this.eInput,"step",e)),this}getDate(){if(this.eInput.validity.valid)return To(this.getValue())??void 0}setDate(e,t){this.setValue(Ao(e??null,!1),t)}}},za=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[Ba]}init(e,t){this.eInput=e,this.params=t,null!=t.min&&e.setMin(t.min),null!=t.max&&e.setMax(t.max),null!=t.step&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return _(e)||_(this.params.value)?e??null:this.params.value}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Ao(e,!1)}},Ha=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[Ba]}init(e,t){this.eInput=e,this.params=t,null!=t.min&&e.setMin(t.min),null!=t.max&&e.setMax(t.max),null!=t.step&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return _(e)||_(this.params.value)?this.params.parseValue(e??""):this.params.value}getStartValue(){return Ao(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):To(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Ao(e??null,!1)??void 0}},Va=class{constructor(e){this.cellValueChanges=e}},ja=class extends Va{constructor(e,t,i,s){super(e),this.initialRange=t,this.finalRange=i,this.ranges=s}},Wa=class{constructor(e){this.actionStack=[],this.maxStackSize=e||10,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};function Ua(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,i)),"ensureVisible")}function _a(e,t,i){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,i)),"ensureVisible")}var Ya={version:_o,moduleName:"@ag-grid-community/edit-core",beans:[class extends tt{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const n=this.createCellEditorParams(e,t,i),o=e.getColumn().getColDef(),r=this.userComponentFactory.getCellEditorDetails(o,n),a=null!=r?.popupFromSelector?r.popupFromSelector:!!o.cellEditorPopup,l=null!=r?.popupPositionFromSelector?r.popupPositionFromSelector:o.cellEditorPopupPosition;return e.setEditing(!0,r),e.getComp().setEditDetails(r,a,l,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(e.createEvent(s,"cellEditingStarted")),!r?.params?.suppressPreventDefault}stopEditing(e,t){const i=e.getComp(),{newValue:s,newValueExists:n}=this.takeValueFromCellEditor(t,i),o=e.getRowNode(),r=e.getColumn(),a=this.valueService.getValueForDisplay(r,o);let l=!1;return n&&(l=this.saveNewValue(e,a,s,o,r)),e.setEditing(!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent({...e.createEvent(null,"cellEditingStopped"),oldValue:a,newValue:s,valueChanged:l}),l}handleColDefChanged(e){const t=e.getCellEditor();if(t?.refresh){const{eventKey:i,cellStartedEdit:s}=e.getEditCompDetails().params,n=this.createCellEditorParams(e,i,s),o=e.getColumn().getColDef(),r=this.userComponentFactory.getCellEditorDetails(o,n);t.refresh(r.params)}}setFocusOutOnEditor(e){const t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){const t=e.getComp(),i=t.getCellEditor();i?.focusIn?i.focusIn():(e.focusCell(!0),e.onCellEditorAttached((()=>t.getCellEditor()?.focusIn?.())))}stopEditingAndFocus(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(i,e.getCellPosition())}createPopupEditorWrapper(e){return new Pa(e)}takeValueFromCellEditor(e,t){const i={newValueExists:!1};if(e)return i;const s=t.getCellEditor();if(!s)return i;if(s.isCancelAfterEnd&&s.isCancelAfterEnd())return i;return{newValue:s.getValue(),newValueExists:!0}}saveNewValue(e,t,i,s,n){if(i===t)return!1;e.setSuppressRefreshCell(!0);const o=s.setDataValue(n,i,"edit");return e.setSuppressRefreshCell(!1),o}createCellEditorParams(e,t,i){const s=e.getColumn(),n=e.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(s,n),eventKey:t,column:s,colDef:s.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:n,data:n.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:t=>this.valueService.parseValue(s,n,t,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const i=e?js.UP:js.DOWN;this.navigationService.navigateToNextCell(null,i,t,!1)}}}]},Ka={version:_o,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:function(e){e.undoRedoService?.undo("api")},redoCellEditing:function(e){e.undoRedoService?.redo("api")},getCellEditorInstances:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.rowRenderer.getCellEditorInstances(t).map(An)},getEditingCells:function(e){return e.rowRenderer.getEditingCells()},stopEditing:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.rowRenderer.stopEditing(t)},startEditingCell:function(e,t){const i=e.columnModel.getCol(t.colKey);if(!i)return void F(`no column found for ${t.colKey}`);const s={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};null==t.rowPinned&&_a(e,t.rowIndex),Ua(e,t.colKey);const n=e.navigationService.getCellByPosition(s);if(!n)return;const{focusService:o,gos:r}=e,a=r.get("stopEditingWhenCellsLoseFocus")&&(()=>{const e=fe(r),t=n.getGui();return e!==t&&!!t?.contains(e)})();!a&&o.isCellFocused(s)||o.setFocusedCell({...s,forceBrowserFocus:a,preventScrollOnBrowserFocus:!0}),n.startRowOrCellEdit(t.key)},getCurrentUndoSize:function(e){return e.undoRedoService?.getCurrentUndoStackSize()??0},getCurrentRedoSize:function(e){return e.undoRedoService?.getCurrentRedoStackSize()??0}},dependantModules:[Ya]},Za={version:_o,moduleName:"@ag-grid-community/undo-redo-edit",beans:[class extends tt{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=null!==this.activeCellEdit&&this.cellPositionUtils.equals(this.activeCellEdit,t),s=null!==this.activeRowEdit&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||s||this.isPasting||this.isRangeInAction))return;const{rowPinned:n,rowIndex:o,column:r,oldValue:a,value:l}=e,c={rowPinned:n,rowIndex:o,columnId:r.getColId(),newValue:l,oldValue:a};this.cellValueChanges.push(c)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;const e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new Wa(e),this.redoStack=new Wa(e),this.addListeners();const t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:e=>{e.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:"undoStarted",source:e});const t=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source:e,operationPerformed:t})}redo(e){this.eventService.dispatchEvent({type:"redoStarted",source:e});const t=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source:e,operationPerformed:t})}undoRedo(e,t,i,s,n){if(!e)return!1;const o=e.pop();return!(!o||!o.cellValueChanges)&&(this.processAction(o,(e=>e[s]),n),o instanceof ja?this.processRange(this.rangeService,o.ranges||[o[i]]):this.processCell(o.cellValueChanges),t.push(o),!0)}processAction(e,t,i){e.cellValueChanges.forEach((e=>{const{rowIndex:s,rowPinned:n,columnId:o}=e,r={rowIndex:s,rowPinned:n},a=this.rowPositionUtils.getRowNode(r);a.displayed&&a.setDataValue(o,t(e),i)}))}processRange(e,t){let i;e.removeAllCellRanges(!0),t.forEach(((s,n)=>{if(!s)return;const o=s.startRow,r=s.endRow;n===t.length-1&&(i={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(i));const a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:s.startColumn,columns:s.columns};e.addCellRange(a)}))}processCell(e){const t=e[0],{rowIndex:i,rowPinned:s}=t,n={rowIndex:i,rowPinned:s},o=this.rowPositionUtils.getRowNode(n),r={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(r,this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:i,columnId:s,rowPinned:n}=e,o=this.gridBodyCtrl.getScrollFeature(),r=this.columnModel.getCol(s);if(!r)return;o.ensureIndexVisible(i),o.ensureColumnVisible(r);const a={rowIndex:i,column:r,rowPinned:n};this.focusService.setFocusedCell({...a,forceBrowserFocus:!0}),t?.setRangeToCell(a)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new Va(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{this.activeCellEdit=null;if(e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const e=new Va(this.cellValueChanges);this.pushActionsToUndoStack(e)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new Va(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new ja(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;e=this.rangeService&&Ae(this.gos)?new ja(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):new Va(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}}],dependantModules:[Ya]},$a={version:_o,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:Oa}],dependantModules:[Ya]},Qa={version:_o,moduleName:"@ag-grid-community/editing",dependantModules:[Ya,Za,{version:_o,moduleName:"@ag-grid-community/full-row-edit",beans:[class extends tt{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=!0;return e.getAllCellCtrls().reduce(((e,o)=>{const r=o===i;return r?n=o.startEditing(t,r,s):o.startEditing(null,r,s),!!e||o.isEditing()}),!1)&&this.setEditing(e,!0),n}stopEditing(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.getAllCellCtrls(),s=e.isEditing();e.setStoppingRowEdit(!0);let n=!1;for(const o of i){const e=o.stopEditing(t);s&&!t&&!n&&e&&(n=!0)}n&&this.eventService.dispatchEvent(e.createRowEvent("rowValueChanged")),s&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,(e=>e.rowComp.addOrRemoveCssClass("ag-row-editing",t)));const i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(i)}}],dependantModules:[Ya]},{version:_o,moduleName:"@ag-grid-community/all-editors",dependantModules:[$a,{version:_o,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:Oa},{name:"agNumberCellEditor",classImp:class extends Na{constructor(){super(new Ga)}},params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:class extends Na{constructor(){super(new za)}}},{name:"agDateStringCellEditor",classImp:class extends Na{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new Ha((()=>this.dataTypeService)))}}},{name:"agCheckboxCellEditor",classImp:class extends en{constructor(){super('\n            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[Ks]),this.eCheckbox=Is}init(e){this.params=e;const t=e.value??void 0;this.eCheckbox.setValue(t);this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:e=>this.setAriaLabel(e.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),i=Bi(t,e),s=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${s} (${i})`)}}}],dependantModules:[$a]},{version:_o,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:class extends en{constructor(){super('<div class="ag-cell-edit-wrapper">\n                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>\n            </div>',[ao]),this.eSelect=Is,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueService:i,gos:s}=this,{values:n,value:o,eventKey:r}=e;if(Y(n))return void F("no values found for select cellEditor");this.startedByEnter=null!=r&&r===js.ENTER;let a=!1;n.forEach((s=>{const n={value:s},r=i.formatValue(e.column,null,s),l=null!==r&&void 0!==r;n.text=l?r:s,t.addOption(n),a=a||o===s})),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:h}=e;null!=l&&t.setPickerGap(l),null!=h&&t.setPickerMaxHeight(h),null!=c&&t.setPickerMaxWidth(c),"fullRow"!==s.get("editType")&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout((()=>{this.isAlive()&&this.eSelect.showPicker()}))}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}}}],dependantModules:[Ya]},{version:_o,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:class extends en{constructor(){super('<div class="ag-large-text">\n        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',[Ta]),this.eTextArea=Is}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),_(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===js.LEFT||t===js.UP||t===js.RIGHT||t===js.DOWN||e.shiftKey&&t===js.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return _(e)||_(this.params.value)?this.params.parseValue(e):this.params.value}}}],dependantModules:[Ya]}]},Ka]},Xa=class extends tt{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.centerRowContainerCtrl=e.center}))}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const s=this.rowRenderer.getAllCellsForColumn(e);return t||s.push(i),this.addElementsToContainerAndGetWidth(s)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();e.forEach((e=>this.cloneItemIntoDummy(e,t))),i.appendChild(t);const s=t.offsetWidth;i.removeChild(t);return s+this.getAutoSizePadding()}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach((i=>{const s=i.getHtmlElementForColumnHeader(e);null!=s&&(t=s)})),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const s=document.createElement("div"),n=s.classList;["ag-header-cell","ag-header-group-cell"].some((e=>i.classList.contains(e)))?(n.add("ag-header","ag-header-row"),s.style.position="static"):n.add("ag-row");let o=e.parentElement;for(;o;){if(["ag-header-row","ag-row"].some((e=>o.classList.contains(e)))){for(let e=0;e<o.classList.length;e++){const t=o.classList[e];"ag-row-position-absolute"!=t&&n.add(t)}break}o=o.parentElement}s.appendChild(i),t.appendChild(s)}},qa=class extends tt{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=ie(this.gos),this.ctrlsService.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl})),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){let t=e.childStore?.getStoreBounds();return e.footer&&(t=e.sibling.childStore?.getStoreBounds()),(t?.heightPx??0)+(t?.topPx??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&0===e.rowIndex)return Number.MAX_SAFE_INTEGER;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){let t=e.footer?e.sibling:e;for(;t.isExpandable()&&t.expanded;)if(t.master)t=t.detailNode;else if(t.childrenAfterSort){if(0===t.childrenAfterSort.length)break;t=ze(t.childrenAfterSort)}return t.rowTop+t.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){const t="top"===e;let i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);const s=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,n=new Set,o=e=>{if(n.add(e),t){const t=this.getLastPixelOfGroup(e),n=s+i+e.rowHeight;e.stickyRowTop=t<n?i+(t-n):i}else{const t=this.getFirstPixelOfGroup(e),n=s-(i+e.rowHeight);e.stickyRowTop=t>n?i-(t-n):i}i=0,n.forEach((e=>{const t=e.stickyRowTop+e.rowHeight;i<t&&(i=t)}))},r=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=t=>{if(!t.displayed)return!1;if(t.footer){if(!0===r)return!1;if("grand"===r&&-1===t.level)return!1;if("group"===r&&t.level>-1)return!1;const i=!!t.sibling.rowIndex&&t.sibling.rowIndex+1===t.rowIndex;if("bottom"===e&&i)return!1;return!n.has(t)}if(t.isExpandable()){if(!0===a)return!1;if("bottom"===e)return!1;return!n.has(t)&&t.expanded}return!1};for(let c=0;c<100;c++){let e=s+i;t||(e=s-i);const n=this.rowModel.getRowIndexAtPixel(e),r=this.rowModel.getRow(n);if(null==r)break;const a=this.getStickyAncestors(r).find((e=>(t?e.rowIndex<n:e.rowIndex>n)&&l(e)));if(a){o(a);continue}if(!(t?r.rowTop<e:r.rowTop+r.rowHeight>e)||!l(r))break;o(r)}return t||n.forEach((e=>{e.stickyRowTop=i-(e.stickyRowTop+e.rowHeight)})),this.refreshNodesAndContainerHeight(e,n,i)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(!0===e)return!0;const t=!!this.gos.get("groupIncludeFooter")||"group"===e,i=!!this.gos.get("groupIncludeTotalFooter")||"grand"===e;return!(!t||!i)||(i?"grand":!!t&&"group")}canRowsBeSticky(){const e=Ce(this.gos),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){const t=[];let i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some((t=>t.getRowNode()===e))){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const s=this.stickyTopRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows()}else{for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const s=this.stickyBottomRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}}refreshNodesAndContainerHeight(e,t,i){const s="top"===e,n=s?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,o={},r=[];for(let u=0;u<n.length;u++){const e=n[u].getRowNode();!t.has(e)?(o[e.id]=n[u],e.sticky=!1):r.push(n[u])}const a=new Set;for(let u=0;u<r.length;u++)a.add(r[u].getRowNode());const l=[];t.forEach((e=>{a.has(e)||(e.sticky=!0,l.push(this.createRowCon(e,!1,!1)))}));let c=!!l.length||r.length!==n.length;s?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),c=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),c=!0),this.destroyRowCtrls(o,!1);const h=[...r,...l];h.sort(((e,t)=>t.getRowNode().rowIndex-e.getRowNode().rowIndex)),s||h.reverse(),h.forEach((e=>e.setRowTop(e.getRowNode().stickyRowTop)));let d=0;return s?(t.forEach((e=>{e.rowIndex<this.pageBoundsService.getFirstRow()&&(d+=e.rowHeight)})),d>this.topContainerHeight&&(d=this.topContainerHeight),this.setOffsetTop(d)):(t.forEach((e=>{e.rowIndex>this.pageBoundsService.getLastRow()&&(d+=e.rowHeight)})),d>this.bottomContainerHeight&&(d=this.bottomContainerHeight),this.setOffsetBottom(d)),!!c&&(s?this.stickyTopRowCtrls=h:this.stickyBottomRowCtrls=h,!0)}ensureRowHeightsValid(){let e=!1;const t=t=>{const i=t.getRowNode();if(i.rowHeightEstimated){const t=le(this.gos,i);i.setRowHeight(t.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},Ja=class extends tt{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach((e=>e.onCellSelectionChanged()))},t=()=>{this.getAllCellCtrls().forEach((e=>e.updateRangeBordersIfRangeCount()))},i=()=>{this.eventService.addEventListener("cellSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},s=()=>{this.eventService.removeEventListener("cellSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc((()=>s())),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],(()=>{Ae(this.gos)?i():s()}));Ae(this.gos)&&i()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()}))}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],(()=>this.onDomLayoutChanged())),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],(()=>this.redraw())),this.addManagedPropertyListener("suppressCellFocus",(e=>this.onSuppressCellFocusChanged(e.currentValue))),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],(()=>this.redrawRows())),Ce(this.gos)&&(ie(this.gos)||se(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new qa(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=ne(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=null!=e?e:3;this.cachedRowCtrls=new el(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const e=vt(this.rowCtrlsByRowIndex),t=vt(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach((t=>t.onCellFocused(e))),this.getFullWidthRowCtrls().forEach((t=>t.onFullWidthRowFocused(e)))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach((t=>t.onSuppressCellFocusChanged(e))),this.getFullWidthRowCtrls().forEach((t=>t.onSuppressCellFocusChanged(e)))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach((t=>t.onFlashCells(e)))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onColumnHover()))},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onDisplayedColumnsChanged()))},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach((e=>e.onLeftChanged()))}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach((e=>e())),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();this.columnModel.getCols().forEach((e=>{const t=t=>{this.getAllCellCtrls().forEach((i=>{i.getColumn()===e&&t(i)}))},i=()=>{t((e=>e.onLeftChanged()))},s=()=>{t((e=>e.onWidthChanged()))},n=()=>{t((e=>e.onFirstRightPinnedChanged()))},o=()=>{t((e=>e.onLastLeftPinnedChanged()))},r=()=>{t((e=>e.onColDefChanged()))};e.addEventListener("leftChanged",i),e.addEventListener("widthChanged",s),e.addEventListener("firstRightPinnedChanged",n),e.addEventListener("lastLeftPinnedChanged",o),e.addEventListener("colDefChanged",r),this.destroyFuncsForColumnListeners.push((()=>{e.removeEventListener("leftChanged",i),e.removeEventListener("widthChanged",s),e.removeEventListener("firstRightPinnedChanged",n),e.removeEventListener("lastLeftPinnedChanged",o),e.removeEventListener("colDefChanged",r)}))}))}onDomLayoutChanged(){const e=ne(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach((i=>{const s=i.getCellElement(e);s&&t.push(s)})),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){const{pinnedRowModel:i,beans:s,printLayout:n}=this,o=Object.fromEntries(e.map((e=>[e.getRowNode().id,e])));i.forEachPinnedRow(t,((r,a)=>{const l=e[a];l&&void 0===i.getPinnedRowById(l.getRowNode().id,t)&&(l.destroyFirstPass(),l.destroySecondPass()),r.id in o?(e[a]=o[r.id],delete o[r.id]):e[a]=new qr(r,s,!1,!1,n)}));const r="top"===t?i.getPinnedTopRowCount():i.getPinnedBottomRowCount();e.length=r}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else{if(this.cachedRowCtrls?.has(e))return void this.cachedRowCtrls.removeRow(e);{const t=t=>{const i=t[e.rowIndex];i&&i.getRowNode()===e&&(i.destroyFirstPass(),i.destroySecondPass(),t[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":t(this.topRowCtrls);break;case"bottom":t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(null!=e)return e?.forEach((e=>this.redrawRow(e,!0))),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==t)return null;const i=fe(this.gos),s=de(this.gos,i,$r.DOM_DATA_KEY_CELL_CTRL),n=de(this.gos,i,qr.DOM_DATA_KEY_ROW_CTRL);return s||n?t:null}redrawAfterModelUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,s=e.animate&&ve(this.gos),n=i?this.getRowsToRecycle():null;if(i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();const e=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();e&&this.updateContainerHeights(e)}this.recycleRows(n,s),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=t&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.printLayout)return void this.rowContainerHeightService.setModelHeight(null);let t=this.pageBoundsService.getCurrentPageHeight();0===t&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,this.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusService.restoreFocusedCell(e,(()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}))}stopEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getAllRowCtrls().forEach((t=>{t.stopEditing(e)}))}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let s=0;s<i;s++){const i=t[s].getAllCellCtrls(),n=i.length;for(let t=0;t<n;t++)e.push(i[t])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(const s in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[s]);return i}addRenderedRowListener(e,t,i){const s=this.rowCtrlsByRowIndex[t];s&&s.addEventListener(e,i)}flashCells(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getCellCtrls(e.rowNodes,e.columns).forEach((t=>t.flashCell(e)))}refreshCells(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&_i()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){const t=this.getCellCtrls(e.rowNodes,e.columns).map((e=>e.getCellRenderer())).filter((e=>null!=e));if(e.columns?.length)return t;const i=[],s=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach((e=>{if(s&&!this.isRowInMap(e.getRowNode(),s))return;if(!e.isFullWidth())return;const t=e.getFullWidthCellRenderers();for(let s=0;s<t.length;s++){const e=t[s];null!=e&&i.push(e)}})),[...i,...t]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach((e=>{const i=e.getCellEditor();i&&t.push(i)})),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach((t=>{if(t.isEditing()){const i=t.getCellPosition();e.push(i)}})),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach((e=>{const i=e.id;switch(e.rowPinned){case"top":t.top[i]=e;break;case"bottom":t.bottom[i]=e;break;default:t.normal[i]=e}})),t}isRowInMap(e,t){const i=e.id;switch(e.rowPinned){case"top":return null!=t.top[i];case"bottom":return null!=t.bottom[i];default:return null!=t.normal[i]}}getRowCtrls(e){const t=this.mapRowNodes(e),i=this.getAllRowCtrls();return e&&t?i.filter((e=>{const i=e.getRowNode();return this.isRowInMap(i,t)})):i}getCellCtrls(e,t){let i;_(t)&&(i={},t.forEach((e=>{const t=this.columnModel.getCol(e);_(t)&&(i[t.getId()]=!0)})));const s=[];return this.getRowCtrls(e).forEach((e=>{e.getAllCellCtrls().forEach((e=>{const t=e.getColumn().getId();i&&!i[t]||s.push(e)}))})),s}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const e=[];mt(this.rowCtrlsByRowIndex,((t,i)=>{null==i.getRowNode().id&&e.push(t)})),this.removeRowCtrls(e);const t={};return mt(this.rowCtrlsByRowIndex,((e,i)=>{const s=i.getRowNode();t[s.id]=i})),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.forEach((e=>{const i=this.rowCtrlsByRowIndex[e];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[e]}))}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{afterScroll:t}=e;let i;this.stickyRowFeature&&_i()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const s=this.firstRenderedRow,n=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let o=!1;if(this.stickyRowFeature){o=this.stickyRowFeature.checkStickyRows();const e=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();e&&this.updateContainerHeights(e)}const r=this.firstRenderedRow!==s||this.lastRenderedRow!==n;if((!t||o||r)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!o),null!=i)){const e=this.getCellToRestoreFocusToAfterRefresh();null!=i&&null==e&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach((e=>i[e]=!0));const s=Object.keys(this.rowCtrlsByRowIndex).filter((e=>!i[e]));this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){const t=function(e,t){const i=[];for(let s=e;s<=t;s++)i.push(s);return i}(this.firstRenderedRow,this.lastRenderedRow),i=(e,i)=>{const s=i.getRowNode().rowIndex;null!=s&&(s<this.firstRenderedRow||s>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(i)&&t.push(s)};mt(this.rowCtrlsByRowIndex,i),mt(e,i),t.sort(((e,t)=>e-t));const s=[];for(let n=0;n<t.length;n++){const e=t[n],i=this.rowModel.getRow(e);i&&!i.sticky&&s.push(e)}return s}recycleRows(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(s,!t);const n=[];if(s.forEach((s=>{const o=this.createOrUpdateRowCtrl(s,e,t,i);_(o)&&n.push(o)})),e){i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask((()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach((t=>{const i=t.getRowNode().rowIndex;e.push(i.toString())})),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter((e=>{if(!e.isFullWidth())return!1;const i=e.getRowNode();return!(null!=t&&!this.isRowInMap(i,t))}))}createOrUpdateRowCtrl(e,t,i,s){let n,o=this.rowCtrlsByRowIndex[e];o||(n=this.rowModel.getRow(e),_(n)&&_(t)&&t[n.id]&&n.alreadyRendered&&(o=t[n.id],t[n.id]=null));if(!o){if(n||(n=this.rowModel.getRow(e)),!_(n))return;o=this.createRowCon(n,i,s)}return n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,t){const i=[];mt(e,((e,s)=>{if(s)if(this.cachedRowCtrls&&s.isCacheable())this.cachedRowCtrls.addRow(s);else if(s.destroyFirstPass(!t),t){const e=s.instanceId;this.zombieRowCtrls[e]=s,i.push((()=>{s.destroySecondPass(),delete this.zombieRowCtrls[e]}))}else s.destroySecondPass()})),t&&(i.push((()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})),B(i))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*ce(this.gos)}workOutFirstAndLastRowsToRender(){let e,t;if(this.rowContainerHeightService.updateOffset(),this.rowModel.isRowsToRender())if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{const i=this.getRowBufferInPixels(),s=this.ctrlsService.getGridBodyCtrl(),n=this.gos.get("suppressRowVirtualisation");let o,r,a=!1;do{const e=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:t,pageLastPixel:l}=this.pageBoundsService.getCurrentPagePixelRange(),c=this.rowContainerHeightService.getDivStretchOffset(),h=s.getScrollFeature().getVScrollPosition(),d=h.top,u=h.bottom;n?(o=t+c,r=l+c):(o=Math.max(d+e-i,t)+c,r=Math.min(u+e+i,l)+c),this.firstVisibleVPixel=Math.max(d+e,t)+c,this.lastVisibleVPixel=Math.min(u+e,l)+c,a=this.ensureAllRowsInRangeHaveHeightsCalculated(o,r)}while(a);let l=this.rowModel.getRowIndexAtPixel(o),c=this.rowModel.getRowIndexAtPixel(r);const h=this.pageBoundsService.getFirstRow(),d=this.pageBoundsService.getLastRow();l<h&&(l=h),c>d&&(c=d),e=l,t=c}else e=0,t=-1;const i=ne(this.gos,"normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),n=Math.max(this.getRowBuffer(),500);i&&!s&&t-e>n&&(t=e+n);const o=e!==this.firstRenderedRow,r=t!==this.lastRenderedRow;(o||r)&&(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame((()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})})))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const i=this.pinnedRowModel?.ensureRowHeightsValid(),s=this.stickyRowFeature?.ensureRowHeightsValid(),n=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(n||s)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),!!(s||n||i)&&(this.updateContainerHeights(),!0)}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const t=!1,i=e.getRowNode(),s=this.focusService.isRowNodeFocused(i),n=e.isEditing(),o=i.detail;if(!(s||n||o))return t;return!!this.isRowPresent(i)||t}isRowPresent(e){return!!this.rowModel.isRowPresent(e)&&(!this.paginationService||this.paginationService.isRowPresent(e))}createRowCon(e,t,i){const s=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(s)return s;const n=this.gos.get("suppressAnimationFrame"),o=i&&!n&&!this.printLayout;return new qr(e,this.beans,t,o,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.values(e).map((e=>e.getRowNode()))}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find((e=>e.getRowNode().rowIndex===i))||null,t||(t=this.getStickyBottomRowCtrls().find((e=>e.getRowNode().rowIndex===i))||null))}return t}isRangeInRenderedViewport(e,t){if(null==e||null==t)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},el=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(e){if(null==e||null==e.id)return null;const t=this.entriesMap[e.id];if(!t)return null;this.removeFromCache(t),t.setCached(!1);return t.getRowNode()!=e?null:t}has(e){return null!=this.entriesMap[e.id]}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],je(this.entriesList,i)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],je(this.entriesList,e)}getEntries(){return this.entriesList}},tl=class extends tt{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new il,this.pinnedBottomRows=new il}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",(e=>this.setPinnedRowData(e.currentValue,"top"))),this.addManagedPropertyListener("pinnedBottomRowData",(e=>this.setPinnedRowData(e.currentValue,"bottom"))),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return("top"===e?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){const e=e=>{e.setRowHeight(e.rowHeight,!0)};this.pinnedBottomRows.forEach(e),this.pinnedTopRows.forEach(e)}}ensureRowHeightsValid(){let e=!1,t=0;const i=i=>{if(i.rowHeightEstimated){const s=le(this.gos,i);i.setRowTop(t),i.setRowHeight(s.height),t+=s.height,e=!0}};return this.pinnedBottomRows?.forEach(i),t=0,this.pinnedTopRows?.forEach(i),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i="top"===t?this.pinnedTopRows:this.pinnedBottomRows;if(void 0===e)return void i.clear();const s=Ie(this.gos),n="top"===t?_n.ID_PREFIX_TOP_PINNED:_n.ID_PREFIX_BOTTOM_PINNED,o=i.getIds(),r=[],a=new Set;let l=0,c=-1;for(const h of e){const e=s?.({data:h,level:0,rowPinned:t})??n+this.nextId++;if(a.has(e)){F("Duplicate ID",e,"found for pinned row with data",h,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}c++,a.add(e),r.push(e);const d=i.getById(e);if(void 0!==d)d.data!==h&&d.setData(h),l+=this.setRowTopAndRowIndex(d,l,c),o.delete(e);else{const s=new _n(this.beans);s.id=e,s.data=h,s.rowPinned=t,l+=this.setRowTopAndRowIndex(s,l,c),i.push(s)}}o.forEach((e=>{i.getById(e)?.clearRowTopAndRowIndex()})),i.removeAllById(o),i.setOrder(r)}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(le(this.gos,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(e){return this.pinnedTopRows.getByIndex(e)}getPinnedBottomRow(e){return this.pinnedBottomRows.getByIndex(e)}getPinnedRowById(e,t){return"top"===t?this.pinnedTopRows.getById(e):this.pinnedBottomRows.getById(e)}forEachPinnedRow(e,t){return"top"===e?this.pinnedTopRows.forEach(t):this.pinnedBottomRows.forEach(t)}getTotalHeight(e){const t=e.getSize();if(0===t)return 0;const i=e.getByIndex(t-1);return void 0===i?0:i.rowTop+i.rowHeight}},il=class{constructor(){this.cache={},this.ordering=[]}getById(e){return this.cache[e]}getByIndex(e){const t=this.ordering[e];return this.cache[t]}push(e){this.cache[e.id]=e,this.ordering.push(e.id)}removeAllById(e){for(const t of e)delete this.cache[t];this.ordering=this.ordering.filter((t=>!e.has(t)))}setOrder(e){this.ordering=e}forEach(e){this.ordering.forEach(((t,i)=>{const s=this.cache[t];s&&e(s,i)}))}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return 0===this.ordering.length}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}},sl=class extends tt{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLoadCompleted();this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(){const e={type:"loadComplete",success:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],block:this};this.dispatchLocalEvent(e)}},nl={version:_o,moduleName:"@ag-grid-community/row-node-block",beans:[class extends tt{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=j(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){const e=this.gos.get("maxConcurrentDatasourceRequests");return null==e?2:e<=0?void 0:e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){je(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),0==this.activeBlockLoadsCount&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void(this.gos.get("debug")&&N("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded"));const e=this.getAvailableLoadingCount(),t=this.blocks.filter((e=>"needsLoading"===e.getState())).slice(0,e);this.registerLoads(t.length),t.forEach((e=>e.load())),this.printCacheStatus()}getBlockState(){if(se(this.gos)){return this.rowModel.getBlockStates()}const e={};return this.blocks.forEach((t=>{const{id:i,state:s}=t.getBlockStateJson();e[i]=s})),e}printCacheStatus(){this.gos.get("debug")&&N(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return void 0!==this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}}]},ol=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(0===this.cachedRange.length){const e=this.getRoot(),t=this.getEnd();if(null==e||null==t)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return null!==this.root&&this.getRange().some((t=>t.id===e.id))}getRoot(){return this.root&&null===this.root?.key&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){return this.end&&null===this.end?.key&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){const t=this.getRange();if(0===t.length)return{keep:[],discard:[]};const i=t[0].id===this.root.id,s=t.findIndex((t=>t.id===e.id));if(s>-1){const n=t.slice(0,s),o=t.slice(s+1);return this.setEndRange(e),i?{keep:n,discard:o}:{keep:o,discard:n}}return{keep:t,discard:[]}}extend(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getRoot();if(null==i){const i=this.getRange().slice();return t&&e.depthFirstSearch((e=>!e.group&&i.push(e))),i.push(e),this.setRoot(e),{keep:i,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(i,e).find((e=>e.id===this.end?.id)))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const t=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:t}}}},rl=class extends tt{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,i,s){this.processClassRules(void 0,e.cellClassRules,t,i,s),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,s,n){if(null==t&&null==e)return;const o={},r={},a=(e,t)=>{e.split(" ").forEach((e=>{""!=e.trim()&&t(e)}))};if(t){const e=Object.keys(t);for(let s=0;s<e.length;s++){const n=e[s],l=t[n];let c;"string"===typeof l?c=this.expressionService.evaluate(l,i):"function"===typeof l&&(c=l(i)),a(n,(e=>{c?o[e]=!0:r[e]=!0}))}}e&&n&&Object.keys(e).forEach((e=>a(e,(e=>{o[e]||(r[e]=!0)})))),n&&Object.keys(r).forEach(n),Object.keys(o).forEach(s)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let s;if("function"===typeof i){s=i(t)}else s=i;return"string"===typeof s&&(s=[s]),s||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach((e=>{i(e)}))}},al=(e=>(e.TAB_GUARD="ag-tab-guard",e.TAB_GUARD_TOP="ag-tab-guard-top",e.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",e))(al||{}),ll=class extends tt{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:s,focusTrapActive:n,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:r,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:h,onTabKeyDown:d,handleKeyDown:u,eFocusableElement:p}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=s,this.providedFocusInnerElement=a,this.eFocusableElement=p,this.focusTrapActive=!!n,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!r,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=h,this.providedOnTabKeyDown=d,this.providedHandleKeyDown=u}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new qn(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach((e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.skipTabGuardFocus)return void(this.skipTabGuardFocus=!1);if(this.forceFocusOutWhenTabGuardsAreEmpty){if(0===this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){const t=pe(this.gos),i=this.focusService.findFocusableElements(t.body,null,!0),s=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===s)return;let n,o;e?(n=0,o=s):(n=s+1,o=i.length);const r=i.slice(n,o),a=this.gos.get("tabIndex");r.sort(((e,t)=>{const i=parseInt(e.getAttribute("tabindex")||"0"),s=parseInt(t.getAttribute("tabindex")||"0");return s===a?1:i===a?-1:0===i?1:0===s?-1:i-s})),r[e?r.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive)return;if(e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout((()=>this.activateTabGuards()),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout((()=>{this.forcingFocusOut=!1,this.activateTabGuards()}))}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},cl=class extends tt{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:s}=this,n=[t,i],o={setTabIndex:e=>{n.forEach((t=>null!=e?t.setAttribute("tabindex",e):t.removeAttribute("tabindex")))}};this.addTabGuards(t,i);const{focusTrapActive:r=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:h,onTabKeyDown:d,shouldStopEventPropagation:u,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}=e;this.tabGuardCtrl=this.createManagedBean(new ll({comp:o,focusTrapActive:r,eTopGuard:t,eBottomGuard:i,eFocusableElement:s,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:h,onTabKeyDown:d,shouldStopEventPropagation:u,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=pe(this.gos).createElement("div"),i="top"===e?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",i),Di(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];cs(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){vs(t)||(t=t.getGui());const{eBottomGuard:s}=this;s?s.insertAdjacentElement("beforebegin",t):e(t,i)}},hl=class extends Rs{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new cl(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},dl=0,ul=class extends tt{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.gridCtrl=e.gridCtrl})),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i}=e,s=this.getPopupIndex(i);if(-1!==s){this.popupList[s].alignedToElement=t}const n=t.getBoundingClientRect(),o=this.getParentRect(),r=this.keepXYWithinBounds(i,n.top-o.top,0),a=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${a}px`;const l=o.right-o.left-a;let c;function h(){return n.right-o.left-2}function d(){return n.left-o.left-a}this.gos.get("enableRtl")?(c=d(),c<0&&(c=h(),this.setAlignedStyles(i,"left")),c>l&&(c=0,this.setAlignedStyles(i,"right"))):(c=h(),c>l&&(c=d(),this.setAlignedStyles(i,"right")),c<0&&(c=0,this.setAlignedStyles(i,"left"))),i.style.left=`${c}px`,i.style.top=`${r}px`}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:s,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,eventSource:o,alignSide:r="left",position:a="over",column:l,rowNode:c,type:h}=e,d=o.getBoundingClientRect(),u=this.getParentRect(),p=this.getPopupIndex(t);if(-1!==p){this.popupList[p].alignedToElement=o}this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,updatePosition:()=>{let i,n=d.left-u.left;if("right"===r&&(n-=t.offsetWidth-d.width),"over"===a)i=d.top-u.top,this.setAlignedStyles(t,"over");else{this.setAlignedStyles(t,"under");i="under"===this.shouldRenderUnderOrAbove(t,d,u,e.nudgeY||0)?d.top-u.top+d.height:d.top-t.offsetHeight-2*(s||0)-u.top}return{x:n,y:i}},postProcessCallback:()=>this.callPostProcessPopup(h,t,o,null,l,c)})}shouldRenderUnderOrAbove(e,t,i,s){const n=i.bottom-t.bottom,o=t.top-i.top,r=e.offsetHeight+s;return n>r?"under":o>r||o>n?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const s=this.popupList[i],{alignedToElement:n}=s;if(!n)return;["right","left","over","above","under"].forEach((t=>{n.classList.remove(`ag-has-popup-positioned-${t}`),e.classList.remove(`ag-popup-positioned-${t}`)})),t&&(n.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,i,s,n,o){const r=this.gos.getCallback("postProcessPopup");if(r){r({column:n,rowNode:o,ePopup:t,type:e,eventSource:i,mouseEvent:s})}}positionPopup(e){var t=this;const{ePopup:i,keepWithinBounds:s,nudgeX:n,nudgeY:o,skipObserver:r,updatePosition:a}=e,l={width:0,height:0},c=function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{x:c,y:h}=a();r&&i.clientWidth===l.width&&i.clientHeight===l.height||(l.width=i.clientWidth,l.height=i.clientHeight,n&&(c+=n),o&&(h+=o),s&&(c=t.keepXYWithinBounds(i,c,1),h=t.keepXYWithinBounds(i,h,0)),i.style.left=`${c}px`,i.style.top=`${h}px`,e.postProcessCallback&&e.postProcessCallback())};if(c(),!r){const e=this.resizeObserverService.observeResize(i,(()=>c(!0)));setTimeout((()=>e()),200)}}getActivePopups(){return this.popupList.map((e=>e.element))}getPopupList(){return this.popupList}getParentRect(){const e=pe(this.gos);let t=this.getPopupParent();return t===e.body?t=e.documentElement:"static"===getComputedStyle(t).position&&(t=t.offsetParent),os(t)}keepXYWithinBounds(e,t,i){const s=0===i,n=s?"clientHeight":"clientWidth",o=s?"top":"left",r=s?"height":"width",a=s?"scrollTop":"scrollLeft",l=pe(this.gos),c=l.documentElement,h=this.getPopupParent(),d=e.getBoundingClientRect(),u=h.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),g=h===l.body,m=Math.ceil(d[r]);let f=g?(s?ss:ns)(c)+c[a]:h[n];g&&(f-=Math.abs(p[o]-u[o]));const y=f-m;return Math.min(Math.max(t,0),Math.abs(y))}addPopup(e){const t=pe(this.gos),{eChild:i,ariaLabel:s,alwaysOnTop:n,positionCallback:o,anchorToElement:r}=e;if(!t)return F("could not find the document, document is empty"),{hideFunc:()=>{}};const a=this.getPopupIndex(i);if(-1!==a){return{hideFunc:this.popupList[a].hideFunc}}this.initialisePopupPosition(i);const l=this.createPopupWrapper(i,s,!!n),c=this.addEventListenersToPopup({...e,wrapperEl:l});return o&&o(),this.addPopupToPopupList(i,l,c,r),{hideFunc:c}}initialisePopupPosition(e){const t=this.getPopupParent().getBoundingClientRect();_(e.style.top)||(e.style.top=-1*t.top+"px"),_(e.style.left)||(e.style.left=-1*t.left+"px")}createPopupWrapper(e,t,i){const s=this.getPopupParent(),n=document.createElement("div");return this.environment.applyThemeClasses(n),n.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Di(e,"dialog"),Ii(e,t),n.appendChild(e),s.appendChild(n),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),n}handleThemeChange(e){if(e.themeChanged)for(const t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){var t=this;const i=pe(this.gos),s=this.getPopupParent(),{wrapperEl:n,eChild:o,closedCallback:r,afterGuiAttached:a,closeOnEsc:l,modal:c}=e;let h=!1;const d=e=>{if(!n.contains(fe(this.gos)))return;e.key!==js.ESCAPE||Xe(e)||g({keyboardEvent:e})},u=e=>g({mouseEvent:e}),p=e=>g({touchEvent:e}),g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mouseEvent:a,touchEvent:l,keyboardEvent:c,forceHide:g}=e;(g||!t.isEventFromCurrentPopup({mouseEvent:a,touchEvent:l},o)&&!h)&&(h=!0,s.removeChild(n),i.removeEventListener("keydown",d),i.removeEventListener("mousedown",u),i.removeEventListener("touchstart",p),i.removeEventListener("contextmenu",u),t.eventService.removeEventListener("dragStarted",u),r&&r(a||l||c),t.removePopupFromPopupList(o))};return a&&a({hidePopup:g}),window.setTimeout((()=>{l&&i.addEventListener("keydown",d),c&&(i.addEventListener("mousedown",u),this.eventService.addEventListener("dragStarted",u),i.addEventListener("touchstart",p),i.addEventListener("contextmenu",u))}),0),g}addPopupToPopupList(e,t,i,s){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:dl++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(e,s)}getPopupIndex(e){return this.popupList.findIndex((t=>t.element===e))}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const s=this.popupList[i];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then((e=>e&&e())),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!t)return;const n=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:s.hideFunc});return s.stopAnchoringPromise=n,s.isAnchored=!0,n}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter((t=>t.element!==e))}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:s,ePopup:n}=e,o=s.getBoundingClientRect(),r=e=>parseInt(e.substring(0,e.length-1),10),a=(e,t)=>{const s=i[e]-o[e],a=r(n.style[e]);return{initialDiff:s,lastDiff:s,initial:a,last:a,direction:t}},l=a("top",0),c=a("left",1),h=this.getFrameworkOverrides();return new rn((i=>{h.wrapIncoming((()=>{h.setInterval((()=>{const i=t.getBoundingClientRect(),o=s.getBoundingClientRect();if(0==o.top&&0==o.left&&0==o.height&&0==o.width)return void e.hidePopup();const a=(e,t)=>{const s=r(n.style[t]);e.last!==s&&(e.initial=s,e.last=s);const a=i[t]-o[t];if(a!=e.lastDiff){const i=this.keepXYWithinBounds(n,e.initial+e.initialDiff-a,e.direction);n.style[t]=`${i}px`,e.last=i}e.lastDiff=a};a(l,"top"),a(c,"left")}),200).then((e=>{i((()=>{null!=e&&window.clearInterval(e)}))}))}),"popupPositioning")}))}hasAnchoredPopup(){return this.popupList.some((e=>e.isAnchored))}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:s}=e,n=i||s;if(!n)return!1;const o=this.getPopupIndex(t);if(-1===o)return!1;for(let r=o;r<this.popupList.length;r++){if(et(this.popupList[r].element,n))return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){const t=pe(this.gos);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),s=i.length,n=this.getWrapper(e);if(!n||s<=1||!t.contains(e))return;const o=[],r=[];for(const h of i)h!==n&&(h.classList.contains("ag-always-on-top")?r.push(h):o.push(h));const a=[],l=r.length,c=n.classList.contains("ag-always-on-top")||!l?[...o,...r,n]:[...o,n,...r];for(let h=0;h<=s;h++){const e=c[h];if(i[h]===c[h]||e===n)continue;e.querySelectorAll("div").forEach((e=>{0!==e.scrollTop&&a.push([e,e.scrollTop])})),0===h?t.insertAdjacentElement("afterbegin",e):c[h-1].insertAdjacentElement("afterend",e)}for(;a.length;){const e=a.pop();e[0].scrollTop=e[1]}}},pl=["touchstart","touchend","touchmove","touchcancel"],gl=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e()}setInterval(e,t){return new rn((i=>{i(window.setInterval(e,t))}))}addEventListener(e,t,i,s){const n=_e(pl,t);e.addEventListener(t,i,{capture:!!s,passive:n})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${"solid"===this.frameworkName?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},ml=class extends tt{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===js.UP,s=e===js.DOWN,n=e===js.LEFT;let o,r;if(i||s)r=i?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),o=t.column;else{const e=this.visibleColsService.getAllCols(),i=this.gos.get("enableRtl");r=t.rowIndex,o=n!==i?e[0]:ze(e)}return{rowIndex:r,rowPinned:null,column:o}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,s=!1;for(;!s;){switch(e){case js.UP:i=this.getCellAbove(i);break;case js.DOWN:i=this.getCellBelow(i);break;case js.RIGHT:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case js.LEFT:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,F("unknown key for navigation ",e)}s=!i||this.isCellGoodToFocusOn(i)}return i}isCellGoodToFocusOn(e){const t=e.column;let i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex)}if(!i)return!1;return!t.isSuppressNavigable(i)}getCellToLeft(e){if(!e)return null;const t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;let s=!1;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else i&&(s=!0);const n=this.rowModel.getRow(e.rowIndex),o=s?void 0:this.getNextStickyPosition(n);return o||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!Ce(this.gos)||!e||!e.sticky)return;let i=[];i=this.rowRenderer.getStickyTopRowCtrls().some((t=>t.getRowNode().rowIndex===e.rowIndex))?[...this.rowRenderer.getStickyTopRowCtrls()].sort(((e,t)=>e.getRowNode().rowIndex-t.getRowNode().rowIndex)):[...this.rowRenderer.getStickyBottomRowCtrls()].sort(((e,t)=>t.getRowNode().rowIndex-e.getRowNode().rowIndex));const s=t?-1:1,n=i.findIndex((t=>t.getRowNode().rowIndex===e.rowIndex)),o=i[n+s];return o?{rowIndex:o.getRowNode().rowIndex,rowPinned:null}:void 0}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex;if("top"===t){return this.pinnedRowModel.getPinnedTopRowCount()-1<=i}if("bottom"===t){return this.pinnedRowModel.getPinnedBottomRowCount()-1<=i}return this.pageBoundsService.getLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned;let s=!1;if(i?0===t:t===this.pageBoundsService.getFirstRow())return"top"===i?null:i&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;i&&(s=!0);const n=this.rowModel.getRow(e.rowIndex),o=s?void 0:this.getNextStickyPosition(n,!0);return o||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,n=this.visibleColsService.getColAfter(e.column);if(!n){n=t[0];const o=this.getRowBelow(e);if(Y(o))return null;if(!o.rowPinned&&!(this.paginationService?.isRowInPage(o)??1))return null;i=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}getNextTabbedCellBackwards(e){const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,n=this.visibleColsService.getColBefore(e.column);if(!n){n=ze(t);const o=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Y(o))return null;if(!o.rowPinned&&!(this.paginationService?.isRowInPage(o)??1))return null;i=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}},fl=(e,t)=>{for(const i in t)t[i]=e;return t},yl={...fl("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...fl("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...fl("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0}),...fl("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...fl("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...fl("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...fl("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...fl("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...fl("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...fl("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0}),...fl("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...fl("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...fl("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...fl("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...fl("@ag-grid-enterprise/status-bar",{getStatusPanel:0})},vl={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},Cl=(e,t)=>e.eventService.dispatchEvent(t),bl=class{};Reflect.defineProperty(bl,"name",{value:"GridApi"});var wl=class extends tt{constructor(){super(),this.beanName="apiFunctionService",this.api=new bl,this.fns={...vl,dispatchEvent:Cl},this.beans=null,this.preDestroyLink="";const{api:e}=this;for(const t in yl)e[t]=this.makeApi(t)[t]}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:i,beans:s}=this;i!==vl&&(i[e]=s?.validationService?.validateApiFunction(e,t)??t)}makeApi(e){var t=this;return{[e]:function(){const{beans:i,fns:{[e]:s}}=t;for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return s?s(i,...o):t.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:s}=this;if(t){const t=yl[e];i.assertModuleRegistered(t,`api.${e}`)&&F(`API function '${e}' not registered to module '${t}'`)}else F(`Grid API function ${e}() cannot be called as the grid has been destroyed.\nEither clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.\nTo run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${s}`)}destroy(){super.destroy(),this.fns=vl,this.beans=null}};function Sl(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionService").api}}var xl=class extends tt{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,i){const s=[],n={};return e.forEach((e=>{let o=!0,r=this.createDefFromColumn(e,t,i),a=e.getOriginalParent(),l=null;for(;a;){let e=null;if(a.isPadding()){a=a.getOriginalParent();continue}const t=n[a.getGroupId()];if(t){t.children.push(r),o=!1;break}if(e=this.createDefFromGroup(a),e&&(e.children=[r],n[e.groupId]=e,r=e,a=a.getOriginalParent()),null!=a&&l===a){o=!1;break}l=a}o&&s.push(r)})),s}createDefFromGroup(e){const t=yt(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const s=yt(e.getColDef());return s.colId=e.getColId(),s.width=e.getActualWidth(),s.rowGroup=e.isRowGroupActive(),s.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,s.pivot=e.isPivotActive(),s.pivotIndex=e.isPivotActive()?i.indexOf(e):null,s.aggFunc=e.isValueActive()?e.getAggFunc():null,s.hide=!e.isVisible()||void 0,s.pinned=e.isPinned()?e.getPinned():null,s.sort=e.getSort()?e.getSort():null,s.sortIndex=null!=e.getSortIndex()?e.getSortIndex():null,s}},Ml=class extends tt{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(e){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source:e})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(e){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(e){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:1===e.length?e[0]:void 0,columnGroups:e})}rowGroupChanged(e,t){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:e,column:1===e.length?e[0]:null,source:t})}genericColumnEvent(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:1===t.length?t[0]:null,source:i})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}newColumnsLoaded(e){this.eventService.dispatchEvent({type:"newColumnsLoaded",source:e})}everythingChanged(e){this.eventService.dispatchEvent({type:"columnEverythingChanged",source:e})}columnMoved(e){const{movedColumns:t,source:i,toIndex:s,finished:n}=e;this.eventService.dispatchEvent({type:"columnMoved",columns:t,column:t&&1===t.length?t[0]:null,toIndex:s,finished:n,source:i})}columnPinned(e,t){if(!e.length)return;const i=1===e.length?e[0]:null,s=this.getCommonValue(e,(e=>e.getPinned()));this.eventService.dispatchEvent({type:"columnPinned",pinned:null!=s?s:null,columns:e,column:i,source:t})}columnVisible(e,t){if(!e.length)return;const i=1===e.length?e[0]:null,s=this.getCommonValue(e,(e=>e.isVisible()));this.eventService.dispatchEvent({type:"columnVisible",visible:s,columns:e,column:i,source:t})}getCommonValue(e,t){if(!e||0==e.length)return;const i=t(e[0]);for(let s=1;s<e.length;s++)if(i!==t(e[s]))return;return i}columnChanged(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t&&1==t.length?t[0]:null,source:i})}columnResized(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e&&e.length&&this.eventService.dispatchEvent({type:"columnResized",columns:e,column:1===e.length?e[0]:null,flexColumns:s,finished:t,source:i})}},Dl=class extends tt{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){if(Y(this.columnModel.getColDefCols())||!this.columnModel.isAlive())return[];const e=this.columnModel.getAllCols().map((e=>this.createStateItemFromColumn(e)));return this.orderColumnStateList(e),e}createStateItemFromColumn(e){const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns(),s=e.isRowGroupActive()?t.indexOf(e):null,n=e.isPivotActive()?i.indexOf(e):null,o=e.isValueActive()?e.getAggFunc():null,r=null!=e.getSort()?e.getSort():null,a=null!=e.getSortIndex()?e.getSortIndex():null,l=null!=e.getFlex()&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:r,sortIndex:a,aggFunc:o,rowGroup:e.isRowGroupActive(),rowGroupIndex:s,pivot:e.isPivotActive(),pivotIndex:n,flex:l}}orderColumnStateList(e){const t=this.columnModel.getCols(),i=new Map(t.map(((e,t)=>[e.getColId(),t])));e.sort(((e,t)=>(i.has(e.colId)?i.get(e.colId):-1)-(i.has(t.colId)?i.get(t.colId):-1)))}},Il=class extends tt{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){const e=[];return Lt(null,this.columnModel.getColTree(),(t=>{it(t)&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})})),e}resetColumnGroupState(e){const t=this.columnModel.getColDefColTree();if(!t)return;const i=[];Lt(null,t,(e=>{if(it(e)){const t=e.getColGroupDef(),s={groupId:e.getGroupId(),open:t?t.openByDefault:void 0};i.push(s)}})),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();const i=[];e.forEach((e=>{const t=e.groupId,s=e.open,n=this.columnModel.getProvidedColGroup(t);n&&n.isExpanded()!==s&&(n.setExpanded(s),i.push(n))})),this.visibleColsService.refresh(t,!0),i.length&&this.eventDispatcher.groupOpened(i),this.columnAnimationService.finish()}},Rl=class extends tt{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!s)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){const e=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=e-this.scrollPosition-this.scrollWidth,this.viewportRight=e-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t]}return i||[]}extractViewportColumns(){const e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return!(!e.isAutoHeaderHeight()&&!this.isAnyParentAutoHeaderHeight(e))||this.isColumnInRowViewport(e)}isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),s=this.viewportLeft-200,n=this.viewportRight+200;return!(t<s&&i<s)&&!(t>n&&i>n)}getViewportColumns(){const e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;const t=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),i=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,i,t,(e=>{const t=e.getLeft();return _(t)&&t>this.viewportLeft}))}checkViewportColumns(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};const e={},t=this.visibleColsService.getLeftCols(),i=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(i).forEach((t=>e[t.getId()]=!0));const s=(t,i,n)=>{let o=!1;for(let r=0;r<t.length;r++){const a=t[r];let l=!1;if(Dt(a))l=!0===e[a.getId()];else{const e=a.getDisplayedChildren();e&&(l=s(e,i,n+1))}l&&(o=!0,i[n]||(i[n]=[]),i[n].push(a))}return o};s(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),s(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),s(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){this.extractViewportColumns();const e=this.getViewportColumns().map((e=>`${e.getId()}-${e.getPinned()||"normal"}`)).join("#"),t=this.colsWithinViewportHash!==e;return t&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),t}},El=class extends tt{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){const i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){return class{refresh(){return!1}getGui(){return this.eGui}init(t){const i=e(t),s=typeof i;this.eGui="string"!==s&&"number"!==s&&"boolean"!==s?null!=i?i:ps("<span></span>"):ps("<span>"+i+"</span>")}}}doesImplementIComponent(e){return!!e&&(e.prototype&&"getGui"in e.prototype)}},Al=class extends tt{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},Ll=Object.fromEntries(["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"].map(((e,t)=>[e,t])));function kl(e,t){return((e.beanName?Ll[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER)-((t.beanName?Ll[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER)}function Tl(e,t){return"gridDestroyService"===e?.beanName?-1:0}var Pl=class extends tt{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e){const t=this.registry[e];if(null!=t){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return new t(...s)}}},Nl=class extends tt{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(e){this.runReadyCallbacksAsync=e.frameworkOverrides.runWhenReadyAsync?.()??!1}postConstruct(){this.addEventListener("ready",(()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach((e=>e(this.params))),this.readyCallbacks.length=0)}),this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every((e=>e?.isAlive()??!1))}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc((()=>{const e=this.readyCallbacks.indexOf(t);e>=0&&this.readyCallbacks.splice(e,1)}))}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc((()=>{this.updateReady()}))}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},Fl=class extends tt{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){const{rowIndex:t,rowPinned:i,column:s}=e;return this.createIdFromValues({rowIndex:t,column:s,rowPinned:i})}createIdFromValues(e){const{rowIndex:t,rowPinned:i,column:s}=e;return`${t}.${null==i?"null":i}.${s.getId()}`}equals(e,t){const i=e.column===t.column,s=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return i&&s&&n}},Ol=class extends tt{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){ie(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(null==this.clientSideRowModel)return void this.eventService.dispatchEvent(e);this.events.push(e);const i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach((e=>this.eventService.dispatchEvent(e))),this.events=[]};t?i():(null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}},Gl=class extends tt{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e,t=0;return this.pinnedRowModel.getPinnedTopRowCount()?e="top":this.rowModel.getRowCount()?(e=null,t=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(e="bottom"),void 0===e?null:{rowIndex:t,rowPinned:e}}getLastRow(){let e,t=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),s=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):s&&(t="top",e=s-1),void 0===e?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(e.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t||!(e&&!t||!e&&t)&&(e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned)}before(e,t){switch(e.rowPinned){case"top":if("top"!==t.rowPinned)return!0;break;case"bottom":if("bottom"!==t.rowPinned)return!1;break;default:if(_(t.rowPinned))return"top"!==t.rowPinned}return e.rowIndex<t.rowIndex}},Bl={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},zl={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},Hl={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},Vl=class extends tt{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",(()=>this.handleThemeGridOptionChange())),this.handleThemeGridOptionChange(),this.addDestroyFunc((()=>this.stopUsingTheme())),this.addManagedPropertyListener("rowHeight",(()=>this.refreshRowHeightVariable())),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(Bl),this.getSizeEl(zl),this.getSizeEl(Hl)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(Bl)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(zl)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(Hl)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){return this.gridTheme?.getCssClass()||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(e){const t=this.getThemeClasses();for(const i of Array.from(e.classList))i.startsWith("ag-theme-")&&!t.includes(i)&&e.classList.remove(i);e.classList.add(...t)}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(null==t||isNaN(t)||!isFinite(t))return null!==e&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const i=`${t}px`;return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):""!=e?parseFloat(e):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(null!=t)return t;const i=this.measureSizeEl(e);return"detached"===i||"no-styles"===i?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(null==t.offsetParent)return"detached";const i=t.offsetWidth;return i===Wl?"no-styles":(this.sizesMeasured=!0,i)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let i=this.eMeasurementContainer;i||(i=this.eMeasurementContainer=document.createElement("div"),i.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(i),this.eGridDiv.appendChild(i)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${Wl}px)`,i.appendChild(t),this.sizeEls.set(e,t);let s=this.measureSizeEl(e);"no-styles"===s&&F(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);const n=this.resizeObserverService.observeResize(t,(()=>{const t=this.measureSizeEl(e);"detached"!==t&&"no-styles"!==t&&(this.lastKnownValues.set(e,t),t!==s&&(s=t,this.fireGridStylesChangedEvent(e.changeKey)))}));return this.addDestroyFunc((()=>n())),t}fireGridStylesChangedEvent(e){this.eventService.dispatchEvent({type:"gridStylesChanged",[e]:!0})}setUpThemeClassObservers(){const e=new MutationObserver((()=>{const e=this.readAncestorThemeClasses();jl(e,this.ancestorThemeClasses)||(this.ancestorThemeClasses=e,this.fireGridStylesChangedEvent("themeChanged"))}));let t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement;this.addDestroyFunc((()=>e.disconnect()))}readAncestorThemeClasses(){let e=this.eGridDiv;const t=[];for(;e;){const i=Array.from(e.classList).filter((e=>e.startsWith("ag-theme-")));for(const e of i)t.includes(e)||t.unshift(e);e=e.parentElement}return Object.freeze(t)}handleThemeGridOptionChange(){const{gos:e,eMeasurementContainer:t,gridTheme:i}=this,s=e.get("theme")||null;s!==i&&(i?.stopUse(),this.gridTheme=s,s?.startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:this.eGridDiv}),t&&this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){this.gridTheme?.stopUse(),this.gridTheme=null}},jl=(e,t)=>e.length===t.length&&-1===e.findIndex(((i,s)=>e[s]!==t[s])),Wl=15538,Ul=class extends tt{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new L}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){const e=re(this.gos);this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},_l=class e extends tt{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(e){this.eGridDiv=e.eGridDiv,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.headerNavigationService=e.headerNavigationService,this.headerPositionUtils=e.headerPositionUtils,this.rowRenderer=e.rowRenderer,this.rowPositionUtils=e.rowPositionUtils,this.cellPositionUtils=e.cellPositionUtils,this.navigationService=e.navigationService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.rangeService=e.rangeService,this.advancedFilterService=e.advancedFilterService,this.overlayService=e.overlayService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",e.toggleKeyboardMode),t.addEventListener("mousedown",e.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.removeEventListener("keydown",e.toggleKeyboardMode),t.removeEventListener("mousedown",e.toggleKeyboardMode))}static toggleKeyboardMode(t){const i=e.keyboardModeActive,s="keydown"===t.type;s&&(t.ctrlKey||t.metaKey||t.altKey)||i!==s&&(e.keyboardModeActive=s)}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,(e=>{this.gridCtrl=e.gridCtrl}))}registerKeyboardFocusEvents(){const t=pe(this.gos);e.addKeyboardModeEvents(t),e.instanceCount++,this.addDestroyFunc((()=>{e.instanceCount--,e.removeKeyboardModeEvents(t)}))}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const e=this.focusedCellPosition.column,t=this.columnModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}isKeyboardMode(){return e.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(fe(this.gos),qr.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(fe(this.gos),Wo.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(e,t){let i=e;for(;i;){if(de(this.gos,i,t))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(e){return!!this.isCellRestoreFocused(e)&&(setTimeout((()=>{this.restoredFocusedCellPosition=null}),0),!0)}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(e,t){this.awaitRestoreFocusedCell=!0,setTimeout((()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(e),t())}))}isCellRestoreFocused(e){return null!=this.restoredFocusedCellPosition&&this.cellPositionUtils.equals(e,this.restoredFocusedCellPosition)}setRestoreFocusedCell(e){"react"===this.getFrameworkOverrides().renderingEngine&&(this.restoredFocusedCellPosition=e)}getFocusEventParams(e){const{rowIndex:t,rowPinned:i,column:s}=e,n={rowIndex:t,rowPinned:i,column:s,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i});return o&&(n.isFullWidthCell=o.isFullWidth()),n}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,null==this.focusedCellPosition)return;const e=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){const{column:t,rowIndex:i,rowPinned:s,forceBrowserFocus:n=!1,preventScrollOnBrowserFocus:o=!1}=e,r=this.columnModel.getCol(t);r?(this.focusedCellPosition={rowIndex:i,rowPinned:U(s),column:r},this.eventService.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCellPosition),forceBrowserFocus:n,preventScrollOnBrowserFocus:o})):this.focusedCellPosition=null}isCellFocused(e){return null!=this.focusedCellPosition&&this.cellPositionUtils.equals(e,this.focusedCellPosition)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(null==this.focusedHeaderPosition)return!1;const t=e.getColumnGroupChild(),i=e.getRowIndex(),s=e.getPinned(),{column:n,headerRowIndex:o}=this.focusedHeaderPosition;return t===n&&i===o&&s==n.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(e,t){this.focusedHeaderPosition={headerRowIndex:e,column:t}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(e){if(this.isHeaderFocusSuppressed())return!1;const{direction:t,fromTab:i,allowUserOverride:s,event:n,fromCell:o,rowWithoutSpanValue:r}=e;let{headerPosition:a}=e;if(o&&this.filterManager?.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(a);if(s){const e=this.getFocusedHeader(),s=this.headerNavigationService.getHeaderRowCount();if(i){const i=this.gos.getCallback("tabToNextHeader");i&&(a=this.getHeaderPositionFromUserFunc({userFunc:i,direction:t,currentPosition:e,headerPosition:a,headerRowCount:s}))}else{const t=this.gos.getCallback("navigateToNextHeader");if(t&&n){a=t({key:n.key,previousHeaderPosition:e,nextHeaderPosition:a,headerRowCount:s,event:n})}}}return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:t,event:n,fromCell:o,rowWithoutSpanValue:r})}focusHeaderPositionFromUserFunc(e){if(this.isHeaderFocusSuppressed())return!1;const{userFunc:t,headerPosition:i,direction:s,event:n}=e,o=this.getFocusedHeader(),r=this.headerNavigationService.getHeaderRowCount(),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:s,currentPosition:o,headerPosition:i,headerRowCount:r});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:s,event:n})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:i,currentPosition:s,headerPosition:n,headerRowCount:o}=e,r=t({backwards:"Before"===i,previousHeaderPosition:s,nextHeaderPosition:n,headerRowCount:o});return!0===r||null===r?(null===r&&F("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),s):!1===r?null:r}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:i,fromCell:s,rowWithoutSpanValue:n,event:o}=e,{column:r,headerRowIndex:a}=t;if(-1===a)return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView(r);this.headerNavigationService.scrollToColumn(r,i);const l=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()),c=l?.focusHeader(t.headerRowIndex,r,o)||!1;return c&&(null!=n||s)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(n??-1),c}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let e=this.visibleColsService.getAllCols()[0];if(!e)return!1;e.getParent()&&(e=this.visibleColsService.getColGroupAtLevel(e,0));const t=this.headerPositionUtils.getHeaderIndexToFocus(e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;const t=this.headerNavigationService.getHeaderRowCount()-1,i=ze(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:i},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(e,t){return null!=this.focusedCellPosition&&(this.focusedCellPosition.rowIndex===e&&this.focusedCellPosition.rowPinned===U(t))}findFocusableElements(e,t){let i=$i;t&&(i+=", "+t),arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(i+=', [tabindex="-1"]');const s=Array.prototype.slice.apply(e.querySelectorAll("[tabindex], input, select, button, textarea, [href]")).filter((e=>us(e))),n=Array.prototype.slice.apply(e.querySelectorAll(i));if(!n.length)return s;return o=n,s.filter((e=>-1===o.indexOf(e)));var o}focusInto(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.findFocusableElements(e,null,i),n=t?ze(s):s[0];return!!n&&(n.focus({preventScroll:!0}),!0)}findFocusableElementBeforeTabGuard(e,t){if(!t)return null;const i=this.findFocusableElements(e),s=i.indexOf(t);if(-1===s)return null;let n=-1;for(let o=s-1;o>=0;o--)if(i[o].classList.contains("ag-tab-guard-top")){n=o;break}return n<=0?null:i[n-1]}findNextFocusableElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.eGridDiv,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const s=this.findFocusableElements(e,t?':not([tabindex="-1"])':null),n=fe(this.gos);let o;o=t?s.findIndex((e=>e.contains(n))):s.indexOf(n);const r=o+(i?-1:1);return r<0||r>=s.length?null:s[r]}isTargetUnderManagedComponent(e,t){if(!t)return!1;const i=e.querySelectorAll(`.${qn.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let s=0;s<i.length;s++)if(i[s].contains(t))return!0;return!1}findTabbableParent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=0;for(;e&&null===Yi(e)&&++i<=t;)e=e.parentElement;return null===Yi(e)?null:e}focusOverlay(e){const t=this.overlayService.isVisible()&&this.overlayService.getOverlayWrapper()?.getGui();return!!t&&this.focusInto(t,e)}focusGridViewFailed(e,t){return t&&this.focusOverlay(e)||e&&this.focusLastHeader()}focusGridView(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.overlayService.isExclusive())return i&&this.focusOverlay(t);if(this.isCellFocusSuppressed())return t&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():!(!i||!this.focusOverlay(t))||this.focusNextGridCoreContainer(!1);const s=t?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(s){const{rowIndex:i,rowPinned:n}=s;if(e??(e=this.getFocusedHeader()?.column),e&&void 0!==i&&null!==i){if(this.navigationService.ensureCellVisible({rowIndex:i,column:e,rowPinned:n}),t){const e=this.rowRenderer.getRowByPosition(s);if(e?.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(s,t))return!0}return this.setFocusedCell({rowIndex:i,column:e,rowPinned:U(n),forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:i,rowPinned:n,column:e}),!0}}return!(!i||!this.focusOverlay(t))||!(!t||!this.focusLastHeader())}isGridFocused(){const e=fe(this.gos);return!!e&&this.eGridDiv.contains(e)}focusNextGridCoreContainer(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(t||!this.gridCtrl.focusNextInnerContainer(e))||((t||!e&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(e),!1)}focusAdvancedFilter(e){return this.advancedFilterFocusColumn=e?.column,this.advancedFilterService?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){const i=(t?void 0:this.advancedFilterFocusColumn)??this.visibleColsService.getAllCols()?.[0];return e?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(i)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(e){this.gridCtrl.addFocusableContainer(e)}removeFocusableContainer(e){this.gridCtrl.removeFocusableContainer(e)}focusGridInnerElement(e){return this.gridCtrl.focusInnerElement(e)}allowFocusForNextGridCoreContainer(e){this.gridCtrl.allowFocusForNextCoreContainer(e)}};_l.keyboardModeActive=!1,_l.instanceCount=0;var Yl=_l,Kl=class extends tt{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=ne(this.gos,"print"),t=e?0:this.visibleColsService.getColsLeftWidth(),i=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},Zl=class extends tt{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDropService:s,mouseEventService:n,ctrlsService:o,resizeObserverService:r}=this.beans,a={getContainer:()=>this.eGui,isInterestedIn:e=>1===e||0===e,getIconName:()=>"notAllowed"};s.addDropTarget(a),this.addDestroyFunc((()=>s.removeDropTarget(a))),n.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new Ar(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});const l=r.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc((()=>l())),o.register("gridCtrl",this)}isDetailGrid(){const e=this.focusService.findTabbableParent(this.getGui());return e?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){const e=this.beans;return{paginationSelector:e.paginationService?.getPaginationSelector(),gridHeaderDropZonesSelector:e.columnDropZonesService?.getDropZoneSelector(),sideBarSelector:e.sideBarService?.getSideBarSelector(),statusBarSelector:e.statusBarService?.getStatusPanelSelector(),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:s}=this.getNextFocusableIndex(t,e);if(s<0||s>=t.length)return!1;if(0===s){if(i>0){const e=ze(this.visibleColsService.getAllCols());if(this.focusService.focusGridView(e,!0))return!0}return!1}return this.focusContainer(t[s],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),s=this.visibleColsService.getAllCols();if(e){if(i.length>1)return this.focusContainer(ze(i),!0);const e=ze(s);if(this.focusService.focusGridView(e,!0))return!0}if(0===this.gos.get("headerHeight")||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(s[0]))return!0;for(let e=1;e<i.length;e++)if(this.focusService.focusInto(i[e].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:s}=this.getNextFocusableIndex(t,e);if(-1===s||i<0||i>=t.length)return;const n=t[i];n.setAllowFocus?.(!0),setTimeout((()=>{n.setAllowFocus?.(!1)}))}getNextFocusableIndex(e,t){const i=fe(this.gos),s=e.findIndex((e=>e.getGui().contains(i)));return{indexWithFocus:s,nextIndex:s+(t?-1:1)}}focusContainer(e,t){e.setAllowFocus?.(!0);const i=this.focusService.focusInto(e.getGui(),t);return e.setAllowFocus?.(!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){const e=this.beans.environment.getGridThemeClass();e&&this.view.setGridThemeClass(e)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},$l={version:_o,moduleName:"@ag-grid-community/aligned-grid",beans:[class extends tt{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t="function"===typeof e;"function"===typeof e&&(e=e());const i=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map((e=>{if(!e)return O("alignedGrids contains an undefined option."),t||O('You may want to configure via a callback to avoid setup race conditions:\n                     "alignedGrids: () => [linkedGrid]"'),void O(i());if(this.isGridApi(e))return e;const s=e;return"current"in s?s.current?.api:(s.api||O(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${i()}`),s.api)})).filter((e=>!!e&&!e.isDestroyed()))}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:e=>{let{event:t}=e;return this.onColumnEvent(t)},alignedGridScroll:e=>{let{event:t}=e;return this.onScrollEvent(t)}})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach((t=>{t.isDestroyed()||t.dispatchEvent(e)}))}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){"horizontal"===e.direction&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent((()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)}))}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach((e=>{i.push(t(e))})):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,(e=>e))}getColumnIds(e){return this.extractDataFromEvent(e,(e=>e.getColId()))}onColumnEvent(e){this.onEvent((()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":this.processColumnEvent(e);break;case"columnGroupOpened":this.processGroupOpenedEvent(e);break;case"columnPivotChanged":F("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}}))}processGroupOpenedEvent(e){const{columnModel:t}=this;e.columnGroups.forEach((e=>{let i=null;e&&(i=t.getProvidedColGroup(e.getGroupId())),e&&!i||t.setColumnGroupOpened(i,e.isExpanded(),"alignedGridChanged")}))}processColumnEvent(e){const t=e.column;let i=null;if(t&&(i=this.columnModel.getColDefCol(t.getColId())),t&&!i)return;const s=this.getMasterColumns(e),{columnApplyStateService:n,columnSizeService:o,ctrlsService:r}=this;switch(e.type){case"columnMoved":{const t=e.api.getColumnState().map((e=>({colId:e.colId})));n.applyColumnState({state:t,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const t=e.api.getColumnState().map((e=>({colId:e.colId,hide:e.hide})));n.applyColumnState({state:t},"alignedGridChanged")}break;case"columnPinned":{const t=e.api.getColumnState().map((e=>({colId:e.colId,pinned:e.pinned})));n.applyColumnState({state:t},"alignedGridChanged")}break;case"columnResized":{const t=e,i={};s.forEach((e=>{i[e.getId()]={key:e.getColId(),newWidth:e.getActualWidth()}})),t.flexColumns?.forEach((e=>{i[e.getId()]&&delete i[e.getId()]})),o.setColumnWidths(Object.values(i),!1,t.finished,"alignedGridChanged");break}}const a=r.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach((e=>{e.setGridOption("alwaysShowVerticalScroll",a)}))}}]};var Ql={version:_o,moduleName:"@ag-grid-community/data-type",beans:[class extends tt{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService,this.filterManager=e.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",(()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")})),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",(e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(Tt(e.source))}))}processDataTypeDefinitions(){const e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};const t=e=>t=>{const{column:i,node:s,value:n}=t;let o=i.getColDef().valueFormatter;return o===e.groupSafeValueFormatter&&(o=e.valueFormatter),this.valueService.formatValue(i,s,n,o)};Object.entries(e).forEach((e=>{let[i,s]=e;const n={...s,groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)};this.dataTypeDefinitions[i]=n,this.formatValueFuncs[i]=t(n)}));const i=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(i).forEach((s=>{let[n,o]=s;const r=this.processDataTypeDefinition(o,i,[n],e);r&&(this.dataTypeDefinitions[n]=r,o.dataTypeMatcher&&(this.dataTypeMatchers[n]=o.dataTypeMatcher),this.formatValueFuncs[n]=t(r))})),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach((t=>{const i=this.dataTypeMatchers[t];i&&delete this.dataTypeMatchers[t],this.dataTypeMatchers[t]=i??e[t].dataTypeMatcher}))}mergeDataTypeDefinitions(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...ut(e.columnTypes),...ut(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,s){let n;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let i=s[o];const r=t[o];if(i&&r&&(i=r),!this.validateDataTypeDefinition(e,i,o))return;n=this.mergeDataTypeDefinitions(i,e)}else{if(i.includes(o))return void F('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');const r=t[o];if(!this.validateDataTypeDefinition(e,r,o))return;const a=this.processDataTypeDefinition(r,t,[...i,o],s);if(!a)return;n=this.mergeDataTypeDefinitions(a,e)}return{...n,groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)}}validateDataTypeDefinition(e,t,i){return t?t.baseDataType===e.baseDataType||(F('The "baseDataType" property of a data type definition must match that of its parent.'),!1):(F(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{if(t.node?.group){const i=(t.colDef.pivotValueColumn??t.column).getAggFunc();if(i){if("first"===i||"last"===i)return e.valueFormatter(t);if("number"===e.baseDataType&&"count"!==i){if("number"===typeof t.value)return e.valueFormatter(t);if("object"===typeof t.value){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter({...t,value:t.value.toNumber()});if("value"in t.value)return e.valueFormatter({...t,value:t.value.value})}}return}if((this.gos.get("suppressGroupMaintainValueType")||"groupRows"===this.gos.get("groupDisplayType"))&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()&&"string"===typeof t.value&&!e.dataTypeMatcher?.(t.value))return;return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:s}=t;const{field:n}=t;if(void 0===s&&(s=e.cellDataType),null!=s&&!0!==s||(s=!!this.canInferCellDataType(e,t)&&this.inferCellDataType(n,i)),!s)return void(e.cellDataType=!1);const o=this.dataTypeDefinitions[s];if(o)return e.cellDataType=s,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,s,o,i),o.columnTypes;F(`Missing data type definition - "${s}"`)}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=e=>{t.add(e.key)};e.addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push((()=>e.removeEventListener("columnStateUpdated",i)))}canInferCellDataType(e,t){if(!ie(this.gos))return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,i))return!1;const s=null===t.type?e.type:t.type;if(s){const e=this.gos.get("columnTypes")??{};if(ut(s).some((t=>{const s=e[t.trim()];return s&&this.doColDefPropsPreventInference(s,i)})))return!1}return!this.doColDefPropsPreventInference(e,i)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some((i=>{let[s,n]=i;return this.doesColDefPropPreventInference(e,t,s,n)}))}doesColDefPropPreventInference(e,t,i,s){if(!t[i])return!1;const n=e[i];return null===n?(t[i]=!1,!1):void 0===s?!!n:n===s}inferCellDataType(e,t){if(!e)return;let i;const s=this.getInitialData();if(s){const t=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=bt(s,e,t)}else this.initWaitForRowData(t);if(null==i)return;const[n]=Object.entries(this.dataTypeMatchers).find((e=>{let[t,s]=e;return s(i)}))??["object"];return n}getInitialData(){const e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const e=this.rowModel.getRootNode().allLeafChildren;if(e?.length)return e[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const[i]=this.addManagedEventListeners({rowDataUpdateStarted:e=>{const{firstRowData:s}=e;s&&(i?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const s={},n={};Object.entries(this.columnStateUpdatesPendingInference).forEach((e=>{let[o,r]=e;const a=this.columnModel.getCol(o);if(!a)return;const l=a.getColDef();if(!this.columnModel.resetColDefIntoCol(a,"cellDataTypeInferred"))return;const c=a.getColDef();if(t&&c.type&&c.type!==l.type){const e=this.getUpdatedColumnState(a,r);e.rowGroup&&null==e.rowGroupIndex&&(s[o]=e),e.pivot&&null==e.pivotIndex&&(n[o]=e),i.push(e)}})),t&&i.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(s,n)),i.length&&this.columnApplyStateService.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const i=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach((e=>{delete i[e],"rowGroup"===e?delete i.rowGroupIndex:"pivot"===e&&delete i.pivotIndex})),i}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(null==t)return!0;const i=this.getDataTypeDefinition(e)?.dataTypeMatcher;return!i||i(t)}validateColDef(e){const t=e=>F(`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`);"object"===e.cellDataType&&(e.valueFormatter!==this.dataTypeDefinitions.object.groupSafeValueFormatter||this.hasObjectValueFormatter||t("Formatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&t("Parser"))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,i,s){const n=this.formatValueFuncs[t];switch(i.baseDataType){case"number":e.cellEditor="agNumberCellEditor";break;case"boolean":e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=e=>!!e.colDef.editable&&e.event.key===js.SPACE;break;case"date":e.cellEditor="agDateCellEditor",e.keyCreator=n;break;case"dateString":e.cellEditor="agDateStringCellEditor",e.keyCreator=n;break;case"object":e.cellEditorParams={useFormatter:!0},e.comparator=(e,t)=>{const i=this.columnModel.getColDefCol(s),o=i?.getColDef();if(!i||!o)return 0;const r=null==e?"":n({column:i,node:null,value:e}),a=null==t?"":n({column:i,node:null,value:t});return r===a?0:r>a?1:-1},e.keyCreator=n}this.filterManager?.setColDefPropertiesForDataType(e,i,n)}getDefaultDataTypes(){const e=e=>!!e.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>""===e.newValue?.trim?.()?null:Number(e.newValue),valueFormatter:e=>null==e.value?"":"number"!==typeof e.value||isNaN(e.value)?t("invalidNumber","Invalid Number"):String(e.value),dataTypeMatcher:e=>"number"===typeof e},text:{baseDataType:"text",valueParser:e=>""===e.newValue?null:Z(e.newValue),dataTypeMatcher:e=>"string"===typeof e},boolean:{baseDataType:"boolean",valueParser:e=>null==e.newValue?e.newValue:""===e.newValue?.trim?.()?null:"true"===String(e.newValue).toLowerCase(),valueFormatter:e=>null==e.value?"":String(e.value),dataTypeMatcher:e=>"boolean"===typeof e},date:{baseDataType:"date",valueParser:e=>To(null==e.newValue?null:String(e.newValue)),valueFormatter:e=>null==e.value?"":e.value instanceof Date&&!isNaN(e.value.getTime())?Ao(e.value,!1)??"":t("invalidDate","Invalid Date"),dataTypeMatcher:e=>e instanceof Date},dateString:{baseDataType:"dateString",dateParser:e=>To(e)??void 0,dateFormatter:e=>Ao(e??null,!1)??void 0,valueParser:t=>e(String(t.newValue))?t.newValue:null,valueFormatter:t=>e(String(t.value))?t.value:"",dataTypeMatcher:t=>"string"===typeof t&&e(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>Z(e.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach((e=>e())),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}}]};function Xl(e,t){const{colKey:i,rowNode:s,useFormatter:n}=t,o=e.columnModel.getColDefCol(i)??e.columnModel.getCol(i);if(Y(o))return null;const r=e.valueService.getValueForDisplay(o,s);if(n){return e.valueService.formatValue(o,s,r)??Ut(r,!0)}return r}function ql(e,t){e.gos.updateGridOptions({options:t})}function Jl(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function ec(e){return e.rowRenderer.getLastVirtualRenderedRow()}var tc={version:_o,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.redrawRows(i)))},setRowNodeExpanded:function(e,t,i,s,n){e.expansionService.setRowNodeExpanded(t,i,s,n)},getRowNode:function(e,t){return e.rowModel.getRowNode(t)},addRenderedRowListener:function(e,t,i,s){e.rowRenderer.addRenderedRowListener(t,i,s)},getRenderedNodes:function(e){return e.rowRenderer.getRenderedNodes()},forEachNode:function(e,t,i){e.rowModel.forEachNode(t,i)},getFirstDisplayedRow:function(e){return Jl(e)},getFirstDisplayedRowIndex:Jl,getLastDisplayedRow:function(e){return ec(e)},getLastDisplayedRowIndex:ec,getDisplayedRowAtIndex:function(e,t){return e.rowModel.getRow(t)},getDisplayedRowCount:function(e){return e.rowModel.getRowCount()},getModel:function(e){return e.rowModel}}},ic={version:_o,moduleName:"@ag-grid-community/api",dependantModules:[{version:_o,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:function(e){return e.context.getGridId()},destroy:function(e){e.gridDestroyService.destroy()},isDestroyed:function(e){return e.gridDestroyService.isDestroyCalled()},getGridOption:function(e,t){return e.gos.get(t)},setGridOption:function(e,t,i){ql(e,{[t]:i})},updateGridOptions:ql}},{version:_o,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:function(e){return e.pinnedRowModel.getPinnedTopRowCount()},getPinnedBottomRowCount:function(e){return e.pinnedRowModel.getPinnedBottomRowCount()},getPinnedTopRow:function(e,t){return e.pinnedRowModel.getPinnedTopRow(t)},getPinnedBottomRow:function(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}}},{version:_o,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:function(e,t){if(!t.nodes.every((e=>e.rowPinned?(F("cannot select pinned rows"),!1):void 0!==e.id||(F("cannot select node until id for node is known"),!1))))return;const{nodes:i,source:s,newValue:n}=t,o=i;e.selectionService.setNodesSelected({nodes:o,source:s??"api",newValue:n})},selectAll:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAll";e.selectionService.selectAllRowNodes({source:t})},deselectAll:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAll";e.selectionService.deselectAllRowNodes({source:t})},selectAllFiltered:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllFiltered";e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})},deselectAllFiltered:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllFiltered";e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})},selectAllOnCurrentPage:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllCurrentPage";e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})},deselectAllOnCurrentPage:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllCurrentPage";e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})},getSelectedNodes:function(e){return e.selectionService.getSelectedNodes()},getSelectedRows:function(e){return e.selectionService.getSelectedRows()}}},{version:_o,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:function(e,t){const i=e.columnModel.getColDefCol(t);return i?i.getColDef():null},getColumnDefs:function(e){return e.columnModel.getColumnDefs()},sizeColumnsToFit:function(e,t){"number"===typeof t?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)},setColumnGroupOpened:function(e,t,i){e.columnModel.setColumnGroupOpened(t,i,"api")},getColumnGroup:function(e,t,i){return e.visibleColsService.getColumnGroup(t,i)},getProvidedColumnGroup:function(e,t){return e.columnModel.getProvidedColGroup(t)},getDisplayNameForColumn:function(e,t,i){return e.columnNameService.getDisplayNameForColumn(t,i)||""},getDisplayNameForColumnGroup:function(e,t,i){return e.columnNameService.getDisplayNameForColumnGroup(t,i)||""},getColumn:function(e,t){return e.columnModel.getColDefCol(t)},getColumns:function(e){return e.columnModel.getColDefCols()},applyColumnState:function(e,t){return e.columnApplyStateService.applyColumnState(t,"api")},getColumnState:function(e){return e.columnGetStateService.getColumnState()},resetColumnState:function(e){e.columnApplyStateService.resetColumnState("api")},getColumnGroupState:function(e){return e.columnGroupStateService.getColumnGroupState()},setColumnGroupState:function(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")},resetColumnGroupState:function(e){e.columnGroupStateService.resetColumnGroupState("api")},isPinning:function(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()},isPinningLeft:function(e){return e.visibleColsService.isPinningLeft()},isPinningRight:function(e){return e.visibleColsService.isPinningRight()},getDisplayedColAfter:function(e,t){return e.visibleColsService.getColAfter(t)},getDisplayedColBefore:function(e,t){return e.visibleColsService.getColBefore(t)},setColumnVisible:function(e,t,i){e.columnModel.setColsVisible([t],i,"api")},setColumnsVisible:function(e,t,i){e.columnModel.setColsVisible(t,i,"api")},setColumnPinned:function(e,t,i){e.columnModel.setColsPinned([t],i,"api")},setColumnsPinned:function(e,t,i){e.columnModel.setColsPinned(t,i,"api")},getAllGridColumns:function(e){return e.columnModel.getCols()},getDisplayedLeftColumns:function(e){return e.visibleColsService.getLeftCols()},getDisplayedCenterColumns:function(e){return e.visibleColsService.getCenterCols()},getDisplayedRightColumns:function(e){return e.visibleColsService.getRightCols()},getAllDisplayedColumns:function(e){return e.visibleColsService.getAllCols()},getAllDisplayedVirtualColumns:function(e){return e.columnViewportService.getViewportColumns()},moveColumn:function(e,t,i){e.columnMoveService.moveColumns([t],i,"api")},moveColumnByIndex:function(e,t,i){e.columnMoveService.moveColumnByIndex(t,i,"api")},moveColumns:function(e,t,i){e.columnMoveService.moveColumns(t,i,"api")},setColumnWidth:function(e,t,i){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"api";e.columnSizeService.setColumnWidths([{key:t,newWidth:i}],!1,s,n)},setColumnWidths:function(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"api";e.columnSizeService.setColumnWidths(t,!1,i,s)},getLeftDisplayedColumnGroups:function(e){return e.visibleColsService.getTreeLeft()},getCenterDisplayedColumnGroups:function(e){return e.visibleColsService.getTreeCenter()},getRightDisplayedColumnGroups:function(e){return e.visibleColsService.getTreeRight()},getAllDisplayedColumnGroups:function(e){return e.visibleColsService.getAllTrees()},autoSizeColumn:function(e,t,i){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:i,source:"api"})},autoSizeColumns:function(e,t,i){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})},autoSizeAllColumns:function(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}}},tc,{version:_o,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:function(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)},removeRowDropZone:function(e,t){const i=e.dragAndDropService.findExternalZone(t);i&&e.dragAndDropService.removeDropTarget(i)},getRowDropZoneParams:function(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}}},{version:_o,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:function(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()},getHorizontalPixelRange:function(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()},ensureColumnVisible:Ua,ensureIndexVisible:_a,ensureNodeVisible:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,i)),"ensureVisible")}}},{version:_o,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:function(e){e.overlayService.showLoadingOverlay()},showNoRowsOverlay:function(e){e.overlayService.showNoRowsOverlay()},hideOverlay:function(e){e.overlayService.hideOverlay()}}},{version:_o,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:function(e){return e.focusService.getFocusedCell()},clearFocusedCell:function(e){return e.focusService.clearFocusedCell()},setFocusedCell:function(e,t,i,s){e.focusService.setFocusedCell({rowIndex:t,column:i,rowPinned:s,forceBrowserFocus:!0})},setFocusedHeader:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=e.headerNavigationService.getHeaderPositionForColumn(t,i);s&&e.focusService.focusHeaderPosition({headerPosition:s})},tabToNextCell:function(e,t){return e.navigationService.tabToNextCell(!1,t)},tabToPreviousCell:function(e,t){return e.navigationService.tabToNextCell(!0,t)}}},{version:_o,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:function(e,t,i){e.apiEventService.addEventListener(t,i)},addGlobalListener:function(e,t){e.apiEventService.addGlobalListener(t)},removeEventListener:function(e,t,i){e.apiEventService.removeEventListener(t,i)},removeGlobalListener:function(e,t){e.apiEventService.removeGlobalListener(t)}}},{version:_o,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:function(e,t,i){if(!t)return;const s=e.ctrlsService.getGridBodyCtrl().getGui(),n=`aria-${t}`;null===i?s.removeAttribute(n):s.setAttribute(n,i)},refreshCells:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.refreshCells(t)))},flashCells:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e=>F(`Since v31.1 api.flashCells parameter '${e}Delay' is deprecated. Please use '${e}Duration' instead.`);_(t.fadeDelay)&&i("fade"),_(t.flashDelay)&&i("flash"),e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.flashCells(t)))},refreshHeader:function(e){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach((e=>e.refresh()))))},isAnimationFrameQueueEmpty:function(e){return e.animationFrameService.isQueueEmpty()},flushAllAnimationFrames:function(e){e.animationFrameService.flushAllFrames()},getSizesForCurrentTheme:function(e){return{rowHeight:ce(e.gos),headerHeight:e.columnModel.getHeaderHeight()}},getCellRendererInstances:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.rowRenderer.getCellRendererInstances(t).map(An)}}},{version:_o,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:function(e){e.valueCache.expire()},getValue:function(e,t,i){return Xl(e,{colKey:t,rowNode:i})},getCellValue:Xl}},{version:_o,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:function(e,t,i){const s=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:s,buttonElement:i,positionBy:"button"})},showColumnMenuAfterMouseClick:function(e,t,i){let s=e.columnModel.getCol(t);s||(s=e.columnModel.getColDefCol(t)),s?e.menuService.showColumnMenu({column:s,mouseEvent:i,positionBy:"mouse"}):O(`column '${t}' not found`)},showColumnMenu:function(e,t){const i=e.columnModel.getCol(t);i?e.menuService.showColumnMenu({column:i,positionBy:"auto"}):O(`column '${t}' not found`)},hidePopupMenu:function(e){e.menuService.hidePopupMenu()}}},{version:_o,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:function(e){e.sortController.onSortChanged("api")}}}]};function sc(e){if((e={...e}).version||(e.version="32.1.0"),"32.1.0"===e.version)e=function(e){return e.cellSelection=function(e,t){if(e&&"object"===typeof e)return e[t]}(e,"rangeSelection"),e}(e);return e}var nc={version:_o,moduleName:"@ag-grid-community/state-core",beans:[class extends tt{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=j((()=>this.dispatchQueuedStateUpdateEvents()),0),this.onRowGroupOpenedDebounced=j((()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),0),this.onRowSelectedDebounced=j((()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())}),0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=ie(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",_o),this.ctrlsService.whenReady(this,(()=>this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnGridReady()))));const[e,t,i]=this.addManagedEventListeners({newColumnsLoaded:t=>{let{source:i}=t;"gridInitializing"===i&&(e(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnColumnsInitialised())))},rowCountReady:()=>{t?.(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnRowCountReady()))},firstDataRendered:()=>{i?.(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnFirstDataRendered()))}})}getInitialState(){return sc(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());const e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const t=e=>()=>this.updateColumnState([e]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:t,rowSelection:i,pagination:s}=this.getInitialState(),n=this.gos.get("advancedFilterModel");(e||n)&&this.setFilterState(e,n),t&&this.setRowGroupExpansionState(t),i&&this.setRowSelectionState(i),s&&this.setPaginationState(s),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());const o=()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:o,columnRowGroupChanged:o,rowDataUpdated:()=>{0!==this.gos.get("groupDefaultExpanded")&&setTimeout((()=>{o()}))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:e=>{(e.newPage||e.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,cellSelection:t,focusedCell:i,columnOrder:s}=this.getInitialState();i&&this.setFocusedCellState(i),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!s?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());const n=this.getRangeSelectionState();this.updateCachedState("rangeSelection",n),this.updateCachedState("cellSelection",n),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),cellSelectionChanged:e=>{if(e.finished){const e=this.getRangeSelectionState();this.updateCachedState("rangeSelection",e),this.updateCachedState("cellSelection",e)}},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],i=[],s=[],n=[],o=[],r=[],a=[],l=[],c=[];let h=0;const d=this.columnGetStateService.getColumnState();for(let u=0;u<d.length;u++){const{colId:e,sort:p,sortIndex:g,rowGroup:m,rowGroupIndex:f,aggFunc:y,pivot:v,pivotIndex:C,pinned:b,hide:w,width:S,flex:x}=d[u];c.push(e),p&&(t[g??h++]={colId:e,sort:p}),m&&(i[f??0]=e),"string"===typeof y&&s.push({colId:e,aggFunc:y}),v&&(n[C??0]=e),b&&("right"===b?r:o).push(e),w&&a.push(e),(x||S)&&l.push({colId:e,flex:x??void 0,width:S})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:n.length||e?{pivotMode:e,pivotColIds:n}:void 0,columnPinning:o.length||r.length?{leftColIds:o,rightColIds:r}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:s,pivot:n,columnPinning:o,columnVisibility:r,columnSizing:a,columnOrder:l,partialColumnState:c}=e,h={},d=e=>{let t=h[e];return t||(t={colId:e},h[e]=t,t)},u=c?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(((e,t)=>{let{colId:i,sort:s}=e;const n=d(i);n.sort=s,n.sortIndex=t})),u.sort=null,u.sortIndex=null),i&&(i.groupColIds.forEach(((e,t)=>{const i=d(e);i.rowGroup=!0,i.rowGroupIndex=t})),u.rowGroup=null,u.rowGroupIndex=null),s&&(s.aggregationModel.forEach((e=>{let{colId:t,aggFunc:i}=e;d(t).aggFunc=i})),u.aggFunc=null),n&&(n.pivotColIds.forEach(((e,t)=>{const i=d(e);i.pivot=!0,i.pivotIndex=t})),this.gos.updateGridOptions({options:{pivotMode:n.pivotMode},source:"gridInitializing"}),u.pivot=null,u.pivotIndex=null),o&&(o.leftColIds.forEach((e=>{d(e).pinned="left"})),o.rightColIds.forEach((e=>{d(e).pinned="right"})),u.pinned=null),r&&(r.hiddenColIds.forEach((e=>{d(e).hide=!0})),u.hide=null),a&&(a.columnSizingModel.forEach((e=>{let{colId:t,flex:i,width:s}=e;const n=d(t);n.flex=i??null,n.width=s})),u.flex=null);const p=l?.orderedColIds,g=!!p?.length,m=g?p.map((e=>d(e))):Object.values(h);m.length&&(this.columnStates=m,this.columnApplyStateService.applyColumnState({state:m,applyOrder:g,defaultState:u},"gridInitializing"))}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;if(this.columnGroupStates=void 0,this.pivotResultColsService.isPivotResultColsPresent()){if(t){const i=[];for(const e of t)this.pivotResultColsService.getPivotResultCol(e.colId)&&i.push(e);this.columnApplyStateService.applyColumnState({state:i,applyOrder:e},"gridInitializing")}i&&this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach((e=>{let{groupId:i,open:s}=e;s&&t.push(i)})),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const t=new Set(e.columnGroup?.openColumnGroupIds),i=this.columnGroupStateService.getColumnGroupState().map((e=>{let{groupId:i}=e;const s=t.has(i);return s&&t.delete(i),{groupId:i,open:s}}));t.forEach((e=>{i.push({groupId:e,open:!0})})),i.length&&(this.columnGroupStates=i),this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}getFilterState(){let e=this.filterManager?.getFilterModel();e&&0===Object.keys(e).length&&(e=void 0);const t=this.filterManager?.getAdvancedFilterModel()??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){const{filterModel:i,advancedFilterModel:s}=e??{advancedFilterModel:t};i&&this.filterManager?.setFilterModel(i,"columnFilter"),s&&this.filterManager?.setAdvancedFilterModel(s)}getRangeSelectionState(){const e=this.rangeService?.getCellRanges().map((e=>{const{id:t,type:i,startRow:s,endRow:n,columns:o,startColumn:r}=e;return{id:t,type:i,startRow:s,endRow:n,colIds:o.map((e=>e.getColId())),startColId:r.getColId()}}));return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeService:i,columnModel:s,visibleColsService:n}=this;if(!Ae(t)||!i)return;const o=[];if(e.cellRanges.forEach((e=>{const t=[];if(e.colIds.forEach((e=>{const i=s.getCol(e);i&&t.push(i)})),!t.length)return;let i=s.getCol(e.startColId);if(!i){const e=n.getAllCols(),s=new Set(t);i=e.find((e=>s.has(e)))}o.push({...e,columns:t,startColumn:i})})),function(e){return void 0!==e.get("cellSelection")}(t)&&function(e){const t=e.get("cellSelection");return void 0!==t?"boolean"!==typeof t&&(t?.suppressMultiRanges??!1):e.get("suppressMultiRangeSelection")}(t)&&o.length>1)return F("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");i.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.ctrlsService.getGridBodyCtrl()?.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:i}=e?.getVScrollPosition()??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:i}=e;this.ctrlsService.getGridBodyCtrl()?.getScrollFeature().setScrollPosition(t,i)}getSideBarState(){return this.sideBarService?.getSideBarComp()?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:s}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:s}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:s}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;const e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();return e||t?{page:e,pageSize:t}:void 0}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),"number"===typeof e.page&&this.paginationService.setPage(e.page))}getRowSelectionState(){const e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(!1===e.selectAll||!1===e.selectAllChildren)&&!e?.toggledNodes?.length?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;Object.entries(t).forEach((e=>{let[t,s]=e;q(s,this.cachedState[t])||(i=!0)})),this.cachedState={...this.cachedState,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),q(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){this.staleStateKeys.forEach((e=>{if("rowSelection"===e)this.setCachedStateValue(e,this.getRowSelectionState())})),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach((e=>this.queuedUpdateSources.add(e))),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout((()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))}))}}]},oc={version:_o,moduleName:"@ag-grid-community/state",dependantModules:[nc,{version:_o,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:function(e){return e.stateService?.getState()??{}}},dependantModules:[nc]}]};var rc="paginationPageSizeSelector",ac={selector:"AG-PAGE-SIZE-SELECTOR",component:class extends Rs{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener(rc,(()=>{this.onPageSizeSelectorValuesChange()})),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;const t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){cs(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&!1!==this.gos.get(rc)}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),i=!t||!e.includes(t);if(i){const i=this.gos.exists("paginationPageSize"),s=!0!==this.gos.get(rc);F(`'paginationPageSize=${t}'${i?"":" (default value)"}, but ${t} is not included in${s?"":" the default"} paginationPageSizeSelector=[${e.join(", ")}].`),s||F(`Either set '${rc}' to an array that includes ${t} or to 'false' to disable the page size selector.`),e.unshift("")}const s=String(i?"":t);this.selectPageSizeComp?(He(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(s,!0)):this.createPageSizeSelectorComp(e,s),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map((e=>({value:String(e)})))}createPageSizeSelectorComp(e,t){const i=this.localeService.getLocaleTextFunc(),s=i("pageSizeSelectorLabel","Page Size:"),n=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new ro).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(n).setLabel(s).onValueChange((()=>this.handlePageSizeItemSelected())),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(rc);return!Array.isArray(t)||K(t)?e:[...t].sort(((e,t)=>e-t))}destroy(){this.toggleSelectDisplay(!1),super.destroy()}}},lc={selector:"AG-PAGINATION",component:class extends hl{constructor(){super(),this.btFirst=Is,this.btPrevious=Is,this.btNext=Is,this.btLast=Is,this.lbRecordCount=Is,this.lbFirstRowOnPage=Is,this.lbLastRowOnPage=Is,this.lbCurrent=Is,this.lbTotal=Is,this.pageSizeComp=Is,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService,this.ariaAnnouncementService=e.ariaAnnouncementService}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[ac]);const{btFirst:t,btPrevious:i,btNext:s,btLast:n}=this;this.activateTabIndex([t,i,s,n]),t.insertAdjacentElement("afterbegin",Ls(e?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",Ls(e?"next":"previous",this.gos)),s.insertAdjacentElement("afterbegin",Ls(e?"previous":"next",this.gos)),n.insertAdjacentElement("afterbegin",Ls(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],(()=>this.onPageSizeRelatedOptionsChange())),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(e):this.focusService.focusGridInnerElement(e)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){var e,t,i;this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach((e=>{const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:e=>{e.key!==js.ENTER&&e.key!==js.SPACE||(e.preventDefault(),i())}})})),e=this,t=this.getGui(),i=this.focusService,e.addManagedElementListeners(t,{keydown:e=>{if(!e.defaultPrevented&&e.key===js.TAB){const s=e.shiftKey;i.findNextFocusableElement(t,!1,s)||i.focusNextGridCoreContainer(s)&&e.preventDefault()}}}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t){return t({value:e})}const i=this.localeService.getLocaleTextFunc();return Eo(e,i("thousandSeparator",","),i("decimalSeparator","."))}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),s=e("of","of"),n=e("firstPage","First Page"),o=e("previousPage","Previous Page"),r=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">\n                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>\n                <span class="ag-paging-row-summary-panel">\n                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-${l}-to">${i}</span>\n                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-${l}-of">${s}</span>\n                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>\n                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>\n                    <span class="ag-paging-description">\n                        <span id="ag-${l}-start-page">${t}</span>\n                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-${l}-of-page">${s}</span>\n                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>\n                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>\n                </span>\n            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){const e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const s=this.isZeroPagesToDisplay(),n=e===i-1;this.nextButtonDisabled=n||s,this.lastButtonDisabled=!t||s||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){!function(e,t){wi(e,"disabled",t)}(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&0===t}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),i=this.paginationService.getMasterRowCount(),s=e?i:null;if(1===s){const e=this.rowModel.getRow(0);if(e&&e.group&&!(e.groupData||e.aggData))return void this.setTotalLabelsToZero()}const n=this.paginationService.getCurrentPage(),o=this.paginationService.getPageSize();let r,a;this.isZeroPagesToDisplay()?r=a=0:(r=o*n+1,a=r+o-1,e&&a>s&&(a=s));const l=!e&&i<r+o-1,c=this.formatNumber(r);let h;this.lbFirstRowOnPage.textContent=c;const d=this.localeService.getLocaleTextFunc();h=l?d("pageLastRowUnknown","?"):this.formatNumber(a),this.lbLastRowOnPage.textContent=h;const u=t>0?n+1:0,p=this.formatNumber(u);let g,m;if(this.lbCurrent.textContent=p,e)g=this.formatNumber(t),m=this.formatNumber(s);else{const e=d("more","more");g=e,m=e}this.lbTotal.textContent=g,this.lbRecordCount.textContent=m,this.announceAriaStatus(c,h,m,p,g)}announceAriaStatus(e,t,i,s,n){const o=this.localeService.getLocaleTextFunc(),r=o("page","Page"),a=o("to","to"),l=o("of","of"),c=`${e} ${a} ${t} ${l} ${i}`,h=`${r} ${s} ${l} ${n}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnouncementService.announceValue(c,"paginationRow")),h!==this.ariaPageStatus&&(this.ariaPageStatus=h,this.ariaAnnouncementService.announceValue(h,"paginationPage"))}setTotalLabelsToZero(){const e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}}},cc={version:_o,moduleName:"@ag-grid-community/pagination-core",beans:[class extends tt{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return lc}isPaginateChildRows(){return!(!this.gos.get("groupRemoveSingleChildren")&&!this.gos.get("groupRemoveLowestSingleChildren"))||this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){this.active&&this.currentPage!==e&&"number"===typeof this.currentPage&&(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){if(!this.active)return!0;return this.getPageForIndex(e.rowIndex)===this.currentPage}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return _(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:_(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:_(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:_(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(void 0===this.pageSizeAutoCalculated)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,0!==this.currentPage&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,0!==this.currentPage&&this.goToFirstPage()}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)return void this.setZeroRows();const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const e=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=e-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),0===this.masterRowCount)return void this.setZeroRows();const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:s=!1}=e;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:s,keepRenderedRows:t})}},class extends tt{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(this,(e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()}))}notActive(){return!this.gos.get("paginationAutoPageSize")||null==this.centerRowsCtrl}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const t=Math.max(ce(this.gos),1),i=Math.floor(e/t);this.paginationService.setPageSize(i,"autoCalculated")};this.isBodyRendered?j((()=>t()),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}}]},hc={version:_o,moduleName:"@ag-grid-community/pagination",dependantModules:[cc,{version:_o,moduleName:"@ag-grid-community/pagination-api",dependantModules:[cc],apiFunctions:{paginationIsLastPageFound:function(e){return e.rowModel.isLastRowIndexKnown()},paginationGetPageSize:function(e){return e.paginationService?.getPageSize()??100},paginationGetCurrentPage:function(e){return e.paginationService?.getCurrentPage()??0},paginationGetTotalPages:function(e){return e.paginationService?.getTotalPages()??1},paginationGetRowCount:function(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()},paginationGoToNextPage:function(e){e.paginationService?.goToNextPage()},paginationGoToPreviousPage:function(e){e.paginationService?.goToPreviousPage()},paginationGoToFirstPage:function(e){e.paginationService?.goToFirstPage()},paginationGoToLastPage:function(e){e.paginationService?.goToLastPage()},paginationGoToPage:function(e,t){e.paginationService?.goToPage(t)}}}]},dc="clientSide",uc="serverSide",pc="infinite",gc={onGroupExpandedOrCollapsed:[dc],refreshClientSideRowModel:[dc],isRowDataEmpty:[dc],forEachLeafNode:[dc],forEachNodeAfterFilter:[dc],forEachNodeAfterFilterAndSort:[dc],resetRowHeights:[dc],applyTransaction:[dc],applyTransactionAsync:[dc],flushAsyncTransactions:[dc],getBestCostNodeSelection:[dc],getServerSideSelectionState:[uc],setServerSideSelectionState:[uc],applyServerSideTransaction:[uc],applyServerSideTransactionAsync:[uc],applyServerSideRowData:[uc],retryServerSideLoads:[uc],flushServerSideAsyncTransactions:[uc],refreshServerSide:[uc],getServerSideGroupLevelState:[uc],refreshInfiniteCache:[pc],purgeInfiniteCache:[pc],getInfiniteRowCount:[pc],isLastRowIndexKnown:[pc,uc],expandAll:[dc,uc],collapseAll:[dc,uc],onRowHeightChanged:[dc,uc],setRowCount:[pc,uc],getCacheBlockState:[pc,uc]},mc={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}};var fc=(e,t)=>{const i=t.rowModelType??"clientSide";return"clientSide"===i||"serverSide"===i?{module:"@ag-grid-enterprise/row-grouping"}:null},yc={enableRowGroup:fc,rowGroup:fc,rowGroupIndex:fc,enablePivot:fc,enableValue:fc,pivot:fc,pivotIndex:fc,aggFunc:fc,cellEditor:e=>"agRichSelect"===e.cellEditor||"agRichSelectCellEditor"===e.cellEditor?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{const t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some((e=>t.includes(e)))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelection is only supported with rowSelection=multiple"}},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"}},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"}},children:()=>vc},vc={objectName:"colDef",allProperties:Object.keys({headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0}),docsUrl:"column-properties/",deprecations:{columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},validations:yc},Cc={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1};var bc={version:_o,moduleName:"@ag-grid-community/core"},wc={version:_o,moduleName:"@ag-grid-community/core-validations",beans:[class extends tt{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,{objectName:"gridOptions",allProperties:[...oi.ALL_PROPERTIES,...ai.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:{advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}},validations:{sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:e=>{const t=e.rowModelType??"clientSide";switch(t){case"clientSide":{const i=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:i}case"serverSide":{const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":{const t="groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll";return e.suppressServerSideInfiniteScroll?t:null}}return null}},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:e=>{const t=e.paginationPageSizeSelector;return"boolean"===typeof t||null==t||t.length?null:"'paginationPageSizeSelector' cannot be an empty array.\n                    If you want to hide the page size selector, set paginationPageSizeSelector to false."}},rowSelection:{validate(e){let{rowSelection:t}=e;return t&&"string"===typeof t?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':t&&"object"!==typeof t?"Expected `RowSelectionOptions` object for the `rowSelection` property.":null}},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:()=>vc,defaultColDef:()=>vc,defaultColGroupDef:()=>vc,autoGroupColumnDef:()=>vc,selectionColumnDef:()=>vc}})}validateApiFunction(e,t){return function(e,t,i){const s=mc[e];if(s){const{version:i,new:n,old:o,message:r}=s,a=o??e;return function(){F(`Since ${i} api.${a} is deprecated. ${n?`Please use ${n} instead. `:""}${r??""}`);for(var e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return t.apply(t,s)}}const n=gc[e];return n?function(){const s=i.rowModel.getType();if(n.includes(s)){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t.apply(t,r)}O(`api.${e} can only be called when gridOptions.rowModelType is ${n.join(" or ")}`)}:t}(e,t,this.beans)}processOptions(e,t){const{validations:i,deprecations:s,allProperties:n,propertyExceptions:o,objectName:r,docsUrl:a}=t;n&&!0!==this.gridOptions.suppressPropertyNamesCheck&&this.checkProperties(e,[...o??[],...Object.keys(s)],n,r,a);const l=new Set;Object.keys(e).forEach((t=>{const n=s[t];if(n)if("renamed"in n){const{renamed:i,version:s}=n;l.add(`As of v${s}, ${String(t)} is deprecated. Please use ${String(i)} instead.`),e[i]=e[t]}else{const{message:e,version:i}=n;l.add(`As of v${i}, ${String(t)} is deprecated. ${e??""}`)}const o=e[t];if(null==o||!1===o)return;const r=i[t];let a;if(!r)return;if("function"===typeof r){const i=r(e,this.gridOptions);if(!i)return;if("objectName"in i){const s=e[t];return Array.isArray(s)?void s.forEach((e=>{this.processOptions(e,i)})):void this.processOptions(e[t],i)}a=i}else a=r;const{module:c,dependencies:h,validate:d,supportedRowModels:u}=a;if(u){const e=this.gridOptions.rowModelType??"clientSide";if(!u.includes(e))return void l.add(`${String(t)} is not supported with the '${e}' row model.`)}if(c){const e=Array.isArray(c)?c:[c];let i=!0;if(e.forEach((e=>{this.gos.assertModuleRegistered(e,String(t))||(i=!1,l.add(`${String(t)} is only available when ${e} is loaded.`))})),!i)return}if(h){const i=this.checkForRequiredDependencies(t,h,e);if(i)return void l.add(i)}if(d){const t=d(e,this.gridOptions);if(t)return void l.add(t)}})),l.size>0&&l.forEach((e=>{F(e)}))}checkForRequiredDependencies(e,t,i){const s=Object.entries(t).find((e=>{let[t,s]=e;const n=i[t];return!s.includes(n)}));if(!s)return null;const[n,o]=s;return o.length>1?`'${String(e)}' requires '${n}' to be one of [${o.join(", ")}].`:`'${String(e)}' requires '${n}' to be ${o[0]}.`}checkProperties(e,t,i,s,n){const o=function(e,t,i){const s={},n=e.filter((e=>!t.some((t=>t===e))));n.length>0&&n.forEach((e=>s[e]=sn({inputValue:e,allSuggestions:i}).values));return s}(Object.getOwnPropertyNames(e),["__ob__","__v_skip","__metadata__",...t,...i],i);if(mt(o,((e,t)=>{let n=`invalid ${s} property '${e}' did you mean any of these: ${t.slice(0,8).join(", ")}.`;i.includes("context")&&(n+=`\nIf you are trying to annotate ${s} with application data, use the '${s}.context' property instead.`),F(n)})),Object.keys(o).length>0&&n){const e=this.getFrameworkOverrides().getDocLink(n);F(`to see all the valid ${s} properties please check: ${e}`)}}}]},Sc={version:_o,moduleName:"@ag-grid-community/core-community-features",dependantModules:[bc,wc,Qa,ar,oc,Ql,$l,hc,ic]},xc=class extends tt{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:this.beans.stateService?.getState()??{}}),this.destroyCalled=!0,this.beans.ctrlsService.get("gridCtrl")?.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},Mc=new Set(["gridPreDestroyed","fillStart","pasteStart"]),Dc=new Map([...oi.BOOLEAN_PROPERTIES.map((e=>[e,X])),...oi.NUMBER_PROPERTIES.map((e=>[e,Do])),["groupAggFiltering",e=>"function"===typeof e?e:X(e)],["pageSize",Io(1)],["autoSizePadding",Io(0)],["keepDetailRowsCount",Io(1)],["rowBuffer",Io(0)],["infiniteInitialRowCount",Io(1)],["cacheOverflowSize",Io(1)],["cacheBlockSize",Io(1)],["serverSideInitialRowCount",Io(1)],["viewportRowModelPageSize",Io(1)],["viewportRowModelBufferSize",Io(0)]]);function Ic(e,t){const i=Dc.get(e);return i?i(t):t}var Rc=class e extends tt{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new L,this.globalEventHandlerFactory=e=>(t,i)=>{if(!this.isAlive())return;const s=Mc.has(t);if(s&&!e||!s&&e)return;const n=ai.getCallbackForEvent(t),o=this.gridOptions[n];"function"===typeof o&&this.frameworkOverrides.wrapOutgoing((()=>{o(i)}))}}wireBeans(e){this.gridOptions=e.gridOptions,this.eGridDiv=e.eGridDiv,this.validationService=e.validationService,this.environment=e.environment,this.api=e.gridApi,this.gridId=e.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){const e=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),e),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:e=>{let{options:t}=e;this.updateGridOptions({options:t,force:!0,source:"gridOptionsUpdated"})}})}get(e){return this.gridOptions[e]??Cc[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return _(this.gridOptions[e])}mergeGridCommonParams(e){if(e){return t=>{const i=t;return i.api=this.api,i.context=this.gridOptionsContext,e(i)}}return e}updateGridOptions(t){let{options:i,force:s,source:n="api"}=t;const o={id:e.changeSetId++,properties:[]},r=[];Object.entries(i).forEach((e=>{let[t,i]=e;"api"===n&&si[t]&&F(`${t} is an initial property and cannot be updated.`);const a=Ic(t,i),l=s||"object"===typeof a&&"api"===n,c=this.gridOptions[t];if(l||c!==a){this.gridOptions[t]=a;const e={type:t,currentValue:a,previousValue:c,changeSet:o,source:n};r.push(e)}})),this.validationService?.processGridOptions(this.gridOptions),o.properties=r.map((e=>e.type)),r.forEach((e=>{this.gridOptions.debug&&N(`Updated property ${e.type} from`,e.previousValue," to ",e.currentValue),this.propertyEventService.dispatchEvent(e)}))}addPropertyEventListener(e,t){this.propertyEventService.addEventListener(e,t)}removePropertyEventListener(e,t){this.propertyEventService.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(e){const t=e;return t.api=this.api,t.context=this.gridOptionsContext,t}assertModuleRegistered(e,t){return kn.__assertRegistered(e,t,this.gridId)}isModuleRegistered(e){return kn.__isRegistered(e,this.gridId)}};Rc.changeSetId=0;var Ec=Rc,Ac=class extends tt{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let i,s;if($t(e.column)?i=this.visibleColsService.getGroupAtDirection(e.column,t):(s=`getCol${t}`,i=this.visibleColsService[s](e.column)),!i)return;const{headerRowIndex:n}=e;if("filter"!==this.getHeaderRowType(n)){const e=[i];for(;i.getParent();)i=i.getParent(),e.push(i);i=e[e.length-1-n]}const{column:o,headerRowIndex:r}=this.getHeaderIndexToFocus(i,n);return{column:o,headerRowIndex:r}}getHeaderIndexToFocus(e,t){let i;if($t(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const s=e;i=s.getLeafColumns()[0];let n=i;for(;n!==s;)t++,n=n.getParent()}return{column:i||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return!!e&&e.getLeafColumns().some((e=>e.isSpanHeaderHeight()))}getColumnVisibleParent(e,t){const i=this.getHeaderRowType(t),s="column"===i;let n="filter"===i?e:e.getParent(),o=t-1,r=o;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;n&&n.isPadding();)n=n.getParent(),o--;r=o,o<0&&(n=e,o=t,r=void 0)}return{column:n,headerRowIndex:o,headerRowIndexWithoutSpan:r}}getColumnVisibleChild(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"After";let s=e,n=t+1;const o=n;if("group"===this.getHeaderRowType(t)){const t=e.getDisplayedLeafColumns(),o="After"===i?t[0]:ze(t),r=[];let a=o;for(;a.getParent()!==e;)a=a.getParent(),r.push(a);if(s=o,o.isSpanHeaderHeight())for(let e=r.length-1;e>=0;e--){const t=r[e];if(!t.isPadding()){s=t;break}n++}else s=ze(r),s||(s=o)}return{column:s,headerRowIndex:n,headerRowIndexWithoutSpan:o}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const i=this.visibleColsService.getAllCols(),s=i["start"===t?0:i.length-1];if(!s)return;const n=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()),o=n?.getRowType(e);if("group"==o){return{headerRowIndex:e,column:this.visibleColsService.getColGroupAtLevel(s,e)}}return{headerRowIndex:null==o?-1:e,column:s}}},Lc=class extends tt{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){const e=this.gos.getCallback("getLocaleText");if(e)return(t,i,s)=>e({key:t,defaultValue:i,variableValues:s});const t=this.gos.get("localeText");return(e,i,s)=>{let n=t&&t[e];if(n&&s&&s.length){let e=0;for(;!(e>=s.length);){if(-1===n.indexOf("${variable}"))break;n=n.replace("${variable}",s[e++])}}return n??i}}},kc=class extends tt{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new pt(this.getFrameworkOverrides())}addEventListener(e,t){const i=this.frameworkEventWrappingService.wrap(t),s=re(this.gos)&&!Mc.has(e),n=s?this.asyncEventListeners:this.syncEventListeners;n.has(e)||n.set(e,new Set),n.get(e).add(i),this.eventService.addEventListener(e,i,s)}removeEventListener(e,t){const i=this.frameworkEventWrappingService.unwrap(t),s=this.asyncEventListeners.get(e),n=!!s?.delete(i);n||this.syncEventListeners.get(e)?.delete(i),this.eventService.removeEventListener(e,i,n)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(re(this.gos)){const i=(e,i)=>{Mc.has(e)&&t(e,i)},s=(e,i)=>{Mc.has(e)||t(e,i)};this.globalEventListenerPairs.set(e,{syncListener:i,asyncListener:s}),this.eventService.addGlobalListener(i,!1),this.eventService.addGlobalListener(s,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:i,asyncListener:s}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(i,!1),this.eventService.removeGlobalListener(s,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach(((e,i)=>{e.forEach((e=>this.eventService.removeEventListener(i,e,t))),e.clear()})),e.clear()}destroyGlobalListeners(e,t){e.forEach((e=>this.eventService.removeGlobalListener(e,t))),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach((e=>{let{syncListener:t,asyncListener:i}=e;this.eventService.removeGlobalListener(t,!1),this.eventService.removeGlobalListener(i,!0)})),this.globalEventListenerPairs.clear()}},Tc=class extends tt{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},Pc=class extends tt{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return Y(this.topRowBounds)||Y(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=_(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},Nc=class extends tt{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=j(this.updateAnnouncement.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){const e=pe(this.gos),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),Ei(t,"polite"),wi(t,"relevant","additions text"),function(e,t){wi(e,"atomic",t)}(t,!0),this.eGridDiv.appendChild(t)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout((()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)}),50)}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(cs(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},Fc=class extends tt{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,(e=>this.gridBodyCtrl=e.gridBodyCtrl))}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush((()=>this.activeNext=!1),(()=>this.active=!1))}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push((()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)}))}flush(e,t){if(0===this.executeNextFuncs.length&&0===this.executeLaterFuncs.length)return e(),void t();const i=e=>{for(;e.length;){const t=e.pop();t&&t()}};this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>{e(),i(this.executeNextFuncs)}),0),window.setTimeout((()=>{t(),i(this.executeLaterFuncs)}),200)}))}},Oc=class extends tt{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}updateState(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},Gc=class extends tt{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}postConstruct(){this.isClientSide=ie(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}isVisible(){return 0!==this.state&&!!this.overlayWrapperComp}isExclusive(){return 1===this.state&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos.get("loading");(e||void 0===e&&!this.gos.get("suppressLoadingOverlay"))&&this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,this.gos.get("loading")?F("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead."):this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp)return void(this.state=0);let e=this.gos.get("loading");this.showInitialOverlay&&void 0===e&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),e?1!==this.state&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?2!==this.state&&this.doShowNoRowsOverlay():0!==this.state&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){const s=e.newAgStackInstance();this.overlayWrapperComp?.showOverlay(s,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let e=0;if(2===this.state){const t=this.ctrlsService.get("gridHeaderCtrl");e=t?.getHeaderHeight()||0}else 0!==this.wrapperPadding&&(e=0);this.wrapperPadding!==e&&(this.wrapperPadding=e,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(e))}},Bc=class extends tt{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){const t=[];return _(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),Ye(t,this.processClassesFromGridOptions(e.rowNode)),Ye(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&("left"===e.pinned&&t.push("ag-cell-last-left-pinned"),"right"===e.pinned&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],i=e=>{"string"===typeof e?t.push(e):Array.isArray(e)&&e.forEach((e=>t.push(e)))},s=this.gos.get("rowClass");if(s){if("function"===typeof s)return F("rowClass should not be a function, please use getRowClass instead"),[];i(s)}const n=this.gos.getCallback("getRowClass");if(n){i(n({data:e.data,node:e,rowIndex:e.rowIndex}))}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,(e=>{t.push(e)}),(()=>{})),t}processRowClassRules(e,t,i){const s=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),s,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},zc=class extends tt{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=function(){if(void 0!==vi)return vi;if(!document.body)return-1;let e=1e6;const t=ji()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const s=2*e;if(i.style.height=s+"px",s>t||i.clientHeight!==s)break;e=s}return document.body.removeChild(i),vi=e,e}(),this.gos.get("debug")&&N("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&N(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t="number"===typeof e?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=e/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*t}},Hc=class extends tt{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=be(this.gos),this.addManagedPropertyListener("accentedSort",(e=>this.isAccentedSort=e.currentValue)),this.addManagedPropertyListener("autoGroupColumnDef",(()=>this.primaryColumnsSortGroups=be(this.gos)))}doFullSort(e,t){const i=e.map(((e,t)=>({currentPos:t,rowNode:e})));return i.sort(this.compareRowNodes.bind(this,t)),i.map((e=>e.rowNode))}compareRowNodes(e,t,i){const s=t.rowNode,n=i.rowNode;for(let o=0,r=e.length;o<r;o++){const t=e[o],i="desc"===t.sort,r=this.getValue(s,t.column),a=this.getValue(n,t.column);let l;const c=this.getComparator(t,s);l=c?c(r,a,s,n,i):J(r,a,this.isAccentedSort);if(!isNaN(l)&&0!==l)return"asc"===t.sort?l:-1*l}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,s=i.getColDef().comparator;if(null!=s)return s;if(!i.getColDef().showRowGroup)return;const n=!t.group&&i.getColDef().field;if(!n)return;const o=this.columnModel.getColDefCol(n);return o?o.getColDef().comparator:void 0}getValue(e,t){if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(De(this.gos,this.columnModel.isPivotActive())){const i=e.allLeafChildren?.[0];return i?this.valueService.getValue(t,i,!1,!1):void 0}const i=this.showRowGroupColsService?.getShowRowGroupCol(t.getId());if(!i)return;return e.groupData?.[i.getId()]}return e.group&&t.getColDef().showRowGroup?void 0:this.valueService.getValue(t,e,!1,!1)}},Vc=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let s=0;s<e.childrenAfterGroup.length;s++){const n=e.childrenAfterGroup[s];n.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[s],t,i):i&&t(n)}t(e)}forEachChangedNodeDepthFirst(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const e={rowNode:t,children:null};this.mapToItems[t.id]=e,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach((e=>this.nodeIdsToColumns[i.id][e.getId()]=!0)),i=i.parent}linkPathItems(e,t){let i=e;for(let s=0;s<t;s++){const e=this.mapToItems[i.id],t=this.mapToItems[i.parent.id];t.children||(t.children=[]),t.children.push(e),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter((e=>i[e.getId()]))}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter((e=>!i[e.getId()]))}},jc=class extends tt{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new ol,this.rowSelectionMode=void 0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){const{gos:e,rowModel:t,onRowSelected:i}=this;this.selectionCtx.init(t),this.rowSelectionMode=Ne(e),this.groupSelectsChildren=Ge(e),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],(()=>{const t=Ge(e),i=Ne(e);t===this.groupSelectsChildren&&i===this.rowSelectionMode||(this.groupSelectsChildren=t,this.rowSelectionMode=i,this.deselectAllRowNodes({source:"api"}))})),this.addManagedEventListeners({rowSelected:i.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return"multiRow"===this.rowSelectionMode}overrideSelectionValue(e,t){if(!(e=>"checkboxSelected"===e||"rowClicked"===e||"spaceKey"===e||"uiSelectAll"===e||"uiSelectAllCurrentPage"===e||"uiSelectAllFiltered"===e)(t))return e;const i=this.selectionCtx.getRoot();return!i||(i.isSelected()??!1)}setNodesSelected(e){const{newValue:t,clearSelection:i,suppressFinishActions:s,rangeSelect:n,nodes:o,event:r,source:a}=e;if(0===o.length)return 0;if(o.length>1&&!this.isMultiSelect())return F("cannot multi select unless selection mode is 'multiRow'"),0;const l=this.groupSelectsChildren&&!0===e.groupSelectsFiltered,c=o.map((e=>e.footer?e.sibling:e));if(n){if(c.length>1)return F("cannot range select while selecting multiple rows"),0;const e=c[0],i=this.overrideSelectionValue(t,a);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(e)){const t=this.selectionCtx.truncate(e);return i&&this.selectRange(t.discard,!1,a),this.selectRange(t.keep,i,a)}if(this.selectionCtx.getRoot()!==e){const t=this.selectionCtx.extend(e,this.groupSelectsChildren);return i&&this.selectRange(t.discard,!1,a),this.selectRange(t.keep,i,a)}}else;}s||this.selectionCtx.setRoot(c[0]);let h=0;for(let d=0;d<c.length;d++){const e=c[d];if(!(l&&e.group)){e.selectThisNode(t,r,a)&&h++}this.groupSelectsChildren&&e.childrenAfterGroup?.length&&(h+=this.selectChildren(e,t,l,a))}if(!s){t&&(i||!this.isMultiSelect())&&(h+=this.clearOtherNodes(c[0],a)),h>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))}return h}selectRange(e,t,i){let s=0;return e.forEach((e=>{if(e.group&&this.groupSelectsChildren)return;e.selectThisNode(t,void 0,i)&&s++})),s>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),s}selectChildren(e,t,i,s){const n=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return Y(n)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:s,nodes:n})}getSelectedNodes(){const e=[];return this.selectedNodes.forEach((t=>{t&&e.push(t)})),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach((t=>{t&&t.data&&e.push(t.data)})),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach(((i,s)=>{i&&e(i)&&t.set(s,i)})),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren)return!1;if(!ie(this.gos))return!1;const i=this.rowModel.getRootNode();t||(t=new Vc(!0,i)).setInactive();let s=!1;return t.forEachChangedNodeDepthFirst((t=>{if(t!==i){const i=t.calculateSelectedFromChildren();s=t.selectThisNode(null!==i&&i,void 0,e)||s}})),s}clearOtherNodes(e,t){const i=new Map;let s=0;return this.selectedNodes.forEach((n=>{if(n&&n.id!==e.id){const e=this.selectedNodes.get(n.id);s+=e.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&n.parent&&i.set(n.parent.id,n.parent)}})),i.forEach((e=>{const i=e.calculateSelectedFromChildren();e.selectThisNode(null!==i&&i,void 0,t)})),s}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(_(t)&&e.id!==t.id&&t){const i=t.id;this.selectedNodes.get(i)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes?.clear()}getBestCostNodeSelection(){if(!ie(this.gos))return;const e=this.rowModel.getTopLevelNodes();if(null===e)return;const t=[];return function e(i){for(let s=0,n=i.length;s<n;s++){const n=i[s];if(n.isSelected())t.push(n);else{const t=n;t.group&&t.children&&e(t.children)}}}(e),t}isEmpty(){let e=0;return this.selectedNodes.forEach((t=>{t&&e++})),0===e}deselectAllRowNodes(e){const t=e=>e.selectThisNode(!1,void 0,s),i=ie(this.gos),{source:s,justFiltered:n,justCurrentPage:o}=e;if(o||n){if(!i)return void O("selecting just filtered only works when gridOptions.rowModelType='clientSide'");this.getNodesToSelect(n,o).forEach(t)}else this.selectedNodes.forEach((e=>{e&&t(e)})),this.reset(s);this.selectionCtx.reset(),i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(s),this.dispatchSelectionChanged(s)}getSelectedCounts(e,t){let i=0,s=0;return this.getNodesToSelect(e,t).forEach((e=>{this.groupSelectsChildren&&e.group||(e.isSelected()?i++:e.selectable&&s++)})),{selectedCount:i,notSelectedCount:s}}getSelectAllState(e,t){const{selectedCount:i,notSelectedCount:s}=this.getSelectedCounts(e,t);return(0!==i||0!==s)&&(i>0&&s>0?null:i>0)}hasNodesToSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getNodesToSelect(e,t).filter((e=>e.selectable)).length>0}getNodesToSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.validateSelectAllType();const i=[];if(t)return this.forEachNodeOnPage((e=>{if(e.group)if(e.expanded)this.groupSelectsChildren||i.push(e);else{const t=e=>{i.push(e),e.childrenAfterFilter?.length&&e.childrenAfterFilter.forEach(t)};t(e)}else i.push(e)})),i;const s=this.rowModel;return e?(s.forEachNodeAfterFilter((e=>{i.push(e)})),i):(s.forEachNode((e=>{i.push(e)})),i)}forEachNodeOnPage(e){const t=this.pageBoundsService.getFirstRow(),i=this.pageBoundsService.getLastRow();for(let s=t;s<=i;s++){const t=this.rowModel.getRow(s);t&&e(t)}}selectAllRowNodes(e){if("string"!==typeof this.gos.get("rowSelection")&&!Fe(this.gos))return F("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();const{source:t,justFiltered:i,justCurrentPage:s}=e,n=this.getNodesToSelect(i,s);n.forEach((e=>e.selectThisNode(!0,void 0,t))),this.selectionCtx.setRoot(n[0]??null),this.selectionCtx.setEndRange(ze(n)??null),ie(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){const e=[];return this.selectedNodes.forEach((t=>{t?.id&&e.push(t.id)})),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return O("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");const i=new Set(e),s=[];this.rowModel.forEachNode((e=>{i.has(e.id)&&s.push(e)})),this.setNodesSelected({newValue:!0,nodes:s,source:t})}dispatchSelectionChanged(e){this.eventService.dispatchEvent({type:"selectionChanged",source:e})}validateSelectAllType(){if(!ie(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},Wc=class extends tt{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],(()=>this.updateSelectable()))}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{gos:t}=this,i=oe(t),s=Pe(t);if(!i||!s)return;const n=Ge(t),o=ie(t)&&n,r=[],a=t=>{if(e&&!t.group)return;if(o&&t.group){const e=t.childrenAfterGroup.some((e=>!0===e.selectable));return void t.setRowSelectable(e,!0)}const i=s?.(t)??!0;t.setRowSelectable(i,!0),!i&&t.isSelected()&&r.push(t)};if(o){const e=this.rowModel;new Vc(!1,e.getRootNode()).forEachChangedNodeDepthFirst(a,!0,!0)}else this.rowModel.forEachNode(a);r.length&&this.selectionService.setNodesSelected({nodes:r,newValue:!1,source:"selectableChanged"}),o&&this.selectionService instanceof jc&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},Uc=["asc","desc",null],_c=class extends tt{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,i){const s=this.getNextSortDirection(e);this.setSortForColumn(e,s,t,i)}setSortForColumn(e,t,i,s){"asc"!==t&&"desc"!==t&&(t=null);let n=[e];if(be(this.gos)&&e.getColDef().showRowGroup){const t=this.funcColsService.getSourceColumnsForGroupColumn(e),i=t?.filter((e=>e.isSortable()));i&&(n=[e,...i])}n.forEach((e=>e.setSort(t,s)));const o=[];if(!((i||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"))){const e=this.clearSortBarTheseColumns(n,s);o.push(...e)}this.updateSortIndex(e),o.push(...n),this.dispatchSortChangedEvents(s,o)}updateSortIndex(e){const t=be(this.gos),i=this.showRowGroupColsService?.getShowRowGroupCol(e.getId()),s=t&&i||e,n=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach((e=>e.setSortIndex(null)));const o=n.filter((e=>(!t||!e.getColDef().showRowGroup)&&e!==s));(s.getSort()?[...o,s]:o).forEach(((e,t)=>{e.setSortIndex(t)}))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const e=this.columnModel.getAllCols().filter((e=>!!e.getSort()));return e&&e.length>0}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.columnModel.getAllCols().forEach((s=>{e.includes(s)||(s.getSort()&&i.push(s),s.setSort(void 0,t))})),i}getNextSortDirection(e){let t;if(t=e.getColDef().sortingOrder?e.getColDef().sortingOrder:this.gos.get("sortingOrder")?this.gos.get("sortingOrder"):Uc,!Array.isArray(t)||t.length<=0)return F(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;const i=t.indexOf(e.getSort()),s=i<0,n=i==t.length-1;let o;return o=s||n?t[0]:t[i+1],Uc.indexOf(o)<0?(F("invalid sort type ",o),null):o}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter((e=>!!e.getSort()));if(this.columnModel.isPivotMode()){const t=be(this.gos);e=e.filter((e=>{const i=!!e.getAggFunc(),s=!e.isPrimary(),n=t?this.showRowGroupColsService?.getShowRowGroupCol(e.getId()):e.getColDef().showRowGroup;return i||s||n}))}const t=this.funcColsService.getRowGroupColumns().filter((e=>!!e.getSort())),i={};e.forEach(((e,t)=>i[e.getId()]=t)),e.sort(((e,t)=>{const s=e.getSortIndex(),n=t.getSortIndex();if(null!=s&&null!=n)return s-n;if(null==s&&null==n){return i[e.getId()]>i[t.getId()]?1:-1}return null==n?-1:1}));const s=be(this.gos)&&!!t.length;s&&(e=[...new Set(e.map((e=>this.showRowGroupColsService?.getShowRowGroupCol(e.getId())??e)))]);const n=new Map;return e.forEach(((e,t)=>n.set(e,t))),s&&t.forEach((e=>{const t=this.showRowGroupColsService.getShowRowGroupCol(e.getId());n.set(e,n.get(t))})),n}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(((e,t)=>{let[i,s]=e,[n,o]=t;return s-o})).map((e=>{let[t]=e;return t}))}getSortModel(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),colId:e.getId()})))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),column:e})))}canColumnDisplayMixedSort(e){const t=be(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();const i=null!=e.getColDef().field||!!e.getColDef().valueGetter?[e,...t]:t,s=i[0].getSort();return i.every((e=>e.getSort()==s))?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},Yc=class extends tt{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",(e=>this.setColumnDefs(e)))}start(){this.ctrlsService.whenReady(this,(()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()}))}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});const e=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&N(`initialised successfully, enterprise = ${e}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t)return this.waitingForColumns?(this.waitingForColumns=!1,void this.setColumnsAndData(t)):void this.columnModel.setColumnDefs(t,Tt(e.source))}},Kc=class extends tt{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){ie(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){"paste"!==e.source&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;const i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const s=this.gos.get("aggregateOnlyChangedColumns"),n=new Vc(s,this.clientSideRowModel.getRootNode());n.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(n),n.forEachChangedNodeDepthFirst((e=>{i.push(e)}))}this.rowRenderer.refreshCells({rowNodes:i})}},Zc=class extends tt{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if("string"===typeof e)return this.evaluateExpression(e,t);O("value should be either a string or a function",e)}evaluateExpression(e,t){try{const i=this.createExpressionFunction(e);return i(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return N("Processing of the expression failed"),N("Expression = ",e),N("Params = ",t),N("Exception = ",i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},$c=class extends tt{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[t]}},Qc=class extends tt{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=se(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=e=>this.callColumnCellValueChangedHandler(e),t=re(this.gos);this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc((()=>this.eventService.removeEventListener("cellValueChanged",e,t))),this.addManagedPropertyListener("treeData",(e=>this.isTreeData=e.currentValue))}getValueForDisplay(e,t){const i=t.leafGroup&&this.columnModel.isPivotMode(),s=t.group&&t.expanded&&!t.footer&&!i,n=this.gos.get("groupSuppressBlankHeader");if(!s||n)return this.getValue(e,t);let o=!1;const r=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");if("function"!==typeof r)o=!!r;else{o=!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this})}const a=s&&o;return this.getValue(e,t,!1,a)}getValue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.initialised||this.init(),!t)return;const n=e.getColDef(),o=n.field,r=e.getColId(),a=t.data;let l;const c=t.groupData&&void 0!==t.groupData[r],h=!s&&t.aggData&&void 0!==t.aggData[r],d=this.isSsrm&&s&&!!e.getColDef().aggFunc,u=this.isSsrm&&t.footer&&t.field&&(!0===e.getColDef().showRowGroup||e.getColDef().showRowGroup===t.field);if(i&&n.filterValueGetter?l=this.executeFilterValueGetter(n.filterValueGetter,a,e,t):this.isTreeData&&h?l=t.aggData[r]:this.isTreeData&&n.valueGetter?l=this.executeValueGetter(n.valueGetter,a,e,t):this.isTreeData&&o&&a?l=bt(a,o,e.isFieldContainsDots()):c?l=t.groupData[r]:h?l=t.aggData[r]:n.valueGetter?l=this.executeValueGetter(n.valueGetter,a,e,t):u?l=bt(a,t.field,e.isFieldContainsDots()):o&&a&&!d&&(l=bt(a,o,e.isFieldContainsDots())),this.cellExpressions&&"string"===typeof l&&0===l.indexOf("=")){const i=l.substring(1);l=this.executeValueGetter(i,a,e,t)}if(null==l){const i=this.getOpenedGroup(t,e);if(null!=i)return i}return l}parseValue(e,t,i,s){const n=e.getColDef(),o=n.valueParser;if(_(o)){const r=this.gos.addGridCommonParams({node:t,data:t?.data,oldValue:s,newValue:i,colDef:n,column:e});return"function"===typeof o?o(r):this.expressionService.evaluate(o,r)}return i}getDeleteValue(e,t){return _(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,i,s){let n,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=null;const a=e.getColDef();if(s?n=s:o&&(n=a.valueFormatter),n){const s=this.gos.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:a,column:e});r="function"===typeof n?n(s):this.expressionService.evaluate(n,s)}else if(a.refData)return a.refData[i]||"";return null==r&&Array.isArray(i)&&(r=i.join(", ")),r}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup"))return;if(!t.getColDef().showRowGroup)return;const i=t.getColDef().showRowGroup;let s=e.parent;for(;null!=s;){if(s.rowGroupColumn&&(!0===i||i===s.rowGroupColumn.getColId()))return s.key;s=s.parent}}setValue(e,t,i,s){const n=this.columnModel.getColDefCol(t);if(!e||!n)return!1;Y(e.data)&&(e.data={});const{field:o,valueSetter:r}=n.getColDef();if(Y(o)&&Y(r))return F("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(n,i))return F("Data type of the new value does not match the cell data type of the column"),!1;const a=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(n,e),newValue:i,colDef:n.getColDef(),column:n});let l;if(a.newValue=i,l=_(r)?"function"===typeof r?r(a):this.expressionService.evaluate(r,a):this.setValueUsingField(e.data,o,i,n.isFieldContainsDots()),void 0===l&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();const c=this.getValue(n,e);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,colDef:a.colDef,data:e.data,node:e,oldValue:a.oldValue,newValue:c,value:c,source:s}),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;"function"===typeof t&&this.getFrameworkOverrides().wrapOutgoing((()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})}))}setValueUsingField(e,t,i,s){if(!t)return!1;let n=!1;if(s){const s=t.split(".");let o=e;for(;s.length>0&&o;){const e=s.shift();0===s.length?(n=o[e]===i,n||(o[e]=i)):o=o[e]}}else n=e[t]===i,n||(e[t]=i);return!n}executeFilterValueGetter(e,t,i,s){const n=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});return"function"===typeof e?e(n):this.expressionService.evaluate(e,n)}executeValueGetter(e,t,i,s){const n=i.getColId(),o=this.valueCache.getValue(s,n);if(void 0!==o)return o;const r=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});let a;return a="function"===typeof e?e(r):this.expressionService.evaluate(e,r),this.valueCache.setValue(s,n,a),a}getValueCallback(e,t){const i=this.columnModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),s=e.getColDef().keyCreator;let n=i;if(s){n=s(this.gos.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data}))}return"string"===typeof n||null==n||(n=String(n),"[object Object]"===n&&F("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),n}},Xc=class e{static applyGlobalGridOptions(t){if(!e.gridOptions)return t;let i={};return Ct(i,e.gridOptions,!0,!0),"deep"===e.mergeStrategy?Ct(i,t,!0,!0):i={...i,...t},e.gridOptions.context&&(i.context=e.gridOptions.context),t.context&&("deep"===e.mergeStrategy&&i.context&&Ct(t.context,i.context,!0,!0),i.context=t.context),i}};Xc.gridOptions=void 0,Xc.mergeStrategy="shallow";var qc=Xc;var Jc=1,eh=class{create(e,t,i,s,n){const o=function(e){const t={};return Object.entries(e).forEach((e=>{let[i,s]=e;const n=Ic(i,s);t[i]=n})),t}(qc.applyGlobalGridOptions(t)),r=o.gridId??String(Jc++),a=this.getRegisteredModules(n,r),l=this.createBeansList(o.rowModelType,a,r),c=this.createProvidedBeans(e,o,n);if(!l)return void O("Failed to create grid.");const h=new Pn({providedBeanInstances:c,beanClasses:l,gridId:r,beanInitComparator:kl,beanDestroyComparator:Tl,derivedBeans:[Sl]});return this.registerModuleUserComponents(h,a),this.registerControllers(h,a),this.registerModuleApiFunctions(h,a),i(h),h.getBean("syncService").start(),s&&s(h),h.getBean("gridApi")}registerControllers(e,t){const i=e.getBean("ctrlsFactory");t.forEach((e=>{e.controllers&&e.controllers.forEach((e=>i.register(e)))}))}getRegisteredModules(e,t){const i=e?e.modules:null,s=kn.__getRegisteredModules(t),n=[],o={},r=(e,t,i)=>{var s;o[(s=t).moduleName]||(o[s.moduleName]=!0,n.push(s),kn.__register(s,e,i)),t.dependantModules&&t.dependantModules.forEach((t=>r(e,t,i)))};return r(!!i?.length||!kn.__isPackageBased(),Sc,void 0),i&&i.forEach((e=>r(!0,e,t))),s&&s.forEach((e=>r(!kn.__isPackageBased(),e,void 0))),n}registerModuleUserComponents(e,t){const i=this.extractModuleEntity(t,(e=>e.userComponents?e.userComponents:[])),s=e.getBean("userComponentRegistry");i.forEach((e=>{let{name:t,classImp:i,params:n}=e;s.registerDefaultComponent(t,i,n)}))}registerModuleApiFunctions(e,t){const i=e.getBean("apiFunctionService");t.forEach((e=>{const t=e.apiFunctions;if(t){Object.keys(t).forEach((e=>{i?.addFunction(e,t[e])}))}}))}createProvidedBeans(e,t,i){let s=i?i.frameworkOverrides:null;Y(s)&&(s=new gl);const n={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:s};return i&&i.providedBeanInstances&&Object.assign(n,i.providedBeanInstances),n}createBeansList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"clientSide",t=arguments.length>2?arguments[2]:void 0;const i=(arguments.length>1?arguments[1]:void 0).filter((t=>!t.rowModel||t.rowModel===e)),s={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!s[e])return void O("Could not find row model for rowModelType = ",e);if(!kn.__assertRegistered(s[e],`rowModelType = '${e}'`,t))return;const n=[Gl,Fl,Ac,xc,wl,on,El,Al,Ea,En,zc,Ia,Lc,tl,Bn,qt,Ul,Ec,ul,jc,kt,cr,Pc,Tc,Ja,Zc,At,Da,$c,Qc,Xa,Ra,Fn,Yl,Ma,Vl,ml,rl,wa,_c,Oc,Fc,Wc,Kc,Aa,xl,Bc,Hc,Nl,Kl,Ol,Pl,Yc,Gc,La,kc,Nc,ka,Bt,Ml,Ht,Ot,Dl,Il,Kt,Gt,_t,Rl,Yt,ot],o=this.extractModuleEntity(i,(e=>e.beans?e.beans:[]));n.push(...o);const r=[];return n.forEach((e=>{r.indexOf(e)<0&&r.push(e)})),r}extractModuleEntity(e,t){return[].concat(...e.map(t))}},th=class extends tt{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){const e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};var ih={version:_o,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:function(e){e.expansionService.expandAll(!0)},collapseAll:function(e){e.expansionService.expandAll(!1)},onRowHeightChanged:function(e){const t=e.rowModelHelperService?.getClientSideRowModel(),i=e.rowModelHelperService?.getServerSideRowModel();t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}}},sh={version:_o,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:function(e,t,i){const s=e.rowModelHelperService?.getServerSideRowModel();if(s)return e.funcColsService.isRowGroupEmpty()?void s.setRowCount(t,i):void O("setRowCount cannot be used while using row grouping.");const n=e.rowModelHelperService?.getInfiniteRowModel();n&&n.setRowCount(t,i)},getCacheBlockState:function(e){return e.rowNodeBlockLoader?.getBlockState()??{}},isLastRowIndexKnown:function(e){return e.rowModel.isLastRowIndexKnown()}}},nh=class{wrap(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0;const n=this.createWrapper(e,s);return t.forEach((e=>{this.createMethod(n,e,!0)})),i.forEach((e=>{this.createMethod(n,e,!1)})),n}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&F("Framework component is missing the method "+t+"()"),null)}}},oh=class{};oh.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"},oh.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"],oh.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var rh="undefined"===typeof global?{}:global;rh.HTMLElement="undefined"===typeof HTMLElement?{}:HTMLElement,rh.HTMLButtonElement="undefined"===typeof HTMLButtonElement?{}:HTMLButtonElement,rh.HTMLSelectElement="undefined"===typeof HTMLSelectElement?{}:HTMLSelectElement,rh.HTMLInputElement="undefined"===typeof HTMLInputElement?{}:HTMLInputElement,rh.Node="undefined"===typeof Node?{}:Node,rh.MouseEvent="undefined"===typeof MouseEvent?{}:MouseEvent;var ah=class{constructor(e,t,i,s,n,o){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=i,this.funcColsService=s,this.beans=o,this.selectionService=n,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id="ROOT_NODE_ID",this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return ft(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if("string"===typeof e)return void F("rowData must be an array.");this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const t=this.rootNode,i=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map(((e,t)=>this.createNode(e,this.rootNode,0,t))):(t.allLeafChildren=[],t.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=t.childrenAfterFilter,i.childrenAfterGroup=t.childrenAfterGroup,i.childrenAfterAggFilter=t.childrenAfterAggFilter,i.childrenAfterSort=t.childrenAfterSort,i.childrenMapped=t.childrenMapped,i.allLeafChildren=t.allLeafChildren)}updateRowData(e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const t={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[];return this.executeRemove(e,t,i),this.executeUpdate(e,t,i),this.executeAdd(e,t),this.updateSelection(i,"rowDataChanged"),t}updateRowOrderFromRowData(e){const t=this.rootNode.allLeafChildren,i=t?.length??0,s=new Map;let n=-1,o=-1;for(let r=0;r<i;++r){const i=t[r],a=i.data;a!==e[r]&&(o<0&&(n=r),o=r,s.set(a,i))}if(n<0)return!1;for(let r=n;r<=o;++r){const i=s.get(e[r]);void 0!==i&&(t[r]=i,i.sourceRowIndex=r)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}updateSelection(e,t){const i=e.length>0;i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),i&&this.eventService.dispatchEvent({type:"selectionChanged",source:t})}executeAdd(e,t){const i=e.add;if(K(i))return;const s=this.rootNode.allLeafChildren;let n=s.length;if("number"===typeof e.addIndex&&(n=this.sanitizeAddIndex(e.addIndex),n>0)){if(this.gos.get("treeData"))for(let e=0;e<s.length;e++){const t=s[e];if(t?.rowIndex==n-1){n=e+1;break}}}const o=i.map(((e,t)=>this.createNode(e,this.rootNode,0,n+t)));if(n<s.length){const e=s.slice(0,n),i=s.slice(n,s.length),r=e.length+o.length;for(let t=0,s=i.length;t<s;++t)i[t].sourceRowIndex=r+t;this.rootNode.allLeafChildren=[...e,...o,...i],t.rowsInserted=!0}else this.rootNode.allLeafChildren=s.concat(o);const r=this.rootNode.sibling;r&&(r.allLeafChildren=s),t.rowNodeTransaction.add=o}sanitizeAddIndex(e){const t=this.rootNode.allLeafChildren?.length??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}executeRemove(e,t,i){let{rowNodeTransaction:s}=t;const{remove:n}=e;if(K(n))return;const o={};n.forEach((e=>{const t=this.lookupRowNode(e);t&&(t.isSelected()&&i.push(t),t.clearRowTopAndRowIndex(),o[t.id]=!0,delete this.allNodesMap[t.id],s.remove.push(t))})),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren?.filter((e=>!o[e.id]))??null,this.rootNode.allLeafChildren?.forEach(((e,t)=>{e.sourceRowIndex=t}));const r=this.rootNode.sibling;r&&(r.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,t,i){let{rowNodeTransaction:s}=t;const{update:n}=e;K(n)||n.forEach((e=>{const t=this.lookupRowNode(e);t&&(t.updateData(e),!t.selectable&&t.isSelected()&&i.push(t),this.setMasterForRow(t,e,0,!1),s.update.push(t))}))}lookupRowNode(e){const t=Ie(this.gos);let i;if(t){const s=t({data:e,level:0});if(i=this.allNodesMap[s],!i)return O(`could not find row id=${s}, data item was not found for this id`),null}else if(i=this.rootNode.allLeafChildren?.find((t=>t.data===e)),!i)return O("could not find data item as object was not found",e),O("Consider using getRowId to help the Grid find matching row data"),null;return i||null}createNode(e,t,i,s){const n=new _n(this.beans);return n.sourceRowIndex=s,n.group=!1,this.setMasterForRow(n,e,i,!0),t&&(n.parent=t),n.level=i,n.setDataAndId(e,this.nextId.toString()),this.allNodesMap[n.id]&&F(`duplicate node id '${n.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[n.id]=n,this.nextId++,n}setMasterForRow(e,t,i,s){if(this.gos.get("treeData"))e.setMaster(!1),s&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const i=this.gos.get("isRowMaster");i?e.setMaster(i(t)):e.setMaster(!0)}else e.setMaster(!1);if(s){const t=this.funcColsService.getRowGroupColumns(),s=i+(t?t.length:0);e.expanded=!!e.master&&this.isExpanded(s)}}}isExpanded(e){const t=this.gos.get("groupDefaultExpanded");return-1===t||e<t}};var lh="32.3.3",ch={version:lh,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[class extends tt{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=j(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){const e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new _n(this.beans),this.nodeManager=new ah(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),s=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),n=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),o=new Set(["postSortRows","groupDisplayType","accentedSort"]),r=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...e,...t,...i,...s,...s,...n,...o,...r,...a];this.addManagedPropertyListeners(l,(l=>{const c=l.changeSet?.properties;if(!c)return;const h=e=>c.some((t=>e.has(t)));h(e)?this.setRowData(this.rootNode.allLeafChildren.map((e=>e.data))):h(t)?this.refreshModel({step:"group"}):h(i)?this.refreshModel({step:"filter"}):h(s)?this.refreshModel({step:"pivot"}):h(n)?this.refreshModel({step:"aggregate"}):h(o)?this.refreshModel({step:"sort"}):h(r)?this.refreshModel({step:"filter_aggregates"}):h(a)&&this.refreshModel({step:"map"})})),this.addManagedPropertyListener("rowHeight",(()=>this.resetRowHeights()))}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,i,s){let n,o=!1;do{n=!1;const r=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(r,i),c=Math.min(a,s);for(let e=l;e<=c;e++){const t=this.getRow(e);if(t.rowHeightEstimated){const e=le(this.gos,t);t.setRowHeight(e.height),n=!0,o=!0}}n&&this.setRowTopAndRowIndex()}while(n);return o}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const i=new Set,s=ne(this.gos,"normal");for(let n=0;n<this.rowsToDisplay.length;n++){const o=this.rowsToDisplay[n];if(null!=o.id&&i.add(o.id),null==o.rowHeight){const t=le(this.gos,o,s,e);o.setRowHeight(t.height,t.estimated)}o.setRowTop(t),o.setRowIndex(n),t+=o.rowHeight}return i}clearRowTopAndRowIndex(e,t){const i=e.isActive(),s=e=>{e&&null!=e.id&&!t.has(e.id)&&e.clearRowTopAndRowIndex()},n=e=>{if(s(e),s(e.detailNode),s(e.sibling),e.hasChildren()&&e.childrenAfterGroup){const t=-1==e.level;i&&!t&&!e.expanded||e.childrenAfterGroup.forEach(n)}};n(this.rootNode)}ensureRowsAtPixel(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=this.getRowIndexAtPixel(t),n=this.getRow(s),o=!this.gos.get("suppressAnimationFrame");if(n===e[0])return!1;const r=this.rootNode.allLeafChildren;return e.forEach((e=>{je(r,e)})),e.forEach(((e,t)=>{We(r,e,Math.max(s+i,0)+t)})),e.forEach(((e,t)=>{e.sourceRowIndex=t})),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:o,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(e,t){const i=null!=t?this.getRowIndexAtPixel(t):null,s=null!=i?this.getRow(i):null;if(!s||!e||null==t)return void this.clearHighlightedRow();const n=this.getHighlightPosition(t,s),o=this.isHighlightingCurrentPosition(e,s,n),r=null!=this.lastHighlightedRow&&this.lastHighlightedRow!==s;(o||r)&&(this.clearHighlightedRow(),o)||(s.setHighlighted(n),this.lastHighlightedRow=s)}getHighlightPosition(e,t){if(!t){const i=this.getRowIndexAtPixel(e);if(!(t=this.getRow(i||0)))return 1}const{rowTop:i,rowHeight:s}=t;return e-i<s/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,i){if(e===t)return!0;const s=0===i?-1:1;return this.getRow(t.rowIndex+s)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(0===this.rowsToDisplay.length)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const e=this.rootNode.childrenAfterAggFilter,t=this.rootNode.sibling?1:0;return(e?e.length:0)+t}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let t=e;if(this.rowsToDisplay[0].footer){if(0===e)return 0;t-=1}const i=this.rowsToDisplay[this.rowsToDisplay.length-1],s=t>=this.rootNode.childrenAfterSort.length;if(i.footer&&s)return i.rowIndex;let n=this.rootNode.childrenAfterSort[t];if(this.gos.get("groupHideOpenParents"))for(;n.expanded&&n.childrenAfterSort&&n.childrenAfterSort.length>0;)n=n.childrenAfterSort[0];return n.rowIndex}getRowBounds(e){if(Y(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=ve(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=ve(this.gos),i=0===e.columns.length||e.columns.some((e=>e.isPrimary()))?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=ve(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const t=K(e),i=new Vc(!1,this.rootNode);return t&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;if(null==e.rowNodeTransactions)return!1;const t=e.rowNodeTransactions.filter((e=>null!=e.add&&e.add.length>0||null!=e.remove&&e.remove.length>0));return null==t||0==t.length}buildRefreshModelParams(e){let t="group";const i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",filter_aggregates:"filter_aggregates",sort:"sort",pivot:"pivot",nothing:"nothing"};if(_(e)&&(t=i[e]),Y(t))return void O(`invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`);return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:!this.gos.get("suppressAnimationFrame")}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;const t="object"===typeof e&&"step"in e?e:this.buildRefreshModelParams(e);if(!t)return;if(this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const i=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,i,!!t.rowNodesOrderChanged,!!t.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(t.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}const s=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,s),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){const e=Y(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return Y(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return _(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,s=!1;const n=[],o=Ge(this.gos);return this.forEachNodeAfterFilterAndSort((r=>{if(s)return;if(i&&(r===t||r===e)&&(s=!0,r.group&&o))return void n.push(...r.allLeafChildren);if(!i){if(r!==t&&r!==e)return;i=!0}(!r.group||!o)&&n.push(r)})),n}setDatasource(e){O("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(ze(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let s=-1,n=-1;for(;;){const o=Math.floor((t+i)/2),r=this.rowsToDisplay[o];if(this.isRowInPixel(r,e))return o;r.rowTop<e?t=o+1:r.rowTop>e&&(i=o-1);if(s===t&&n===i)return o;s=t,n=i}}isRowInPixel(e,t){const i=e.rowTop,s=e.rowTop+e.rowHeight;return i<=t&&s>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(((t,i)=>e(t,i)))}forEachNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){const{nodes:t,callback:i,recursionType:s,includeFooterNodes:n}=e;let{index:o}=e;const r=e=>{const s=t[0]?.parent;if(!s)return;const r=n&&Se(this.gos),a=xe(this.gos),l=n&&a({node:s});s===this.rootNode?r===e&&(s.createFooter(),i(s.sibling,o++)):l===e&&(s.createFooter(),i(s.sibling,o++))};r("top");for(let a=0;a<t.length;a++){const e=t[a];if(i(e,o++),e.hasChildren()&&!e.footer){let t=null;switch(s){case 0:t=e.childrenAfterGroup;break;case 1:t=e.childrenAfterAggFilter;break;case 2:t=e.childrenAfterSort;break;case 3:t=e.leafGroup?null:e.childrenAfterSort}t&&(o=this.recursivelyWalkNodesAndCallback({nodes:[...t],callback:i,recursionType:s,index:o,includeFooterNodes:n}))}}return r("bottom"),o}doAggregate(e){this.aggregationStage?.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),s=n=>{n&&n.forEach((n=>{const o=()=>{n.expanded=e,s(n.childrenAfterGroup)};if(t){return void(_(n.childrenAfterGroup)&&o())}if(i){return void(!n.leafGroup&&o())}n.group&&o()}))};this.rootNode&&s(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,s){if(this.groupStage){if(e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodesOrderChanged:i,changedPath:t}):this.groupStage.execute({rowNode:this.rootNode,changedPath:t,afterColumnsChanged:s}),Ge(this.gos)){this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",t)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"})}}else{const e=this.rootNode,t=e.sibling;e.childrenAfterGroup=e.allLeafChildren,t&&(t.childrenAfterGroup=e.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getNodeManager(){return this.nodeManager}getRowNode(e){if("string"==typeof e&&0==e.indexOf(_n.ID_PREFIX_ROW_GROUP)){let t;return this.forEachNode((i=>{i.id===e&&(t=i)})),t}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];const e=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout((()=>{this.isAlive()&&this.executeBatchUpdateRowData()}),e)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const e=[],t=[];let i=!1;this.rowDataTransactionBatch?.forEach((s=>{const{rowNodeTransaction:n,rowsInserted:o}=this.nodeManager.updateRowData(s.rowDataTransaction);o&&(i=!0),t.push(n),s.callback&&e.push(s.callback.bind(null,n))})),this.commonUpdateRowData(t,i),e.length>0&&window.setTimeout((()=>{e.forEach((e=>e()))}),0),t.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache.onDataChanged();const{rowNodeTransaction:t,rowsInserted:i}=this.nodeManager.updateRowData(e);return this.commonUpdateRowData([t],i),t}afterImmutableDataChange(e,t){this.commonUpdateRowData([e],t)}commonUpdateRowData(e,t){if(!this.hasStarted)return;const i=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodesOrderChanged:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode((t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0})),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow()}},class extends tt{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){const t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const i=(t,i)=>{t.hasChildren()?t.childrenAfterFilter=e&&!i?t.childrenAfterGroup.filter((e=>{const t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0,i=e.data&&this.filterManager.doesRowPassFilter({rowNode:e});return t||i})):t.childrenAfterGroup:t.childrenAfterFilter=t.childrenAfterGroup,t.sibling&&(t.sibling.childrenAfterFilter=t.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const e=(t,s)=>{if(t.childrenAfterGroup)for(let n=0;n<t.childrenAfterGroup.length;n++){const o=t.childrenAfterGroup[n],r=s||this.filterManager.doesRowPassFilter({rowNode:o});o.childrenAfterGroup?e(t.childrenAfterGroup[n],r):i(o,r)}i(t,s)},s=t=>e(t,!1);t.executeFromRootNode(s)}else{const e=e=>i(e,!1);t.forEachChangedNodeDepthFirst(e,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},class extends tt{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){const t=this.sortController.getSortOptions(),i=_(t)&&t.length>0,s=i&&_(e.rowNodeTransactions)&&this.gos.get("deltaSort"),n=t.some((e=>be(this.gos)?e.column.isPrimary()&&e.column.isRowGroupActive():!!e.column.getColDef().showRowGroup));this.sortService.sort(t,i,s,e.rowNodeTransactions,e.changedPath,n)}},class extends tt{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){const t=e.rowNode,i=[],s=this.columnModel.isPivotMode(),n=s&&t.leafGroup,o=n?[t]:t.childrenAfterSort,r=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(r,o,i,s,0);if(!n&&i.length>0&&r.grandTotalRow){t.createFooter();const e="top"===r.grandTotalRow;this.addRowNodeToRowsToDisplay(r,t.sibling,i,0,e)}return i}getFlattenDetails(){const e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:Me(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:Se(this.gos),groupTotalRow:xe(this.gos)}}recursivelyAddToRowsToDisplay(e,t,i,s,n){if(!K(t))for(let o=0;o<t.length;o++){const r=t[o],a=r.hasChildren(),l=s&&!a,c=e.groupRemoveSingleChildren&&a&&1===r.childrenAfterGroup.length,h=e.groupRemoveLowestSingleChildren&&a&&r.leafGroup&&1===r.childrenAfterGroup.length,d=s&&r.leafGroup,u=e.hideOpenParents&&r.expanded&&!r.master&&!d;if(!l&&!u&&!c&&!h&&this.addRowNodeToRowsToDisplay(e,r,i,n),!s||!r.leafGroup)if(a){const t=c||h;if(r.expanded||t){const o=e.groupTotalRow({node:r});o||r.destroyFooter();const a=t?n:n+1;"top"===o&&(r.createFooter(),this.addRowNodeToRowsToDisplay(e,r.sibling,i,a)),this.recursivelyAddToRowsToDisplay(e,r.childrenAfterSort,i,s,a),"bottom"===o&&(r.createFooter(),this.addRowNodeToRowsToDisplay(e,r.sibling,i,a))}}else if(r.master&&r.expanded){const t=this.createDetailNode(r);this.addRowNodeToRowsToDisplay(e,t,i,n)}}}addRowNodeToRowsToDisplay(e,t,i,s,n){n?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:s)}createDetailNode(e){if(_(e.detailNode))return e.detailNode;const t=new _n(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,_(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},class extends tt{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,i,s,n,o){const r=this.gos.get("groupMaintainOrder"),a=this.columnModel.getCols().some((e=>e.isRowGroupActive()));let l={};i&&s&&(l=this.calculateDirtyNodes(s));const c=this.columnModel.isPivotMode(),h=this.gos.getCallback("postSortRows"),d=s=>{this.pullDownGroupDataForHideOpenParents(s.childrenAfterAggFilter,!0);const d=c&&s.leafGroup;if(r&&a&&!s.leafGroup&&!o){const e=this.funcColsService.getRowGroupColumns()?.[s.level+1],t=null===e?.getSort(),i=s.childrenAfterAggFilter.slice(0);if(s.childrenAfterSort&&!t){const e={};s.childrenAfterSort.forEach(((t,i)=>{e[t.id]=i})),i.sort(((t,i)=>(e[t.id]??0)-(e[i.id]??0)))}s.childrenAfterSort=i}else s.childrenAfterSort=!t||d?s.childrenAfterAggFilter.slice(0):i?this.doDeltaSort(s,l,n,e):this.rowNodeSorter.doFullSort(s.childrenAfterAggFilter,e);if(s.sibling&&(s.sibling.childrenAfterSort=s.childrenAfterSort),this.updateChildIndexes(s),h){const e={nodes:s.childrenAfterSort};h(e)}};n&&n.forEachChangedNodeDepthFirst(d),this.updateGroupDataForHideOpenParents(n)}calculateDirtyNodes(e){const t={},i=e=>{e&&e.forEach((e=>t[e.id]=!0))};return e&&e.forEach((e=>{i(e.add),i(e.update),i(e.remove)})),t}doDeltaSort(e,t,i,s){const n=e.childrenAfterAggFilter,o=e.childrenAfterSort;if(!o)return this.rowNodeSorter.doFullSort(n,s);const r={},a=[];n.forEach((e=>{t[e.id]||!i.canSkip(e)?a.push(e):r[e.id]=!0}));const l=o.filter((e=>r[e.id])),c=(e,t)=>({currentPos:t,rowNode:e}),h=a.map(c).sort(((e,t)=>this.rowNodeSorter.compareRowNodes(s,e,t)));return this.mergeSortedArrays(s,h,l.map(c)).map((e=>{let{rowNode:t}=e;return t}))}mergeSortedArrays(e,t,i){const s=[];let n=0,o=0;for(;n<t.length&&o<i.length;){this.rowNodeSorter.compareRowNodes(e,t[n],i[o])<0?s.push(t[n++]):s.push(i[o++])}for(;n<t.length;)s.push(t[n++]);for(;o<i.length;)s.push(i[o++]);return s}updateChildIndexes(e){if(Y(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const s=t[i],n=0===i,o=i===e.childrenAfterSort.length-1;s.setFirstChild(n),s.setLastChild(o),s.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return F("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=e=>{this.pullDownGroupDataForHideOpenParents(e.childrenAfterSort,!1),e.childrenAfterSort.forEach((e=>{e.hasChildren()&&t(e)}))};e&&e.executeFromRootNode((e=>t(e)))}pullDownGroupDataForHideOpenParents(e,t){this.gos.get("groupHideOpenParents")&&!Y(e)&&e.forEach((e=>{(this.showRowGroupColsService?.getShowRowGroupCols()??[]).forEach((i=>{const s=i.getColDef().showRowGroup;if("string"!==typeof s)return void O("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");const n=s,o=this.columnModel.getColDefCol(n);if(!(o===e.rowGroupColumn))if(t)e.setGroupValue(i.getId(),void 0);else{const t=this.getFirstChildOfFirstChild(e,o);t&&e.setGroupValue(i.getId(),t.key)}}))}))}getFirstChildOfFirstChild(e,t){let i=e;for(;i;){const e=i.parent;if(!e||!i.firstChild)return null;if(e.rowGroupColumn===t)return e;i=e}return null}},class extends tt{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){ie(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",(()=>this.onRowDataUpdated())))}isActive(){const e=this.gos.exists("getRowId");return!this.gos.get("resetRowDataOnUpdate")&&e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const i=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction:s,rowsInserted:n}=i.updateRowData(t);let o=!1;this.gos.get("suppressMaintainUnsortedOrder")||(o=i.updateRowOrderFromRowData(e)),this.clientSideRowModel.afterImmutableDataChange(s,o||n)}createTransactionForRowData(e){if(!ie(this.gos))return O("ImmutableService only works with ClientSideRowModel"),null;const t=Ie(this.gos);if(null==t)return O("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;const i=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),s=[],n=[],o=[];return _(e)&&e.forEach((e=>{const s=t({data:e,level:0}),r=i[s];if(r){r.data!==e&&n.push(e),i[s]=void 0}else o.push(e)})),mt(i,((e,t)=>{t&&s.push(t.data)})),{remove:s,update:n,add:o}}onRowDataUpdated(){const e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}}]},hh={version:lh,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[th],apiFunctions:{onGroupExpandedOrCollapsed:function(e){e.expansionService.onGroupExpandedOrCollapsed()},refreshClientSideRowModel:function(e,t){e.rowModelHelperService?.getClientSideRowModel()?.refreshModel(t)},isRowDataEmpty:function(e){return e.rowModelHelperService?.getClientSideRowModel()?.isEmpty()??!0},forEachLeafNode:function(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachLeafNode(t)},forEachNodeAfterFilter:function(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilter(t)},forEachNodeAfterFilterAndSort:function(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilterAndSort(t)},resetRowHeights:function(e){e.columnModel.isAutoRowHeightActive()?F("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height."):e.rowModelHelperService?.getClientSideRowModel()?.resetRowHeights()},applyTransaction:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>e.rowModelHelperService?.getClientSideRowModel()?.updateRowData(t)))},applyTransactionAsync:function(e,t,i){e.frameworkOverrides.wrapIncoming((()=>e.rowModelHelperService?.getClientSideRowModel()?.batchUpdateRowData(t,i)))},flushAsyncTransactions:function(e){e.frameworkOverrides.wrapIncoming((()=>e.rowModelHelperService?.getClientSideRowModel()?.flushAsyncTransactions()))},getBestCostNodeSelection:function(e){return e.selectionService.getBestCostNodeSelection()}},dependantModules:[ch,ih]},dh={version:lh,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[ch,hh]},uh=class extends tt{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return null!=e&&e.length||(e=this.getDefaultFileName()),-1===e.indexOf(".")?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},ph=class{constructor(e){this.groupColumns=[];const{columnModel:t,funcColsService:i,columnNameService:s,valueService:n,gos:o,processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.columnModel=t,this.funcColsService=i,this.columnNameService=s,this.valueService=n,this.gos=o,this.processCellCallback=r,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){this.groupColumns=e.filter((e=>!!e.getColDef().showRowGroup))}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,s,n){const o=this.gos.get("groupHideOpenParents")&&!n.footer||!this.shouldRenderGroupSummaryCell(n,e,t)?this.valueService.getValue(e,n):this.createValueForGroupNode(e,n);return this.processCell({accumulatedRowIndex:i,rowNode:n,column:e,value:o,processCellCallback:this.processCellCallback,type:s})}shouldRenderGroupSummaryCell(e,t,i){if(!(e&&e.group))return!1;if(-1!==this.groupColumns.indexOf(t)){const i=e.groupData?.[t.getId()],s=this.gos.get("suppressGroupMaintainValueType");if(s&&null!=i||!s&&void 0!==i)return!0;if(se(this.gos)&&e.group)return!0;if(e.footer&&-1===e.level){const e=t.getColDef();return null==e||!0===e.showRowGroup||e.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}const s=De(this.gos,this.columnModel.isPivotMode());return 0===i&&s}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const i=this.gos.get("treeData"),s=this.gos.get("suppressGroupMaintainValueType"),n=t=>{if(i||s)return t.key;const n=t.groupData?.[e.getId()];return n&&t.rowGroupColumn&&!1!==t.rowGroupColumn.getColDef().useValueFormatterForExport?this.valueService.formatValue(t.rowGroupColumn,t,n)??n:n},o=t.footer,r=[n(t)];if(!Me(this.gos))for(;t.parent;)t=t.parent,r.push(n(t));const a=r.reverse().join(" -> ");return o?`Total ${a}`:a}processCell(e){const{accumulatedRowIndex:t,rowNode:i,column:s,value:n,processCellCallback:o,type:r}=e;return o?{value:o(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:s,node:i,value:n,type:r,parseValue:e=>this.valueService.parseValue(s,i,e,this.valueService.getValue(s,i)),formatValue:e=>this.valueService.formatValue(s,i,e)??e}))??""}:!1!==s.getColDef().useValueFormatterForExport?{value:n??"",valueFormatted:this.valueService.formatValue(s,i,n)}:{value:n??""}}},gh=class{static download(e,t){const i=document.defaultView||window;if(!i)return void F("There is no `window` associated with the current `document`");const s=document.createElement("a"),n=i.URL.createObjectURL(t);s.setAttribute("href",n),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(s),i.setTimeout((()=>{i.URL.revokeObjectURL(n)}),0)}},mh=class extends ph{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&("string"===typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach((e=>{this.beginNewLine(),e.forEach(((e,t)=>{0!==t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e.data.value||""),e.mergeAcross&&this.appendEmptyCells(e.mergeAcross)}))})))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,s){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(s)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){0!=t&&(this.result+=this.columnSeparator);const s=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(s.valueFormatted??s.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(null===e||void 0===e)return'""';let t;"string"===typeof e?t=e:"function"===typeof e.toString?t=e.toString():(F("unknown value type during csv conversion"),t="");return'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1}};var fh="32.3.3",yh={version:fh,moduleName:"@ag-grid-community/csv-export-core",beans:[class extends uh{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return void F("Export cancelled. Export is not allowed as per your configuration.");const t=this.getMergedParams(e),i=this.getData(t),s=new Blob(["\ufeff",i],{type:"text/plain"}),n="function"===typeof t.fileName?t.fileName(this.gos.getGridCommonParams()):t.fileName;gh.download(this.getFileName(n),s)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Object.assign({},e):this.getMergedParams(e);return this.getData(t)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,columnNameService:i,funcColsService:s,valueService:n,gos:o}=this,{processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:h,columnSeparator:d}=e;return new mh({columnModel:t,columnNameService:i,funcColsService:s,valueService:n,gos:o,processCellCallback:r||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:h||!1,columnSeparator:d||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}},class extends tt{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{allColumns:i,columnKeys:s,skipRowGroups:n}=t,o=this.getColumnsToExport(i,n,s),r=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>t.reduce(((e,t)=>t(e)),e)}(this.prepareSession(o),this.prependContent(t),this.exportColumnGroups(t,o),this.exportHeaders(t,o),this.processPinnedTopRows(t,o),this.processRows(t,o),this.processPinnedBottomRows(t,o),this.appendContent(t));return r(e).parse()}processRow(e,t,i,s){const n=t.shouldRowBeSkipped||(()=>!1),o=this.gos.get("groupRemoveSingleChildren"),r=this.gos.get("groupRemoveLowestSingleChildren"),a=null!=t.rowPositions||!!t.onlySelected,l=this.gos.get("groupHideOpenParents")&&!a,c=this.columnModel.isPivotMode()?s.leafGroup:!s.group,h=!!s.footer,d=r&&s.leafGroup,u=1===s.allChildrenCount&&1===s.childrenAfterGroup?.length&&(o||d);if(!c&&!h&&(t.skipRowGroups||u||l)||t.onlySelected&&!s.isSelected()||t.skipPinnedTop&&"top"===s.rowPinned||t.skipPinnedBottom&&"bottom"===s.rowPinned)return;if(-1===s.level&&!c&&!h)return;if(n(this.gos.addGridCommonParams({node:s})))return;const p=e.onNewBodyRow(s);if(i.forEach(((e,t)=>{p.onColumn(e,t,s)})),t.getCustomContentBelowRow){const i=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:s}));i&&e.addCustomContent(i)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const s=new Xt,n=this.visibleColsService.createGroups({columns:t,idCreator:s,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(n,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const e=i.onNewHeaderRow();t.forEach(((t,i)=>{e.onColumn(t,i,void 0)}))}return i}}processPinnedTopRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter((e=>"top"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>this.pinnedRowModel.getPinnedTopRow(e.rowIndex))).forEach(s):this.pinnedRowModel.forEachPinnedRow("top",s),i}}processRows(e,t){return i=>{const s=this.rowModel,n=ie(this.gos),o=se(this.gos),r=!n&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter((e=>null==e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>s.getRow(e.rowIndex))).forEach(a);else if(this.columnModel.isPivotMode())n?s.forEachPivotNode(a,!0):o?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);else if(e.onlySelectedAllPages||r){const e=this.selectionService.getSelectedNodes();this.replicateSortedOrder(e),e.forEach(a)}else"all"===l?s.forEachNode(a):n||o?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);return i}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),i=(e,s)=>null!=e.rowIndex&&null!=s.rowIndex?e.rowIndex-s.rowIndex:e.level===s.level?e.parent?.id===s.parent?.id?this.rowNodeSorter.compareRowNodes(t,{rowNode:e,currentPos:e.rowIndex??-1},{rowNode:s,currentPos:s.rowIndex??-1}):i(e.parent,s.parent):e.level>s.level?i(e.parent,s):i(e,s.parent);e.sort(i)}processPinnedBottomRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter((e=>"bottom"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>this.pinnedRowModel.getPinnedBottomRow(e.rowIndex))).forEach(s):this.pinnedRowModel.forEachPinnedRow("bottom",s),i}}getColumnsToExport(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const s=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getColsForKeys(i);const n=this.gos.get("treeData");let o=[];return o=e&&!s?this.columnModel.getCols():this.visibleColsService.getAllCols(),t&&!n&&(o=o.filter((e=>ht(e)||dt(e)))),o}recursivelyAddHeaderGroups(e,t,i){const s=[];e.forEach((e=>{const t=e;t.getChildren&&t.getChildren().forEach((e=>s.push(e)))})),e.length>0&&$t(e[0])&&this.doAddHeaderHeader(t,e,i),s&&s.length>0&&this.recursivelyAddHeaderGroups(s,t,i)}doAddHeaderHeader(e,t,i){const s=e.onNewHeaderGroupingRow();let n=0;t.forEach((e=>{const t=e;let o;o=i?i(this.gos.addGridCommonParams({columnGroup:t})):this.columnNameService.getDisplayNameForColumnGroup(t,"header");const r=t.getLeafColumns().reduce(((e,t,i,s)=>{let n=ze(e);return"open"===t.getColumnGroupShow()?n&&null==n[1]||(n=[i],e.push(n)):n&&null==n[1]&&(n[1]=i-1),i===s.length-1&&n&&null==n[1]&&(n[1]=i),e}),[]);s.onColumn(t,o||"",n++,t.getLeafColumns().length-1,r)}))}}]},vh={version:fh,moduleName:"@ag-grid-community/csv-export",dependantModules:[yh,{version:fh,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:function(e,t){return e.csvCreator?.getDataAsCsv(t)},exportDataAsCsv:function(e,t){e.csvCreator?.exportDataAsCsv(t)}},dependantModules:[yh]}]};var Ch=async e=>{const t=new Blob([e]),{size:i,content:s}=await(async e=>{let t=0;const i=[],s=new WritableStream({write:e=>{i.push(e),t+=e.length}}),n=new ReadableStream({start:t=>{const i=new FileReader;i.onload=e=>{e.target?.result&&t.enqueue(e.target.result),t.close()},i.readAsArrayBuffer(e)}}),o=new window.CompressionStream("deflate-raw");return await n.pipeThrough(o).pipeTo(s),{size:t,content:new Blob(i)}})(t);return{size:i,content:new Uint8Array(await s.arrayBuffer())}};function bh(e,t){let i="";for(let s=0;s<t;s++)i+=String.fromCharCode(255&e),e>>>=8;return i}var wh=e=>{if(!e.length)return 0;let t=~0,i=0,s=0,n=0;for(let o=0;o<e.length;o++)i=e[o],s=255&(t^i),n=xh[s],t=t>>>8^n;return~t},Sh=e=>e.length?wh("string"===typeof e?(new TextEncoder).encode(e):e):0,xh=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),Mh=(e,t,i,s,n,o)=>{const{content:r,path:a,created:l}=e,c=(e=>{let t=e.getHours();return t<<=6,t|=e.getMinutes(),t<<=5,t|=e.getSeconds()/2,t})(l),h=(e=>{let t=e.getFullYear()-1980;return t<<=4,t|=e.getMonth()+1,t<<=5,t|=e.getDate(),t})(l),d=Sh(n),u=void 0!==o?o:s,p=Wt(a),g=p!==a;let m="";if(g){const e=bh(1,1)+bh(Sh(p),4)+p;m="up"+bh(e.length,2)+e}const f="\x14\0"+(g?"\0\b":"\0\0")+bh(t?8:0,2)+bh(c,2)+bh(h,2)+bh(u?d:0,4)+bh(o??s,4)+bh(s,4)+bh(p.length,2)+bh(m.length,2),y="PK\x03\x04"+f+p+m,v="PK\x01\x02\x14\0"+f+"\0\0\0\0\0\0"+(r?"\0\0\0\0":"\x10\0\0\0")+bh(i,4)+p+m;return{localFileHeader:Uint8Array.from(y,(e=>e.charCodeAt(0))),centralDirectoryHeader:Uint8Array.from(v,(e=>e.charCodeAt(0)))}},Dh=e=>{let t;if("string"===typeof e){const i=atob(e.split(";base64,")[1]);t=Uint8Array.from(i,(e=>e.charCodeAt(0)))}else t=e;return{size:t.length,content:t}},Ih=async(e,t)=>{const{content:i}=e,{size:s,content:n}=i?Dh(i):{size:0,content:Uint8Array.from([])};let o,r,a=!1;if("file"===e.type&&n&&s>0){const e=await Ch(n);o=e.content,r=e.size,a=!0}return{...Mh(e,a,t,s,n,r),content:o||n,isCompressed:a}},Rh=(e,t)=>{const{content:i}=e,{content:s}=i?Dh(i):{content:Uint8Array.from([])};return{...Mh(e,!1,t,s.length,s,void 0),content:s,isCompressed:!1}},Eh=class{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}static addFile(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.files.push({path:e,created:new Date,content:i?t:(new TextEncoder).encode(t),isBase64:i,type:"file"})}static async getZipFile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/zip";const t=await this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})}static getUncompressedZipFile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/zip";const t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(e){let t=0,i=0;for(const c of e){const{localFileHeader:e,centralDirectoryHeader:s,content:n}=c;t+=e.length+n.length,i+=s.length}const s=new Uint8Array(t),n=new Uint8Array(i);let o=0,r=0;for(const c of e){const{localFileHeader:e,centralDirectoryHeader:t,content:i}=c;s.set(e,o),o+=e.length,s.set(i,o),o+=i.length,n.set(t,r),r+=t.length}const a=((e,t,i)=>{const s="PK\x05\x06\0\0\0\0"+bh(e,2)+bh(e,2)+bh(t,4)+bh(i,4)+"\0\0";return Uint8Array.from(s,(e=>e.charCodeAt(0)))})(e.length,i,t),l=new Uint8Array(s.length+n.length+a.length);return l.set(s),l.set(n,s.length),l.set(a,s.length+n.length),l}static async buildCompressedFileStream(){const e=[...this.folders,...this.files],t=[];let i=0;for(const s of e){const e=await Ih(s,i),{localFileHeader:n,content:o}=e;t.push(e),i+=n.length+o.length}return this.packageFiles(t)}static buildFileStream(){const e=[...this.folders,...this.files],t=[];let i=0;for(const s of e){const e=Rh(s,i),{localFileHeader:n,content:o}=e;t.push(e),i+=n.length+o.length}return this.packageFiles(t)}};Eh.folders=[],Eh.files=[];var Ah=class extends sl{wireBeans(e){this.beans=e}constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){_(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();Y(this.params.datasource.getRows)?F("datasource is missing getRows method"):window.setTimeout((()=>{this.params.datasource.getRows(e)}),0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,i){this.rowNodes.forEach(((s,n)=>{this.startRow+n<i&&e(s,t.next())}))}getLastAccessed(){return this.lastAccessed}getRow(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(this.lastAccessed=this.params.lastAccessedSequence.next());const t=e-this.startRow;return this.rowNodes[t]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,i=new _n(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach(((t,i)=>{const s=e.rowData?e.rowData[i]:void 0;!t.id&&t.alreadyRendered&&s&&(this.rowNodes[i]=new _n(this.beans),this.rowNodes[i].setRowIndex(t.rowIndex),this.rowNodes[i].setRowTop(t.rowTop),this.rowNodes[i].setRowHeight(t.rowHeight),t.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[i],s,this.startRow+i)}));const t=null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach((e=>{e.clearRowTopAndRowIndex()})),super.destroy()}},Lh=class extends tt{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Math.floor(e/this.params.blockSize);let s=this.blocks[i];if(!s){if(t)return;s=this.createBlock(i)}return s.getRow(e)}createBlock(e){const t=this.createBean(new Ah(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach((e=>e.setStateWaitingToLoad())),this.params.rowNodeBlockLoader.checkBlockToLoad())}destroy(){this.getBlocksInOrder().forEach((e=>this.destroyBlock(e))),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&N(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter((t=>t!=e));t.sort(((e,t)=>t.getLastAccessed()-e.getLastAccessed()));const i=this.params.maxBlocksInCache>0,s=i?this.params.maxBlocksInCache-1:null;t.forEach(((e,t)=>{if("needsLoading"===e.getState()&&t>=1||!!i&&t>=s){if(this.isBlockCurrentlyDisplayed(e))return;if(this.isBlockFocused(e))return;this.removeBlockFromCache(e)}}))}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;const i=e.getStartRow(),s=e.getEndRow();return t.rowIndex>=i&&t.rowIndex<s}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,i)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if("number"===typeof t&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const t=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<t&&(this.rowCount=t)}}setRowCount(e,t){this.rowCount=e,_(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new ws;this.getBlocksInOrder().forEach((i=>i.forEachNode(e,t,this.rowCount)))}getBlocksInOrder(){return vt(this.blocks).sort(((e,t)=>e.getId()-t.getId()))}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach((t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)})),e.length>0&&e.forEach((e=>this.destroyBlock(e)))}purgeCache(){this.getBlocksInOrder().forEach((e=>this.removeBlockFromCache(e))),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let s=-1,n=!1;const o=new ws;let r=!1;this.getBlocksInOrder().forEach((a=>{r||(n&&s+1!==a.getId()?r=!0:(s=a.getId(),a.forEachNode((s=>{const o=s===e||s===t;(n||o)&&i.push(s),o&&(n=!n)}),o,this.rowCount)))}));return r||n?[]:i}};var kh="32.3.3",Th={version:kh,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[class extends tt{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){"infinite"===this.gos.get("rowModelType")&&(this.rowHeight=ce(this.gos),this.addEventListeners(),this.addDestroyFunc((()=>this.destroyCache())),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&F("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",(()=>this.setDatasource(this.gos.get("datasource")))),this.addManagedPropertyListener("cacheBlockSize",(()=>this.resetCache())),this.addManagedPropertyListener("rowHeight",(()=>{this.rowHeight=ce(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()}))}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;e=!this.cacheParams||this.isSortModelDifferent(),e&&this.reset()}isSortModelDifferent(){return!q(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;null!=Ie(this.gos)||this.selectionService.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager?.getFilterModel()??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:ce(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new ws},this.infiniteCache=this.createBean(new Lh(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode((e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)})),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode((i=>{i.id===e&&(t=i)})),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(0!==this.rowHeight){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}}],dependantModules:[nl]},Ph={version:kh,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[Th,{version:kh,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[th],apiFunctions:{refreshInfiniteCache:function(e){e.rowModelHelperService?.getInfiniteRowModel()?.refreshCache()},purgeInfiniteCache:function(e){e.rowModelHelperService?.getInfiniteRowModel()?.purgeCache()},getInfiniteRowCount:function(e){return e.rowModelHelperService?.getInfiniteRowModel()?.getRowCount()}},dependantModules:[Th,sh]}]};(e=>{const t=new Map})((e=>{if(/Color$/.test(e))return"color";if(/Scale?$/.test(e))return"scale";if("spacing"===e||/(Padding|Spacing|Size|Width|Height|Radius|Indent|Start|End|Top|Bottom|Horizontal|Vertical)$/.test(e))return"length";if(/Border$/.test(e))return"border";if(/BorderStyle$/.test(e))return"borderStyle";if(/Shadow$/.test(e))return"shadow";if(/Image$/.test(e))return"image";if(/Family$/.test(e))return"fontFamily";if(/Weight$/.test(e))return"fontWeight";if(/Duration$/.test(e))return"duration";if(/ColorScheme$/.test(e))return"colorScheme";throw new Error(`"${e}" is not a valid theme parameter.`)})),"object"!==typeof window||!window||"object"!==typeof document||(window.document,document);kn.__registerModules([Sc,dh,Ph,vh],!1,void 0);var Nh=i(950),Fh=s.createContext({}),Oh=(e,t,i,s)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const n=e.newAgStackInstance();if(null==n)return;let o,r,a=!1;return n.then((e=>{a?t.destroyBean(e):(o=e,r=o.getGui(),i.appendChild(r),Gh(s,o))})),()=>{a=!0,o&&(r?.parentElement?.removeChild(r),t.destroyBean(o),s&&Gh(s,void 0))}},Gh=(e,t)=>{if(e)if(e instanceof Function){e(t)}else{e.current=t}},Bh=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((e=>null!=e&&""!==e)).join(" ")},zh=class e{constructor(){this.classesMap={};for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach((e=>{this.classesMap[e]=!0}))}setClass(t,i){if(!!this.classesMap[t]==i)return this;const s=new e;return s.classesMap={...this.classesMap},s.classesMap[t]=i,s}toString(){return Object.keys(this.classesMap).filter((e=>this.classesMap[e])).join(" ")}},Hh=e=>"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===("function"===typeof Symbol&&Symbol.for?Symbol.for("react.memo"):60115),Vh=s.version?.split(".")[0],jh="16"===Vh||"17"===Vh;var Wh=!1;var Uh=(e,t)=>{jh||!e||Wh?t():Nh.flushSync(t)};function _h(e,t,i){if(null==t||null==e)return t;if(e===t||0===t.length&&0===e.length)return e;if(i||0===e.length&&t.length>0||e.length>0&&0===t.length)return t;const s=[],n=[],o=new Map,r=new Map;for(let a=0;a<t.length;a++){const e=t[a];r.set(e.instanceId,e)}for(let a=0;a<e.length;a++){const t=e[a];o.set(t.instanceId,t),r.has(t.instanceId)&&s.push(t)}for(let a=0;a<t.length;a++){const e=t[a],i=e.instanceId;o.has(i)||n.push(e)}return s.length===e.length&&0===n.length?e:0===s.length&&n.length===t.length?t:0===s.length?n:0===n.length?s:[...s,...n]}var Yh=(0,s.forwardRef)(((e,t)=>{const{ctrlsFactory:i,context:n}=(0,s.useContext)(Fh),o=(0,s.useRef)(null),r=(0,s.useRef)(null),a=(0,s.useRef)(null),l=(0,s.useRef)(null),c=(0,s.useRef)(null),h=(0,s.useRef)(),[d,u]=(0,s.useState)(),[p,g]=(0,s.useState)(),[m,f]=(0,s.useState)(),[y,v]=(0,s.useState)((()=>new zh)),[C,b]=(0,s.useState)((()=>new zh("ag-hidden"))),[w,S]=(0,s.useState)((()=>new zh("ag-hidden"))),[x,M]=(0,s.useState)((()=>new zh("ag-invisible")));(0,s.useImperativeHandle)(t,(()=>({refresh:()=>!1}))),(0,s.useLayoutEffect)((()=>Oh(d,n,r.current)),[d]);const D=(0,s.useCallback)((t=>{if(o.current=t,!t)return void(h.current=n.destroyBean(h.current));const s={setInnerRenderer:(e,t)=>{u(e),f(t)},setChildCount:e=>g(e),addOrRemoveCssClass:(e,t)=>v((i=>i.setClass(e,t))),setContractedDisplayed:e=>S((t=>t.setClass("ag-hidden",!e))),setExpandedDisplayed:e=>b((t=>t.setClass("ag-hidden",!e))),setCheckboxVisible:e=>M((t=>t.setClass("ag-invisible",!e)))},r=i.getInstance("groupCellRendererCtrl");r&&(h.current=n.createBean(r),h.current.init(s,t,a.current,l.current,c.current,Yh,e))}),[]),I=(0,s.useMemo)((()=>`ag-cell-wrapper ${y.toString()}`),[y]),R=(0,s.useMemo)((()=>`ag-group-expanded ${C.toString()}`),[C]),E=(0,s.useMemo)((()=>`ag-group-contracted ${w.toString()}`),[w]),A=(0,s.useMemo)((()=>`ag-group-checkbox ${x.toString()}`),[x]),L=d&&d.componentFromFramework,k=L?d.componentClass:void 0,T=null==d&&null!=m,P=Ut(m,!0);return s.createElement("span",{className:I,ref:D,...e.colDef?{}:{role:h.current?.getCellAriaRole()}},s.createElement("span",{className:R,ref:l}),s.createElement("span",{className:E,ref:c}),s.createElement("span",{className:A,ref:a}),s.createElement("span",{className:"ag-group-value",ref:r},T&&s.createElement(s.Fragment,null,P),L&&s.createElement(k,{...d.params})),s.createElement("span",{className:"ag-group-child-count"},p))})),Kh=Yh,Zh=(0,s.createContext)({setMethods:()=>{}}),$h=(0,s.memo)((e=>{const{initialProps:t,addUpdateCallback:i,CustomComponentClass:n,setMethods:o}=e,[{key:r,...a},l]=(0,s.useState)(t);return(0,s.useEffect)((()=>{i((e=>l(e)))}),[]),s.createElement(Zh.Provider,{value:{setMethods:o}},s.createElement(n,{key:r,...a}))})),Qh=0;function Xh(){return"agPortalKey_"+ ++Qh}var qh=class{constructor(e,t,i,s){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!s,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Xh(),this.portalKey=Xh(),this.instanceCreated=this.isStatelessComponent()?rn.resolve(!1):new rn((e=>{this.resolveInstanceCreated=e}))}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&"function"==typeof this.componentInstance.destroy&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}addParentContainerStyleAndClasses(){if(this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(F('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses())){F('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.');this.componentInstance.getReactContainerClasses().forEach((e=>this.eParentElement.classList.add(e)))}}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return"function"===typeof Symbol&&Symbol.for}isStateless(e){return"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&null!=t[e]||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i)return void setTimeout((()=>this.callMethod(e,t)));const s=i[e];return s?s.apply(i,t):this.fallbackMethodAvailable(e)?this.fallbackMethod(e,t&&t[0]?t[0]:{}):void 0}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new rn((e=>this.createReactComponent(e)))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=e=>{this.componentInstance=e,this.addParentContainerStyleAndClasses(),this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=(0,Nh.createPortal)(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return(0,s.createElement)(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!(this.isStatelessComponent()||!this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this[`${e}Component`];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){if(this.suppressFallbackMethods)return!1;return!!this[`${e}Component`]}};function Jh(e,t,i){e.forEach((e=>{const s=t[e];s&&(i[e]=s)}))}var ed=class extends qh{constructor(){super(...arguments),this.awaitUpdateCallback=new rn((e=>{this.resolveUpdateCallback=e})),this.wrapperComponent=$h}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:e=>this.setMethods(e),addUpdateCallback:e=>{this.updateCallback=()=>(e(this.getProps()),new rn((e=>{setTimeout((()=>{e()}))}))),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Jh(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new rn((e=>this.awaitUpdateCallback.then((()=>{this.updateCallback().then((()=>e()))}))))}},td=class extends ed{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},id=class extends ed{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},sd=class extends ed{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:i,shake:s}=this;return e.label=t,e.icon=i,e.shake=s,e}},nd=class extends ed{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1}isFilterActive(){return null!=this.model}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){!1===this.expectingNewMethods&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout((()=>{this.sourceParams.filterChangedCallback()})),this.expectingNewMethods=!1,super.setMethods(e)}updateModel(e){this.setModel(e).then((()=>this.sourceParams.filterChangedCallback()))}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e}};function od(e,t){e.parentFilterInstance((i=>{(i.setModel(t)||rn.resolve()).then((()=>{e.filterParams.filterChangedCallback()}))}))}var rd=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=e=>this.updateModel(e)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Jh(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),od(this.floatingFilterParams,e)}},ad=class extends ed{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),od(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},ld=class extends ed{refresh(e){this.sourceParams=e,this.refreshProps()}},cd=class extends ed{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then((()=>this.sourceParams.onItemActivated()))}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},hd=class extends ed{refresh(e){this.sourceParams=e,this.refreshProps()}},dd=class extends ed{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},ud=class extends ed{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function pd(){F("As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.")}var gd=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||1e3}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter((t=>t!==e)),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout((()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)})),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();if(this.destroyed)t(null);else if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout((()=>{this.waitForInstance(e,t,i)}))}}},md=(0,s.memo)((e=>{let{ctrl:t}=e;const i=t.isAlive(),{context:n}=(0,s.useContext)(Fh),o=i?t.getColId():void 0,[r,a]=(0,s.useState)(),l=(0,s.useRef)(),c=(0,s.useRef)(null),h=(0,s.useRef)(null),d=(0,s.useRef)(null),u=(0,s.useRef)(),p=(0,s.useRef)();i&&!p.current&&(p.current=new bi((()=>c.current)));const g=(0,s.useCallback)((e=>{if(c.current=e,l.current=e?n.createBean(new li):n.destroyBean(l.current),!e||!i)return;const s={setWidth:e=>{c.current&&(c.current.style.width=e)},addOrRemoveCssClass:(e,t)=>p.current.addOrRemoveCssClass(e,t),setAriaSort:e=>{c.current&&(e?Fi(c.current,e):Oi(c.current))},setUserCompDetails:e=>a(e),getUserCompInstance:()=>u.current||void 0};t.setComp(s,e,h.current,d.current,l.current);const o=t.getSelectAllGui();h.current?.insertAdjacentElement("afterend",o),l.current.addDestroyFunc((()=>o.remove()))}),[]);(0,s.useLayoutEffect)((()=>Oh(r,n,d.current,u)),[r]),(0,s.useEffect)((()=>{t.setDragSource(c.current)}),[r]);const m=(0,s.useMemo)((()=>!!(r?.componentFromFramework&&Hh(r.componentClass))),[r]),f=r&&r.componentFromFramework,y=r&&r.componentClass;return s.createElement("div",{ref:g,className:"ag-header-cell","col-id":o,role:"columnheader"},s.createElement("div",{ref:h,className:"ag-header-cell-resize",role:"presentation"}),s.createElement("div",{ref:d,className:"ag-header-cell-comp-wrapper",role:"presentation"},f&&m&&s.createElement(y,{...r.params}),f&&!m&&s.createElement(y,{...r.params,ref:u})))})),fd=(0,s.memo)((e=>{let{ctrl:t}=e;const{context:i,gos:n}=(0,s.useContext)(Fh),[o,r]=(0,s.useState)((()=>new zh("ag-header-cell","ag-floating-filter"))),[a,l]=(0,s.useState)((()=>new zh)),[c,h]=(0,s.useState)((()=>new zh("ag-floating-filter-button","ag-hidden"))),[d,u]=(0,s.useState)("false"),[p,g]=(0,s.useState)(),[,m]=(0,s.useState)(1),f=(0,s.useRef)(),y=(0,s.useRef)(null),v=(0,s.useRef)(null),C=(0,s.useRef)(null),b=(0,s.useRef)(null),w=(0,s.useRef)(),S=(0,s.useRef)(),x=e=>{null!=e&&w.current&&w.current(e)},M=(0,s.useCallback)((e=>{if(y.current=e,f.current=e?i.createBean(new li):i.destroyBean(f.current),!e)return;S.current=new rn((e=>{w.current=e}));const s={addOrRemoveCssClass:(e,t)=>r((i=>i.setClass(e,t))),addOrRemoveBodyCssClass:(e,t)=>l((i=>i.setClass(e,t))),setButtonWrapperDisplayed:e=>{h((t=>t.setClass("ag-hidden",!e))),u(e?"false":"true")},setWidth:e=>{y.current&&(y.current.style.width=e)},setCompDetails:e=>g(e),getFloatingFilterComp:()=>S.current?S.current:null,setMenuIcon:e=>b.current?.appendChild(e)};t.setComp(s,e,b.current,v.current,f.current)}),[]);(0,s.useLayoutEffect)((()=>Oh(p,i,v.current,x)),[p]);const D=(0,s.useMemo)((()=>o.toString()),[o]),I=(0,s.useMemo)((()=>a.toString()),[a]),R=(0,s.useMemo)((()=>c.toString()),[c]),E=(0,s.useMemo)((()=>!!(p&&p.componentFromFramework&&Hh(p.componentClass))),[p]),A=(0,s.useMemo)((()=>n.get("reactiveCustomComponents")),[]),L=(0,s.useMemo)((()=>{if(p){if(A){const e=new rd(p.params,(()=>m((e=>e+1))));return x(e),e}p.componentFromFramework&&pd()}}),[p]),k=L?.getProps(),T=p&&p.componentFromFramework,P=p&&p.componentClass;return s.createElement("div",{ref:M,className:D,role:"gridcell"},s.createElement("div",{ref:v,className:I,role:"presentation"},T&&!A&&s.createElement(P,{...p.params,ref:E?()=>{}:x}),T&&A&&s.createElement(Zh.Provider,{value:{setMethods:e=>L.setMethods(e)}},s.createElement(P,{...k}))),s.createElement("div",{ref:C,"aria-hidden":d,className:R,role:"presentation"},s.createElement("button",{ref:b,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))})),yd=(0,s.memo)((e=>{let{ctrl:t}=e;const{context:i}=(0,s.useContext)(Fh),[n,o]=(0,s.useState)((()=>new zh)),[r,a]=(0,s.useState)((()=>new zh)),[l,c]=(0,s.useState)("false"),[h,d]=(0,s.useState)(),[u,p]=(0,s.useState)(),g=(0,s.useMemo)((()=>t.getColId()),[]),m=(0,s.useRef)(),f=(0,s.useRef)(null),y=(0,s.useRef)(null),v=(0,s.useRef)(null),C=(0,s.useRef)(),b=(0,s.useCallback)((e=>{if(f.current=e,m.current=e?i.createBean(new li):i.destroyBean(m.current),!e)return;const s={setWidth:e=>{f.current&&(f.current.style.width=e)},addOrRemoveCssClass:(e,t)=>o((i=>i.setClass(e,t))),setHeaderWrapperHidden:e=>{const t=v.current;t&&(e?t.style.setProperty("display","none"):t.style.removeProperty("display"))},setHeaderWrapperMaxHeight:e=>{const t=v.current;t&&(null!=e?t.style.setProperty("max-height",`${e}px`):t.style.removeProperty("max-height"),t.classList.toggle("ag-header-cell-comp-wrapper-limited-height",null!=e))},setUserCompDetails:e=>p(e),setResizableDisplayed:e=>{a((t=>t.setClass("ag-hidden",!e))),c(e?"false":"true")},setAriaExpanded:e=>d(e),getUserCompInstance:()=>C.current||void 0};t.setComp(s,e,y.current,v.current,m.current)}),[]);(0,s.useLayoutEffect)((()=>Oh(u,i,v.current)),[u]),(0,s.useEffect)((()=>{f.current&&t.setDragSource(f.current)}),[u]);const w=(0,s.useMemo)((()=>!!(u?.componentFromFramework&&Hh(u.componentClass))),[u]),S=(0,s.useMemo)((()=>"ag-header-group-cell "+n.toString()),[n]),x=(0,s.useMemo)((()=>"ag-header-cell-resize "+r.toString()),[r]),M=u&&u.componentFromFramework,D=u&&u.componentClass;return s.createElement("div",{ref:b,className:S,"col-id":g,role:"columnheader","aria-expanded":h},s.createElement("div",{ref:v,className:"ag-header-cell-comp-wrapper",role:"presentation"},M&&w&&s.createElement(D,{...u.params}),M&&!w&&s.createElement(D,{...u.params,ref:C})),s.createElement("div",{ref:y,"aria-hidden":l,className:x}))})),vd=(0,s.memo)((e=>{let{ctrl:t}=e;const{context:i}=(0,s.useContext)(Fh),{topOffset:n,rowHeight:o}=(0,s.useMemo)((()=>t.getTopAndHeight()),[]),r=t.getAriaRowIndex(),a=t.getHeaderRowClass(),[l,c]=(0,s.useState)((()=>o+"px")),[h,d]=(0,s.useState)((()=>n+"px")),u=(0,s.useRef)(null),p=(0,s.useRef)(null),[g,m]=(0,s.useState)((()=>t.getHeaderCtrls())),f=(0,s.useRef)(),y=(0,s.useRef)(null),v=(0,s.useCallback)((e=>{if(y.current=e,f.current=e?i.createBean(new li):i.destroyBean(f.current),!e)return;const s={setHeight:e=>c(e),setTop:e=>d(e),setHeaderCtrls:(e,t,i)=>{p.current=u.current,u.current=e;const s=_h(p.current,e,t);s!==p.current&&Uh(i,(()=>m(s)))},setWidth:e=>{y.current&&(y.current.style.width=e)}};t.setComp(s,f.current,!1)}),[]),C=(0,s.useMemo)((()=>({height:l,top:h})),[l,h]),b=(0,s.useCallback)((e=>{switch(t.getType()){case lr.COLUMN_GROUP:return s.createElement(yd,{ctrl:e,key:e.instanceId});case lr.FLOATING_FILTER:return s.createElement(fd,{ctrl:e,key:e.instanceId});default:return s.createElement(md,{ctrl:e,key:e.instanceId})}}),[]);return s.createElement("div",{ref:v,className:a,role:"row",style:C,"aria-rowindex":r},g.map(b))})),Cd=(0,s.memo)((e=>{let{pinned:t}=e;const[i,n]=(0,s.useState)(!0),[o,r]=(0,s.useState)([]),{context:a}=(0,s.useContext)(Fh),l=(0,s.useRef)(null),c=(0,s.useRef)(null),h=(0,s.useRef)(),d="left"===t,u="right"===t,p=!d&&!u,g=(0,s.useCallback)((e=>{if(l.current=e,h.current=e?a.createBean(new Er(t)):a.destroyBean(h.current),!e)return;const i={setDisplayed:n,setCtrls:e=>r(e),setCenterWidth:e=>{c.current&&(c.current.style.width=e)},setViewportScrollLeft:e=>{l.current&&(l.current.scrollLeft=e)},setPinnedContainerWidth:e=>{l.current&&(l.current.style.width=e,l.current.style.minWidth=e,l.current.style.maxWidth=e)}};h.current.setComp(i,l.current)}),[]),m=i?"":"ag-hidden",f=()=>o.map((e=>s.createElement(vd,{ctrl:e,key:e.instanceId})));return s.createElement(s.Fragment,null,d&&s.createElement("div",{ref:g,className:"ag-pinned-left-header "+m,"aria-hidden":!i,role:"rowgroup"},f()),u&&s.createElement("div",{ref:g,className:"ag-pinned-right-header "+m,"aria-hidden":!i,role:"rowgroup"},f()),p&&s.createElement("div",{ref:g,className:"ag-header-viewport "+m,role:"presentation"},s.createElement("div",{ref:c,className:"ag-header-container",role:"rowgroup"},f())))})),bd=(0,s.memo)((()=>{const[e,t]=(0,s.useState)((()=>new zh)),[i,n]=(0,s.useState)(),{context:o}=(0,s.useContext)(Fh),r=(0,s.useRef)(null),a=(0,s.useRef)(),l=(0,s.useCallback)((e=>{if(r.current=e,a.current=e?o.createBean(new hr):o.destroyBean(a.current),!e)return;const i={addOrRemoveCssClass:(e,i)=>t((t=>t.setClass(e,i))),setHeightAndMinHeight:e=>n(e)};a.current.setComp(i,e,e)}),[]),c=(0,s.useMemo)((()=>"ag-header "+e.toString()),[e]),h=(0,s.useMemo)((()=>({height:i,minHeight:i})),[i]);return s.createElement("div",{ref:l,className:c,style:h,role:"presentation"},s.createElement(Cd,{pinned:"left"}),s.createElement(Cd,{pinned:null}),s.createElement(Cd,{pinned:"right"}))})),wd=(e,t)=>{(0,s.useEffect)((()=>{const i=t.current;if(i){const t=i.parentElement;if(t){const s=document.createComment(e);return t.insertBefore(s,i),()=>{t.removeChild(s)}}}}),[e])},Sd=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new rn((e=>{this.resolveInstanceCreated=e})),this.onValueChange=e=>this.updateValue(e),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Jh(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},xd=(0,s.memo)((e=>{const[t,i]=(0,s.useState)(),{context:n,popupService:o,localeService:r,gos:a,editService:l}=(0,s.useContext)(Fh);return(e=>{const t=(0,s.useRef)(e),i=(0,s.useRef)(),n=(0,s.useRef)(!1),o=(0,s.useRef)(!1),[,r]=(0,s.useState)(0);n.current&&(o.current=!0),(0,s.useEffect)((()=>(n.current||(i.current=t.current(),n.current=!0),r((e=>e+1)),()=>{o.current&&i.current?.()})),[])})((()=>{const{editDetails:t,cellCtrl:s,eParentCell:c}=e,{compDetails:h}=t,d=a.get("stopEditingWhenCellsLoseFocus"),u=n.createBean(l.createPopupEditorWrapper(h.params)),p=u.getGui();if(e.jsChildComp){const t=e.jsChildComp.getGui();t&&p.appendChild(t)}const g={column:s.getColumn(),rowNode:s.getRowNode(),type:"popupCellEditor",eventSource:c,ePopup:p,position:t.popupPosition,keepWithinBounds:!0},m=o.positionPopupByComponent.bind(o,g),f=r.getLocaleTextFunc(),y=o.addPopup({modal:d,eChild:p,closeOnEsc:!0,closedCallback:()=>{s.onPopupEditorClosed()},anchorToElement:c,positionCallback:m,ariaLabel:f("ariaLabelCellEditor","Cell Editor")}),v=y?y.hideFunc:void 0;return i(u),e.jsChildComp?.afterGuiAttached?.(),()=>{v?.(),n.destroyBean(u)}})),s.createElement(s.Fragment,null,t&&e.wrappedContent&&(0,Nh.createPortal)(e.wrappedContent,t.getGui()))})),Md=(e,t,i,n,o,r)=>{const{context:a}=(0,s.useContext)(Fh),l=(0,s.useCallback)((()=>{const e=o.current;if(!e)return;const t=e.getGui();t&&t.parentElement&&t.parentElement.removeChild(t),a.destroyBean(e),o.current=void 0}),[]);(0,s.useEffect)((()=>{const s=null!=e,n=e?.compDetails&&!e.compDetails.componentFromFramework;if(!(s&&n&&!(t&&null==i)))return void l();const a=e.compDetails;if(o.current){const t=o.current,i=!!(null!=t.refresh&&0==e.force)&&t.refresh(a.params);if(!0===i||void 0===i)return;l()}const c=a.newAgStackInstance();null!=c&&c.then((e=>{if(!e)return;const s=e.getGui();if(!s)return;(t?i:r.current).appendChild(s),o.current=e}))}),[e,t,n]),(0,s.useEffect)((()=>l),[])},Dd=(e,t,i)=>{const n=e.compProxy;return s.createElement(s.Fragment,null,n?((e,t,i)=>{const{compProxy:n}=e;i(n);const o=n.getProps(),r=Hh(t);return s.createElement(Zh.Provider,{value:{setMethods:e=>n.setMethods(e)}},r?s.createElement(t,{...o}):s.createElement(t,{...o,ref:e=>n.setRef(e)}))})(e,t,i):s.createElement(t,{...e.compDetails.params,ref:i}))},Id=(0,s.memo)((e=>{let{cellCtrl:t,printLayout:i,editingRow:n}=e;const{context:o}=(0,s.useContext)(Fh),{colIdSanitised:r,instanceId:a}=t,l=(0,s.useRef)(),[c,h]=(0,s.useState)((()=>t.isCellRenderer()?void 0:{compDetails:void 0,value:t.getValueToDisplay(),force:!1})),[d,u]=(0,s.useState)(),[p,g]=(0,s.useState)(1),[m,f]=(0,s.useState)(),[y,v]=(0,s.useState)(!1),[C,b]=(0,s.useState)(!1),[w,S]=(0,s.useState)(!1),[x,M]=(0,s.useState)(),D=(0,s.useMemo)((()=>t.isForceWrapper()),[t]),I=(0,s.useMemo)((()=>t.getCellAriaRole()),[t]),R=(0,s.useRef)(null),E=(0,s.useRef)(null),A=(0,s.useRef)(),L=(0,s.useRef)(),k=(0,s.useRef)(),T=(0,s.useRef)([]),P=(0,s.useRef)(),[N,F]=(0,s.useState)(0),O=(0,s.useCallback)((e=>{P.current=e,F((e=>e+1))}),[]),G=D||null!=c&&(y||w||C),B=(0,s.useCallback)((e=>{if(L.current=e,e){const i=e.isCancelBeforeStart&&e.isCancelBeforeStart();setTimeout((()=>{i?(t.stopEditing(!0),t.focusCell(!0)):t.cellEditorAttached()}))}}),[t]),z=(0,s.useRef)();z.current||(z.current=new bi((()=>R.current))),Md(c,G,P.current,N,A,R);const H=(0,s.useRef)();(0,s.useLayoutEffect)((()=>{const e=H.current,t=c;if(H.current=c,null==e||null==e.compDetails||null==t||null==t.compDetails)return;const i=e.compDetails,s=t.compDetails;if(i.componentClass!=s.componentClass)return;if(null==E.current?.refresh)return;1!=E.current.refresh(s.params)&&g((e=>e+1))}),[c]),(0,s.useLayoutEffect)((()=>{if(!(d&&!d.compDetails.componentFromFramework))return;const e=d.compDetails,t=!0===d.popup,i=e.newAgStackInstance();return i.then((e=>{if(!e)return;const i=e.getGui();if(B(e),!t){const t=(D?k:R).current;t?.appendChild(i),e.afterGuiAttached&&e.afterGuiAttached()}M(e)})),()=>{i.then((e=>{const t=e.getGui();o.destroyBean(e),B(void 0),M(void 0),t?.parentElement?.removeChild(t)}))}}),[d]);const V=(0,s.useCallback)((e=>{if(k.current=e,!e)return T.current.forEach((e=>e())),void(T.current=[]);const i=t=>{if(t){const i=t.getGui();e.insertAdjacentElement("afterbegin",i),T.current.push((()=>{o.destroyBean(t),hs(i)}))}return t};if(y){i(t.createSelectionCheckbox())}w&&i(t.createDndSource()),C&&i(t.createRowDragComp())}),[t,o,w,C,y]),j=(0,s.useCallback)((e=>{if(R.current=e,l.current=e?o.createBean(new li):o.destroyBean(l.current),!e||!t)return;const s={addOrRemoveCssClass:(e,t)=>z.current.addOrRemoveCssClass(e,t),setUserStyles:e=>f(e),getFocusableElement:()=>R.current,setIncludeSelection:e=>v(e),setIncludeRowDrag:e=>b(e),setIncludeDndSource:e=>S(e),getCellEditor:()=>L.current||null,getCellRenderer:()=>E.current??A.current,getParentOfValue:()=>P.current??k.current??R.current,setRenderDetails:(e,t,i)=>{h((s=>s?.compDetails!==e||s?.value!==t||s?.force!==i?{value:t,compDetails:e,force:i}:s))},setEditDetails:(e,t,i,s)=>{if(e){let n;s?n=new Sd(e.params,(()=>g((e=>e+1)))):e.componentFromFramework&&pd(),u({compDetails:e,popup:t,popupPosition:i,compProxy:n}),t||h(void 0)}else u((e=>{e?.compProxy&&(L.current=void 0)}))}},r=k.current||void 0;t.setComp(s,e,r,i,n,l.current)}),[]),W=(0,s.useMemo)((()=>!!(c?.compDetails?.componentFromFramework&&Hh(c.compDetails.componentClass))),[c]);(0,s.useLayoutEffect)((()=>{R.current&&(z.current.addOrRemoveCssClass("ag-cell-value",!G),z.current.addOrRemoveCssClass("ag-cell-inline-editing",!!d&&!d.popup),z.current.addOrRemoveCssClass("ag-cell-popup-editing",!!d&&!!d.popup),z.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!d||!!d.popup),t.getRowCtrl()?.setInlineEditingCss(),t.shouldRestoreFocus()&&!t.isEditing()&&R.current.focus({preventScroll:!0}))}));const U=()=>s.createElement(s.Fragment,null,null!=c&&((e,t,i,n,o,r,a)=>{const{compDetails:l,value:c}=e,h=!l,d=l&&l.componentFromFramework,u=l&&l.componentClass,p=c?.toString?c.toString():c,g=()=>s.createElement(s.Fragment,null,h&&s.createElement(s.Fragment,null,p),d&&!r&&s.createElement(u,{...l.params,key:t,ref:n}),d&&r&&s.createElement(u,{...l.params,key:t}));return s.createElement(s.Fragment,null,o?s.createElement("span",{role:"presentation",id:`cell-${i}`,className:"ag-cell-value",ref:a},g()):g())})(c,p,a,E,G,W,O),null!=d&&((e,t,i,n,o)=>{const r=e.compDetails,a=r.componentClass,l=r.componentFromFramework&&!e.popup,c=r.componentFromFramework&&e.popup,h=!r.componentFromFramework&&e.popup;return s.createElement(s.Fragment,null,l&&Dd(e,a,t),c&&s.createElement(xd,{editDetails:e,cellCtrl:n,eParentCell:i,wrappedContent:Dd(e,a,t)}),h&&o&&s.createElement(xd,{editDetails:e,cellCtrl:n,eParentCell:i,jsChildComp:o}))})(d,B,R.current,t,x)),_=(0,s.useCallback)((()=>t.onFocusOut()),[]);return s.createElement("div",{ref:j,style:m,role:I,"col-id":r,onBlur:_},G?s.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:V},U()):U())})),Rd=(0,s.memo)((e=>{let{rowCtrl:t,containerType:i}=e;const{context:n,gos:o}=(0,s.useContext)(Fh),r=(0,s.useRef)(),a=(0,s.useRef)(t.getDomOrder()),l=t.isFullWidth(),c=t.getRowNode().displayed,[h,d]=(0,s.useState)((()=>c?t.getRowIndex():null)),[u,p]=(0,s.useState)((()=>t.getRowId())),[g,m]=(0,s.useState)((()=>t.getBusinessKey())),[f,y]=(0,s.useState)((()=>t.getRowStyles())),v=(0,s.useRef)(null),C=(0,s.useRef)(null),[b,w]=(0,s.useState)((()=>null)),[S,x]=(0,s.useState)(),[M,D]=(0,s.useState)((()=>c?t.getInitialRowTop(i):void 0)),[I,R]=(0,s.useState)((()=>c?t.getInitialTransform(i):void 0)),E=(0,s.useRef)(null),A=(0,s.useRef)(),L=(0,s.useRef)(!1),[k,T]=(0,s.useState)(0);(0,s.useEffect)((()=>{if(L.current||!S||k>10)return;const e=E.current?.firstChild;e?(t.setupDetailRowAutoHeight(e),L.current=!0):T((e=>e+1))}),[S,k]);const P=(0,s.useRef)();P.current||(P.current=new bi((()=>E.current)));const N=(0,s.useCallback)((e=>{if(E.current=e,r.current=e?n.createBean(new li):n.destroyBean(r.current),!e)return void t.unsetComp(i);if(!t.isAlive())return;const s={setTop:D,setTransform:R,addOrRemoveCssClass:(e,t)=>P.current.addOrRemoveCssClass(e,t),setDomOrder:e=>a.current=e,setRowIndex:d,setRowId:p,setRowBusinessKey:m,setUserStyles:y,setCellCtrls:(e,t)=>{C.current=v.current,v.current=e;const i=_h(C.current,e,a.current);i!==C.current&&Uh(t,(()=>w(i)))},showFullWidth:e=>x(e),getFullWidthCellRenderer:()=>A.current,refreshFullWidth:e=>z.current?(x((t=>({...t,params:e()}))),!0):!(!A.current||!A.current.refresh)&&A.current.refresh(e())};t.setComp(s,e,i,r.current)}),[]);(0,s.useLayoutEffect)((()=>Oh(S,n,E.current,A)),[S]);const F=(0,s.useMemo)((()=>{const e={top:M,transform:I};return Object.assign(e,f),e}),[M,I,f]),O=l&&S?.componentFromFramework,G=!l&&null!=b,B=(0,s.useMemo)((()=>!!(S?.componentFromFramework&&Hh(S.componentClass))),[S]),z=(0,s.useRef)(!1);(0,s.useEffect)((()=>{z.current=B&&!!S&&!!o.get("reactiveCustomComponents")}),[B,S]);return s.createElement("div",{ref:N,role:"row",style:F,"row-index":h,"row-id":u,"row-business-key":g},G&&b?.map((e=>s.createElement(Id,{cellCtrl:e,editingRow:t.isEditing(),printLayout:t.isPrintLayout(),key:e.instanceId}))),O&&(()=>{const e=S.componentClass;return s.createElement(s.Fragment,null,B?s.createElement(e,{...S.params}):s.createElement(e,{...S.params,ref:A}))})())})),Ed=(0,s.memo)((e=>{let{name:t}=e;const{context:i}=(0,s.useContext)(Fh),n=(0,s.useMemo)((()=>la(t)),[t]),o=(0,s.useRef)(null),r=(0,s.useRef)(null),a=(0,s.useRef)([]),l=(0,s.useRef)([]),[c,h]=(0,s.useState)((()=>[])),d=(0,s.useRef)(!1),u=(0,s.useRef)(),p=(0,s.useMemo)((()=>Bh(n.viewport)),[n]),g=(0,s.useMemo)((()=>Bh(n.container)),[n]),m="center"===n.type;wd(" AG Row Container "+t+" ",m?o:r);const f=(0,s.useCallback)((()=>m?null!=o.current&&null!=r.current:null!=r.current),[]),y=(0,s.useCallback)((()=>m?null==o.current&&null==r.current:null==r.current),[]),v=(0,s.useCallback)((()=>{if(y()&&(u.current=i.destroyBean(u.current)),f()){const e=e=>{const t=_h(l.current,a.current,d.current);t!==l.current&&(l.current=t,Uh(e,(()=>h(t))))},s={setHorizontalScroll:e=>{o.current&&(o.current.scrollLeft=e)},setViewportHeight:e=>{o.current&&(o.current.style.height=e)},setRowCtrls:t=>{let{rowCtrls:i,useFlushSync:s}=t;const n=!!s&&a.current.length>0&&i.length>0;a.current=i,e(n)},setDomOrder:t=>{d.current!=t&&(d.current=t,e(!1))},setContainerWidth:e=>{r.current&&(r.current.style.width=e)},setOffsetTop:e=>{r.current&&(r.current.style.transform=`translateY(${e})`)}};u.current=i.createBean(new ya(t)),u.current.setComp(s,r.current,o.current)}}),[f,y]),C=(0,s.useCallback)((e=>{r.current=e,v()}),[v]),b=(0,s.useCallback)((e=>{o.current=e,v()}),[v]),w=()=>s.createElement("div",{className:g,ref:C,role:"rowgroup"},c.map((e=>s.createElement(Rd,{rowCtrl:e,containerType:n.type,key:e.instanceId}))));return s.createElement(s.Fragment,null,m?s.createElement("div",{className:p,ref:b,role:"presentation"},w()):w())})),Ad=(0,s.memo)((()=>{const{context:e,resizeObserverService:t}=(0,s.useContext)(Fh),[i,n]=(0,s.useState)(""),[o,r]=(0,s.useState)(0),[a,l]=(0,s.useState)(0),[c,h]=(0,s.useState)("0px"),[d,u]=(0,s.useState)("0px"),[p,g]=(0,s.useState)("100%"),[m,f]=(0,s.useState)("0px"),[y,v]=(0,s.useState)("0px"),[C,b]=(0,s.useState)("100%"),[w,S]=(0,s.useState)(""),[x,M]=(0,s.useState)(""),[D,I]=(0,s.useState)(null),[R,E]=(0,s.useState)(""),[A,L]=(0,s.useState)(null),[k,T]=(0,s.useState)("ag-layout-normal"),P=(0,s.useRef)();P.current||(P.current=new bi((()=>N.current)));const N=(0,s.useRef)(null),F=(0,s.useRef)(null),O=(0,s.useRef)(null),G=(0,s.useRef)(null),B=(0,s.useRef)(null),z=(0,s.useRef)(null),H=(0,s.useRef)(null),V=(0,s.useRef)([]),j=(0,s.useRef)([]);wd(" AG Grid Body ",N),wd(" AG Pinned Top ",F),wd(" AG Sticky Top ",O),wd(" AG Middle ",z),wd(" AG Pinned Bottom ",H);const W=(0,s.useCallback)((i=>{if(N.current=i,!i)return V.current=e.destroyBeans(V.current),j.current.forEach((e=>e())),void(j.current=[]);if(!e)return;const s=(e,t)=>{e.appendChild(t),j.current.push((()=>e.removeChild(t)))},o=(t,i,n)=>{s(t,document.createComment(n)),s(t,(t=>{const i=e.createBean(new t);return V.current.push(i),i})(i).getGui())};o(i,Tr," AG Fake Horizontal Scroll "),o(i,Lr," AG Overlay Wrapper "),B.current&&o(B.current,Nr," AG Fake Vertical Scroll ");const a={setRowAnimationCssOnBodyViewport:n,setColumnCount:e=>{N.current&&Pi(N.current,e)},setRowCount:e=>{N.current&&ki(N.current,e)},setTopHeight:r,setBottomHeight:l,setStickyTopHeight:h,setStickyTopTop:u,setStickyTopWidth:g,setTopDisplay:S,setBottomDisplay:M,setColumnMovingCss:(e,t)=>P.current.addOrRemoveCssClass(e,t),updateLayoutClasses:T,setAlwaysVerticalScrollClass:I,setPinnedTopBottomOverflowY:E,setCellSelectableCss:(e,t)=>L(t?e:null),setBodyViewportWidth:e=>{z.current&&(z.current.style.width=e)},registerBodyViewportResizeListener:e=>{if(z.current){const i=t.observeResize(z.current,e);j.current.push((()=>i()))}},setStickyBottomHeight:f,setStickyBottomBottom:v,setStickyBottomWidth:b},c=e.createBean(new Ca);V.current.push(c),c.setComp(a,i,z.current,F.current,H.current,O.current,G.current)}),[]),U=(0,s.useMemo)((()=>Bh("ag-root","ag-unselectable",k)),[k]),_=(0,s.useMemo)((()=>Bh("ag-body-viewport",i,k,D,A)),[i,k,D,A]),Y=(0,s.useMemo)((()=>Bh("ag-body",k)),[k]),K=(0,s.useMemo)((()=>Bh("ag-floating-top",A)),[A]),Z=(0,s.useMemo)((()=>Bh("ag-sticky-top",A)),[A]),$=(0,s.useMemo)((()=>Bh("ag-sticky-bottom","0px"===m?"ag-hidden":null,A)),[A,m]),Q=(0,s.useMemo)((()=>Bh("ag-floating-bottom",A)),[A]),X=(0,s.useMemo)((()=>({height:o,minHeight:o,display:w,overflowY:R})),[o,w,R]),q=(0,s.useMemo)((()=>({height:c,top:d,width:p})),[c,d,p]),J=(0,s.useMemo)((()=>({height:m,bottom:y,width:C})),[m,y,C]),ee=(0,s.useMemo)((()=>({height:a,minHeight:a,display:x,overflowY:R})),[a,x,R]),te=e=>s.createElement(Ed,{name:e,key:`${e}-container`}),ie=e=>{let{section:t,children:i,className:n,style:o}=e;return s.createElement("div",{ref:t,className:n,role:"presentation",style:o},i.map(te))};return s.createElement("div",{ref:W,className:U,role:"treegrid"},s.createElement(bd,null),ie({section:F,className:K,style:X,children:["topLeft","topCenter","topRight","topFullWidth"]}),s.createElement("div",{className:Y,ref:B,role:"presentation"},ie({section:z,className:_,children:["left","center","right","fullWidth"]})),ie({section:O,className:Z,style:q,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),ie({section:G,className:$,style:J,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),ie({section:H,className:Q,style:ee,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))})),Ld=(0,s.forwardRef)(((e,t)=>{const{children:i,eFocusableElement:n,onTabKeyDown:o,gridCtrl:r,forceFocusOutWhenTabGuardsAreEmpty:a}=e,{context:l}=(0,s.useContext)(Fh),c=(0,s.useRef)(null),h=(0,s.useRef)(null),d=(0,s.useRef)(),u=e=>{const t=null==e?void 0:parseInt(e,10).toString();[c,h].forEach((e=>{void 0===t?e.current?.removeAttribute("tabindex"):e.current?.setAttribute("tabindex",t)}))};(0,s.useImperativeHandle)(t,(()=>({forceFocusOutOfContainer(e){d.current?.forceFocusOutOfContainer(e)}})));const p=(0,s.useCallback)((()=>{const e=c.current,t=h.current;if(e||t){if(e&&t){const i={setTabIndex:u};d.current=l.createBean(new ll({comp:i,eTopGuard:e,eBottomGuard:t,eFocusableElement:n,onTabKeyDown:o,forceFocusOutWhenTabGuardsAreEmpty:a,focusInnerElement:e=>r.focusInnerElement(e)}))}}else d.current=l.destroyBean(d.current)}),[]),g=(0,s.useCallback)((e=>{c.current=e,p()}),[p]),m=(0,s.useCallback)((e=>{h.current=e,p()}),[p]),f=e=>{const t="top"===e?al.TAB_GUARD_TOP:al.TAB_GUARD_BOTTOM;return s.createElement("div",{className:`${al.TAB_GUARD} ${t}`,role:"presentation",ref:"top"===e?g:m})};return s.createElement(s.Fragment,null,f("top"),i,f("bottom"))})),kd=(0,s.memo)(Ld),Td=(0,s.memo)((e=>{let{context:t}=e;const[i,n]=(0,s.useState)(""),[o,r]=(0,s.useState)(""),[a,l]=(0,s.useState)(""),[c,h]=(0,s.useState)(null),[d,u]=(0,s.useState)(null),[p,g]=(0,s.useState)(!1),[m,f]=(0,s.useState)(),y=(0,s.useRef)(),v=(0,s.useRef)(null),C=(0,s.useRef)(),[b,w]=(0,s.useState)(null),S=(0,s.useRef)((()=>{})),x=(0,s.useRef)(),M=(0,s.useRef)([]),D=(0,s.useCallback)((()=>{}),[]),I=(0,s.useMemo)((()=>t.isDestroyed()?null:t.getBeans()),[t]);wd(" AG Grid ",v);const R=(0,s.useCallback)((e=>{if(v.current=e,y.current=e?t.createBean(new Zl):t.destroyBean(y.current),!e||t.isDestroyed())return;const i=y.current;S.current=i.focusInnerElement.bind(i);const s={destroyGridUi:()=>{},setRtlClass:n,setGridThemeClass:r,forceFocusOutOfContainer:e=>{e||!x.current?.isDisplayed()?C.current?.forceFocusOutOfContainer(e):x.current.forceFocusOutOfContainer(e)},updateLayoutClasses:l,getFocusableContainers:()=>{const e=[],t=v.current?.querySelector(".ag-root");return t&&e.push({getGui:()=>t}),M.current.forEach((t=>{t.isDisplayed()&&e.push(t)})),e},setCursor:h,setUserSelect:u};i.setComp(s,e,e),g(!0)}),[]);(0,s.useEffect)((()=>{const e=y.current,i=v.current;if(!m||!I||!e||!b||!i)return;const s=[],{watermarkSelector:n,paginationSelector:o,sideBarSelector:r,statusBarSelector:a,gridHeaderDropZonesSelector:l}=e.getOptionalSelectors(),c=[];if(l){const e=t.createBean(new l.component),n=e.getGui();i.insertAdjacentElement("afterbegin",n),c.push(n),s.push(e)}if(r){const e=t.createBean(new r.component),i=e.getGui(),n=b.querySelector(".ag-tab-guard-bottom");n&&(n.insertAdjacentElement("beforebegin",i),c.push(i)),s.push(e),M.current.push(e)}const h=e=>{const n=t.createBean(new e),o=n.getGui();return i.insertAdjacentElement("beforeend",o),c.push(o),s.push(n),n};if(a&&h(a.component),o){const e=h(o.component);x.current=e,M.current.push(e)}return n&&h(n.component),()=>{t.destroyBeans(s),c.forEach((e=>{e.parentElement?.removeChild(e)}))}}),[m,b,I]);const E=(0,s.useMemo)((()=>Bh("ag-root-wrapper",i,o,a)),[i,o,a]),A=(0,s.useMemo)((()=>Bh("ag-root-wrapper-body","ag-focus-managed",a)),[a]),L=(0,s.useMemo)((()=>({userSelect:null!=d?d:"",WebkitUserSelect:null!=d?d:"",cursor:null!=c?c:""})),[d,c]),k=(0,s.useCallback)((e=>{C.current=e,f(null!==e)}),[]);return s.createElement("div",{ref:R,className:E,style:L,role:"presentation"},s.createElement("div",{className:A,ref:w,role:"presentation"},p&&b&&I&&s.createElement(Fh.Provider,{value:I},s.createElement(kd,{ref:k,eFocusableElement:b,onTabKeyDown:D,gridCtrl:y.current,forceFocusOutWhenTabGuardsAreEmpty:!0},s.createElement(Ad,null)))))})),Pd=class extends tt{wireBeans(e){this.ctrlsService=e.ctrlsService}areHeaderCellsRendered(){return this.ctrlsService.getHeaderRowContainerCtrls().every((e=>e.getAllCtrls().every((e=>e.areCellsRendered()))))}},Nd=e=>{const t=(0,s.useRef)(),i=(0,s.useRef)(null),n=(0,s.useRef)(null),o=(0,s.useRef)([]),r=(0,s.useRef)([]),a=(0,s.useRef)(e),l=(0,s.useRef)(),c=(0,s.useRef)(),h=(0,s.useRef)(!1),[d,u]=(0,s.useState)(void 0),[,p]=(0,s.useState)(0),g=(0,s.useCallback)((s=>{if(i.current=s,!s)return o.current.forEach((e=>e())),void(o.current.length=0);const a=e.modules||[];n.current||(n.current=new gd((()=>p((e=>e+1))),e.componentWrappingElement,e.maxComponentCreationTimeMs),o.current.push((()=>{n.current?.destroy(),n.current=null})));const d=function(e,t){"object"!==typeof e&&(e={});const i={...e};return ai.ALL_PROPERTIES_AND_CALLBACKS.forEach((e=>{const s=t[e];"undefined"!==typeof s&&s!==ai.VUE_OMITTED_PROPERTY&&(i[e]=s)})),i}(e.gridOptions,e),g=new Gd((()=>{if(h.current){const e=()=>l.current?.shouldQueueUpdates()?void 0:r.current.shift();let t=e();for(;t;)t(),t=e()}}));l.current=g;const m=new Pd,f={providedBeanInstances:{frameworkComponentWrapper:new Fd(n.current,d.reactiveCustomComponents??(y="reactiveCustomComponents",qc.gridOptions?.[y])??!0),renderStatusService:m},modules:a,frameworkOverrides:g};var y;const v=new eh;d.gridId??(d.gridId=c.current),t.current=v.create(s,d,(i=>{u(i),i.createBean(m),o.current.push((()=>{i.destroy()})),i.getBean("ctrlsService").whenReady({addDestroyFunc:e=>{o.current.push(e)}},(()=>{if(i.isDestroyed())return;const s=t.current;s&&e.setGridApi?.(s)}))}),(e=>{e.getBean("ctrlsService").whenReady({addDestroyFunc:e=>{o.current.push(e)}},(()=>{r.current.forEach((e=>e())),r.current.length=0,h.current=!0}))}),f),o.current.push((()=>{t.current=void 0})),t.current&&(c.current=t.current.getGridId())}),[]),m=(0,s.useMemo)((()=>({height:"100%",...e.containerStyle||{}})),[e.containerStyle]),f=(0,s.useCallback)((e=>{h.current&&!l.current?.shouldQueueUpdates()?e():r.current.push(e)}),[]);return(0,s.useEffect)((()=>{const i=function(e,t){const i={};return Object.keys(t).forEach((s=>{const n=t[s];e[s]!==n&&(i[s]=n)})),i}(a.current,e);a.current=e,f((()=>{t.current&&function(e,t){if(!e)return;const i={};let s=!1;if(Object.keys(e).filter((e=>ai.ALL_PROPERTIES_AND_CALLBACKS_SET.has(e))).forEach((t=>{i[t]=e[t],s=!0})),!s)return;const n={type:"gridOptionsChanged",options:i};t.dispatchEvent(n);const o={type:"componentStateChanged"};mt(i,((e,t)=>{o[e]=t})),t.dispatchEvent(o)}(i,t.current)}))}),[e]),s.createElement("div",{style:m,className:e.className,ref:g},d&&!d.isDestroyed()?s.createElement(Td,{context:d}):null,n.current?.getPortals()??null)};var Fd=class extends nh{constructor(e,t){super(),this.parent=e,this.reactiveCustomComponents=t}createWrapper(e,t){if(this.reactiveCustomComponents){const i=(e=>{switch(e){case"filter":return nd;case"floatingFilterComponent":return ad;case"dateComponent":return id;case"dragAndDropImageComponent":return sd;case"loadingOverlayComponent":return ld;case"noRowsOverlayComponent":return hd;case"statusPanel":return dd;case"toolPanel":return ud;case"menuItem":return cd;case"cellRenderer":return td}})(t.propertyName);if(i)return new i(e,this.parent,t)}else switch(t.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":pd()}const i=!t.cellRenderer&&"toolPanel"!==t.propertyName;return new qh(e,this.parent,t,i)}},Od=(0,s.forwardRef)(((e,t)=>{const{ctrlsFactory:i,context:n,gos:o,resizeObserverService:r,rowModel:a}=(0,s.useContext)(Fh),[l,c]=(0,s.useState)((()=>new zh)),[h,d]=(0,s.useState)((()=>new zh)),[u,p]=(0,s.useState)(),[g,m]=(0,s.useState)(),f=(0,s.useRef)(),y=(0,s.useRef)(null),v=(0,s.useRef)(),C=(0,s.useMemo)((()=>kn.__getGridRegisteredModules(e.api.getGridId())),[e]),b=(0,s.useMemo)((()=>l.toString()+" ag-details-row"),[l]),w=(0,s.useMemo)((()=>h.toString()+" ag-details-grid"),[h]);t&&(0,s.useImperativeHandle)(t,(()=>({refresh:()=>f.current?.refresh()??!1}))),e.template&&F("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const S=(0,s.useCallback)((t=>{if(y.current=t,!t)return f.current=n.destroyBean(f.current),void v.current?.();const s={addOrRemoveCssClass:(e,t)=>c((i=>i.setClass(e,t))),addOrRemoveDetailGridCssClass:(e,t)=>d((i=>i.setClass(e,t))),setDetailGrid:e=>p(e),setRowData:e=>m(e),getGui:()=>y.current},l=i.getInstance("detailCellRenderer");if(l&&(n.createBean(l),l.init(s,e),f.current=l,o.get("detailRowAutoHeight"))){const i=()=>{if(null==y.current)return;const t=y.current.clientHeight;if(null!=t&&t>0){setTimeout((()=>{e.node.setRowHeight(t),(ie(o)||se(o))&&a.onRowHeightChanged()}),0)}};v.current=r.observeResize(t,i),i()}}),[]),x=(0,s.useCallback)((e=>{f.current?.registerDetailWithMaster(e)}),[]);return s.createElement("div",{className:b,ref:S},u&&s.createElement(Nd,{className:w,...u,modules:C,rowData:g,setGridApi:x}))})),Gd=class extends gl{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.frameworkComponents={agGroupCellRenderer:Kh,agGroupRowRenderer:Kh,agDetailCellRenderer:Od},this.wrapIncoming=(e,t)=>{return"ensureVisible"===t?(i=e,Wh||setTimeout((()=>Wh=!1),0),Wh=!0,i()):e();var i},this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return"19"===Vh}},Bd=class extends s.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach((t=>t(e)))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return s.createElement(Nd,{...this.props,setGridApi:this.setGridApi})}};const zd=e=>{let{data:t}=e;return(0,E.jsx)("div",{className:"ag-theme-quartz",style:{height:240,width:"100%",margin:30},children:(0,E.jsx)(Bd,{rowData:t,columnDefs:[{field:"stat"},{field:"left"},{field:"right"},{field:"diff"}]})})};var Hd=Object.defineProperty,Vd=Object.getOwnPropertyDescriptor,jd=(e,t)=>{for(var i in t)Hd(e,i,{get:t[i],enumerable:!0})},Wd=(e,t,i,s)=>{for(var n,o=s>1?void 0:s?Vd(t,i):t,r=e.length-1;r>=0;r--)(n=e[r])&&(o=(s?n(t,i,o):n(o))||o);return s&&o&&Hd(t,i,o),o},Ud={ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColorPicker:"Color picker",ariaLabelFinancialCharts:"Financial Charts",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaValuePanRange:"${min}[percent] to ${max}[percent]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsColor:"Color",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}"},_d=["delete-legacy","disjoint-channel","disjoint-channel-legacy","horizontal-line-legacy","line-color-legacy","lock","lock-legacy","pan-end-legacy","pan-left-legacy","pan-right-legacy","pan-start-legacy","parallel-channel","parallel-channel-legacy","reset-legacy","trend-line","trend-line-legacy","unlock","unlock-legacy","vertical-line","vertical-line-legacy","zoom-in-legacy","zoom-in-alt","zoom-in-alt-legacy","zoom-out-legacy","zoom-out-alt","zoom-out-alt-legacy"];var Yd=(e=>(e.POINTER="pointer",e.NODE="node",e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e.TOP_LEFT="top-left",e.TOP_RIGHT="top-right",e.BOTTOM_RIGHT="bottom-right",e.BOTTOM_LEFT="bottom-left",e))(Yd||{});jd({},{TimeInterval:()=>qd,day:()=>vu,friday:()=>Iu,hour:()=>fu,millisecond:()=>eu,minute:()=>pu,monday:()=>Su,month:()=>Au,saturday:()=>Ru,second:()=>hu,sunday:()=>wu,thursday:()=>Du,tuesday:()=>xu,utcDay:()=>Fu,utcHour:()=>Nu,utcMinute:()=>Pu,utcMonth:()=>Ou,utcYear:()=>Gu,wednesday:()=>Mu,year:()=>ku});var Kd=new Map;function Zd(e,t){Kd.has(t)||(Kd.set(t,!0),e())}function $d(e){return e}function Qd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;const{leading:s=!0,trailing:n=!0}=i??{};let o,r,a=!1;function l(){n&&r?(o=setTimeout(l,t),e(...r)):a=!1,r=null}return Object.assign((function(){for(var i=arguments.length,n=new Array(i),c=0;c<i;c++)n[c]=arguments[c];a?r=n:(a=!0,o=setTimeout(l,t),s?e(...n):r=n)}),{cancel(){clearTimeout(o),a=!1,r=null}})}Zd.clear=()=>Kd.clear();var Xd={log(){console.log(...arguments)},warn(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];console.warn(`AG Charts - ${e}`,...i)},error(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];"object"===typeof e?console.error("AG Charts error",e,...i):console.error(`AG Charts - ${e}`,...i)},table(){console.table(...arguments)},warnOnce(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];Zd((()=>Xd.warn(e,...i)),`Logger.warn: ${e}`)},errorOnce(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];Zd((()=>Xd.error(e,...i)),`Logger.error: ${e}`)}},qd=class{constructor(e,t,i){this._encode=e,this._decode=t,this._rangeCallback=i}floor(e){const t=new Date(e),i=this._encode(t);return this._decode(i)}ceil(e){const t=new Date(Number(e)-1),i=this._encode(t);return this._decode(i+1)}range(e,t,i){const s=this._rangeCallback?.(e,t),n=this._encode(i?this.floor(e):this.ceil(e)),o=this._encode(i?this.ceil(t):this.floor(t));if(o<n)return[];const r=[];for(let a=n;a<=o;a++){const e=this._decode(a);r.push(e)}return s?.(),r}},Jd=class extends qd{getOffset(e,t){const i="number"===typeof e||e instanceof Date?this._encode(new Date(e)):0;return Math.floor(i)%t}every(e,t){let i,s=0;const n=e;n!==(e=Math.max(1,Math.round(e)))&&Xd.warnOnce(`interval step of [${n}] rounded to [${e}].`);const{snapTo:o="start"}=t??{};if("string"===typeof o){const t=s;i=(i,n)=>{const r="start"===o?i:n;return s=this.getOffset(r,e),()=>s=t}}else"number"===typeof o?s=this.getOffset(new Date(o),e):o instanceof Date&&(s=this.getOffset(o,e));return new qd((t=>{const i=this._encode(t);return Math.floor((i-s)/e)}),(t=>this._decode(t*e+s)),i)}};var eu=new Jd((function(e){return e.getTime()}),(function(e){return new Date(e)})),tu=eu,iu=(new Date(0).getFullYear(),1e3),su=6e4,nu=36e5,ou=864e5,ru=6048e5,au=2592e6,lu=31536e6,cu=(new Date).getTimezoneOffset()*su;var hu=new Jd((function(e){return Math.floor((e.getTime()-cu)/iu)}),(function(e){return new Date(cu+e*iu)})),du=hu,uu=(new Date).getTimezoneOffset()*su;var pu=new Jd((function(e){return Math.floor((e.getTime()-uu)/su)}),(function(e){return new Date(uu+e*su)})),gu=pu,mu=(new Date).getTimezoneOffset()*su;var fu=new Jd((function(e){return Math.floor((e.getTime()-mu)/nu)}),(function(e){return new Date(mu+e*nu)})),yu=fu;var vu=new Jd((function(e){const t=e.getTimezoneOffset()*su;return Math.floor((e.getTime()-t)/ou)}),(function(e){const t=new Date(1970,0,1);return t.setDate(t.getDate()+e),t})),Cu=vu;function bu(e){const t=(7+e-4)%7;return new Jd((function(e){const i=e.getTimezoneOffset()*su;return Math.floor((e.getTime()-i)/ru-t/7)}),(function(e){const i=new Date(1970,0,1);return i.setDate(i.getDate()+7*e+t),i}))}var wu=bu(0),Su=bu(1),xu=bu(2),Mu=bu(3),Du=bu(4),Iu=bu(5),Ru=bu(6),Eu=wu;var Au=new Jd((function(e){return 12*e.getFullYear()+e.getMonth()}),(function(e){const t=Math.floor(e/12);return new Date(t,e-12*t,1)})),Lu=Au;var ku=new Jd((function(e){return e.getFullYear()}),(function(e){const t=new Date;return t.setFullYear(e),t.setMonth(0,1),t.setHours(0,0,0,0),t})),Tu=ku;var Pu=new Jd((function(e){return Math.floor(e.getTime()/su)}),(function(e){return new Date(e*su)}));var Nu=new Jd((function(e){return Math.floor(e.getTime()/nu)}),(function(e){return new Date(e*nu)}));var Fu=new Jd((function(e){return Math.floor(e.getTime()/ou)}),(function(e){const t=new Date(0);return t.setUTCDate(t.getUTCDate()+e),t.setUTCHours(0,0,0,0),t}));var Ou=new Jd((function(e){return 12*e.getUTCFullYear()+e.getUTCMonth()}),(function(e){const t=Math.floor(e/12),i=e-12*t;return new Date(Date.UTC(t,i,1))}));var Gu=new Jd((function(e){return e.getUTCFullYear()}),(function(e){const t=new Date;return t.setUTCFullYear(e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),t})),Bu={};jd(Bu,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>kg,fromToMotion:()=>Tg,staticFromToMotion:()=>Pg});var zu=new Map;function Hu(){zu.clear()}function Vu(e){const t=e.constructor,i=Object.hasOwn(t,"className")?t.className:t.name;if(!i)throw new Error(`The ${t} is missing the 'className' property.`);const s=(zu.get(i)??0)+1;return zu.set(i,s),`${i}-${s}`}function ju(){return crypto.randomUUID?.()??function(){const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128;let t="";for(let i=0;i<e.length;i++)4!==i&&6!==i&&8!==i&&10!==i||(t+="-"),t+=e[i].toString(16).padStart(2,"0");return t}()}function*Wu(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const s of t)yield*s}function Uu(e){return null!=e&&"object"===typeof e&&Symbol.iterator in e?e:[e]}var _u=Symbol("interpolate"),Yu=e=>null!=e[_u];function Ku(e,t,i){const s={nearest:void 0,distanceSquared:arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0};for(const n of i){const i=n.distanceSquared(e,t);if(0===i)return{nearest:n,distanceSquared:0};i<s.distanceSquared&&(s.nearest=n,s.distanceSquared=i)}return s}function Zu(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const{x:n=e,y:o=t}=i.transformPoint?.(e,t)??{},r={nearest:void 0,distanceSquared:s};for(const a of i.children){const{nearest:e,distanceSquared:t}=a.nearestSquared(n,o,r.distanceSquared);if(0===t)return{nearest:e,distanceSquared:t};t<r.distanceSquared&&(r.nearest=e,r.distanceSquared=t)}return r}var $u={};function Qu(e){return e?$u.document?.[e]:$u.document}function Xu(e){return e?$u.window?.[e]:$u.window}function qu(e,t,i){const s=Qu().createElement(e);if("object"===typeof t&&(i=t,t=void 0),t)for(const n of t.split(" "))s.classList.add(n);return i&&Object.assign(s.style,i),s}function Ju(e,t){return Qu().createElementNS(e,t)}function ep(e,t){const{body:i}=Qu(),s=qu("a",{display:"none"});s.href=e,s.download=t,i.appendChild(s),s.click(),setTimeout((()=>i.removeChild(s)))}function tp(e){$u.document=e}function ip(e){$u.window=e}function sp(e,t){e&&(e.style.width=`${t.width}px`,e.style.height=`${t.height}px`,e.style.left=`${t.x}px`,e.style.top=`${t.y}px`)}function np(e){if(e.focus({preventScroll:!0}),null==e.lastChild?.textContent)return;const t=Qu().createRange();t.setStart(e.lastChild,e.lastChild.textContent.length),t.setEnd(e.lastChild,e.lastChild.textContent.length);const i=Xu().getSelection();i?.removeAllRanges(),i?.addRange(t)}"undefined"!==typeof window?$u.window=window:"undefined"!==typeof global&&($u.window=global.window),"undefined"!==typeof document?$u.document=document:"undefined"!==typeof global&&($u.document=global.document);var op=0;function rp(e){return`${e??"ag-charts-element"}-${op++}`}function ap(e,t,i){return Math.min(i,Math.max(e,t))}function lp(e,t){const[i,s]=cp(t);return ap(i,e,s)}function cp(e){if(0===e.length)return[];const t=[1/0,-1/0];for(const i of e)i<t[0]&&(t[0]=i),i>t[1]&&(t[1]=i);return t}function hp(e){const[t,i]=cp(e);return i-t}function dp(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;return Math.abs(e-t)<i}function up(e){return-1===Math.sign(e)||Object.is(e,-0)}function pp(e){const t=10**(arguments.length>1&&void 0!==arguments[1]?arguments[1]:2);return Math.round(e*t)/t}function gp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const i=Math.floor(Math.log(Math.abs(e))/Math.LN10);return i>=0||!isFinite(i)?e.toFixed(t):e.toFixed(Math.abs(i)-1+t)}function mp(e,t){return Math.floor(e%t+(e<0?t:0))}function fp(e){if(Math.floor(e)===e)return 0;let t=String(e),i=0;if(e<1e-6||e>=1e21){let e;[t,e]=t.split("e"),null!=e&&(i=Number(e))}const s=t.split(".")[1]?.length??0;return Math.max(s-i,0)}function yp(e,t){return t=t??Xu("navigator").language,new Intl.NumberFormat(t,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function vp(e,t){return yp(e/100,t)}var Cp=class e{constructor(e,t,i,s){this.x=e,this.y=t,this.width=i,this.height=s}static fromDOMRect(t){let{x:i,y:s,width:n,height:o}=t;return new e(i,s,n,o)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:this.x+this.width,bottom:this.y+this.height,toJSON:()=>({})}}clone(){const{x:t,y:i,width:s,height:n}=this;return new e(t,i,s,n)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}containsPoint(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height}intersection(t){if(!this.collidesBBox(t))return;const i=ap(t.x,this.x,t.x+t.width),s=ap(t.y,this.y,t.y+t.height),n=ap(t.x,this.x+this.width,t.x+t.width),o=ap(t.y,this.y+this.height,t.y+t.height);return new e(i,s,n-i,o-s)}collidesBBox(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(e,t){if(this.containsPoint(e,t))return 0;const i=e-ap(this.x,e,this.x+this.width),s=t-ap(this.y,t,this.y+this.height);return i*i+s*s}static nearestBox(e,t,i){return Ku(e,t,i)}clip(e){if(void 0===e)return this;const t=Math.max(this.x,e.x),i=Math.max(this.y,e.y),s=Math.min(this.x+this.width,e.x+e.width),n=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.y=i,this.width=Math.max(0,s-t),this.height=Math.max(0,n-i),this}shrink(e,t){const i=(e,t)=>{switch(e){case"top":this.y+=t;case"bottom":this.height-=t;break;case"left":this.x+=t;case"right":this.width-=t;break;case"vertical":this.y+=t,this.height-=2*t;break;case"horizontal":this.x+=t,this.width-=2*t;break;case void 0:this.x+=t,this.width-=2*t,this.y+=t,this.height-=2*t}};return"number"===typeof e?i(t,e):"object"===typeof e&&Object.entries(e).forEach((e=>{let[t,s]=e;return i(t,s)})),this}grow(e,t){if("number"===typeof e)this.shrink(-e,t);else{const t={...e};for(const e in t)t[e]*=-1;this.shrink(t)}return this}translate(e,t){return this.x+=e,this.y+=t,this}combine(e){const{x:t,y:i,width:s,height:n}=this;this.x=Math.min(t,e.x),this.y=Math.min(i,e.y),this.width=Math.max(t+s,e.x+e.width)-this.x,this.height=Math.max(i+n,e.y+e.height)-this.y}static merge(t){let i=1/0,s=1/0,n=-1/0,o=-1/0;for(const e of t)e.x<i&&(i=e.x),e.y<s&&(s=e.y),e.x+e.width>n&&(n=e.x+e.width),e.y+e.height>o&&(o=e.y+e.height);return new e(i,s,n-i,o-s)}[_u](t,i){return new e(this.x*(1-i)+t.x*i,this.y*(1-i)+t.y*i,this.width*(1-i)+t.width*i,this.height*(1-i)+t.height*i)}};Cp.zero=Object.freeze(new Cp(0,0,0,0)),Cp.NaN=Object.freeze(new Cp(NaN,NaN,NaN,NaN));var bp=Cp,wp=(e=>(e[e.NONE=0]="NONE",e[e.TRIVIAL=1]="TRIVIAL",e[e.MINOR=2]="MINOR",e[e.MAJOR=3]="MAJOR",e))(wp||{});function Sp(e){return function(t,i){const s=`__${i}`;t[i]||function(e,t,i,s){const{redraw:n=1,type:o="normal",changeCb:r,convertor:a,checkDirtyOnAssignment:l=!1}=s??{},c={redraw:n,type:o,changeCb:r,checkDirtyOnAssignment:l,convertor:a};let h;switch(o){case"normal":h=function(e,t){const{redraw:i=1,changeCb:s}=t;return function(t){return t!==this[e]?(this[e]=t,this.markDirty(i),s?.(this),t):xp}}(i,c);break;case"transform":h=function(e,t){const{redraw:i=1}=t;return function(t){return t!==this[e]?(this[e]=t,this.markDirtyTransform(i),t):xp}}(i,c);break;case"path":h=function(e,t){const{redraw:i=1}=t;return function(t){return t!==this[e]?(this[e]=t,this._dirtyPath||(this._dirtyPath=!0,this.markDirty(i)),t):xp}}(i,c)}h=function(e,t){const{checkDirtyOnAssignment:i}=t;if(i)return function(t){const i=e.call(this,t);return i!==xp&&null!=t&&t._dirty>0&&this.markDirty(t._dirty),i};return e}(function(e,t){const{changeCb:i}=t;if(i)return function(t){const s=e.call(this,t);return s!==xp&&i.call(this,this),s};return e}(function(e,t){const{convertor:i}=t;if(i)return function(t){e.call(this,i(t))};return e}(h,c),c),c);const d=function(){return this[i]};Object.defineProperty(e,t,{set:h,get:d,enumerable:!0,configurable:!0})}(t,i,s,e)}}var xp=Symbol("no-change");var Mp=(e=>(e[e.All=0]="All",e[e.None=1]="None",e))(Mp||{}),Dp=class e{constructor(t){this.serialNumber=e._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0},this.id=Vu(this),this.pointerEvents=0,this._dirty=3,this.dirtyZIndex=!1,this.virtualChildrenCount=0,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.zIndexSubOrder=void 0,this.name=t?.name,this.isVirtual=t?.isVirtual??!1,this.tag=t?.tag??NaN,this.zIndex=t?.zIndex??0}static*extractBBoxes(e,t){for(const i of e)if(!t||i.visible&&!i.transitionOut){const e=i.getBBox();e&&(yield e)}}get datum(){return this._datum??this.parentNode?.datum}set datum(e){this._datum!==e&&(this._previousDatum=this._datum,this._datum=e)}get previousDatum(){return this._previousDatum}get layerManager(){return this._layerManager}get dirty(){return this._dirty}preRender(){this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1;for(const e of this.children()){const t=e.preRender();this.childNodeCounts.groups+=t.groups,this.childNodeCounts.nonGroups+=t.nonGroups}return this.childNodeCounts}render(e){const{stats:t}=e;if(this._dirty=0,e.debugNodeSearch){const t=this.name??this.id;e.debugNodeSearch.some((e=>"string"===typeof e?e===t:e.test(t)))&&(e.debugNodes[this.name??this.id]=this)}t&&t.nodesRendered++}_setLayerManager(e){this._layerManager=e,this._debug=e?.debug;for(const t of this.children(!1))t._setLayerManager(e)}sortChildren(e){if(this.dirtyZIndex=!1,!this.childNodes)return;if(this.hasVirtualChildren())return;const t=[...this.childNodes].sort(e);this.childNodes.clear();for(const i of t)this.childNodes.add(i)}*traverseUp(e){let t=this;for(e&&(yield t);t=t.parentNode;)yield t}children(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){if(!e.childNodes)return;const i=[];for(const s of e.childNodes)t&&s.isVirtual?i.push(s.children()):yield s;for(const e of i)yield*e}()}*virtualChildren(){if(this.childNodes&&this.virtualChildrenCount)for(const e of this.childNodes)e.isVirtual&&(yield e)}hasVirtualChildren(){return this.virtualChildrenCount>0}isLeaf(){return!this.childNodes?.size}isRoot(){return!this.parentNode}append(e){this.childNodes??(this.childNodes=new Set);for(const t of Uu(e))t.parentNode?.removeChild(t),this.childNodes.add(t),t.parentNode=this,t._setLayerManager(this.layerManager),t.isVirtual&&this.virtualChildrenCount++;this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty(3)}appendChild(e){return this.append(e),e}removeChild(e){return!!this.childNodes?.delete(e)&&(delete e.parentNode,e._setLayerManager(),e.isVirtual&&this.virtualChildrenCount--,this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty(3),!0)}remove(){return this.parentNode?.removeChild(this)??!1}clear(){for(const e of this.children(!1))delete e.parentNode,e._setLayerManager();this.childNodes?.clear(),this.invalidateCachedBBox(),this.virtualChildrenCount=0}destroy(){this.parentNode?.removeChild(this)}setProperties(e,t){if(t)for(const i of t)this[i]=e[i];else Object.assign(this,e);return this}containsPoint(e,t){return!1}pickNode(e,t){if(!this.visible||1===this.pointerEvents||!this.containsPoint(e,t))return;const i=[...this.children()];if(i.length>1e3)for(let s=i.length-1;s>=0;s--){const n=i[s],o=n.containsPoint(e,t)?n.pickNode(e,t):void 0;if(o)return o}else if(i.length)for(let s=i.length-1;s>=0;s--){const n=i[s].pickNode(e,t);if(n)return n}else if(!this.isContainerNode)return this}invalidateCachedBBox(){this.cachedBBox=void 0,this.parentNode?.invalidateCachedBBox()}getBBox(){return null==this.cachedBBox&&(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}markDirty(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;const{_dirty:i}=this,s=i>e||i===e&&e===t;null==this.cachedBBox&&s||(this.invalidateCachedBBox(),this._dirty=Math.max(i,e),this.parentNode?this.parentNode.markDirty(t):this.layerManager&&this.layerManager.markDirty())}markClean(e){const{force:t=!1,recursive:i=!0}=e??{};if(0!==this._dirty||t){this._dirty=0;for(const e of this.children(!1))(e.isVirtual?!1!==i:!0===i)&&e.markClean({force:t})}}onVisibleChange(){}onZIndexChange(){this.parentNode&&(this.parentNode.dirtyZIndex=!0)}toSVG(){}};Dp._nextSerialNumber=0,Wd([Sp({redraw:3,changeCb:e=>e.onVisibleChange()})],Dp.prototype,"visible",2),Wd([Sp({redraw:1,changeCb:e=>e.onZIndexChange()})],Dp.prototype,"zIndex",2),Wd([Sp({redraw:1,changeCb:e=>e.onZIndexChange()})],Dp.prototype,"zIndexSubOrder",2);var Ip=Dp,Rp=(e,t,i)=>e*(1-i)+t*i,Ep=e=>{const t=e<0?-1:1,i=Math.abs(e);return i<=.04045?e/12.92:t*((i+.055)/1.055)**2.4},Ap=e=>{const t=e<0?-1:1,i=Math.abs(e);return i>.0031308?t*(1.055*i**(1/2.4)-.055):12.92*e},Lp=class e{constructor(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=ap(0,e||0,1),this.g=ap(0,t||0,1),this.b=ap(0,i||0,1),this.a=ap(0,s||0,1)}static validColorString(t){return t.indexOf("#")>=0?!!e.parseHex(t):t.indexOf("rgb")>=0?!!e.stringToRgba(t):!!e.nameToHex[t.toLowerCase()]}static fromString(t){if(t.indexOf("#")>=0)return e.fromHexString(t);const i=e.nameToHex[t.toLowerCase()];if(i)return e.fromHexString(i);if(t.indexOf("rgb")>=0)return e.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static parseHex(e){let t;switch((e=e.replace(/ /g,"").slice(1)).length){case 6:case 8:t=[];for(let i=0;i<e.length;i+=2)t.push(parseInt(`${e[i]}${e[i+1]}`,16));break;case 3:case 4:t=e.split("").map((e=>parseInt(e,16))).map((e=>e+16*e))}if(t?.length>=3&&t.every((e=>e>=0)))return 3===t.length&&t.push(255),t}static fromHexString(t){const i=e.parseHex(t);if(i){const[t,s,n,o]=i;return new e(t/255,s/255,n/255,o/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(e){let t=-1,i=-1;for(let o=0;o<e.length;o++){const s=e[o];if(-1===t&&"("===s)t=o;else if(")"===s){i=o;break}}if(-1===t||-1===i)return;const s=e.substring(t+1,i).split(","),n=[];for(let o=0;o<s.length;o++){const e=s[o];let t=parseFloat(e);if(!Number.isFinite(t))return;e.indexOf("%")>=0?(t=ap(0,t,100),t/=100):3===o?t=ap(0,t,1):(t=ap(0,t,255),t/=255),n.push(t)}return n}static fromRgbaString(t){const i=e.stringToRgba(t);if(i){if(3===i.length)return new e(i[0],i[1],i[2]);if(4===i.length)return new e(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(4===t.length)return new e(t[0],t[1],t[2],t[3]);if(3===t.length)return new e(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,i,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const o=e.HSBtoRGB(t,i,s);return new e(o[0],o[1],o[2],n)}static fromHSL(t,i,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const o=e.HSLtoRGB(t,i,s);return new e(o[0],o[1],o[2],n)}static fromOKLCH(t,i,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const o=e.OKLCHtoRGB(t,i,s);return new e(o[0],o[1],o[2],n)}static padHex(e){return 1===e.length?"0"+e:e}toHexString(){let t="#"+e.padHex(Math.round(255*this.r).toString(16))+e.padHex(Math.round(255*this.g).toString(16))+e.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=e.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const t=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,e);return 1!==this.a?(t.push(Math.round(this.a*i)/i),`rgba(${t.join(", ")})`):`rgb(${t.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return e.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(e,t,i){const s=Ep(e),n=Ep(t),o=Ep(i),r=Math.cbrt(.4122214708*s+.5363325363*n+.0514459929*o),a=Math.cbrt(.2119034982*s+.6806995451*n+.1073969566*o),l=Math.cbrt(.0883024619*s+.2817188376*n+.6299787005*o),c=.2104542553*r+.793617785*a-.0040720468*l,h=1.9779984951*r-2.428592205*a+.4505937099*l,d=.0259040371*r+.7827717662*a-.808675766*l,u=180*Math.atan2(d,h)/Math.PI;return[c,Math.hypot(h,d),u>=0?u:u+360]}static OKLCHtoRGB(e,t,i){const s=e,n=t*Math.cos(i*Math.PI/180),o=t*Math.sin(i*Math.PI/180),r=(s+.3963377774*n+.2158037573*o)**3,a=(s-.1055613458*n-.0638541728*o)**3,l=(s-.0894841775*n-1.291485548*o)**3,c=-1.2684380046*r+2.6097574011*a-.3413193965*l,h=-.0041960863*r-.7034186147*a+1.707614701*l;return[Ap(4.0767416621*r-3.3077115913*a+.2309699292*l),Ap(c),Ap(h)]}static RGBtoHSL(e,t,i){const s=Math.min(e,t,i),n=Math.max(e,t,i),o=(n+s)/2;let r,a;if(n===s)r=0,a=0;else{const l=n-s;a=o>.5?l/(2-n-s):l/(n+s),r=n===e?(t-i)/l+(t<i?6:0):n===t?(i-e)/l+2:(e-t)/l+4,r*=60}return[r,a,o]}static HSLtoRGB(e,t,i){if(0===t)return[i,i,i];const s=i<.5?i*(1+t):i+t-i*t,n=2*i-s;function o(e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+6*(s-n)*e:e<.5?s:e<2/3?n+(s-n)*(2/3-e)*6:n}return[o((e=(e%360+360)%360)/360+1/3),o(e/360),o(e/360-1/3)]}static RGBtoHSB(e,t,i){const s=Math.min(e,t,i),n=Math.max(e,t,i);let o=0;if(s!==n){const r=n-s,a=(n-e)/r,l=(n-t)/r,c=(n-i)/r;o=e===n?c-l:t===n?2+a-c:4+l-a,o/=6,o<0&&(o+=1)}return[360*o,0===n?0:(n-s)/n,n]}static HSBtoRGB(e,t,i){e=(e%360+360)%360/360;let s=0,n=0,o=0;if(0===t)s=n=o=i;else{const r=6*(e-Math.floor(e)),a=r-Math.floor(r),l=i*(1-t),c=i*(1-t*a),h=i*(1-t*(1-a));switch(r|0){case 0:s=i,n=h,o=l;break;case 1:s=c,n=i,o=l;break;case 2:s=l,n=i,o=h;break;case 3:s=l,n=c,o=i;break;case 4:s=h,n=l,o=i;break;case 5:s=i,n=l,o=c}}return[s,n,o]}static mix(t,i,s){return new e(Rp(t.r,i.r,s),Rp(t.g,i.g,s),Rp(t.b,i.b,s),Rp(t.a,i.a,s))}};Lp.nameToHex={__proto__:null,aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};var kp=Lp;function Tp(e,t){return i=>Number(e)*(1-i)+Number(t)*i}function Pp(e,t){if("string"===typeof e)try{e=kp.fromString(e)}catch(i){e=kp.fromArray([0,0,0])}if("string"===typeof t)try{t=kp.fromString(t)}catch(i){t=kp.fromArray([0,0,0])}return i=>kp.mix(e,t,i).toRgbaString()}var Np=Symbol("BREAK"),Fp="__decorator_config";function Op(e,t){null==Object.getOwnPropertyDescriptor(e,Fp)&&Object.defineProperty(e,Fp,{value:{}});const i=e[Fp],s=t.toString();if("undefined"!==typeof i[s])return i[s];const n=new WeakMap;i[s]={setters:[],getters:[],observers:[],valuesMap:n};const o=Object.getOwnPropertyDescriptor(e,t),r=o?.set,a=o?.get;return Object.defineProperty(e,t,{set:function(e){const{setters:o,observers:l}=i[s];let c;o.some((e=>e.length>2))&&(c=a?a.call(this):n.get(this));for(const i of o)if((e=i(this,t,e,c))===Np)return;r?r.call(this,e):n.set(this,e);for(const t of l)t(this,e,c)},get:function(){let e=a?a.call(this):n.get(this);for(const n of i[s].getters)if(e=n(this,t,e),e===Np)return;return e},enumerable:!0,configurable:!1}),i[s]}function Gp(e,t,i){return(s,n)=>{const o=Op(s,n);o.setters.push(e),t&&o.getters.unshift(t),i&&Object.assign(o,i)}}function Bp(e){return"undefined"!==typeof e&&Fp in e}function zp(e){const t=new Set;for(;Bp(e);)t.add(e?.[Fp]),e=Object.getPrototypeOf(e);return Array.from(t).flatMap((e=>Object.keys(e)))}function Hp(e){return zp(e).reduce(((t,i)=>(t[i]=e[i]??null,t)),{})}function Vp(e){return null!=e}function jp(e){return Array.isArray(e)}function Wp(e){return"boolean"===typeof e}function Up(e){return e instanceof Date}function _p(e){return Up(e)&&!isNaN(Number(e))}function Yp(e){return e instanceof RegExp}function Kp(e){return"function"===typeof e}function Zp(e){return"object"===typeof e&&null!==e&&!jp(e)}function $p(e){return jp(e)||Qp(e)}function Qp(e){return"object"===typeof e&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function Xp(e){return"string"===typeof e}function qp(e){return"number"===typeof e}function Jp(e){return Number.isFinite(e)}function eg(e){return"undefined"!==typeof window&&e instanceof HTMLElement}function tg(e,t){return Xp(t)&&Object.keys(e).includes(t)}function ig(e,t){return Object.values(e).includes(t)}function sg(e){return"symbol"===typeof e}function ng(e,t){return e.type!==t}function og(e,t,i){for(const s in t)if(!(s in e))return!1;for(const s in e){if(!(s in t))return!1;if(!i(e[s],t[s]))return!1}return!0}function rg(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return ag(...t.reverse())}function ag(){const e={};for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];for(const n of i){if(!Zp(n))continue;const t=Bp(n)?zp(n):Object.keys(n);for(const i of t)Qp(e[i])&&Qp(n[i])?e[i]=ag(e[i],n[i]):e[i]??(e[i]=n[i])}return e}function lg(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return i&&jp(e)?e.map((e=>ag(e,...i))):e}function cg(e,t){return Object.entries(e).reduce(((i,s)=>{let[n,o]=s;return i[n]=t(o,n,e),i}),{})}function hg(e,t){const i={...e};for(const s of t)delete i[s];return i}function dg(e,t){return(jp(t)?t:t.split(".")).reduce(((e,t)=>e[t]),e)}var ug=new Set(["__proto__","constructor","prototype"]);function pg(e,t,i){const s=jp(t)?t.slice():t.split("."),n=s.pop();if(s.some((e=>ug.has(e))))return;const o=s.reduce(((e,t)=>e[t]),e);return o[n]=i,o[n]}function gg(e,t,i){if(void 0===i)return t;for(const s of e){const e=i[s];void 0!==e&&(t[s]=e)}return t}var mg={};jd(mg,{easeIn:()=>yg,easeInOut:()=>Cg,easeInOutQuad:()=>Sg,easeInQuad:()=>bg,easeOut:()=>vg,easeOutQuad:()=>wg,inverseEaseOut:()=>xg,linear:()=>fg});var fg=e=>e,yg=e=>1-Math.cos(e*Math.PI/2),vg=e=>Math.sin(e*Math.PI/2),Cg=e=>-(Math.cos(e*Math.PI)-1)/2,bg=e=>e*e,wg=e=>1-(1-e)**2,Sg=e=>e<.5?2*e*e:1-(-2*e+2)**2/2,xg=e=>2*Math.asin(e)/Math.PI,Mg=.2,Dg=["initial","remove","update","add","trailing","end","none"],Ig={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:Mg,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1.2,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},Rg=(e=>(e.Loop="loop",e.Reverse="reverse",e))(Rg||{});function Eg(e){return e.every((e=>e instanceof Ip))?{nodes:e,selections:[]}:{nodes:[],selections:e}}function Ag(e,t){return e===t||(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(((e,i)=>Ag(e,t[i]))):Yu(e)&&Yu(t)?e.equals(t):!(!Qp(e)||!Qp(t))&&og(e,t,Ag))}var Lg=class{constructor(e){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=e.id,this.groupId=e.groupId,this.autoplay=e.autoplay??!0,this.ease=e.ease??fg,this.phase=e.phase;const t=e.duration??Ig[this.phase].animationDuration;this.duration=t*e.defaultDuration,this.delay=(e.delay??0)*e.defaultDuration,this.onComplete=e.onComplete,this.onPlay=e.onPlay,this.onStop=e.onStop,this.onUpdate=e.onUpdate,this.interpolate=this.createInterpolator(e.from,e.to),this.from=e.from,!0===e.skip&&(this.onUpdate?.(e.to,!1,this),this.onStop?.(this),this.onComplete?.(this),this.isComplete=!0),!1!==e.collapsable&&(this.duration=this.checkCollapse(e,this.duration))}checkCollapse(e,t){return Ag(e.from,e.to)?0:t}play(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isPlaying||this.isComplete||(this.isPlaying=!0,this.onPlay?.(this),this.autoplay&&(this.autoplay=!1,e&&this.onUpdate?.(this.from,!0,this)))}pause(){this.isPlaying=!1}stop(){this.isPlaying=!1,this.isComplete||(this.isComplete=!0,this.onStop?.(this))}update(e){if(this.isComplete)return e;!this.isPlaying&&this.autoplay&&this.play(!0);const t=this.elapsed;if(this.elapsed+=e,this.delay>this.elapsed)return 0;const i=this.interpolate(this.isReverse?1-this.delta:this.delta);this.onUpdate?.(i,!1,this);const s=this.delay+this.duration;return this.elapsed>=s?(this.stop(),this.isComplete=!0,this.onComplete?.(this),e-(s-t)):0}get delta(){return this.ease(ap(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(e,t){if("object"!==typeof t||Yu(t))return this.interpolateValue(e,t);const i=[];for(const s in t){const n=this.interpolateValue(e[s],t[s]);null!=n&&i.push([s,n])}return e=>{const t={};for(const[s,n]of i)t[s]=n(e);return t}}interpolateValue(e,t){if(null!=e&&null!=t){if(Yu(e))return i=>e[_u](t,i);try{switch(typeof e){case"number":return Tp(e,t);case"string":return Pp(e,t);case"boolean":if(e===t)return()=>e}}catch(i){}throw new Error(`Unable to interpolate values: ${e}, ${t}`)}}},kg={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function Tg(e,t,i,s,n,o,r){const{fromFn:a,toFn:l,applyFn:c=(e,t)=>e.setProperties(t)}=n,{nodes:h,selections:d}=Eg(s),u=(s,n)=>{let h,d=0,u=0;for(const p of n){const g=s[d]===p,m={last:u>=n.length-1,lastLive:d>=s.length-1,prev:n[u-1],prevFromProps:h,prevLive:s[d-1],next:n[u+1],nextLive:s[d+(g?1:0)]},f=`${e}_${t}_${p.id}`;i.stopByAnimationId(f);let y="unknown";g?o&&r&&(y=Ng(p,p.datum,o,r)):y="removed",p.transitionOut="removed"===y;const{phase:v,start:C,finish:b,delay:w,duration:S,...x}=a(p,p.datum,y,m),{phase:M,start:D,finish:I,delay:R,duration:E,...A}=l(p,p.datum,y,m),L=null==b;i.animate({id:f,groupId:e,phase:v??M??"update",duration:S??E,delay:w??R,from:x,to:A,ease:vg,collapsable:L,onPlay:()=>{c(p,{...C,...D,...x})},onUpdate(e){c(p,e)},onStop:()=>{c(p,{...C,...D,...x,...A,...b,...I})}}),g&&d++,u++,h=x}};let p=0;for(const g of d){const s=g.nodes();u(s.filter((e=>!g.isGarbage(e))),s),i.animate({id:`${e}_${t}_selection_${p}`,groupId:e,phase:"end",from:0,to:1,ease:vg,onStop(){g.cleanup()}}),p++}u(h,h)}function Pg(e,t,i,s,n,o,r){const{nodes:a,selections:l}=Eg(s),{start:c,finish:h,phase:d}=r;i.animate({id:`${e}_${t}`,groupId:e,phase:d??"update",from:n,to:o,ease:vg,onPlay:()=>{if(c){for(const e of a)e.setProperties(c);for(const e of l)for(const t of e.nodes())t.setProperties(c)}},onUpdate(e){for(const t of a)t.setProperties(e);for(const t of l)for(const i of t.nodes())i.setProperties(e)},onStop:()=>{for(const e of a)e.setProperties({...o,...h});for(const e of l){for(const t of e.nodes())t.setProperties({...o,...h});e.cleanup()}}})}function Ng(e,t,i,s){const n=i(e,t);return s.added.has(n)?"added":s.removed.has(n)?"removed":"updated"}var Fg=(e,t)=>{const i=Symbol(String(t));e[i]=void 0,Object.defineProperty(e,t,{get(){return this[i]},set(e){this[i]!==e&&(this[i]=e,this.invalid=!0)},enumerable:!0,configurable:!1})},Og=class e{constructor(t,i){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=e.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.domain=t,this.range=i}static is(t){return t instanceof e}transform(e){return e}transformInvert(e){return e}calcBandwidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=this.getDomain(),i=this.getPixelRange(),s=Math.abs(t[1]-t[0])/e+1,n=Math.floor(i),o=Math.min(s,n);return i/Math.max(1,o)}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(e,t){const i=t?.clampMode??this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const s=this.getDomain().map((e=>this.transform(e))),[n,o]=s,{range:r}=this,[a,l]=r;if(e=this.transform(e),"clamped"===i){const[t,i]=cp(s.map(Number));if(Number(e)<t)return a;if(Number(e)>i)return l}return n===o?(a+l)/2:e===n?a:e===o?l:a+(Number(e)-Number(n))/(Number(o)-Number(n))*(l-a)}invert(e){this.refresh();const t=this.getDomain().map((e=>this.transform(e))),[i,s]=t,{range:n}=this,[o,r]=n,a=o>r;let l;return e<(a?r:o)?a?s:i:e>(a?o:r)?a?i:s:(l=o===r?this.toDomain((Number(i)+Number(s))/2):this.toDomain(Number(i)+(e-o)/(r-o)*(Number(s)-Number(i))),this.transformInvert(l))}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&Xd.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){const[e,t]=this.range;return Math.abs(t-e)}};Og.defaultTickCount=5,Og.defaultMaxTickCount=6,Wd([Fg],Og.prototype,"domain",2),Wd([Fg],Og.prototype,"range",2),Wd([Fg],Og.prototype,"nice",2),Wd([Fg],Og.prototype,"interval",2),Wd([Fg],Og.prototype,"tickCount",2),Wd([Fg],Og.prototype,"minTickCount",2),Wd([Fg],Og.prototype,"maxTickCount",2);var Gg=Og;function Bg(e){if(0===e.length)return null;let t=1/0,i=-1/0;for(let n of e)n instanceof Date&&(n=n.getTime()),"number"===typeof n&&(n<t&&(t=n),n>i&&(i=n));const s=[t,i];return s.every(isFinite)?s:null}function zg(e,t,i){let s=!1;return e.length>2&&(e=Bg(e)??[NaN,NaN]),isNaN(t)||(s||(s=t>e[0]),e=[t,e[1]]),isNaN(i)||(s||(s=i<e[1]),e=[e[0],i]),e[0]>e[1]&&(e=[]),{extent:e,clipped:s}}function Hg(e,t){if(null==e||null==t||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(Array.isArray(e[i])&&Array.isArray(t[i])){if(!Hg(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1;return!0}function Vg(e){return"undefined"===typeof e?[]:Array.isArray(e)?e:[e]}function jg(e){return Array.from(new Set(e))}function Wg(e,t){return e.reduce(((e,i)=>{const s=t(i);return e[s]??(e[s]=[]),e[s].push(i),e}),{})}function Ug(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===e.length)return[];const s=[];for(let n=0;n<t;n++)s.push(e.at((n+i)%e.length));return s}function _g(e,t){const i=new Map;return t.forEach(((e,t)=>{i.set(e,t)})),e.sort(((e,t)=>(i.get(e)??1/0)-(i.get(t)??1/0)))}var Yg={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function Kg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date(e.getFullYear(),0,1);const i=e.getTimezoneOffset()-t.getTimezoneOffset(),s=e.getTime()-t.getTime()+6e4*i;return Math.floor(s/864e5)}function Zg(e,t){const i=(t-new Date(e.getFullYear(),0,1).getDay()+7)%7,s=new Date(e.getFullYear(),0,i+1);return s<=e?Math.floor(Kg(e,s)/7)+1:0}function $g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getFullYear();const i=new Date(t,0,1).getDay(),s=new Date(t,0,(4-i+7)%7-3+1);return s<=e?Math.floor(Kg(e,s)/7)+1:$g(e,t-1)}var Qg={a:e=>Yg.shortDays[e.getDay()],A:e=>Yg.days[e.getDay()],b:e=>Yg.shortMonths[e.getMonth()],B:e=>Yg.months[e.getMonth()],c:"%x, %X",d:(e,t)=>qg(e.getDate(),2,t??"0"),e:"%_d",f:(e,t)=>qg(1e3*e.getMilliseconds(),6,t??"0"),H:(e,t)=>qg(e.getHours(),2,t??"0"),I:(e,t)=>{const i=e.getHours()%12;return 0===i?"12":qg(i,2,t??"0")},j:(e,t)=>qg(Kg(e)+1,3,t??"0"),m:(e,t)=>qg(e.getMonth()+1,2,t??"0"),M:(e,t)=>qg(e.getMinutes(),2,t??"0"),L:(e,t)=>qg(e.getMilliseconds(),3,t??"0"),p:e=>e.getHours()<12?"AM":"PM",Q:e=>String(e.getTime()),s:e=>String(Math.floor(e.getTime()/1e3)),S:(e,t)=>qg(e.getSeconds(),2,t??"0"),u:e=>{let t=e.getDay();return t<1&&(t+=7),String(t%7)},U:(e,t)=>qg(Zg(e,0),2,t??"0"),V:(e,t)=>qg($g(e),2,t??"0"),w:(e,t)=>qg(e.getDay(),2,t??"0"),W:(e,t)=>qg(Zg(e,1),2,t??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(e,t)=>qg(e.getFullYear()%100,2,t??"0"),Y:(e,t)=>qg(e.getFullYear(),4,t??"0"),Z:e=>function(e){const t=e.getTimezoneOffset(),i=Math.abs(t);return`${t>0?"-":"+"}${qg(Math.floor(i/60),2,"0")}${qg(Math.floor(i%60),2,"0")}`}(e),"%":()=>"%"},Xg={_:" ",0:"0","-":""};function qg(e,t,i){const s=String(Math.floor(e));return s.length>=t?s:`${i.repeat(t-s.length)}${s}`}function Jg(e){const t=[];for(;e.length>0;){let i=e.indexOf("%");if(0!==i){const s=i>0?e.substring(0,i):e;t.push(s)}if(i<0)break;const s=e[i+1],n=Xg[s];null!=n&&i++;const o=e[i+1],r=Qg[o];if("function"===typeof r)t.push([r,n]);else if("string"===typeof r){const e=Jg(r);t.push([e,n])}else t.push(`${n??""}${o}`);e=e.substring(i+2)}return e=>{const i="number"===typeof e?new Date(e):e;return t.map((e=>"string"===typeof e?e:e[0](i,e[1]))).join("")}}function em(e){return e instanceof Date?e.getTime():e}function tm(e,t,i){const s=Jg(im(e,t,i));return e=>s(e)}function im(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=1/0;for(let a=1;a<e.length;a++)s=Math.min(s,Math.abs(e[a]-e[a-1]));const n=new Date(t[0]).getFullYear(),o=new Date(t.at(-1)).getFullYear()-n>0,r=isFinite(s)?function(e,t){if(e<iu)return 0;if(e<su)return 1;if(e<nu)return 2;if(e<ou)return 3;if(e<ru)return 4;if(e<24192e5||e<26784e5&&function(e){let t=new Date(e[0]).getMonth();for(let i=1;i<e.length;i++){const s=new Date(e[i]).getMonth();if(t===s)return!0;t=s}return!1}(t))return 5;if(e<lu)return 6;return 7}(s,e):function(e){if(du.floor(e)<e)return 0;if(gu.floor(e)<e)return 1;if(yu.floor(e)<e)return 2;if(Cu.floor(e)<e)return 3;if(Lu.floor(e)<e)return Eu.floor(e)<e?4:5;if(Tu.floor(e)<e)return 6;return 7}(e[0]);return function(e,t,i){const s=em(i[0]),n=em(i.at(-1)),o=Math.abs(n-s),r=t||7===e,a=[["hour",216e5,12096e5,3,"%I %p"],["hour",su,216e5,3,"%I:%M"],["second",1e3,216e5,1,":%S"],["ms",0,216e5,0,".%L"],["am/pm",su,216e5,3,"%p"]," ",["day",ou,ru,4,"%a"],["month",0===o?0:ru,314496e5,5,"%b %d"],["month",3024e6,31536e7,6,"%B"]," ",["year",r?0:lu,1/0,7,"%Y"]].filter((t=>{if("string"===typeof t)return!0;const[i,s,n,r]=t;return r>=e&&s<=o&&o<n})).reduce(((e,t)=>("string"===typeof t?e.result.push(t):e.used.has(t[0])||(e.result.push(t),e.used.add(t[0])),e)),{result:[],used:new Set}).result,l=a.findIndex((e=>"string"!==typeof e)),c=a.findLastIndex((e=>"string"!==typeof e));return a.slice(l,c+1).map((e=>"string"===typeof e?e:e[4])).join("").replaceAll(/\s+/g," ").trim()}(Math.max(r-i,0),o,e)}var sm=class e{constructor(){this.type="band",this.invalid=!0,this.range=[0,1],this.round=!1,this.interval=void 0,this.index=new Map,this.ordinalRange=[],this._domain=[],this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(t){return t instanceof e}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&Xd.warnOnce("Expected update to not invalidate scale"))}set domain(e){this.index=new Map,this.invalid=!0,this._domain=[];for(const t of e){const e=em(t);void 0===this.getIndex(e)&&this.index.set(e,this._domain.push(t)-1)}}get domain(){return this._domain}getDomain(){return this._domain}ticks(){return this.refresh(),this._domain}convert(e){this.refresh();const t=this.getIndex(e);return null==t?NaN:this.ordinalRange[t]??NaN}invert(e){this.refresh();const t=this.ordinalRange.findIndex((t=>t===e));return this.domain[t]}invertNearest(e){this.refresh();let t=-1,i=1/0;const s=this.ordinalRange.findIndex(((s,n)=>{if(s===e)return!0;const o=Math.abs(e-s);return o<i&&(i=o,t=n),!1}));return this.domain[s]??this.domain[t]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(e){e=ap(0,e,1),this._paddingInner=e,this._paddingOuter=e}get padding(){return this._paddingInner}set paddingInner(e){this._paddingInner=ap(0,e,1)}get paddingInner(){return this._paddingInner}set paddingOuter(e){this._paddingOuter=ap(0,e,1)}get paddingOuter(){return this._paddingOuter}update(){const e=this._domain.length;if(0===e)return;const[t,i]=this.range;let{_paddingInner:s}=this;const{_paddingOuter:n,round:o}=this,r=i-t;let a;1===e?(s=0,a=r*(1-2*n)):a=r/Math.max(1,e-s+2*n);const l=o?Math.floor(a):a;let c=t+(r-l*(e-s))/2,h=l*(1-s);o&&(c=Math.round(c),h=Math.round(h)),this._step=l,this._inset=c,this._bandwidth=h,this._rawBandwidth=a*(1-s),this.ordinalRange=this._domain.map(((e,t)=>c+l*t))}getIndex(e){return this.index.get(e instanceof Date?e.getTime():e)}};Wd([Fg],sm.prototype,"range",2),Wd([Fg],sm.prototype,"round",2),Wd([Fg],sm.prototype,"interval",2);var nm=sm,om=class{set(e){const{className:t=this.constructor.name}=this.constructor;if("object"!==typeof e)return Xd.warn(`unable to set ${t} - expecting a properties object`),this;const i=new Set(Object.keys(e));for(const s of zp(this))if(i.has(s)){const t=e[s],n=this;if(am(n[s]))if(n[s]instanceof rm){const e=n[s].reset(t);null!=e?n[s]=e:Xd.warn(`unable to set [${s}] - expecting a properties array`)}else n[s].set(t);else n[s]=t;i.delete(s)}for(const s of i)Xd.warn(`unable to set [${s}] in ${t} - property is unknown`);return this}isValid(e){return zp(this).every((t=>{const{optional:i}=function(e,t){const i=t.toString();for(;Bp(e);){const t=e[Fp];if(Object.hasOwn(t,i))return t[i];e=Object.getPrototypeOf(e)}}(this,t),s=!0===i||"undefined"!==typeof this[t];return s||Xd.warnOnce(`${e??""}[${t}] is required.`),s}))}toJson(){return zp(this).reduce(((e,t)=>{const i=this[t];return e[t]=am(i)?i.toJson():i,e}),{})}},rm=class e extends Array{constructor(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];super(i.length);const n=(o=e,Boolean(o?.prototype?.constructor?.name)?t=>(new e).set(t):e);var o;Object.defineProperty(this,"itemFactory",{value:n,enumerable:!1,configurable:!1}),this.set(i)}set(e){if(jp(e)){this.length=e.length;for(let t=0;t<e.length;t++)this[t]=this.itemFactory(e[t])}return this}reset(t){if(Array.isArray(t))return new e(this.itemFactory,...t)}toJson(){return this.map((e=>e?.toJson?.()??e))}};function am(e){return e instanceof om||e instanceof rm}function lm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{optional:i=!1,property:s}=t;return Gp(((n,o,r)=>{const a={...t,target:n,property:o};if(i&&"undefined"===typeof r||e(r,a))return am(n[o])&&!am(r)?(n[o].set(r),n[o]):r;const l=s??String(o).replace(/^_*/,""),c=n.constructor.className??n.constructor.name.replace(/Properties$/,"");let h=af(r);if(null!=h&&h.length>50){const e=h.length-50;h=h.slice(0,50)+`... (+${e} characters)`}return Xd.warn(`Property [${l}] of [${c}] cannot be set to [${h}]${e.message?`; expecting ${of(e,a)}`:""}, ignoring.`),Np}),void 0,{optional:i})}var cm,hm=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const s=[];return nf(((e,i)=>(s.length=0,t.every((t=>{const n=t(e,i);return n||s.push(of(t,i)),n})))),(()=>s.filter(Boolean).join(" AND ")))},dm=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return nf(((e,i)=>t.some((t=>t(e,i)))),(e=>t.map(function(e){return t=>of(t,e)}(e)).filter(Boolean).join(" OR ")))},um=rf(nf(((e,t)=>am(e)||Zp(e)&&am(t.target[t.property])),"a properties object")),pm=rf(nf((e=>Zp(e)),"an object")),gm=nf(Wp,"a boolean"),mm=nf(Kp,"a function"),fm=nf(Xp,"a string"),ym=(cm=nf(Jp,"a number"),Object.assign(cm,{restrict(){let{min:e,max:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=["a number"],s=qp(e),n=qp(t);return s&&n?i.push(`between ${e} and ${t} inclusive`):s?i.push(`greater than or equal to ${e}`):n&&i.push(`less than or equal to ${t}`),nf((i=>Jp(i)&&(!s||i>=e)&&(!n||i<=t)),i.join(" "))}})),vm=nf((e=>qp(e)&&!isNaN(e)),"a real number"),Cm=nf((e=>qp(e)&&isNaN(e)),"NaN"),bm=ym.restrict({min:0}),wm=ym.restrict({min:0,max:1}),Sm=ym.restrict({min:-360,max:360}),xm=dm(ym,Cm),Mm=function(e){return Object.assign(e,{restrict(){let{length:e,minLength:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i="an array";return qp(t)&&t>0?i="a non-empty array":qp(e)&&(i=`an array of length ${e}`),nf((i=>jp(i)&&(!qp(e)||i.length===e)&&(!qp(t)||i.length>=t)),i)}})}(nf(jp,"an array")),Dm=(e,t)=>nf(((t,i)=>jp(t)&&t.every((t=>e(t,i)))),(e=>{const i=of(Mm,e)??"";return t?`${i} of ${t}`:i})),Im=e=>Jp(e)||_p(e),Rm=e=>nf(((t,i)=>!Im(t)||!Im(i.target[e])||t<i.target[e]),`to be less than ${e}`),Em=e=>nf(((t,i)=>!Im(t)||!Im(i.target[e])||t>i.target[e]),`to be greater than ${e}`),Am=nf(_p,"Date object"),Lm=dm(Am,bm),km="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",Tm=nf((e=>Xp(e)&&kp.validColorString(e)),`color String. ${km}`),Pm=nf(Dm(Tm),`color strings. ${km}`),Nm=Dm(gm,"boolean values"),Fm=Dm(ym,"numbers"),Om=Dm(fm,"strings"),Gm=nf(Dm(Am),"Date objects"),Bm=nf(Dm(um),"objects"),zm=ef(["butt","round","square"],"a line cap"),Hm=ef(["round","bevel","miter"],"a line join"),Vm=ef(["solid","dashed","dotted"],"a line style"),jm=nf(Dm(bm),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Wm=ef(["top","right","bottom","left"],"a position"),Um=ef(["normal","italic","oblique"],"a font style"),_m=dm(ef(["normal","bold","bolder","lighter"],"a font weight"),ym.restrict({min:1,max:1e3})),Ym=ef(["never","always","hyphenate","on-space"],"a text wrap strategy"),Km=ef(["left","center","right"],"a text align"),Zm=ef(["top","middle","bottom"],"a vertical align"),$m=ef(["ellipsis","hide"],"an overflow strategy"),Qm=ef(["horizontal","vertical"],"a direction"),Xm=ef(["inside","outside"],"a placement"),qm=dm(ef(["exact","nearest"],"interaction range"),ym),Jm=ef(["top","bottom","left","right"]);function ef(e){return nf(((t,i)=>{const s=e.find((e=>{const i="string"===typeof e?e:e.value;return t===i}));if(null==s)return!1;if("string"!==typeof s&&(!0===s.deprecated||null!=s.deprecatedTo)){const e=[`Property [%s] with value '${s.value}' is deprecated.`];s.deprecatedTo&&e.push(`Use ${s.deprecatedTo} instead.`),Xd.warnOnce(e.join(" "),i.property)}return!0}),`${arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a"} keyword such as ${function(e){const t=e.filter((e=>"string"===typeof e||!0!==e.undocumented)).map((e=>`'${"string"===typeof e?e:e.value}'`));if(1===t.length)return t[0];const i=t.pop();return`${t.join(", ")} or ${i}`}(e)}`)}var tf=dm(hm(ym.restrict({min:1}),Rm("maxSpacing")),Cm),sf=dm(hm(ym.restrict({min:1}),Em("minSpacing")),Cm);function nf(e,t){return e.message=t,e}function of(e,t){return Kp(e.message)?e.message(t):e.message}function rf(e){return Object.assign(e,{restrict:t=>nf((e=>e instanceof t),(i=>of(e,i)??`an instance of ${t.name}`))})}function af(e){if("number"===typeof e){if(isNaN(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity"}return JSON.stringify(e)}var lf=(e=>(e.X="x",e.Y="y",e))(lf||{}),cf=class{constructor(){this.moduleMap=new Map}*modules(){for(const e of this.moduleMap.values())yield e.moduleInstance}addModule(e,t){if(this.moduleMap.has(e.optionsKey))throw new Error(`AG Charts - module already initialised: ${e.optionsKey}`);this.moduleMap.set(e.optionsKey,{module:e,moduleInstance:t(e)})}removeModule(e){const t=Xp(e)?e:e.optionsKey;this.moduleMap.get(t)?.moduleInstance.destroy(),this.moduleMap.delete(t)}getModule(e){return this.moduleMap.get(Xp(e)?e:e.optionsKey)?.moduleInstance}isEnabled(e){return this.moduleMap.has(Xp(e)?e:e.optionsKey)}mapModules(e){return Array.from(this.moduleMap.values(),((t,i)=>e(t.moduleInstance,i)))}destroy(){for(const e of this.moduleMap.keys())this.moduleMap.get(e)?.moduleInstance.destroy();this.moduleMap.clear()}},hf={};function df(e,t){const{nodes:i,selections:s}=Eg(e);for(const n of s){for(const e of n.nodes()){const i=t(e,e.datum);e.setProperties(i)}n.cleanup()}for(const n of i){const e=t(n,n.datum);n.setProperties(e)}}function uf(e){let t,i;const s=mf.exec(e);s&&([,t,e,i]=s);const n=gf.exec(e);if(!n)throw new Error(`The number formatter is invalid: ${e}`);const[,o,r,a,l,c,h,d,u,p,g]=n;return{fill:o,align:r,sign:a,symbol:l,zero:c,width:parseInt(h),comma:d,precision:parseInt(u),trim:Boolean(p),type:g,prefix:t,suffix:i}}function pf(e){const t="string"===typeof e?uf(e):e,{fill:i,align:s,sign:n="-",symbol:o,zero:r,width:a,comma:l,type:c,prefix:h="",suffix:d="",precision:u}=t;let{trim:p}=t;const g=null==u||isNaN(u);let m,f;if(c)if(c in yf&&c in ff)m=g?ff[c]:yf[c];else if(c in yf)m=yf[c];else{if(!(c in ff))throw new Error(`The number formatter type is invalid: ${c}`);m=ff[c]}else m=yf.g,p=!0;return f=null==u||g?c?6:12:u,e=>{let t=m(e,f);return p&&(t=t.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),l&&(t=function(e,t){let i=e.indexOf(".");i<0&&(i=e.length);const s=e.substring(0,i).split(""),n=e.substring(i);for(let o=s.length-3;o>0;o-=3)s.splice(o,0,t);return`${s.join("")}${n}`}(t,l)),t=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("("===i)return e>=0?t:`(${t})`;const s="+"===i?"+":"";return`${e>=0?s:wf}${t}`}(e,t,n),o&&"#"!==o&&(t=`${o}${t}`),"#"===o&&"x"===c&&(t=`0x${t}`),"s"===c&&(t=`${t}${function(e){return bf[xf(e)]}(e)}`),"%"!==c&&"p"!==c||(t=`${t}%`),null==a||isNaN(a)||(t=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:">",n=e;if(">"!==s&&s){if("<"===s)n=n.padEnd(t,i);else if("^"===s){const e=Math.max(0,t-n.length),s=Math.ceil(e/2),o=Math.floor(e/2);n=n.padStart(s+n.length,i),n=n.padEnd(o+n.length,i)}}else n=n.padStart(t,i);return n}(t,a,i??r,s)),t=`${h}${t}${d}`,t}}jd(hf,{resetMotion:()=>df});var gf=/^(?:(.)?([<>=^]))?([+\-( ])?([$\u20ac\xa3\xa5\u20a3\u20b9#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,mf=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/,ff={b:e=>Sf(e).toString(2),c:e=>String.fromCharCode(e),d:e=>Math.round(Math.abs(e)).toFixed(0),o:e=>Sf(e).toString(8),x:e=>Sf(e).toString(16),X:e=>ff.x(e).toUpperCase(),n:e=>ff.d(e),"%":e=>`${Sf(100*e).toFixed(0)}`},yf={e:(e,t)=>Math.abs(e).toExponential(t),E:(e,t)=>yf.e(e,t).toUpperCase(),f:(e,t)=>Math.abs(e).toFixed(t),F:(e,t)=>yf.f(e,t).toUpperCase(),g:(e,t)=>{if(0===e)return"0";const i=Math.abs(e),s=Math.floor(Math.log10(i));return s>=-4&&s<t?i.toFixed(t-1-s):i.toExponential(t-1)},G:(e,t)=>yf.g(e,t).toUpperCase(),n:(e,t)=>yf.g(e,t),p:(e,t)=>yf.r(100*e,t),r:(e,t)=>{if(0===e)return"0";const i=Math.abs(e),s=Math.floor(Math.log10(i))-(t-1);if(s<=0)return i.toFixed(-s);const n=10**s;return(Math.round(i/n)*n).toFixed()},s:(e,t)=>{const i=xf(e);return yf.r(e/10**i,t)},"%":(e,t)=>yf.f(100*e,t)},vf=-24,Cf=24,bf={[vf]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[Cf]:"Y"},wf="\u2212";function Sf(e){return Math.floor(Math.abs(e))}function xf(e){return ap(vf,e?3*Math.floor(Math.log10(Math.abs(e))/3):0,Cf)}var Mf=(e,t,i)=>({duration:t*i,timeInterval:e,step:i}),Df=[Mf(du,iu,1),Mf(du,iu,5),Mf(du,iu,15),Mf(du,iu,30),Mf(gu,su,1),Mf(gu,su,5),Mf(gu,su,15),Mf(gu,su,30),Mf(yu,nu,1),Mf(yu,nu,3),Mf(yu,nu,6),Mf(yu,nu,12),Mf(Cu,ou,1),Mf(Cu,ou,2),Mf(Eu,ru,1),Mf(Eu,ru,2),Mf(Eu,ru,3),Mf(Lu,au,1),Mf(Lu,au,2),Mf(Lu,au,3),Mf(Lu,au,4),Mf(Lu,au,6),Mf(Tu,lu,1)],If=[1,2,5,10];function Rf(e,t){return Math.abs(Math.round(e)-e)<t}function Ef(e,t,i,s,n){if(i<2)return[e,t];const o=Lf(e,t,i,s,n);return Number.isFinite(o)?(Rf(e/o,1e-12)||(e=Math.ceil(e/o)*o),Rf(t/o,1e-12)||(t=Math.floor(t/o)*o),Pf(e,t,o)):[]}function Af(e,t,i,s,n,o){const r=o??Math.abs(t-e)/Math.max(i,1);let a=0;for(const u of Df){if(r<=u.duration)break;a++}if(0===a){const o=Math.max(Lf(e,t,i,s,n),1);return tu.every(o)}if(a===Df.length){const r=null==o?Lf(e/lu,t/lu,i,s,n):1;return Tu.every(r)}const l=Df[a-1],c=Df[a],{timeInterval:h,step:d}=r-l.duration<c.duration-r?l:c;return h.every(d)}function Lf(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;if(e===t)return ap(1,s,n);if(i<1)return NaN;const o=Math.abs(t-e),r=10**Math.floor(Math.log10(o/i));let a=NaN,l=1/0,c=!1;for(const h of If){const e=Math.ceil(o/(h*r)),t=e>=s&&e<=n;if(c&&!t)continue;const d=Math.abs(e-i);(l>d||c!==t)&&(c||(c=t),l=d,a=h)}return a*r}function kf(e){for(let t=e.length-1;t>=0;t-=1)if("0"!==e[t])return t+1;return 0}function Tf(e,t){const i=uf(t??",f");(null==i.precision||isNaN(i.precision))&&(!i.type||"eEFgGnprs".includes(i.type)?i.precision=Math.max(...e.map((e=>{if(!Number.isFinite(e))return 0;const[t,s]=e.toExponential((i.type?6:12)-1).split(/\.|e/g);return("1"!==t&&"-1"!==t?1:0)+kf(s)+1}))):"f%".includes(i.type)&&(i.precision=Math.max(...e.map((e=>{if(!Number.isFinite(e)||0===e)return 0;const t=Math.floor(Math.log10(Math.abs(e))),s=i.type?6:12,n=kf(e.toExponential(s-1).split(/\.|e/g)[1]);return Math.max(0,n-t)})))));const s=pf(i);return e=>s(Number(e))}function Pf(e,t,i){if(!Number.isFinite(i)||i<=0)return[];const s=10**fp(i),n=Math.min(e,t),o=Math.max(e,t),r=[];for(let a=0;;a+=1){const e=Math.round((n+i*a)*s)/s;if(!(e<=o))break;r.push(e)}return r}function Nf(e,t){return e>=t&&(Xd.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0)}var Ff=class e extends Gg{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=$d,this.basePow=$d,this.log=e=>Math.min(...this.domain)>=0?this.baseLog(e):-this.baseLog(-e),this.pow=e=>Math.min(...this.domain)>=0?this.basePow(e):-this.basePow(-e),this.defaultClampMode="clamped"}toDomain(e){return e}transform(e){return Math.min(...this.domain)>=0?Math.log(e):-Math.log(-e)}transformInvert(e){return Math.min(...this.domain)>=0?Math.exp(e):-Math.exp(-e)}refresh(){this.base<=0&&(this.base=0,Xd.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){!this.domain||this.domain.length<2||(this.baseLog=e.getBaseLogMethod(this.base),this.basePow=e.getBasePowerMethod(this.base),this.nice&&this.updateNiceDomain())}updateNiceDomain(){const[e,t]=this.domain,i=e>t?Math.ceil:Math.floor,s=e>t?Math.floor:Math.ceil,n=this.pow(i(this.log(e))),o=this.pow(s(this.log(t)));this.niceDomain=[n,o]}ticks(){const e=this.tickCount??10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const t=this.base,[i,s]=this.getDomain(),n=Math.min(i,s),o=Math.max(i,s);let r=this.log(n),a=this.log(o);if(this.interval){const e=e=>e>=n&&e<=o,t=Pf(r,a,Math.min(Math.abs(this.interval),Math.abs(a-r))).map(this.pow).filter(e);if(!Nf(t.length,this.getPixelRange()))return t}if(!(t%1===0)||a-r>=e)return Ef(r,a,Math.min(a-r,e)).map(this.pow);const l=[],c=n>0;r=Math.floor(r)-1,a=Math.round(a)+1;const h=hp(this.range)/e;let d=1/0;for(let u=r;u<=a;u++){const e=this.convert(this.pow(u+1));for(let i=1;i<t;i++){const s=c?i:t-i+1,r=this.pow(u)*s,a=this.convert(r),p=Math.abs(d-a),g=Math.abs(a-e);r>=n&&r<=o&&(1===i||p>=h&&g>=h||0===l.length)&&(l.push(r),d=a)}}return l}tickFormat(e){let{count:t,ticks:i,specifier:s}=e;return t!==1/0&&null==i&&this.ticks(),s??(s=10===this.base?".0e":","),Xp(s)?pf(s):s}static getBaseLogMethod(e){switch(e){case 10:return Math.log10;case Math.E:return Math.log;case 2:return Math.log2;default:return t=>Math.log(t)/Math.log(e)}}static getBasePowerMethod(e){switch(e){case 10:return e=>e>=0?10**e:1/10**-e;case Math.E:return Math.exp;default:return t=>e**t}}};Wd([Fg],Ff.prototype,"base",2);var Of=Ff,Gf=class e extends Gg{constructor(){super([],[0,1]),this.type="time"}toDomain(e){return new Date(e)}convert(e,t){return super.convert(new Date(e),t)}invert(e){return new Date(super.invert(e))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const{interval:t,nice:i,tickCount:s,minTickCount:n,maxTickCount:o}=this,[r,a]=cp(this.getDomain().map(em));return null!=t?e.getTicksForInterval({start:r,stop:a,interval:t,availableRange:this.getPixelRange()})??e.getDefaultTicks({start:r,stop:a,tickCount:s,minTickCount:n,maxTickCount:o}):i&&2===s?this.niceDomain:i&&1===s?this.niceDomain.slice(0,1):e.getDefaultTicks({start:r,stop:a,tickCount:s,minTickCount:n,maxTickCount:o})}static getDefaultTicks(e){let{start:t,stop:i,tickCount:s,minTickCount:n,maxTickCount:o}=e;const r=Af(t,i,s,n,o);return r?r.range(new Date(t),new Date(i)):[]}static getTicksForInterval(e){let{start:t,stop:i,interval:s,availableRange:n}=e;if(!s)return[];if(s instanceof qd){const e=s.range(new Date(t),new Date(i));if(Nf(e.length,n))return;return e}const o=Math.abs(s);if(Nf((i-t)/o,n))return;const r=Df.findLast((e=>o%e.duration===0));if(r){return r.timeInterval.every(o/(r.duration/r.step)).range(new Date(t),new Date(i))}let a=new Date(t);const l=new Date(i),c=[];for(;a<=l;)c.push(a),a=new Date(a),a.setMilliseconds(a.getMilliseconds()+o);return c}tickFormat(e){let{ticks:t,domain:i,specifier:s,formatOffset:n}=e;return null==s?tm(t,i,n):Jg(s)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[e,t]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(e,t);const[i,s]=this.niceDomain;if(em(e)===em(i)&&em(t)===em(s))break;e=i,t=s}}updateNiceDomainIteration(e,t){const i=Math.min(em(e),em(t)),s=Math.max(em(e),em(t)),n=e>t,{interval:o}=this;let r;if(o instanceof qd)r=o;else{r=Af(i,s,"number"===typeof o?(s-i)/Math.max(o,1):this.tickCount,this.minTickCount,this.maxTickCount)}if(r){const e=r.range(new Date(i),new Date(s),!0),t=n?[...e].reverse():e,o=t[0],a=t.at(-1);this.niceDomain=[o,a]}}};function Bf(e,t){return e-t}var zf=class e extends nm{constructor(){super(...arguments),this.type="ordinal-time",this.tickCount=Gg.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.interval=void 0,this._domain=[],this.timestamps=[],this.sortedTimestamps=[],this.visibleRange=[0,1]}static is(t){return t instanceof e}setVisibleRange(e){this.visibleRange=e}set domain(e){this.invalid=!0,0!==e.length?(this._domain=e,this.timestamps=jg(e.map(em)),this.sortedTimestamps=this.timestamps.slice().sort(Bf)):this._domain=[]}get domain(){return this._domain}ticks(){this.refresh();const[e,t]=[this.timestamps[0],this.timestamps.at(-1)],i=Math.min(e,t),s=Math.max(e,t),n=e>t;let o;if(null==this.interval)o=this.getDefaultTicks(this.maxTickCount,n);else{const[e,t]=this.range,n=Math.abs(t-e);o=Gf.getTicksForInterval({start:i,stop:s,interval:this.interval,availableRange:n})??[]}const r=new Set;return o.filter((e=>{const t=this.convert(e);return!isNaN(t)&&!r.has(t)&&(r.add(t),!0)}))}getDefaultTicks(e,t){const i=[],s=this.timestamps.length,n=Math.ceil(s*(this.visibleRange[1]-this.visibleRange[0])/e),o=Math.floor(n/2);for(const[r,a]of this.timestamps.entries())n>0&&(r+o)%n||(t?i.push(new Date(this.timestamps[s-r-1])):i.push(new Date(a)));return i}convert(e){this.refresh();const t=Number(e);if(t<this.sortedTimestamps[0])return NaN;let i=this.findInterval(t);return this.timestamps[0]!==this.sortedTimestamps[0]&&(i=this.timestamps.length-i-1),this.ordinalRange[i]??NaN}findInterval(e){const{sortedTimestamps:t}=this;let i=0,s=t.length-1;for(;i<=s;){const n=Math.floor((i+s)/2);if(t[n]===e)return n;t[n]<e?i=n+1:s=n-1}return i}tickFormat(e){let{ticks:t,domain:i,specifier:s}=e;return null==s?tm(t,i):Jg(s)}invert(e){this.refresh();const t=this.ordinalRange.findIndex((t=>e<=t));return this.domain[t]}invertNearest(e){return new Date(super.invertNearest(e))}};Wd([Fg],zf.prototype,"tickCount",2),Wd([Fg],zf.prototype,"minTickCount",2),Wd([Fg],zf.prototype,"maxTickCount",2),Wd([Fg],zf.prototype,"interval",2);var Hf=zf;function Vf(e,t){return"number"===typeof e&&"number"===typeof t?e-t:"string"===typeof e&&"string"===typeof t?e.localeCompare(t):null==e&&null==t?0:null==e?-1:null==t?1:String(e).localeCompare(String(t))}function jf(e){return"function"===typeof e?e():e}function Wf(e,t,i){for(const s in e){const n=i(jf(e[s]),jf(t[s]));if(0!==n)return n}return 0}function Uf(e){let t=1,i=e.visible?1:0,s=e.dirty>0?1:0;for(const n of e.children(!1)){const e=Uf(n);t+=e.count,s+=e.dirtyCount,i+=e.visibleCount}return{count:t,visibleCount:i,dirtyCount:s}}var _f=Object.freeze([1,0,0,1,0,0]);function Yf(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-8;return e===t||Math.abs(t-e)<i}var Kf=class e{get e(){return[...this.elements]}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[..._f];this.elements=e}setElements(e){const t=this.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],this}get identity(){const e=this.elements;return Yf(e[0],1)&&Yf(e[1],0)&&Yf(e[2],0)&&Yf(e[3],1)&&Yf(e[4],0)&&Yf(e[5],0)}AxB(e,t,i){const s=e[0]*t[0]+e[2]*t[1],n=e[1]*t[0]+e[3]*t[1],o=e[0]*t[2]+e[2]*t[3],r=e[1]*t[2]+e[3]*t[3],a=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];(i=i??e)[0]=s,i[1]=n,i[2]=o,i[3]=r,i[4]=a,i[5]=l}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(t){const i=new Array(6);return t instanceof e?this.AxB(this.elements,t.elements,i):this.AxB(this.elements,[t.a,t.b,t.c,t.d,t.e,t.f],i),new e(i)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let i=t[0],s=t[1],n=t[2],o=t[3];const r=t[4],a=t[5],l=1/(i*o-s*n);return i*=l,s*=l,n*=l,o*=l,new e([o,-s,-n,i,n*a-o*r,s*r-i*a])}inverseTo(e){const t=this.elements;let i=t[0],s=t[1],n=t[2],o=t[3];const r=t[4],a=t[5],l=1/(i*o-s*n);return i*=l,s*=l,n*=l,o*=l,e.setElements([o,-s,-n,i,n*a-o*r,s*r-i*a]),this}invertSelf(){const e=this.elements;let t=e[0],i=e[1],s=e[2],n=e[3];const o=e[4],r=e[5],a=1/(t*n-i*s);return t*=a,i*=a,s*=a,n*=a,e[0]=n,e[1]=-i,e[2]=-s,e[3]=t,e[4]=s*r-n*o,e[5]=i*o-t*r,this}transformPoint(e,t){const i=this.elements;return{x:e*i[0]+t*i[2]+i[4],y:e*i[1]+t*i[3]+i[5]}}transformBBox(e,t){const i=this.elements,s=i[0],n=i[1],o=i[2],r=i[3],a=.5*e.width,l=.5*e.height,c=e.x+a,h=e.y+l,d=Math.abs(a*s)+Math.abs(l*o),u=Math.abs(a*n)+Math.abs(l*r);return t??(t=new bp(0,0,0,0)),t.x=c*s+h*o+i[4]-d,t.y=c*n+h*r+i[5]-u,t.width=d+d,t.height=u+u,t}toContext(e){if(this.identity)return;const t=this.elements;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}static flyweight(t){return e.instance.setElements(t.elements)}static updateTransformMatrix(e,t,i,s,n,o,r){const a=t,l=i;let c,h;1===a&&1===l?(c=0,h=0):(c=r?.scalingCenterX??0,h=r?.scalingCenterY??0);const d=s,u=Math.cos(d),p=Math.sin(d);let g,m;0===d?(g=0,m=0):(g=r?.rotationCenterX??0,m=r?.rotationCenterY??0);const f=n,y=o,v=c*(1-a)-g,C=h*(1-l)-m;return e.setElements([u*a,p*a,-p*l,u*l,u*v-p*C+g+f,p*v+u*C+m+y]),e}static fromContext(t){const i=t.getTransform();return new e([i.a,i.b,i.c,i.d,i.e,i.f])}};Kf.instance=new Kf;var Zf=Kf;function $f(e){return Xf(e.constructor)}var Qf=Symbol("isMatrixTransform");function Xf(e){return!0===e[Qf]}function qf(e){var t;const i=e;if(Xf(e))return e;const s=Symbol("matrix_combined_transform");class n extends i{constructor(){super(...arguments),this[t]=new Zf,this._dirtyTransform=!0}markDirtyTransform(){this._dirtyTransform=!0,super.markDirty(3)}updateMatrix(e){}computeTransformMatrix(){this._dirtyTransform&&(this[s].setElements(_f),this.updateMatrix(this[s]),this._dirtyTransform=!1)}toParent(e){return this.computeTransformMatrix(),this[s].identity?e.clone():this[s].transformBBox(e)}toParentPoint(e,t){return this.computeTransformMatrix(),this[s].identity?{x:e,y:t}:this[s].transformPoint(e,t)}fromParent(e){return this.computeTransformMatrix(),this[s].identity?e.clone():this[s].inverse().transformBBox(e)}fromParentPoint(e,t){return this.computeTransformMatrix(),this[s].identity?{x:e,y:t}:this[s].inverse().transformPoint(e,t)}computeBBox(){const e=super.computeBBox();return e?this.toParent(e):e}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||({x:e,y:t}=this.fromParentPoint(e,t)),super.pickNode(e,t)}render(e){this._dirtyTransform&&(this.computeTransformMatrix(),e.forceRender||(e={...e,forceRender:"dirtyTransform"}));const t=this[s];let i=!1;t.identity||(e.ctx.save(),i=!0,t.toContext(e.ctx)),super.render(e),i&&e.ctx.restore()}toSVG(){const e=super.toSVG(),t=this[s];if(t.identity||null==e)return e;const i=document.createElementNS("http://www.w3.org/2000/svg","g");i.append(...e.elements);const[n,o,r,a,l,c]=t.e;return i.setAttribute("transform",`matrix(${n} ${o} ${r} ${a} ${l} ${c})`),{elements:[i],defs:e.defs}}}return t=s,n[Qf]=!0,n}function Jf(e){var t;const i=e,s=Symbol("matrix_rotation");class n extends(qf(i)){constructor(){super(...arguments),this[t]=new Zf,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0}updateMatrix(e){super.updateMatrix(e);const{rotation:t,rotationCenterX:i,rotationCenterY:n}=this;0!==t&&(Zf.updateTransformMatrix(this[s],1,1,t,0,0,{rotationCenterX:i,rotationCenterY:n}),e.multiplySelf(this[s]))}}return t=s,Wd([Sp({type:"transform"})],n.prototype,"rotationCenterX",2),Wd([Sp({type:"transform"})],n.prototype,"rotationCenterY",2),Wd([Sp({type:"transform"})],n.prototype,"rotation",2),n}function ey(e){var t;const i=e,s=Symbol("matrix_scale");class n extends(qf(i)){constructor(){super(...arguments),this[t]=new Zf,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null}updateMatrix(e){super.updateMatrix(e);const{scalingX:t,scalingY:i,scalingCenterX:n,scalingCenterY:o}=this;1===t&&1===i||(Zf.updateTransformMatrix(this[s],t,i,0,0,0,{scalingCenterX:n,scalingCenterY:o}),e.multiplySelf(this[s]))}}return t=s,Wd([Sp({type:"transform"})],n.prototype,"scalingX",2),Wd([Sp({type:"transform"})],n.prototype,"scalingY",2),Wd([Sp({type:"transform"})],n.prototype,"scalingCenterX",2),Wd([Sp({type:"transform"})],n.prototype,"scalingCenterY",2),n}function ty(e){var t;const i=e,s=Symbol("matrix_translation");class n extends(qf(i)){constructor(){super(...arguments),this[t]=new Zf,this.translationX=0,this.translationY=0}updateMatrix(e){super.updateMatrix(e);const{translationX:t,translationY:i}=this;0===t&&0===i||(Zf.updateTransformMatrix(this[s],1,1,0,t,i),e.multiplySelf(this[s]))}}return t=s,Wd([Sp({type:"transform"})],n.prototype,"translationX",2),Wd([Sp({type:"transform"})],n.prototype,"translationY",2),n}var iy=class{static fromCanvas(e,t){const i=[];for(const s of e.traverseUp())$f(s)&&i.unshift(s);for(const s of i)t=s.fromParent(t);return $f(e)&&(t=e.fromParent(t)),t}static toCanvas(e,t){null==t?t=e.getBBox():$f(e)&&(t=e.toParent(t));for(const i of e.traverseUp())$f(i)&&(t=i.toParent(t));return t}static fromCanvasPoint(e,t,i){const s=[];for(const n of e.traverseUp())$f(n)&&s.unshift(n);for(const n of s)({x:t,y:i}=n.fromParentPoint(t,i));return $f(e)&&({x:t,y:i}=e.fromParentPoint(t,i)),{x:t,y:i}}static toCanvasPoint(e,t,i){$f(e)&&({x:t,y:i}=e.toParentPoint(t,i));for(const s of e.traverseUp())$f(s)&&({x:t,y:i}=s.toParentPoint(t,i));return{x:t,y:i}}},sy=class e extends Ip{constructor(e){super(e),this.opts=e,this.opacity=1,this.isContainerNode=!0,this.zIndexSubOrder=e?.zIndexSubOrder}static is(t){return t instanceof e}static computeChildrenBBox(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return bp.merge(Ip.extractBBoxes(e,t))}static compareChildren(e,t){return Wf([e.zIndex,...e.zIndexSubOrder??[void 0,void 0],e.serialNumber],[t.zIndex,...t.zIndexSubOrder??[void 0,void 0],t.serialNumber],Vf)}containsPoint(e,t){return!0}computeBBox(){return e.computeChildrenBBox(this.children())}preRender(){const e=super.preRender();return e.groups+=1,e.nonGroups-=1,e}isDirty(e){const{resized:t}=e,{dirty:i,dirtyZIndex:s}=this,n=i>=2||s||t;let o=n,r=!1;for(const a of this.children())if(o||(o=null==a.layerManager&&a.dirty>=1),r||(r=null!=a.layerManager&&a.dirty>=1),o)break;return this.opts?.name&&this._debug?.({name:this.opts.name,group:this,isDirty:n,isChildDirty:o,renderCtx:e}),{isDirty:n,isChildDirty:o,isChildLayerDirty:r}}debugSkip(e){e.stats&&this.opts?.name&&this._debug?.({name:this.opts.name,group:this,result:"skipping",counts:Uf(this),renderCtx:e})}render(t,i){if(i)return super.render(t);const{opts:{name:s}={},_debug:n}=this,{isDirty:o,isChildDirty:r,isChildLayerDirty:a}=this.isDirty(t),{ctx:l,stats:c}=t;let{forceRender:h}=t;if(!o&&!r&&!a&&!h)return this.debugSkip(t),void this.markClean({recursive:!1});"dirtyTransform"!==h&&(h||(h=this.dirtyZIndex)),l.globalAlpha*=this.opacity,this.dirtyZIndex&&this.sortChildren(e.compareChildren);const d=this.sortedChildren(),u=this.renderClip(t)??t.clipBBox,p=h!==t.forceRender||u!==t.clipBBox;this.renderChildren(d,p?{...t,forceRender:h,clipBBox:u}:t),super.render(t),this.clipRect&&l.restore();for(const e of this.virtualChildren())e.markClean({recursive:"virtual"});s&&c&&n?.({name:s,renderCtx:t,result:"rendered",skipped:c.nodesSkipped,counts:Uf(this),group:this})}sortedChildren(){let t=this.children();return this.hasVirtualChildren()&&(t=[...t].sort(e.compareChildren)),t}renderClip(e){if(!this.clipRect)return;const{x:t,y:i,width:s,height:n}=this.clipRect,{ctx:o}=e;return o.save(),o.beginPath(),o.rect(t,i,s,n),o.clip(),this._debug?.((()=>({name:this.opts?.name,clipRect:this.clipRect,ctxTransform:o.getTransform(),renderCtx:e,group:this}))),iy.toCanvas(this,this.clipRect)}renderChildren(e,t){const{ctx:i,forceRender:s,stats:n}=t;for(const o of e)o.visible&&this.visible?s||0!==o.dirty?(i.save(),o.render(t),i.restore()):n&&(n.nodesSkipped+=Uf(o).count):(o.markClean(),n&&(n.nodesSkipped+=Uf(o).count))}setClipRect(e){this.clipRect=e?iy.fromCanvas(this,e):void 0}setClipRectCanvasSpace(e){this.clipRect=e}toSVG(){if(!this.visible)return;const e=[],t=[];for(const i of this.sortedChildren()){const s=i.toSVG();null!=s&&(t.push(...s.elements),null!=s.defs&&e.push(...s.defs))}return{elements:t,defs:e}}};sy.className="Group",Wd([Sp({redraw:3,convertor:e=>ap(0,e,1)})],sy.prototype,"opacity",2);var ny=sy,oy=class extends(ey(ny)){},ry=class extends(Jf(ny)){},ay=class extends(ty(ny)){},ly=class extends(Jf(ty(ny))){},cy=Date.now(),hy={create(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Object.assign((function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];hy.check(...t)&&("function"===typeof i[0]&&(i=Vg(i[0]())),(()=>{const e=Date.now()-cy;if(e>2e3){const t=(Math.floor(e/100)/10).toFixed(1);Xd.log(`**** ${t}s since last log message ****`)}cy=Date.now()})(),Xd.log(...i))}),{check:()=>hy.check(...t)})},check(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];0===t.length&&t.push(!0);return Vg(Xu("agChartsDebug")).some((e=>t.includes(e)))}},dy=class e{constructor(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.parentNode=e,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=hy.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(Ip,t)?()=>new t:t}static select(t,i){return new e(t,i,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}static selectAll(e,t){const i=[],s=e=>{t(e)&&i.push(e);for(const t of e.children())s(t)};return s(e),i}static selectByClass(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return e.selectAll(t,(e=>s.some((t=>e instanceof t))))}static selectByTag(t,i){return e.selectAll(t,(e=>e.tag===i))}createNode(e,t,i){const s=this.nodeFactory(e);return s.datum=e,t?.(s),null==i?this._nodes.push(s):this._nodes.splice(i,0,s),this.parentNode.appendChild(s),s}update(e,t,i){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${e}`),i){const s=new Map(e.map(((e,t)=>[i(e),[e,t]])));for(const[e,t]of this._nodesMap.entries())if(s.has(t)){const[i]=s.get(t);e.datum=i,this.garbageBin.delete(e),s.delete(t)}else this.garbageBin.add(e);for(const[e,[i,n]]of s.entries())this._nodesMap.set(this.createNode(i,t,n),e)}else{const i=Math.max(e.length,this.data.length);for(let s=0;s<i;s++)s>=e.length?this.garbageBin.add(this._nodes[s]):s>=this._nodes.length?this.createNode(e[s],t):(this._nodes[s].datum=e[s],this.garbageBin.delete(this._nodes[s]))}return this.data=e.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter((e=>!this.garbageBin.has(e)||(this._nodesMap.delete(e),this.garbageBin.delete(e),e.destroy(),!1)))),this}clear(){return this.update([]),this}isGarbage(e){return this.garbageBin.has(e)}hasGarbage(){return this.garbageBin.size>0}each(e){for(const t of this._nodes.entries())e(t[1],t[1].datum,t[0]);return this}*[Symbol.iterator](){for(let e=0;e<this._nodes.length;e++){const t=this._nodes[e];yield{node:t,datum:t.datum,index:e}}}select(t){return e.selectAll(this.parentNode,t)}selectByClass(t){return e.selectByClass(this.parentNode,t)}selectByTag(t){return e.selectByTag(this.parentNode,t)}nodes(){return this._nodes}at(e){return this._nodes.at(e)}},uy=2*Math.PI;function py(e){return e%=uy,e+=uy,e%=uy}function gy(e){return e%=uy,(e+=uy)!==uy&&(e%=uy),e}function my(e){return(e%=uy)<-Math.PI?e+=uy:e>=Math.PI&&(e-=uy),e}function fy(e,t,i){const s=py(e),n=py(t),o=py(i);return n<o?n<=s&&s<=o:!(n>o)||(n<=s||s<=o)}function yy(e){return e/180*Math.PI}function vy(e){return e/Math.PI*180}function Cy(e,t,i){i&&([e,t]=[t,e]);const s=py(e);return(py(t)+uy-s)%uy}function by(e,t){return e=py(e),(t=py(t))-e+(e>t?2*Math.PI:0)}function wy(e,t,i,s){return{x:e+i*Math.cos(s),y:t+i*Math.sin(s)}}function Sy(e,t){return by(e,t)<1e-6?t:py(e-t)+t}function xy(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=Math.abs(t-e)>=2*Math.PI?2*Math.PI:py(t-e);return{startAngle:e=Sy(e,i),endAngle:t=e+s}}function My(e,t,i,s){const n=e-i,o=t-s;return n*n+o*o}function Dy(e,t,i,s,n,o,r){if(i===n&&s===o)return Math.min(r,My(e,t,i,s));const a=n-i,l=o-s,c=Math.max(0,Math.min(1,((e-i)*a+(t-s)*l)/(a*a+l*l))),h=i+c*a,d=s+c*l;return Math.min(r,My(e,t,h,d))}function Iy(e,t,i,s,n,o,r,a,l){a&&([r,o]=[o,r]);if(!fy(Math.atan2(t-s,e-i),o,r)){const r=i+Math.cos(o)*n,a=s+Math.sin(o)*n,c=i+Math.cos(o)*n,h=s+Math.sin(o)*n;return Math.min(l,My(e,t,r,a),My(e,t,c,h))}const c=n-Math.sqrt(My(e,t,i,s));return Math.min(l,c*c)}var Ry=e=>{const t=kp.fromString(e),[i,s,n]=kp.RGBtoOKLCH(t.r,t.g,t.b);return{l:i,c:s,h:n,a:t.a}},Ey=1e-6,Ay=e=>e.c<Ey||e.l<Ey||e.l>.999999,Ly=class{constructor(){this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(Ry)}update(){const{domain:e,range:t}=this;e.length<2&&(Xd.warnOnce("`colorDomain` should have at least 2 values."),0===e.length?e.push(0,1):1===e.length&&e.push(e[0]+1));for(let i=1;i<e.length;i++){if(e[i-1]>=e[i]){Xd.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort(((e,t)=>e-t));break}}if(t.length<e.length)for(let i=t.length;i<e.length;i++)t.push(t.length>0?t[0]:"black");this.parsedRange=this.range.map(Ry)}convert(e){this.refresh();const{domain:t,range:i,parsedRange:s}=this,n=t[0],o=t.at(-1),r=i[0],a=i[i.length-1];if(e<=n)return r;if(e>=o)return a;let l,c;if(2===t.length){const t=(e-n)/(o-n),s=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(t*(i.length-1)),i.length-2),c=(t-l*s)/s}else{for(l=0;l<t.length-2&&!(e<t[l+1]);l++);const i=t[l];c=(e-i)/(t[l+1]-i)}return((e,t,i)=>{let s;if(i=ap(0,i,1),Ay(e))s=t.h;else if(Ay(t))s=e.h;else{const n=e.h;let o=t.h;const r=t.h-e.h;r>180?o-=360:r<-180&&(o+=360),s=n*(1-i)+o*i}const n=e.c*(1-i)+t.c*i,o=e.l*(1-i)+t.l*i,r=e.a*(1-i)+t.a*i;return kp.fromOKLCH(o,n,s,r)})(s[l],s[l+1],c).toRgbaString()}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&Xd.warnOnce("Expected update to not invalidate scale"))}};Wd([Fg],Ly.prototype,"domain",2),Wd([Fg],Ly.prototype,"range",2);var ky=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;this.colorSpace=e,this.stops=t,this.bbox=i,this._cache=void 0}createGradient(e,t){const i=this.bbox??t;if(null!=this._cache&&this._cache.ctx===e&&this._cache.bbox.equals(i))return this._cache.gradient;const{stops:s,colorSpace:n}=this;if(0===s.length)return;if(1===s.length)return s[0].color;let o=this.createCanvasGradient(e,i);if(null==o)return;const r="oklch"===n;let a=s[0];o.addColorStop(a.offset,a.color);for(let l=1;l<s.length;l+=1){const e=s[l];if(r){const t=new Ly;t.domain=[a.offset,e.offset],t.range=[a.color,e.color];for(let i=a.offset+.05;i<e.offset;i+=.05)o.addColorStop(i,t.convert(i))}o.addColorStop(e.offset,e.color),a=e}return"createPattern"in o&&(o=o.createPattern()),this._cache={ctx:e,bbox:i,gradient:o},o}},Ty=class extends ky{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(e,t,arguments.length>3?arguments[3]:void 0),this.angle=i}createCanvasGradient(e,t){const{angle:i}=this,s=py(yy(i+90)),n=Math.cos(s),o=Math.sin(s),r=t.width,a=t.height,l=t.x+.5*r,c=t.y+.5*a,h=Math.sqrt(a*a+r*r)/2,d=Math.atan2(a,r);let u;u=s<Math.PI/2?s:s<Math.PI?Math.PI-s:s<1.5*Math.PI?s-Math.PI:2*Math.PI-s;const p=h*Math.abs(Math.cos(u-d));return e.createLinearGradient(l+n*p,c+o*p,l-n*p,c-o*p)}},Py=/^linear-gradient\((-?[\d.]+)deg,(.*?)\)$/i,Ny=class e extends Ip{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=e.defaultStyles.fill,this.stroke=e.defaultStyles.stroke,this.strokeWidth=e.defaultStyles.strokeWidth,this.lineDash=e.defaultStyles.lineDash,this.lineDashOffset=e.defaultStyles.lineDashOffset,this.lineCap=e.defaultStyles.lineCap,this.lineJoin=e.defaultStyles.lineJoin,this.miterLimit=void 0,this.opacity=e.defaultStyles.opacity,this.fillShadow=e.defaultStyles.fillShadow}restoreOwnStyles(){const{defaultStyles:e}=this.constructor;Object.assign(this,e)}onFillChange(){const{fill:e}=this;let t;if(e instanceof ky)this.gradient=e;else if(e?.startsWith("linear-gradient")&&(t=Py.exec(e))){const e=parseFloat(t[1]),i=[],s=t[2],n=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let o;for(;o=n.exec(s);)i.push(o[0]);this.gradient=new Ty("rgb",i.map(((e,t)=>({color:e,offset:t/(i.length-1)}))),e)}else this.gradient=void 0}align(e,t){const i=this.layerManager?.canvas?.pixelRatio??1,s=Math.round(e*i)/i;return null==t?s:0===t?0:t<1?Math.ceil(t*i)/i:Math.round((t+e)*i)/i-s}fillStroke(e,t){this.renderFill(e,t),this.renderStroke(e,t)}renderFill(e,t){if(this.fill){const{globalAlpha:i}=e;this.applyFill(e),this.applyFillAlpha(e),this.applyShadow(e),this.executeFill(e,t),e.globalAlpha=i}e.shadowColor="rgba(0, 0, 0, 0)"}executeFill(e,t){t?e.fill(t):e.fill()}applyFill(e){e.fillStyle=this.gradient?.createGradient(e,this.getBBox())??("string"===typeof this.fill?this.fill:void 0)??"black"}applyFillAlpha(e){e.globalAlpha*=this.opacity*this.fillOpacity}applyShadow(e){const t=this.layerManager?.canvas.pixelRatio??1,i=this.fillShadow;i?.enabled&&(e.shadowColor=i.color,e.shadowOffsetX=i.xOffset*t,e.shadowOffsetY=i.yOffset*t,e.shadowBlur=i.blur*t)}renderStroke(e,t){if(this.stroke&&this.strokeWidth){const{globalAlpha:i}=e;e.strokeStyle=this.stroke,e.globalAlpha*=this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin),null!=this.miterLimit&&(e.miterLimit=this.miterLimit),this.executeStroke(e,t),e.globalAlpha=i}}executeStroke(e,t){t?e.stroke(t):e.stroke()}containsPoint(e,t){return this.isPointInPath(e,t)}};Ny.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0},Wd([Sp({redraw:2})],Ny.prototype,"fillOpacity",2),Wd([Sp({redraw:2})],Ny.prototype,"strokeOpacity",2),Wd([Sp({redraw:2,changeCb:e=>e.onFillChange()})],Ny.prototype,"fill",2),Wd([Sp({redraw:2})],Ny.prototype,"stroke",2),Wd([Sp({redraw:2})],Ny.prototype,"strokeWidth",2),Wd([Sp({redraw:2})],Ny.prototype,"lineDash",2),Wd([Sp({redraw:2})],Ny.prototype,"lineDashOffset",2),Wd([Sp({redraw:2})],Ny.prototype,"lineCap",2),Wd([Sp({redraw:2})],Ny.prototype,"lineJoin",2),Wd([Sp({redraw:2})],Ny.prototype,"miterLimit",2),Wd([Sp({redraw:2,convertor:e=>ap(0,e,1)})],Ny.prototype,"opacity",2),Wd([Sp({redraw:2,checkDirtyOnAssignment:!0})],Ny.prototype,"fillShadow",2);var Fy=Ny,Oy=class extends Fy{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(e){this.x1=e,this.x2=e}set y(e){this.y1=e,this.y2=e}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new bp(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(e,t){return(this.x1===this.x2||this.y1===this.y2)&&this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(e,t)}distanceSquared(e,t){const{x1:i,y1:s,x2:n,y2:o}=this;return Dy(e,t,i,s,n,o,1/0)}render(e){const{ctx:t,forceRender:i,stats:s,devicePixelRatio:n}=e;if(0===this.dirty&&!i)return void(s&&(s.nodesSkipped+=Uf(this).count));let{x1:o,y1:r,x2:a,y2:l}=this;if(o===a){const{strokeWidth:e}=this,t=Math.round(o*n)/n+Math.trunc(e*n)%2/(2*n);o=t,a=t}else if(r===l){const{strokeWidth:e}=this,t=Math.round(r*n)/n+Math.trunc(e*n)%2/(2*n);r=t,l=t}t.beginPath(),t.moveTo(o,r),t.lineTo(a,l),this.fillStroke(t),this.fillShadow?.markClean(),super.render(e)}toSVG(){if(!this.visible)return;const e=document.createElementNS("http://www.w3.org/2000/svg","line");return e.setAttribute("x1",String(this.x1)),e.setAttribute("y1",String(this.y1)),e.setAttribute("x2",String(this.x2)),e.setAttribute("y2",String(this.y2)),e.setAttribute("stroke",this.stroke??"none"),e.setAttribute("stroke-opacity",String(this.strokeOpacity)),e.setAttribute("stroke-width",String(this.strokeWidth)),{elements:[e]}}};Oy.className="Line",Oy.defaultStyles={...Fy.defaultStyles,fill:void 0,strokeWidth:1},Wd([Sp({redraw:3})],Oy.prototype,"x1",2),Wd([Sp({redraw:3})],Oy.prototype,"y1",2),Wd([Sp({redraw:3})],Oy.prototype,"x2",2),Wd([Sp({redraw:3})],Oy.prototype,"y2",2);var Gy=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.maxCacheSize=e,this.store=new Map}get(e){if(!this.store.has(e))return;const t=this.store.get(e);return this.store.delete(e),this.store.set(e,t),t}has(e){return this.store.has(e)}set(e,t){if(this.store.set(e,t),this.store.size>this.maxCacheSize){const e=this.store.keys();let t=this.store.size-this.maxCacheSize;for(;t>0;){const i=e.next();i.done||this.store.delete(i.value),t--}}return t}clear(){this.store.clear()}},By=class{static measureText(e,t){return this.getMeasurer(t).measureText(e)}static measureLines(e,t){return this.getMeasurer(t).measureLines(e)}static getMeasurer(e){const t="string"===typeof e.font?e.font:Hy.toFontString(e.font),i=`${t}-${e.textAlign??"start"}-${e.textBaseline??"alphabetic"}`;return this.instanceMap.get(i)??this.createFontMeasurer(t,e,i)}static createFontMeasurer(e,t,i){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=qu("canvas");return i.style.display="block",i.style.width=e+"px",i.style.height=t+"px",i.getContext("2d")}();s.font=e,s.textAlign=t.textAlign??"start",s.textBaseline=t.textBaseline??"alphabetic";const n=new zy(s,t);return this.instanceMap.set(i,n),n}};By.instanceMap=new Gy(10);var zy=class{constructor(e,t){this.ctx=e,this.measureMap=new Gy(100),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline),e.font="string"===typeof t.font?t.font:Hy.toFontString(t.font),this.textMeasurer=new Vy((e=>this.cachedCtxMeasureText(e)),t.textBaseline??"alphabetic")}textWidth(e,t){return this.textMeasurer.textWidth(e,t)}measureText(e){return this.textMeasurer.measureText(e)}measureLines(e){return this.textMeasurer.measureLines(e)}cachedCtxMeasureText(e){if(!this.measureMap.has(e)){const t=this.ctx.measureText(e);this.measureMap.set(e,{actualBoundingBoxAscent:t.actualBoundingBoxAscent,emHeightAscent:t.emHeightAscent,emHeightDescent:t.emHeightDescent,actualBoundingBoxDescent:t.actualBoundingBoxDescent,actualBoundingBoxLeft:t.actualBoundingBoxLeft,actualBoundingBoxRight:t.actualBoundingBoxRight,alphabeticBaseline:t.alphabeticBaseline,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent,hangingBaseline:t.hangingBaseline,ideographicBaseline:t.ideographicBaseline,width:t.width})}return this.measureMap.get(e)}},Hy=class{static toFontString(e){let{fontSize:t=10,fontStyle:i,fontWeight:s,fontFamily:n,lineHeight:o}=e,r="";return i&&(r+=`${i} `),s&&(r+=`${s} `),r+=`${t}px`,o&&(r+=`/${o}px`),r+=` ${n}`,r.trim()}static getLineHeight(e){return Math.ceil(e*this.defaultLineHeight)}static getVerticalModifier(e){switch(e){case"hanging":case"top":return 0;case"middle":return.5;default:return 1}}};Hy.EllipsisChar="\u2026",Hy.defaultLineHeight=1.15,Hy.lineSplitter=/\r?\n/g;var Vy=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"alphabetic";this.measureTextFn=e,this.textBaseline=t,this.charMap=new Map}getMetrics(e){const t=this.measureTextFn(e);return t.fontBoundingBoxAscent??(t.fontBoundingBoxAscent=t.emHeightAscent),t.fontBoundingBoxDescent??(t.fontBoundingBoxDescent=t.emHeightDescent),{width:t.width,height:t.actualBoundingBoxAscent+t.actualBoundingBoxDescent,lineHeight:t.fontBoundingBoxAscent+t.fontBoundingBoxDescent,offsetTop:t.actualBoundingBoxAscent,offsetLeft:t.actualBoundingBoxLeft}}getMultilineMetrics(e){let t=0,i=0,s=0,n=0,o=0;const r=Hy.getVerticalModifier(this.textBaseline),a=[];let l=0;const c=e.length;for(const h of e){const e=this.measureTextFn(h);e.fontBoundingBoxAscent??(e.fontBoundingBoxAscent=e.emHeightAscent),e.fontBoundingBoxDescent??(e.fontBoundingBoxDescent=e.emHeightDescent),t<e.width&&(t=e.width),n<e.actualBoundingBoxLeft&&(n=e.actualBoundingBoxLeft),0===l?(i+=e.actualBoundingBoxAscent,s+=e.actualBoundingBoxAscent):o+=e.fontBoundingBoxAscent,l===c-1?i+=e.actualBoundingBoxDescent:o+=e.fontBoundingBoxDescent,a.push({text:h,width:e.width,height:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent,lineHeight:e.fontBoundingBoxAscent+e.fontBoundingBoxDescent,offsetTop:e.actualBoundingBoxAscent,offsetLeft:e.actualBoundingBoxLeft}),l++}return i+=o,s+=o*r,{width:t,height:i,offsetTop:s,offsetLeft:n,lineMetrics:a}}textWidth(e,t){if(t){let t=0;for(let i=0;i<e.length;i++)t+=this.textWidth(e.charAt(i));return t}return e.length>1?this.measureTextFn(e).width:this.charMap.get(e)??this.charWidth(e)}measureText(e){return this.getMetrics(e)}measureLines(e){const t="string"===typeof e?e.split(Hy.lineSplitter):e;return this.getMultilineMetrics(t)}charWidth(e){const{width:t}=this.measureTextFn(e);return this.charMap.set(e,t),t}},jy=class e extends Fy{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=e.defaultStyles.textAlign,this.textBaseline=e.defaultStyles.textBaseline}onTextChange(){this.lines=this.text?.split("\n").map((e=>e.trim()))??[]}static computeBBox(e,t,i,s){const{offsetTop:n,offsetLeft:o,width:r,height:a}=By.measureLines(e,s);return new bp(t-o,i-n,r,a)}computeBBox(){const{x:t,y:i,lines:s,textBaseline:n,textAlign:o}=this;return e.computeBBox(s,t,i,{font:this,textBaseline:n,textAlign:o})}isPointInPath(e,t){const i=this.getBBox();return!!i&&i.containsPoint(e,t)}render(e){const{ctx:t,forceRender:i,stats:s}=e;if(0===this.dirty&&!i)return void(s&&(s.nodesSkipped+=Uf(this).count));if(!this.lines.length||!this.layerManager)return void(s&&(s.nodesSkipped+=Uf(this).count));const{fill:n,stroke:o,strokeWidth:r}=this,{pixelRatio:a}=this.layerManager.canvas;if(t.font=Hy.toFontString(this),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,n){this.applyFill(t),t.globalAlpha*=this.opacity*this.fillOpacity;const{fillShadow:e}=this;e?.enabled&&(t.shadowColor=e.color,t.shadowOffsetX=e.xOffset*a,t.shadowOffsetY=e.yOffset*a,t.shadowBlur=e.blur*a),this.renderLines(((e,i,s)=>t.fillText(e,i,s)))}if(o&&r){t.strokeStyle=o,t.lineWidth=r,t.globalAlpha*=this.opacity*this.strokeOpacity;const{lineDash:e,lineDashOffset:i,lineCap:s,lineJoin:n}=this;e&&t.setLineDash(e),i&&(t.lineDashOffset=i),s&&(t.lineCap=s),n&&(t.lineJoin=n),this.renderLines(((e,i,s)=>t.strokeText(e,i,s)))}super.render(e)}renderLines(e){const{lines:t,x:i,y:s}=this,n=this.lineHeight??Hy.getLineHeight(this.fontSize);let o=(n-n*t.length)*Hy.getVerticalModifier(this.textBaseline);for(const r of t)e(r,i,s+o),o+=n}setFont(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight}setAlign(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline}toSVG(){if(!this.visible||!this.text)return;const e=document.createElementNS("http://www.w3.org/2000/svg","text");return e.setAttribute("font-family",this.fontFamily?.split(",")[0]??""),e.setAttribute("font-size",String(this.fontSize)),e.setAttribute("font-style",this.fontStyle??""),e.setAttribute("font-weight",String(this.fontWeight??"")),e.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[this.textAlign??"start"]),e.setAttribute("alignment-baseline",{alphabetic:"alphabetic",top:"top",bottom:"bottom",hanging:"hanging",middle:"middle",ideographic:"ideographic"}[this.textBaseline??"alphabetic"]),e.setAttribute("x",String(this.x)),e.setAttribute("y",String(this.y)),e.textContent=this.text??"",{elements:[e]}}};jy.className="Text",jy.defaultStyles={...Fy.defaultStyles,textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"},Wd([Sp({redraw:3})],jy.prototype,"x",2),Wd([Sp({redraw:3})],jy.prototype,"y",2),Wd([Sp({redraw:3,changeCb:e=>e.onTextChange()})],jy.prototype,"text",2),Wd([Sp()],jy.prototype,"fontStyle",2),Wd([Sp()],jy.prototype,"fontWeight",2),Wd([Sp()],jy.prototype,"fontSize",2),Wd([Sp()],jy.prototype,"fontFamily",2),Wd([Sp({redraw:3})],jy.prototype,"textAlign",2),Wd([Sp({redraw:3})],jy.prototype,"textBaseline",2),Wd([Sp({redraw:3})],jy.prototype,"lineHeight",2);var Wy=jy,Uy=class extends(Jf(Wy)){},_y=class extends(Jf(ty(Wy))){};function Yy(e,t,i,s,n,o){if(0===e.size)return!1;let r=e.x,a=e.y;null!=t&&(r-=(t.x-.5)*e.size,a-=(t.y-.5)*e.size);let l=r;r<i?l=i:r>i+n&&(l=i+n);let c=a;a<s?c=s:a>s+o&&(c=s+o);const h=r-l,d=a-c;return Math.sqrt(h*h+d*d)<=.5*e.size}function Ky(e,t,i,s,n){const o=e.x+e.width>t&&e.x<t+s,r=e.y+e.height>i&&e.y<i+n;return o&&r}var Zy={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}};function $y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=[];for(let s=0;s<e.length;s++){const n=e[s],{point:{x:o,y:r},label:{text:a}}=n;let{width:l,height:c}=n.label;if(l+=t,c+=t,i.some((e=>Ky(e,o,r,l,c))))return!0;i.push({index:s,text:a,x:o,y:r,width:l,height:c,datum:n})}return!1}function Qy(e,t){return e.length===t.length&&e.every(((e,i)=>Number(e)===Number(t[i])))}var Xy="class-instance";function qy(e,t,i){if(jp(t)){if(!jp(e)||e.length!==t.length||t.some(((t,i)=>null!=qy(e[i],t))))return t}else{if(Qp(t)){if(!Qp(e))return t;const s={},n=new Set([...Object.keys(e),...Object.keys(t)]);for(const o of n)if(e[o]!==t[o]&&!i?.includes(o))if(typeof e[o]===typeof t[o]){const i=qy(e[o],t[o]);null!==i&&(s[o]=i)}else s[o]=t[o];return Object.keys(s).length?s:null}if(e!==t)return t}return null}function Jy(e,t){return jp(e)?e.map((e=>Jy(e,t))):Qp(e)?cg(e,((e,i)=>t?.shallow?.includes(i)?ev(e):Jy(e,t))):e instanceof Map?new Map(Jy(Array.from(e))):ev(e)}function ev(e){return jp(e)?[...e]:Qp(e)?{...e}:Up(e)?new Date(e):Yp(e)?new RegExp(e.source,e.flags):e}function tv(e,t,i){for(var s=arguments.length,n=new Array(s>3?s-3:0),o=3;o<s;o++)n[o-3]=arguments[o];if(jp(e))t(e,...n),e.forEach(((e,s)=>{tv(e,t,i,...sv(n,s))}));else if(Qp(e)){t(e,...n);for(const s of Object.keys(e)){if(i?.skip?.includes(s))continue;const o=e[s];(jp(o)||Qp(o))&&tv(o,t,i,...sv(n,s))}}}function iv(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{path:s,matcherPath:n=s?.replace(/(\[[0-9+]+])/i,"[]"),skip:o=[]}=i;if(null==e)throw new Error(`AG Charts - target is uninitialised: ${s??"<root>"}`);if(null==t)return e;if(am(e))return e.set(t);const r=e,a=nv(e);for(const c in t){if(ug.has(c))continue;const h=`${n?n+".":""}${c}`;if(o.includes(h))continue;const d=t[c],u=`${s?s+".":""}${c}`,p=r.constructor,g=r[c];try{const t=nv(g),s=nv(d);if(a===Xy&&!(c in e)){Xd.warn(`unable to set [${u}] in ${p?.name} - property is unknown`);continue}if(null!=t&&null!=s&&s!==t&&(t!==Xy||"object"!==s)){Xd.warn(`unable to set [${u}] in ${p?.name} - can't apply type of [${s}], allowed types are: [${t}]`);continue}am(g)?r[c].set(d):"object"===s?(null==g&&(r[c]={}),iv(g??r[c],d,{...i,path:u,matcherPath:h})):r[c]=d}catch(l){Xd.warn(`unable to set [${u}] in [${p?.name}]; nested error is: ${l.message}`)}}return e}function sv(e,t){return e.map((e=>e?.[t]))}function nv(e){return null==e?null:eg(e)||Up(e)?"primitive":jp(e)?"array":Zp(e)?Qp(e)?"object":Xy:Kp(e)?"function":"primitive"}function ov(e,t){const i=jp(e)?e:e.split(".");if(1===i.length){const[e]=i;return Gp(((t,i,s)=>t[e]=s),(t=>t[e]),t)}return Gp(((e,t,s)=>pg(e,i,s)),(e=>dg(e,i)),t)}function rv(e){return Gp(((t,i,s)=>t[e]=s))}function av(e,t){return Gp(((i,s,n)=>i[e][t??s]=n))}function lv(e){const{newValue:t,oldValue:i,changeValue:s}=e;return Gp(((e,n,o,r)=>(o!==r&&(void 0!==r&&i?.call(e,r),void 0!==o&&t?.call(e,o),s?.call(e,o,r)),o)))}function cv(e){return t=e,(e,i)=>{Op(e,i).observers.push(t)};var t}var hv="color: green",dv="color: grey",uv=class e{constructor(e,t,i){this.defaultState=e,this.states=t,this.enterEach=i,this.debug=hy.create(!0,"animation"),this.state=e,this.debug(`%c${this.constructor.name} | init -> ${e}`,hv)}transition(t,i){if(!this.transitionChild(t,i)||this.state===e.child||this.state===e.parent)return;const s=this.state,n=this.states[this.state];let o=n[t];const r=`%c${this.constructor.name} | ${this.state} -> ${t} ->`;if(Array.isArray(o))o=o.find((e=>{if(!e.guard)return!0;const t=e.guard(i);return t||this.debug(`${r} ${e.target} (guarded)`,dv),t}));else if("object"===typeof o&&!(o instanceof e)&&o.guard&&!o.guard(i))return void this.debug(`${r} ${o.target} (guarded)`,dv);if(!o)return void this.debug(`${r} ${this.state}`,dv);const a=this.getDestinationState(o),l=a===this.state?void 0:n.onExit;this.debug(`${r} ${a}`,hv),this.state=a,"function"===typeof o?o(i):"object"!==typeof o||o instanceof e||o.action?.(i),l?.(),this.enterEach?.(s,a),a!==s&&a!==e.child&&a!==e.parent&&this.states[a].onEnter?.(s,i)}transitionAsync(e,t){setTimeout((()=>{this.transition(e,t)}),0)}is(t){return this.state===e.child&&this.childState?this.childState.is(t):this.state===t}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(t,i){return this.state!==e.child||!this.childState||(this.childState.transition(t,i),!this.childState.is(e.parent)||(this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.defaultState}`,hv),this.state=this.defaultState,this.states[this.state].onEnter?.(),this.childState.resetHierarchy(),!1))}getDestinationState(t){let i=this.state;return"string"===typeof t?i=t:t instanceof e?(this.childState=t,i=e.child):"object"===typeof t&&(t.target instanceof e?(this.childState=t.target,i=e.child):null!=t.target&&(i=t.target)),i}};uv.child="__child",uv.parent="__parent";var pv=uv,gv=class{static wrapText(e,t){return this.wrapLines(e,t).join("\n")}static wrapLines(e,t){const i=this.textWrap(e,t);return"hide"===t.overflow&&i.some((e=>e.endsWith(Hy.EllipsisChar)))?[]:i}static appendEllipsis(e){return e.replace(/[.,]{1,5}$/,"")+Hy.EllipsisChar}static truncateLine(e,t,i,s){const n=t.textWidth(Hy.EllipsisChar);let o=0,r=0;for(;r<e.length;r++){const s=t.textWidth(e.charAt(r));if(o+s>i)break;o+=s}if(e.length===r&&(!s||o+n<=i))return s?e+Hy.EllipsisChar:e;for(e=e.slice(0,r).trimEnd();e.length&&t.textWidth(e)+n>i;)e=e.slice(0,-1).trimEnd();return e+Hy.EllipsisChar}static textWrap(e,t){const i=e.split(Hy.lineSplitter),s=By.getMeasurer(t);if("never"===t.textWrap)return i.map((e=>this.truncateLine(e.trimEnd(),s,t.maxWidth)));const n=[],o="hyphenate"===t.textWrap,r=null==t.textWrap||"on-space"===t.textWrap;for(let a of i)if(a=a.trimEnd(),""!==a){for(let e=0,i=0,l=0;e<a.length;e++){const c=a.charAt(e);if(i+=s.textWidth(c)," "===c&&(l=e),i>t.maxWidth){if(0===e)break;const c=s.textWidth(a.slice(0,e+1));if(c<=t.maxWidth){i=c;continue}if(l){const o=this.getWordAt(a,l+1),c=s.textWidth(o);if(c<=t.maxWidth){n.push(a.slice(0,l).trimEnd()),a=a.slice(l).trimStart(),e=-1,i=0,l=0;continue}r&&c>t.maxWidth&&n.push(a.slice(0,l).trimEnd(),this.truncateLine(a.slice(l).trimStart(),s,t.maxWidth,!0))}else r&&n.push(this.truncateLine(a,s,t.maxWidth,!0));if(r){a="";break}const h=o?"-":"";let d=a.slice(0,e).trim();for(;d.length&&s.textWidth(d+h)>t.maxWidth;)d=d.slice(0,-1).trimEnd();if(n.push(d+h),!d.length){a="";break}a=a.slice(d.length).trimStart(),e=-1,i=0,l=0}}a&&n.push(a)}else n.push(a);return this.avoidOrphans(n,s,t),this.clipLines(n,s,t)}static getWordAt(e,t){const i=e.indexOf(" ",t);return-1===i?e.slice(t):e.slice(t,i)}static clipLines(e,t,i){if(!i.maxHeight)return e;const{height:s,lineMetrics:n}=t.measureLines(e);if(s<=i.maxHeight)return e;for(let o=0,r=0;o<n.length;o++){const{lineHeight:s}=n[o];if(r+=s,r>i.maxHeight){if("hide"===i.overflow)return[];const s=e.slice(0,o||1),n=s.pop();return s.concat(this.truncateLine(n,t,i.maxWidth,!0))}}return e}static avoidOrphans(e,t,i){if(!1===i.avoidOrphans||e.length<2)return;const{length:s}=e,n=e[s-1],o=e[s-2];if(o.length<n.length)return;const r=o.lastIndexOf(" ");if(-1===r||r===o.indexOf(" ")||n.includes(" "))return;const a=o.slice(r+1);t.textWidth(n+a)<=i.maxWidth&&(e[s-2]=o.slice(0,r),e[s-1]=a+" "+n)}},mv={isEnterprise:!1};function fv(e,t,i){void 0===i||""===i?e?.removeAttribute(t):e?.setAttribute(t,i.toString())}function yv(e,t){if(null==t)return;let i;for(i in t)"class"!==i&&fv(e,i,t[i])}function vv(e,t,i){if(!(e instanceof HTMLElement))return;const s=e.getAttribute(t);if(null===s)return i;const n=typeof{}[t];return"boolean"===n?"true"===s:"number"===n?Number(s):"string"===n?s:void 0}function Cv(e,t,i){null!=e&&(null==i?e.style.removeProperty(t):e.style.setProperty(t,i))}function bv(e,t,i,s){let{top:n,right:o,bottom:r,left:a,width:l,height:c}=s;return null!=a?null!=l?o=i.width-a+l:null!=o&&(l=i.width-a-o):null!=o&&null!=l&&(a=i.width-o-l),null!=n?null!=c?r=i.height-n-c:null!=r&&(c=i.height-r-n):null!=r&&null!=c&&(n=i.height-r-c),null==l?null==c?(l=e,c=t):l=Math.ceil(e*c/t):null==c&&(c=Math.ceil(t*l/e)),null==a&&(a=null==o?Math.floor((i.width-l)/2):i.width-o-l),null==n&&(n=null==r?Math.floor((i.height-c)/2):i.height-c-r),{x:a,y:n,width:l,height:c}}var wv="ag-chart-tooltip",Sv="ag-chart-dark-tooltip",xv={html:"",ariaLabel:""};function Mv(e){const t=(e,t,i)=>0===t||"."!==i[t-1]?". ":" ";return e.replace(/<br\s*\/?>/g,t).replace(/<\/p\s+>/g,t).replace(/<\/li\s*>/g,t).replace(/<[^<>]+>/g,"").replace(/\n+/g," ").replace(/\s+/g," ")}function Dv(e,t){if("string"===typeof e)return{html:e,ariaLabel:e};const{content:i=t?.content??"",title:s=t?.title,color:n=t?.color??"white",backgroundColor:o=t?.backgroundColor??"#888"}=e;return{html:`${s?`<div class="${wv}-title"\n        style="color: ${n}; background-color: ${o}">${s}</div>`:""}${i?`<div class="${wv}-content">${i}</div>`:""}`,ariaLabel:Mv(`${s?`${s}: `:""}${i}`)}}var Iv=class extends om{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}};Wd([lm(ef(["pointer","node","top","right","bottom","left","top-left","top-right","bottom-right","bottom-left",{value:"sparkline",undocumented:!0}],"a position type"))],Iv.prototype,"type",2),Wd([lm(ym)],Iv.prototype,"xOffset",2),Wd([lm(ym)],Iv.prototype,"yOffset",2);var Rv=class extends om{constructor(){super(),this.enabled=!0,this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new Iv,this.darkTheme=!1,this.bounds="extended",this.enableInteraction=!1,this.lastVisibilityChange=Date.now(),this.wrapTypes=["always","hyphenate","on-space","never"],this.showTimeout=0,this._showArrow=!0}get interactive(){return this.enableInteraction}setup(e){this.element=e.addChild("canvas-overlay",wv),this.element.classList.add(wv)}destroy(e){e.removeChild("canvas-overlay",wv)}isVisible(){return!this.element?.classList.contains(wv+"-hidden")}show(e,t,i,s){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{element:o}=this,r=o?.getBoundingClientRect();if(null!=s&&null!=o)o.innerHTML=s.html;else if(!o?.innerHTML)return void this.toggle(!1);const a=i.position?.type??this.position.type,l=i.position?.xOffset??0,c=i.position?.yOffset??0,h=this.getTooltipBounds({positionType:a,meta:i,yOffset:c,xOffset:l,canvasRect:t}),d={x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height},u=bv(o.clientWidth,o.clientHeight,d,h),p=d.x,g=d.y,m=d.width-o.clientWidth-1+p,f=d.height-o.clientHeight+g,y=ap(p,u.x,m),v=ap(g,u.y,f);let C=!1;if(null!=r){const e=d.width-r.width-1+p,t=d.height-r.height+g;C=e>m||t>f}const b=y!==u.x||v!==u.y,w=("node"===a||"pointer"===a||"sparkline"===a)&&!b&&!l&&!c,S=i.showArrow??this.showArrow??w;this.updateShowArrow(S),C&&(o.style.transition="none"),o.style.transform=`translate(${Math.round(y)}px, ${Math.round(v)}px)`,C&&(o.style.transition=""),i.enableInteraction?(this.enableInteraction=!0,o.style.pointerEvents="auto",fv(o,"aria-hidden",void 0)):(this.enableInteraction=!1,o.style.pointerEvents="none",fv(o,"aria-hidden",!0)),this.delay>0&&!n?(this.toggle(!1),this.showTimeout=setTimeout((()=>{this.toggle(!0)}),this.delay)):this.toggle(!0)}toggle(e){if(!this.element)return;const{classList:t}=this.element,i=(e,i)=>t.toggle(`${wv}-${e}`,i),s=this.isVisible();let n=1/0;if(e||clearTimeout(this.showTimeout),s!==e){const e=Date.now();n=e-this.lastVisibilityChange,this.lastVisibilityChange=e}n>5&&i("no-animation",!s&&e&&n>100),i("no-interaction",!this.enableInteraction),i("hidden",!e),i("arrow",this._showArrow),t.toggle(Sv,this.darkTheme);for(const o of this.wrapTypes)t.toggle(`${wv}-wrap-${o}`,o===this.wrapping)}updateShowArrow(e){this._showArrow=e}getTooltipBounds(e){if(!this.element)return{};const{positionType:t,meta:i,yOffset:s,xOffset:n,canvasRect:o}=e,{clientWidth:r,clientHeight:a}=this.element,l={width:r,height:a};switch(t){case"node":case"pointer":return l.top=i.offsetY+s-a-8,l.left=i.offsetX+n-r/2,l;case"top":return l.top=s,l.left=o.width/2-r/2+n,l;case"right":return l.top=o.height/2-a/2+s,l.left=o.width-r/2+n,l;case"left":return l.top=o.height/2-a/2+s,l.left=n,l;case"bottom":return l.top=o.height-a+s,l.left=o.width/2-r/2+n,l;case"top-left":return l.top=s,l.left=n,l;case"top-right":return l.top=s,l.left=o.width-r+n,l;case"bottom-right":return l.top=o.height-a+s,l.left=o.width-r+n,l;case"bottom-left":return l.top=o.height-a+s,l.left=n,l;case"sparkline":return mv.isEnterprise?l.top=s-a-8:l.top=i.offsetY+s-a-8,l.left=i.offsetX+n-r/2,l}}};Wd([lm(gm)],Rv.prototype,"enabled",2),Wd([lm(gm,{optional:!0})],Rv.prototype,"showArrow",2),Wd([cv(((e,t,i)=>{t&&e.element?.classList.add(t),i&&e.element?.classList.remove(i)})),lm(fm,{optional:!0})],Rv.prototype,"class",2),Wd([lm(bm)],Rv.prototype,"delay",2),Wd([lm(qm,{optional:!0})],Rv.prototype,"range",2),Wd([lm(Ym)],Rv.prototype,"wrapping",2),Wd([lm(um)],Rv.prototype,"position",2),Wd([lm(gm)],Rv.prototype,"darkTheme",2),Wd([lm(ef(["extended","canvas"]))],Rv.prototype,"bounds",2);var Ev=class extends om{constructor(){super(...arguments),this.id=Vu(this),this.node=new Uy({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(e,t){const{regionManager:i,proxyInteractionService:s,layoutManager:n}=e,o=i.getRegion("root");return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return()=>{for(const e of t)e()}}(...[n.addListener("layout:complete",(()=>this.updateA11yText(s,t))),o.addListener("hover",(t=>this.handleMouseMove(e,t))),o.addListener("leave",(t=>this.handleMouseLeave(e,t)))])}computeTextWrap(e,t){const{text:i,padding:s,wrapping:n}=this,o=Math.min(this.maxWidth??1/0,e)-2*s,r=this.maxHeight??t-2*s;if(!isFinite(o)&&!isFinite(r))return void(this.node.text=i);const a=gv.wrapText(i??"",{maxWidth:o,maxHeight:r,font:this,textWrap:n});this.node.text=a,this.truncated=a.includes(Hy.EllipsisChar)}updateA11yText(e,t){if(this.enabled&&this.text){const i=iy.toCanvas(this.node);if(i){const{id:s}=this;this.proxyText??(this.proxyText=e.createProxyElement({type:"text",id:s,parent:t})),this.proxyText.textContent=this.text,this.proxyText.updateBounds(i)}}else this.proxyText?.remove(),this.proxyText=void 0}handleMouseMove(e,t){if(void 0!==t&&this.enabled&&this.node.visible&&this.truncated){const{offsetX:i,offsetY:s}=t;e.tooltipManager.updateTooltip(this.id,{offsetX:i,offsetY:s,lastPointerEvent:t,showArrow:!1},Dv({content:this.text}))}}handleMouseLeave(e,t){e.tooltipManager.removeTooltip(this.id)}};Ev.SMALL_PADDING=10,Ev.LARGE_PADDING=20,Wd([lm(gm),av("node","visible")],Ev.prototype,"enabled",2),Wd([lm(fm,{optional:!0}),av("node")],Ev.prototype,"text",2),Wd([lm(Km,{optional:!0}),av("node")],Ev.prototype,"textAlign",2),Wd([lm(Um,{optional:!0}),av("node")],Ev.prototype,"fontStyle",2),Wd([lm(_m,{optional:!0}),av("node")],Ev.prototype,"fontWeight",2),Wd([lm(bm),av("node")],Ev.prototype,"fontSize",2),Wd([lm(fm),av("node")],Ev.prototype,"fontFamily",2),Wd([lm(Tm,{optional:!0}),av("node","fill")],Ev.prototype,"color",2),Wd([lm(bm,{optional:!0})],Ev.prototype,"spacing",2),Wd([lm(bm,{optional:!0})],Ev.prototype,"maxWidth",2),Wd([lm(bm,{optional:!0})],Ev.prototype,"maxHeight",2),Wd([lm(Ym)],Ev.prototype,"wrapping",2),Wd([lm(bm)],Ev.prototype,"padding",2),Wd([lm(fm)],Ev.prototype,"layoutStyle",2);var Av=class e extends ny{constructor(e){super(e),this.opts=e,this.lastBBox=void 0}static is(t){return t instanceof e}markDirty(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;super.markDirty(e,1)}preRender(){const e=super.preRender();return e.nonGroups>0&&(this.layer??(this.layer=this._layerManager?.addLayer({name:this.name,zIndex:this.zIndex,zIndexSubOrder:this.zIndexSubOrder,getComputedOpacity:()=>this.getComputedOpacity(),getVisibility:()=>this.getVisibility()})),this.opts?.deriveZIndexFromChildren&&this.deriveZIndexFromChildren()),e}debugSkip(e){super.debugSkip(e);const{stats:t}=e;t&&(t.layersSkipped++,t.nodesSkipped+=Uf(this).count)}render(e){if(!this.layer)return super.render(e);const{opts:{name:t}={},_debug:i,clipRect:s}=this,{isDirty:n,isChildDirty:o,isChildLayerDirty:r}=this.isDirty(e),{stats:a}=e;let{forceRender:l,clipBBox:c}=e;const h=this.getBBox();if(this.lastBBox?.equals(h)||(l="dirtyTransform",this.lastBBox=h),!n&&!o&&!r&&!l)return this.debugSkip(e),void this.markClean({recursive:!1});"dirtyTransform"!==l&&(l=o||this.dirtyZIndex),l&&this.layer.clear(),this.dirtyZIndex&&this.sortChildren(ny.compareChildren);const d=this.sortedChildren(),u=e.ctx.getTransform(),{context:p}=this.layer;if(p.save(),c){const{width:s,height:n,x:o,y:r}=c;p.beginPath(),p.rect(o,r,s,n),p.clip(),i?.((()=>({name:t,clipBBox:c,renderCtx:e,group:this,ctxTransform:p.getTransform()})))}p.setTransform(u),this.clipRect&&(c=this.renderClip({...e,ctx:p})),this.renderChildren(d,{...e,ctx:p,forceRender:l,clipBBox:c}),super.render(e,!0),s&&p.restore();for(const g of this.virtualChildren())g.markClean({recursive:"virtual"});a&&a.layersRendered++,p.restore(),p.verifyDepthZero?.(),t&&a&&i?.({name:t,renderCtx:e,result:"rendered",skipped:a.nodesSkipped,counts:Uf(this),group:this})}deriveZIndexFromChildren(){let e;for(const t of this.children())t.childNodeCounts.nonGroups&&(!e||ny.compareChildren(e,t)<0)&&(e=t);this.zIndex=e?.zIndex??-1/0,this.zIndexSubOrder=e?.zIndexSubOrder}_setLayerManager(e){this.layer&&(this._layerManager?.removeLayer(this.layer),this.layer=void 0),super._setLayerManager(e)}getComputedOpacity(){let e=1;for(const t of this.traverseUp(!0))t instanceof ny&&(e*=t.opacity);return e}getVisibility(){for(const e of this.traverseUp(!0))if(!e.visible)return!1;return!0}onVisibleChange(){this.layer&&(this.layer.enabled=this.visible)}onZIndexChange(){super.onZIndexChange(),this.layer&&this._layerManager?.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder)}};Av.className="Layer";var Lv=Av,kv=class extends(ty(Lv)){},Tv=class extends Fy{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new bp(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(e,t){return!1}render(e){const{ctx:t,forceRender:i,stats:s}=e;if(0===this.dirty&&!i)return void(s&&(s.nodesSkipped+=Uf(this).count));let{x1:n,y1:o,x2:r,y2:a}=this;n=this.align(n),o=this.align(o),r=this.align(r),a=this.align(a);const{fill:l,opacity:c,isRange:h}=this;if(!(!h||!l)){const{fillOpacity:e}=this;this.applyFill(t),t.globalAlpha=c*e,t.beginPath(),t.moveTo(n,o),t.lineTo(r,o),t.lineTo(r,a),t.lineTo(n,a),t.closePath(),t.fill()}const{stroke:d,strokeWidth:u,startLine:p,endLine:g}=this;if(!(!p&&!g||!d||!u)){const{strokeOpacity:e,lineDash:i,lineDashOffset:s,lineCap:l,lineJoin:h}=this;t.strokeStyle=d,t.globalAlpha=c*e,t.lineWidth=u,i&&t.setLineDash(i),s&&(t.lineDashOffset=s),l&&(t.lineCap=l),h&&(t.lineJoin=h),t.beginPath(),p&&(t.moveTo(n,o),t.lineTo(r,o)),g&&(t.moveTo(r,a),t.lineTo(n,a)),t.stroke()}this.fillShadow?.markClean(),super.render(e)}};Tv.className="Range",Tv.defaultStyles={...Fy.defaultStyles,strokeWidth:1},Wd([Sp({redraw:2})],Tv.prototype,"x1",2),Wd([Sp({redraw:2})],Tv.prototype,"y1",2),Wd([Sp({redraw:2})],Tv.prototype,"x2",2),Wd([Sp({redraw:2})],Tv.prototype,"y2",2),Wd([Sp({redraw:2})],Tv.prototype,"startLine",2),Wd([Sp({redraw:2})],Tv.prototype,"endLine",2),Wd([Sp({redraw:2})],Tv.prototype,"isRange",2);var Pv=class extends om{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return Hy.toFontString(this)}};function Nv(e){const{parallelFlipRotation:t=0,regularFlipRotation:i=0}=e,s=e.rotation?py(yy(e.rotation)):0,n=!s&&t>=0&&t<=Math.PI?-1:1,o=!s&&i>=0&&i<=Math.PI?-1:1;let r=0;return e.parallel?r=n*Math.PI/2:-1===o&&(r=Math.PI),{configuredRotation:s,defaultRotation:r,parallelFlipFlag:n,regularFlipFlag:o}}function Fv(e,t){return isNaN(e)?t?0:10:e}function Ov(e,t,i,s,n){const o=t>0&&t<=Math.PI,r=i>0&&i<=Math.PI;if(e){if(!t&&!i)return"center";if(s*(o||r?-1:1)===-1)return"end"}else if(s*n===-1)return"end";return"start"}function Gv(e,t,i){const{x:s,y:n,width:o,height:r}=t,a=new bp(s,n,0,0);i.transformBBox(a,t);const{x:l,y:c}=t;return{point:{x:l,y:c},label:{text:e,width:o,height:r}}}Wd([lm(gm)],Pv.prototype,"enabled",2),Wd([lm(Tm,{optional:!0})],Pv.prototype,"color",2),Wd([lm(Um,{optional:!0})],Pv.prototype,"fontStyle",2),Wd([lm(_m,{optional:!0})],Pv.prototype,"fontWeight",2),Wd([lm(bm)],Pv.prototype,"fontSize",2),Wd([lm(fm)],Pv.prototype,"fontFamily",2),Wd([lm(mm,{optional:!0})],Pv.prototype,"formatter",2);var Bv=(e=>(e[e.SERIES_BACKGROUND=0]="SERIES_BACKGROUND",e[e.AXIS_GRID=1]="AXIS_GRID",e[e.AXIS=2]="AXIS",e[e.SERIES_CROSSLINE_RANGE=3]="SERIES_CROSSLINE_RANGE",e[e.SERIES_LAYER=4]="SERIES_LAYER",e[e.SERIES_HIGHLIGHT=5]="SERIES_HIGHLIGHT",e[e.AXIS_FOREGROUND=6]="AXIS_FOREGROUND",e[e.SERIES_CROSSHAIR=7]="SERIES_CROSSHAIR",e[e.CHART_OVERLAY=8]="CHART_OVERLAY",e[e.SERIES_CROSSLINE_LINE=9]="SERIES_CROSSLINE_LINE",e[e.SERIES_ANNOTATION=10]="SERIES_ANNOTATION",e[e.CHART_ANNOTATION=11]="CHART_ANNOTATION",e[e.CHART_ANNOTATION_FOCUSED=12]="CHART_ANNOTATION_FOCUSED",e[e.STATUS_BAR=13]="STATUS_BAR",e[e.SERIES_LABEL=14]="SERIES_LABEL",e[e.LEGEND=15]="LEGEND",e[e.NAVIGATOR=16]="NAVIGATOR",e[e.FOREGROUND=17]="FOREGROUND",e))(Bv||{});function zv(e){return null!=e&&Object.hasOwn(e,"toString")&&Xp(e.toString())}function Hv(e){return null!=e&&Object.hasOwn(e,"valueOf")&&Jp(e.valueOf())}function Vv(e){return Jp(e)||_p(e)||Hv(e)}function jv(e,t){return null!=e&&(!t||Vv(e))}function Wv(e){return zv(e)&&Object.hasOwn(e,"id")?e.id:e}var Uv=e=>"value"===e?nf(((e,t)=>"line"===t.target.type),(e=>"range"===e.target.type?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'")):nf(((e,t)=>"range"===t.target.type),(e=>"line"===e.target.type?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'")),_v=(e,t,i,s,n)=>{const o="line"===e&&void 0!==t,r="range"===e&&void 0!==i;if(!o&&!r)return!0;const[a,l]=i??[t,void 0],c=Gg.is(s)||Hf.is(s),h=jv(a,c)&&!isNaN(s.convert(a)),d=jv(l,c)&&!isNaN(s.convert(l));if(o&&h||r&&h&&d)return n?.()??!0;const u=["Expecting crossLine"];return r?(h||u.push(`range start ${af(a)}`),d||u.push(`${h?"":"and "}range end ${af(l)}`)):u.push(`value ${af(a)}`),u.push("to match the axis scale domain."),Xd.warnOnce(u.join(" ")),!1},Yv={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},Kv={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function Zv(e){let{yDirection:t,padding:i=0,position:s="top",bbox:n}=e;const o=t?Yv:Kv,{xTranslationDirection:r,yTranslationDirection:a}=o[s];return{xTranslation:r*(i+n.width/2),yTranslation:a*(i+n.height/2)}}function $v(e){let{yDirection:t,bbox:i,padding:s=0,position:n="top"}=e;const o={};return n.startsWith("inside")||("top"!==n||t?"bottom"!==n||t?"left"===n&&t?o.left=s+i.width:"right"===n&&t&&(o.right=s+i.width):o.bottom=s+i.height:o.top=s+i.height),o}var Qv=e=>{let{direction:t,xEnd:i,yStart:s,yEnd:n}=e;return"y"===t?{x:i/2,y:s}:{x:i,y:isNaN(n)?s:(s+n)/2}},Xv=e=>{let{direction:t,xStart:i,xEnd:s,yStart:n,yEnd:o}=e;return"y"===t?{x:i,y:isNaN(o)?n:(n+o)/2}:{x:s/2,y:n}},qv=e=>{let{direction:t,xEnd:i,yStart:s,yEnd:n}=e;return"y"===t?{x:i,y:isNaN(n)?s:(s+n)/2}:{x:i/2,y:isNaN(n)?s:n}},Jv=e=>{let{direction:t,xStart:i,xEnd:s,yStart:n,yEnd:o}=e;return"y"===t?{x:s/2,y:isNaN(o)?n:o}:{x:i,y:isNaN(o)?n:(n+o)/2}},eC=e=>{let{direction:t,xStart:i,xEnd:s,yStart:n}=e;return"y"===t?{x:i/2,y:n}:{x:s,y:n}},tC=e=>{let{direction:t,xStart:i,yStart:s,yEnd:n}=e;return"y"===t?{x:i,y:isNaN(n)?s:n}:{x:i,y:s}},iC=e=>{let{direction:t,xEnd:i,yStart:s,yEnd:n}=e;return"y"===t?{x:i,y:s}:{x:i,y:isNaN(n)?s:n}},sC=e=>{let{direction:t,xStart:i,xEnd:s,yStart:n,yEnd:o}=e;return"y"===t?{x:s,y:isNaN(o)?n:o}:{x:i,y:isNaN(o)?n:o}},nC={top:{c:Qv},bottom:{c:Jv},left:{c:Xv},right:{c:qv},topLeft:{c:eC},topRight:{c:iC},bottomLeft:{c:tC},bottomRight:{c:sC},inside:{c:e=>{let{xEnd:t,yStart:i,yEnd:s}=e;return{x:t/2,y:isNaN(s)?i:(i+s)/2}}},insideLeft:{c:Xv},insideRight:{c:qv},insideTop:{c:Qv},insideBottom:{c:Jv},insideTopLeft:{c:eC},insideBottomLeft:{c:tC},insideTopRight:{c:iC},insideBottomRight:{c:sC}},oC=ef(["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],"crossLine label position"),rC=class extends om{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};Wd([lm(gm,{optional:!0})],rC.prototype,"enabled",2),Wd([lm(fm,{optional:!0})],rC.prototype,"text",2),Wd([lm(Um,{optional:!0})],rC.prototype,"fontStyle",2),Wd([lm(_m,{optional:!0})],rC.prototype,"fontWeight",2),Wd([lm(bm)],rC.prototype,"fontSize",2),Wd([lm(fm)],rC.prototype,"fontFamily",2),Wd([lm(ym)],rC.prototype,"padding",2),Wd([lm(Tm,{optional:!0})],rC.prototype,"color",2),Wd([lm(oC,{optional:!0})],rC.prototype,"position",2),Wd([lm(Sm,{optional:!0})],rC.prototype,"rotation",2),Wd([lm(gm,{optional:!0})],rC.prototype,"parallel",2);var aC=class e extends om{constructor(){super(),this.id=Vu(this),this.label=new rC,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.group=new Lv({name:this.id,zIndex:e.LINE_LAYER_ZINDEX}),this.labelGroup=new Lv({name:this.id,zIndex:e.LABEL_LAYER_ZINDEX}),this.crossLineRange=new Tv,this.crossLineLabel=new _y,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1,this.group.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}update(e){const{enabled:t,data:i,type:s,value:n,range:o,scale:r}=this;if(!s||!r||!t||!e||!_v(s,n,o,r)||0===i.length)return this.group.visible=!1,void(this.labelGroup.visible=!1);this.group.visible=e,this.labelGroup.visible=e,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()}calculateLayout(e,t){if(!e)return;const{scale:i,gridLength:s,sideFlag:n,direction:o,label:{position:r="top"},clippedRange:a,strokeWidth:l=0}=this;if(this.data=[],!i)return;const c=i.bandwidth??0,h=i.step??0,d=(t?-1:1)*(i instanceof nm?(h-c)/2:0),[u,p]=[0,n*s];let[g,m]=this.getRange();const f=void 0===m&&Hf.is(i)?c/2+d:0;let[y,v]=[Number(i.convert(g,{clampMode:"clamped"}))-d+f,i.convert(m,{clampMode:"clamped"})+c+d];y=lp(y,a),v=lp(v,a),[g,m]=[Number(i.convert(g))+f,i.convert(m)+c];const C=(g===y||m===v||y!==v)&&Math.abs(v-y)>0;if(C&&y>v&&([y,v]=[v,y],[g,m]=[m,g]),g-d>=y&&(g-=d),m+d<=v&&(m+=d),this.isRange=C,this.startLine=l>0&&g>=y&&g<=y+d,this.endLine=l>0&&m>=v-c-d&&m<=v,!C&&!this.startLine&&!this.endLine)return;if(this.data=[y,v],!this.label.enabled)return;const{c:b=Qv}=nC[r]??{},{x:w,y:S}=b({direction:o,xStart:u,xEnd:p,yStart:y,yEnd:v});this.labelPoint={x:w,y:S}}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}updateRangeNode(){const{crossLineRange:e,sideFlag:t,gridLength:i,data:s,startLine:n,endLine:o,isRange:r,fill:a,fillOpacity:l,stroke:c,strokeWidth:h,lineDash:d}=this;e.x1=0,e.x2=t*i,e.y1=s[0],e.y2=s[1],e.startLine=n,e.endLine=o,e.isRange=r,e.fill=a,e.fillOpacity=l??1,e.stroke=c,e.strokeWidth=h??1,e.strokeOpacity=this.strokeOpacity??1,e.lineDash=d}updateLabel(){const{crossLineLabel:e,label:t}=this;t.text&&(e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.fill=t.color,e.text=t.text)}positionLabel(){const{crossLineLabel:e,labelPoint:{x:t,y:i}={},label:{parallel:s,rotation:n,position:o="top",padding:r=0},direction:a,parallelFlipRotation:l,regularFlipRotation:c}=this;if(void 0===t||void 0===i)return;const{defaultRotation:h,configuredRotation:d}=Nv({rotation:n,parallel:s,regularFlipRotation:c,parallelFlipRotation:l});e.rotation=h+d,e.textBaseline="middle",e.textAlign="center";const u=e.getBBox();if(!u)return;const p="y"===a,{xTranslation:g,yTranslation:m}=Zv({yDirection:p,padding:r,position:o,bbox:u});e.translationX=t+g,e.translationY=i+m}getZIndex(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?e.RANGE_LAYER_ZINDEX:e.LINE_LAYER_ZINDEX}getRange(){const{value:e,range:t,scale:i}=this,s=Gg.is(i)||Hf.is(i),n=t?.[0]??e;let o=t?.[1];return s||void 0!==o||(o=n),s&&n===o&&(o=void 0),[n,o]}computeLabelBBox(){const{label:e}=this;if(!e.enabled)return;const t=new _y;t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=e.text;const{labelPoint:{x:i,y:s}={},label:{parallel:n,rotation:o,position:r="top",padding:a=0},direction:l,parallelFlipRotation:c,regularFlipRotation:h}=this;if(void 0===i||void 0===s)return;const{configuredRotation:d}=Nv({rotation:o,parallel:n,regularFlipRotation:h,parallelFlipRotation:c});t.rotation=d,t.textBaseline="middle",t.textAlign="center";const u=t.getBBox();if(!u)return;const p="y"===l,{xTranslation:g,yTranslation:m}=Zv({yDirection:p,padding:a,position:r,bbox:u});return t.x=i+g,t.y=s+m,t.getBBox()}calculatePadding(e){const{isRange:t,startLine:i,endLine:s,direction:n,label:{padding:o=0,position:r="top"}}=this;if(!t&&!i&&!s)return;const a=this.computeLabelBBox();if(null==a?.x||null==a?.y)return;const l=$v({yDirection:"y"===n,padding:o,position:r,bbox:a});e.left=Math.max(e.left??0,l.left??0),e.right=Math.max(e.right??0,l.right??0),e.top=Math.max(e.top??0,l.top??0),e.bottom=Math.max(e.bottom??0,l.bottom??0)}};aC.LINE_LAYER_ZINDEX=9,aC.RANGE_LAYER_ZINDEX=3,aC.LABEL_LAYER_ZINDEX=14,aC.className="CrossLine",Wd([lm(gm,{optional:!0})],aC.prototype,"enabled",2),Wd([lm(ef(["range","line"],"a crossLine type"),{optional:!0})],aC.prototype,"type",2),Wd([lm(hm(Uv("range"),Mm.restrict({length:2})),{optional:!0})],aC.prototype,"range",2),Wd([lm(Uv("value"),{optional:!0})],aC.prototype,"value",2),Wd([lm(Tm,{optional:!0})],aC.prototype,"fill",2),Wd([lm(wm,{optional:!0})],aC.prototype,"fillOpacity",2),Wd([lm(Tm,{optional:!0})],aC.prototype,"stroke",2),Wd([lm(ym,{optional:!0})],aC.prototype,"strokeWidth",2),Wd([lm(wm,{optional:!0})],aC.prototype,"strokeOpacity",2),Wd([lm(jm,{optional:!0})],aC.prototype,"lineDash",2),Wd([lm(um)],aC.prototype,"label",2);var lC=aC,cC=["stroke","lineDash"],hC=Dm((e=>Zp(e)&&Object.keys(e).every((e=>cC.includes(e)))),"objects with gridline style properties such as 'stroke' or 'lineDash'"),dC=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};function uC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[void 0];return Gp(((i,s,n)=>t.includes(n)?Kp(e)?e(n):e:n))}Wd([lm(gm)],dC.prototype,"enabled",2),Wd([lm(bm)],dC.prototype,"width",2),Wd([lm(hC)],dC.prototype,"style",2);var pC=nf((e=>Jp(e)&&e>0||e instanceof qd),"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),gC=class extends om{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};Wd([lm(pC,{optional:!0})],gC.prototype,"step",2),Wd([lm(Mm,{optional:!0})],gC.prototype,"values",2),Wd([lm(tf),uC(NaN)],gC.prototype,"minSpacing",2),Wd([lm(sf),uC(NaN)],gC.prototype,"maxSpacing",2);var mC=class extends om{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}};Wd([lm(gm)],mC.prototype,"enabled",2),Wd([lm(Um,{optional:!0})],mC.prototype,"fontStyle",2),Wd([lm(_m,{optional:!0})],mC.prototype,"fontWeight",2),Wd([lm(ym.restrict({min:1}))],mC.prototype,"fontSize",2),Wd([lm(fm)],mC.prototype,"fontFamily",2),Wd([lm(bm)],mC.prototype,"padding",2),Wd([lm(xm),uC(NaN)],mC.prototype,"minSpacing",2),Wd([lm(Tm,{optional:!0})],mC.prototype,"color",2),Wd([lm(Sm,{optional:!0})],mC.prototype,"rotation",2),Wd([lm(gm)],mC.prototype,"avoidCollisions",2),Wd([lm(gm)],mC.prototype,"mirrored",2),Wd([lm(gm)],mC.prototype,"parallel",2),Wd([lm(mm,{optional:!0})],mC.prototype,"formatter",2),Wd([lm(fm,{optional:!0})],mC.prototype,"format",2);var fC=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}};Wd([lm(gm)],fC.prototype,"enabled",2),Wd([lm(bm)],fC.prototype,"width",2),Wd([lm(Tm,{optional:!0})],fC.prototype,"stroke",2);var yC=class extends om{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}};Wd([lm(gm)],yC.prototype,"enabled",2),Wd([lm(bm)],yC.prototype,"width",2),Wd([lm(bm)],yC.prototype,"size",2),Wd([lm(Tm,{optional:!0})],yC.prototype,"stroke",2);var vC=class extends om{constructor(){super(...arguments),this.caption=new Ev,this.enabled=!1,this.spacing=Ev.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};function CC(e){const[t,i]=cp(e.range),s=Math.floor(t),n=Math.ceil(i);return{min:s,max:n,visible:s!==n}}Wd([lm(gm)],vC.prototype,"enabled",2),Wd([lm(fm,{optional:!0})],vC.prototype,"text",2),Wd([lm(bm,{optional:!0})],vC.prototype,"spacing",2),Wd([lm(Um,{optional:!0})],vC.prototype,"fontStyle",2),Wd([lm(_m,{optional:!0})],vC.prototype,"fontWeight",2),Wd([lm(bm)],vC.prototype,"fontSize",2),Wd([lm(fm)],vC.prototype,"fontFamily",2),Wd([lm(Tm,{optional:!0})],vC.prototype,"color",2),Wd([lm(Ym)],vC.prototype,"wrapping",2),Wd([lm(mm,{optional:!0})],vC.prototype,"formatter",2);var bC=2*Math.PI,wC=bC/2;function SC(e){const t=(t,i)=>{const[s=e.min,n=e.max]=cp(i??[]);return t<s||t>n};return{tick:{fromFn(e,i,s){let n=e.y1+e.translationY,o=e.opacity;return("added"===s||t(e.datum.translationY,e.datum.range))&&(n=i.translationY,o=0),{y:0,translationY:n,opacity:o,phase:kg[s]}},toFn(e,t,i){const s=t.translationY;let n=1;return"removed"===i&&(n=0),{y:0,translationY:s,opacity:n,finish:{y:s,translationY:0}}},applyFn(e,i){e.setProperties(i),e.visible=!t(e.y)}},line:{fromFn:(e,t)=>({...e.previousDatum??t,phase:kg.updated}),toFn:(e,t)=>({...t})},label:{fromFn(e,i,s){const n=e.previousDatum??i,o=n.x,r=n.y,a=n.rotationCenterX;let l=Math.round(e.translationY),c=n.rotation,h=e.opacity;return"removed"===s||t(n.y,n.range)?c=i.rotation:("added"===s||t(e.datum.y,e.datum.range))&&(l=Math.round(n.translationY),h=0,c=i.rotation),{x:o,y:r,rotationCenterX:a,translationY:l,rotation:c,opacity:h,phase:kg[s]}},toFn(e,t,i){const s=t.x,n=t.y,o=t.rotationCenterX,r=Math.round(t.translationY);let a=0,l=1;var c,h;return"added"===i?(l=1,a=t.rotation):"removed"===i?(l=0,a=t.rotation):(c=e.previousDatum?.rotation??t.rotation,h=t.rotation,a=Math.abs(h-c)<wC?h:c>h?h+bC:h-bC),{x:s,y:n,rotationCenterX:o,translationY:r,rotation:a,opacity:l,finish:{rotation:t.rotation}}}},group:{fromFn(e,t){const{rotation:i,translationX:s,translationY:n}=e;return{rotation:i,translationX:s,translationY:n,phase:kg.updated}},toFn(e,t){const{rotation:i,translationX:s,translationY:n}=t;return{rotation:i,translationX:s,translationY:n}}}}}function xC(){return(e,t)=>({rotation:t.rotation,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,translationX:t.translationX,translationY:t.translationY})}function MC(e){const{visible:t,min:i,max:s}=e;return(e,n)=>{const o=n.translationY;return{y:o,translationY:0,opacity:1,visible:t&&o>=i&&o<=s}}}function DC(){return(e,t)=>({x:t.x,y:t.y,translationY:t.translationY,rotation:t.rotation,rotationCenterX:t.rotationCenterX})}function IC(){return(e,t)=>({...t})}var RC=class extends(ty(Oy)){},EC=class e{constructor(t,i){let s;this.moduleCtx=t,this.scale=i,this.id=Vu(this),this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new gC,this.dataDomain={domain:[],clipped:!1},this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new ly({name:`${this.id}-axis`,zIndex:2}),this.lineNode=this.axisGroup.appendChild(new RC({name:`${this.id}-Axis-line`})),this.tickLineGroup=this.axisGroup.appendChild(new ny({name:`${this.id}-Axis-tick-lines`,zIndex:2})),this.tickLabelGroup=this.axisGroup.appendChild(new ny({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.crossLineGroup=new ly({name:`${this.id}-CrossLines`}),this.labelGroup=new ny({name:`${this.id}-Labels`,zIndex:10}),this.gridGroup=new ly({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new ny({name:`${this.id}-gridLines`,zIndex:1})),this.tickLineGroupSelection=dy.select(this.tickLineGroup,RC,!1),this.tickLabelGroupSelection=dy.select(this.tickLabelGroup,_y,!1),this.gridLineGroupSelection=dy.select(this.gridLineGroup,RC,!1),this._crossLines=[],this.line=new fC,this.tick=new yC,this.gridLine=new dC,this.label=this.createLabel(),this.defaultTickMinSpacing=e.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=new vC,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.moduleMap=new cf,this.range=this.scale.range.slice(),this.crossLines.forEach((e=>this.initCrossLine(e))),this.axisGroup.appendChild(this.title.caption.node),this.animationManager=t.animationManager,this.animationState=new pv("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:e=>this.animateReadyUpdate(e),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this.destroyFns.push(this.title.caption.registerInteraction(this.moduleCtx,"afterend"),t.layoutManager.addListener("layout:complete",(e=>{null!=s&&null!=qy(e.chart,s)&&this.animationState.transition("resize"),s={...e.chart}})))}get type(){return this.constructor.type??""}set crossLines(e){const{CrossLineConstructor:t}=this.constructor;this._crossLines.forEach((e=>this.detachCrossLine(e))),this._crossLines=e.map((e=>{const i=new t;return i.set(e),i})),this._crossLines.forEach((e=>{this.attachCrossLine(e),this.initCrossLine(e)}))}get crossLines(){return this._crossLines}resetAnimation(e){"initial"===e&&this.animationState.transition("reset")}attachCrossLine(e){this.crossLineGroup.appendChild(e.group),this.crossLineGroup.appendChild(e.labelGroup)}detachCrossLine(e){this.crossLineGroup.removeChild(e.group),this.crossLineGroup.removeChild(e.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach((e=>e()))}updateRange(){const{range:e,visibleRange:t,scale:i}=this,s=(e[1]-e[0])/(t[1]-t[0]),n=s*t[0],o=e[0]-n;i.setVisibleRange?.(t),i.range=[o,o+s],this.crossLines.forEach((t=>{t.clippedRange=[e[0],e[1]]}))}setCrossLinesVisible(e){this.crossLineGroup.visible=e}attachAxis(e,t){t.appendChild(this.gridGroup),e.appendChild(this.axisGroup),e.appendChild(this.crossLineGroup),e.appendChild(this.labelGroup)}attachLabel(e){this.labelGroup.append(e)}detachAxis(e,t){t.removeChild(this.gridGroup),e.removeChild(this.axisGroup),e.removeChild(this.crossLineGroup),e.removeChild(this.labelGroup)}inRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const[i,s]=cp(this.range);return e>=i-t&&e<=s+t}onFormatChange(e,t,i,s){const{scale:n}=this,o=n instanceof Of,r=e=>o?String:i=>"number"===typeof i?i.toFixed(t+e):String(i);if(s&&n&&n.tickFormat)try{const t=n.tickFormat({ticks:e,specifier:s});this.labelFormatter=t,this.datumFormatter=t}catch(a){this.labelFormatter=r(0),this.datumFormatter=r(1),Xd.warnOnce(`the axis label format string ${s} is invalid. No formatting will be applied`)}else this.labelFormatter=r(0),this.datumFormatter=r(1)}onGridLengthChange(e,t){t^e&&this.onGridVisibilityChange(),this.crossLines.forEach((e=>this.initCrossLine(e)))}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createLabel(){return new mC}update(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.tickGenerationResult)return;const{rotation:t,parallelFlipRotation:i,regularFlipRotation:s}=this.calculateRotations(),n=this.label.getSideFlag();this.updatePosition();const o=this.getAxisLineCoordinates(),{tickData:r,combinedRotation:a,textBaseline:l,textAlign:c,primaryTickCount:h}=this.tickGenerationResult,d=this.tickLabelGroupSelection.nodes().map((e=>e.datum.tickId));if(this.updateSelections(o,r.ticks,{combinedRotation:a,textAlign:c,textBaseline:l,range:this.scale.range}),!e||this.animationManager.isSkipped())this.resetSelectionNodes();else{const e=this.calculateUpdateDiff(d,r);this.animationState.transition("update",e)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(n),this.updateTickLines(),this.updateTitle({anyTickVisible:r.ticks.length>0}),this.updateCrossLines({rotation:t,parallelFlipRotation:i,regularFlipRotation:s}),this.updateLayoutState(r.fractionDigits),h}getAxisLineCoordinates(){const[e,t]=cp(this.range);return{x:0,y1:e,y2:t}}getTickLineCoordinates(e){const t=this.label.getSideFlag()*this.getTickSize(),i=Math.min(0,t);return{x1:i,x2:i+Math.abs(t),y:e.translationY}}getTickLabelProps(e,t){const{label:i}=this,{combinedRotation:s,textBaseline:n,textAlign:o,range:r}=t,a=e.tickLabel,l=i.getSideFlag()*(this.getTickSize()+i.padding+this.seriesAreaPadding),c=""!==a&&null!=a;return{tickId:e.tickId,translationY:e.translationY,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,rotation:s,rotationCenterX:l,text:a,textAlign:o,textBaseline:n,visible:c,x:l,y:0,range:r}}getTickSize(){return this.tick.enabled?this.tick.size:6}setTitleProps(e,t){const{title:i}=this;if(!i.enabled)return e.enabled=!1,void(e.node.visible=!1);e.color=i.color,e.fontFamily=i.fontFamily,e.fontSize=i.fontSize,e.fontStyle=i.fontStyle,e.fontWeight=i.fontWeight,e.enabled=i.enabled,e.wrapping=i.wrapping;const s=e.node,n=(i.spacing??0)+t.spacing,o=this.label.getSideFlag(),r=py(this.rotation),a=-1===o&&r>Math.PI&&r<2*Math.PI?-1:1,l=a*o*Math.PI/2,c=1===a?"bottom":"top",{range:h}=this,d=Math.floor(a*o*(h[0]+h[1])/2),u=-1===o?Math.floor(a*-n):Math.floor(-n),{callbackCache:p}=this.moduleCtx,{formatter:g=e=>e.defaultValue}=i,m=p.call(g,this.getTitleFormatterParams());e.text=m,s.setProperties({visible:!0,text:m,textBaseline:c,x:d,y:u,rotation:l})}calculateLayout(e,t){const{rotation:i,parallelFlipRotation:s,regularFlipRotation:n}=this.calculateRotations(),o=this.label.getSideFlag(),r=o*(this.getTickSize()+this.label.padding+this.seriesAreaPadding);this.updateScale(e),this.tickGenerationResult=this.generateTicks({primaryTickCount:t,parallelFlipRotation:s,regularFlipRotation:n,labelX:r,sideFlag:o});const{tickData:a,combinedRotation:l,textBaseline:c,textAlign:h,...d}=this.tickGenerationResult;this.updateLayoutState(a.fractionDigits);const u=[],{x:p,y1:g,y2:m}=this.getAxisLineCoordinates(),f=new bp(p+Math.min(o*this.seriesAreaPadding,0),g,this.seriesAreaPadding,m-g);if(u.push(f),this.tick.enabled&&a.ticks.forEach((e=>{const{x1:t,x2:i,y:s}=this.getTickLineCoordinates(e),n=new bp(t,s,i-t,0);u.push(n)})),this.label.enabled){const e=new _y;a.ticks.forEach((t=>{const i=this.getTickLabelProps(t,{combinedRotation:l,textAlign:h,textBaseline:c,range:this.scale.range});if(!i.visible)return;e.setProperties({...i,translationY:Math.round(t.translationY)});const s=e.getBBox();s&&u.push(s)}))}if(this.title?.enabled){const e=new Ev,t=bp.merge(u).width;this.setTitleProps(e,{spacing:t});const i=e.node.getBBox();i&&u.push(i)}const y=bp.merge(u),v=this.getTransformBox(y),C=this.isAnySeriesActive();return this.crossLines.forEach((e=>{var t;e.sideFlag=-o,e.direction=i===-Math.PI/2?"x":"y",e instanceof lC&&((t=e.label).parallel??(t.parallel=this.label.parallel)),e.parallelFlipRotation=s,e.regularFlipRotation=n,e.calculateLayout?.(C,this.reverse)})),{primaryTickCount:d.primaryTickCount,bbox:v}}updateLayoutState(e){this.layout.label={fractionDigits:e,padding:this.label.padding,format:this.label.format}}getTransformBox(e){const t=new Zf,{rotation:i,translationX:s,translationY:n}=this.getAxisTransform();return Zf.updateTransformMatrix(t,1,1,i,s,n),t.transformBBox(e)}setDomain(e){this.dataDomain=this.normaliseDataDomain(e),this.reverse&&this.dataDomain.domain.reverse(),this.scale.domain=this.dataDomain.domain}updateScale(e){e?this.setDomain(e):this.calculateDomain(),this.updateRange(),this.scale.interval=this.interval.step,Gg.is(this.scale)&&(this.scale.nice=this.nice,this.scale.update())}calculateRotations(){const e=yy(this.rotation);return{rotation:e,parallelFlipRotation:py(e),regularFlipRotation:py(e-Math.PI/2)}}generateTicks(e){let{primaryTickCount:t,parallelFlipRotation:i,regularFlipRotation:s,labelX:n,sideFlag:o}=e;const{scale:r,interval:{minSpacing:a,maxSpacing:l},label:{parallel:c,rotation:h,fontFamily:d,fontSize:u,fontStyle:p,fontWeight:g}}=this,m=void 0!==t,{defaultRotation:f,configuredRotation:y,parallelFlipFlag:v,regularFlipFlag:C}=Nv({rotation:h,parallel:c,regularFlipRotation:s,parallelFlipRotation:i}),b=y+f,w=new Zf,{maxTickCount:S}=this.estimateTickCount({minSpacing:a,maxSpacing:l}),x=!(Gg.is(r)||Hf.is(r))||isNaN(S)?10:S;let M=Ov(c,y,0,o,C);const D=function(e,t,i,s){return e&&!t?i*s===-1?"hanging":"bottom":"middle"}(c,y,o,v),I=Hy.toFontString({fontFamily:d,fontSize:u,fontStyle:p,fontWeight:g}),R=By.getMeasurer({font:I}),E={fontFamily:d,fontSize:u,fontStyle:p,fontWeight:g,textBaseline:D,textAlign:M};let A={rawTicks:[],fractionDigits:0,ticks:[],labelCount:0},L=0,k=0,T=!0,P=[],N=!1;for(;T&&L<=x&&!N;){k=0,M=Ov(c,y,0,o,C);const e=this.getTickStrategies({secondaryAxis:m,index:L});for(const i of e){({tickData:A,index:L,autoRotation:k,terminate:N}=i({index:L,tickData:A,textProps:E,labelOverlap:T,terminate:N,primaryTickCount:t}));const e=0!==y||0!==k,s=b+k,r=Fv(this.label.minSpacing,e);Zf.updateTransformMatrix(w,1,1,s,0,0),M=Ov(c,y,k,o,C),P=this.createLabelData(A.ticks,n,w,R),T=!!this.label.avoidCollisions&&$y(P,r)}}const F=f+y+k;return!m&&A.rawTicks.length>0&&(t=A.rawTicks.length),{tickData:A,primaryTickCount:t,combinedRotation:F,textBaseline:D,textAlign:M,labelData:P}}getTickStrategies(e){let{index:t,secondaryAxis:i}=e;const{scale:s,label:n}=this,{minSpacing:o}=this.interval,r=Gg.is(s)||Hf.is(s),a=n.enabled&&n.avoidCollisions,l=!r&&0!==t&&a,c=!0===n.autoRotate&&void 0===n.rotation,h=[];let d;d=this.interval.values?3:i?1:l?2:0;if(h.push((e=>{let{index:t,tickData:i,primaryTickCount:s,terminate:n}=e;return this.createTickData(d,t,i,n,s)})),!r&&!isNaN(o)){const e=e=>{let{index:t,tickData:i,primaryTickCount:s,terminate:n}=e;return this.createTickData(2,t,i,n,s)};h.push(e)}if(!a)return h;if(c){const e=e=>{let{index:t,tickData:i,labelOverlap:s,terminate:n}=e;return{index:t,tickData:i,autoRotation:this.getAutoRotation(s),terminate:n}};h.push(e)}return h}createTickData(e,t,i,s,n){const{scale:o}=this,{step:r,values:a,minSpacing:l,maxSpacing:c}=this.interval,{maxTickCount:h,minTickCount:d,defaultTickCount:u}=this.estimateTickCount({minSpacing:l,maxSpacing:c}),p=Gg.is(o)||Hf.is(o),g=!p||isNaN(h)?10:h;let m=p?Math.max(u-t,d):h;const f=void 0===r&&void 0===a&&m>d&&(p||2===e);let y=!0;for(;y&&t<=g;){const s=i.rawTicks;m=p?Math.max(u-t,d):h;const{rawTicks:o,fractionDigits:r,ticks:a,labelCount:l}=this.getTicks({tickGenerationType:e,previousTicks:s,tickCount:m,minTickCount:d,maxTickCount:h,primaryTickCount:n});i.rawTicks=o,i.fractionDigits=r,i.ticks=a,i.labelCount=l,y=!!f&&Qy(o,s),t++}return s||(s=void 0!==r||void 0!==a),{tickData:i,index:t,autoRotation:0,terminate:s}}createLabelData(e,t,i,s){const n=[];for(const{tickLabel:o,translationY:r}of e){if(!o)continue;const{width:e,height:a}=s.measureLines(o),l=Gv(o,new bp(t,r,e,a),i);n.push(l)}return n}getAutoRotation(e){return e?py(yy(this.label.autoRotateAngle??0)):0}getTicks(e){let{tickGenerationType:t,previousTicks:i,tickCount:s,minTickCount:n,maxTickCount:o,primaryTickCount:r}=e;const{range:a,scale:l,visibleRange:c}=this;let h;switch(t){case 3:if(h=this.interval.values,Gg.is(l)){const[e,t]=cp(l.getDomain().map(Number));h=h.filter((i=>i>=e&&i<=t)).sort(((e,t)=>e-t))}break;case 1:h=Gg.is(l)?this.updateSecondaryAxisTicks(r):this.createTicks(s,n,o);break;case 2:h=this.filterTicks(i,s);break;default:h=this.createTicks(s,n,o)}const d=h.reduce(((e,t)=>Math.max(e,"number"===typeof t?fp(t):0)),0),u=(l.bandwidth??0)/2,p=[];let g=0;const m=new Map,f=Math.max(0,Math.floor(c[0]*h.length)),y=Math.min(h.length,Math.ceil(c[1]*h.length)),v=h.slice(f,y);this.onFormatChange(v,d,h,this.label.format);for(let C=0;C<v.length;C++){const e=v[C],t=l.convert(e)+u;if(a.length>0&&!this.inRange(t,.001))continue;const i=this.formatTick(e,d,f+C);let s=i;if(m.has(s)){const e=m.get(s);m.set(s,e+1),s=`${s}_${e}`}else m.set(s,1);p.push({tick:e,tickId:s,tickLabel:i,translationY:Math.floor(t)}),""!==i&&null!=i&&g++}return{rawTicks:h,fractionDigits:d,ticks:p,labelCount:g}}filterTicks(e,t){const{minSpacing:i,maxSpacing:s}=this.interval,n=!isNaN(i)||!isNaN(s)?Math.ceil(e.length/t):2;return e.filter(((e,t)=>t%n===0))}createTicks(e,t,i){const{scale:s}=this;return e&&(Gg.is(s)||Hf.is(s))&&(s.tickCount=e,s.minTickCount=t??0,s.maxTickCount=i??1/0),s.ticks?.()??[]}estimateTickCount(e){let{minSpacing:t,maxSpacing:i}=e;if(!this.label.avoidCollisions)return{minTickCount:Gg.defaultMaxTickCount,maxTickCount:Gg.defaultMaxTickCount,defaultTickCount:Gg.defaultMaxTickCount};const s=this.calculateRangeWithBleed(),n=Math.max(this.defaultTickMinSpacing,s/Gg.defaultMaxTickCount);let o=!isNaN(i);isNaN(t)&&(t=n),isNaN(i)&&(i=s),t>i&&(t===n?t=i:i=t);o&&(o=2<n);const r=ap(1,Math.floor(s/t),o?Math.min(Math.floor(s/2),100):100),a=Math.min(r,Math.ceil(s/i));return{minTickCount:a,maxTickCount:r,defaultTickCount:ap(a,Gg.defaultTickCount,r)}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines(e){let{rotation:t,parallelFlipRotation:i,regularFlipRotation:s}=e;const n=this.label.getSideFlag(),o=this.isAnySeriesActive();this.crossLines.forEach((e=>{var r;e.sideFlag=-n,e.direction=t===-Math.PI/2?"x":"y",e instanceof lC&&((r=e.label).parallel??(r.parallel=this.label.parallel)),e.parallelFlipRotation=i,e.regularFlipRotation=s,e.update(o)}))}updateTickLines(){const{tick:e,label:t}=this,i=t.getSideFlag();this.tickLineGroupSelection.each((t=>{t.strokeWidth=e.width,t.stroke=e.stroke,t.x1=i*this.getTickSize(),t.x2=0}))}calculateAvailableRange(){return hp(this.range)}calculateRangeWithBleed(){const e=1/hp(this.visibleRange);return pp(this.calculateAvailableRange()*e,2)}calculateDomain(){const e=this.boundSeries.filter((e=>this.includeInvisibleDomains||e.isEnabled())).flatMap((e=>e.getDomain(this.direction)));this.setDomain(e)}getAxisTransform(){return{rotation:yy(this.rotation),translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){const{crossLineGroup:e,axisGroup:t,gridGroup:i,translation:s}=this,{rotation:n}=this.calculateRotations(),o=Math.floor(s.x),r=Math.floor(s.y);e.setProperties({rotation:n,translationX:o,translationY:r}),i.setProperties({rotation:n,translationX:o,translationY:r}),t.datum=this.getAxisTransform()}updateSecondaryAxisTicks(e){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(e,t,i){const s=e=>e.tickId,n=t.map((e=>this.getTickLabelProps(e,i)));this.lineNode.datum=e,this.gridLineGroupSelection.update(this.gridLength?t:[],void 0,s),this.tickLineGroupSelection.update(t,void 0,s),this.tickLabelGroupSelection.update(n,void 0,s)}updateAxisLine(){const{enabled:e,stroke:t,width:i}=this.line;this.lineNode.setProperties({stroke:t,strokeWidth:e?i:0})}updateGridLines(e){const{gridLine:{style:t,width:i},gridPadding:s,gridLength:n}=this;0!==n&&0!==t.length&&this.gridLineGroupSelection.each(((o,r,a)=>{const{stroke:l,lineDash:c}=t[a%t.length];o.setProperties({x1:s,x2:-e*n+s,stroke:l,strokeWidth:i,lineDash:c})}))}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each(((e,t)=>{e.setProperties(t,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])}))}updateTitle(e){const{title:t,lineNode:i,tickLineGroup:s,tickLabelGroup:n}=this;let o=0;if(t.enabled&&e.anyTickVisible){o+=ny.computeChildrenBBox([s,n,i]).width+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)}this.setTitleProps(t.caption,{spacing:o})}formatTick(e,t,i){return String(this.getFormatter(i,!0)(e,t))}formatDatum(e){return String(this.getFormatter()(e))}getFormatter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;const{label:i,labelFormatter:s,datumFormatter:n,moduleCtx:{callbackCache:o}}=this;return i.formatter?(t,s)=>o.call(i.formatter,{value:t,index:e,fractionDigits:s})??t:!t&&n?e=>o.call(n,e)??String(e):s?e=>o.call(s,e)??String(e):e=>String(e)}getBBox(){return this.axisGroup.getBBox()}getRegionNode(){}initCrossLine(e){e.scale=this.scale,e.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some((e=>this.includeInvisibleDomains||e.isEnabled()))}clipTickLines(e,t,i,s){this.tickLineGroup.setClipRect(new bp(e,t,i,s))}clipGrid(e,t,i,s){this.gridGroup.setClipRect(new bp(e,t,i,s))}getTitleFormatterParams(){const{direction:e}=this,t=[];for(const i of this.boundSeries){const s=i.getKeys(e),n=i.getNames(e);for(let e=0;e<s.length;e++)t.push({key:s[e],name:n[e]})}return{direction:e,boundSeries:t,defaultValue:this.title?.text}}normaliseDataDomain(e){return{domain:[...e],clipped:!1}}getLayoutState(){return{id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale,...this.layout}}getModuleMap(){return this.moduleMap}createModuleContext(){return this.axisContext??(this.axisContext=this.createAxisContext()),{...this.moduleCtx,parent:this.axisContext}}createAxisContext(){const{scale:e}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:Gg.is(e)||Hf.is(e),keys:()=>this.boundSeries.flatMap((e=>e.getKeys(this.direction))),seriesKeyProperties:()=>this.boundSeries.reduce(((e,t)=>(t.getKeyProperties(this.direction).forEach((t=>{e.indexOf(t)<0&&e.push(t)})),e)),[]),scaleValueFormatter:e=>this.getScaleValueFormatter(e),scaleBandwidth:()=>e.bandwidth??0,scaleDomain:()=>e.getDomain?.(),scaleConvert:t=>e.convert(t),scaleInvert:Hf.is(e)?t=>e.invertNearest?.(t):t=>e.invert?.(t),scaleInvertNearest:t=>e.invertNearest?.(t),scaleStep:()=>e.step??0,attachLabel:e=>this.attachLabel(e),inRange:(e,t)=>this.inRange(e,t)}}getScaleValueFormatter(e){const{scale:t}=this;if(e&&t&&t.tickFormat)try{return t.tickFormat({specifier:e})}catch(i){Xd.warnOnce(`the format string ${e} is invalid, ignoring.`)}return this.getFormatter()}animateReadyUpdate(e){const{animationManager:t}=this.moduleCtx,i=SC(CC(this));Tg(this.id,"axis-group",t,[this.axisGroup],i.group),Tg(this.id,"line",t,[this.lineNode],i.line),Tg(this.id,"line-paths",t,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,((e,t)=>t.tickId),e),Tg(this.id,"tick-labels",t,[this.tickLabelGroupSelection],i.label,((e,t)=>t.tickId),e)}resetSelectionNodes(){const{gridLineGroupSelection:e,tickLineGroupSelection:t,tickLabelGroupSelection:i,lineNode:s}=this,n=CC(this);df([this.axisGroup],((e,t)=>({rotation:t.rotation,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,translationX:t.translationX,translationY:t.translationY}))),df([e,t],MC(n)),df([i],((e,t)=>({x:t.x,y:t.y,translationY:t.translationY,rotation:t.rotation,rotationCenterX:t.rotationCenterX}))),df([s],((e,t)=>({...t})))}calculateUpdateDiff(e,t){const i=new Set,s=new Set,n={},o=Math.max(e.length,t.ticks.length);for(let r=0;r<o;r++){const o=t.ticks[r],a=e[r],l=o?.tickId;n[l??a]=o,a!==l&&(s.has(l)?s.delete(l):l&&i.add(l),i.has(a)?i.delete(a):a&&s.add(a))}return{changed:i.size>0||s.size>0,added:i,removed:s}}isReversed(){return this.reverse}};EC.defaultTickMinSpacing=50,EC.CrossLineConstructor=lC,Wd([lm(gm)],EC.prototype,"nice",2),Wd([lm(gm)],EC.prototype,"reverse",2),Wd([lm(Om)],EC.prototype,"keys",2),Wd([lm(um)],EC.prototype,"interval",2),Wd([lm(um)],EC.prototype,"title",2),Wd([cv(((e,t,i)=>e.onGridLengthChange(t,i)))],EC.prototype,"gridLength",2);var AC=EC,LC=class extends mC{constructor(){super(...arguments),this.autoRotateAngle=335}};Wd([lm(gm,{optional:!0})],LC.prototype,"autoRotate",2),Wd([lm(Sm)],LC.prototype,"autoRotateAngle",2);var kC=class e extends AC{constructor(){super(...arguments),this.thickness=0}static is(t){return t instanceof e}get direction(){return"top"===this.position||"bottom"===this.position?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(e){return this.updateDirection(),super.update(e)}calculateLayout(e,t){return this.updateDirection(),super.calculateLayout(e,t)}createAxisContext(){return{...super.createAxisContext(),position:this.position}}createLabel(){return new LC}getRegionNode(){return this.axisGroup}};Wd([lm(bm)],kC.prototype,"thickness",2),Wd([lm(Wm)],kC.prototype,"position",2);var TC=kC,PC=class e extends TC{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new nm),this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}static is(t){return t instanceof e}normaliseDataDomain(e){const t=[],i=new Set;for(const s of e){const e=s instanceof Date?s.getTime():s;i.has(e)||(i.add(e),t.push(s))}return{domain:t,clipped:!1}}updateScale(e){let{paddingInner:t,paddingOuter:i}=this;if(!Jp(t)||!Jp(i)){const e=this.reduceBandScalePadding();t??(t=e.inner),i??(i=e.outer)}this.scale.paddingInner=t??0,this.scale.paddingOuter=i??0,super.updateScale(e)}reduceBandScalePadding(){return this.boundSeries.reduce(((e,t)=>{const i=t.getBandScalePadding?.();return i&&(e.inner>i.inner&&(e.inner=i.inner),e.outer<i.outer&&(e.outer=i.outer)),e}),{inner:1/0,outer:-1/0})}};PC.className="CategoryAxis",PC.type="category",Wd([lm(wm)],PC.prototype,"groupPaddingInner",2),Wd([lm(wm,{optional:!0})],PC.prototype,"paddingInner",2),Wd([lm(wm,{optional:!0})],PC.prototype,"paddingOuter",2);var NC=PC,FC=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=e,this.parent=t,this.depth=t?t.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter(((e,t)=>t!==this.number)):[]}};function OC(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=new FC;let s=0;return t&&e.forEach((e=>s=Math.max(s,e.labels.length))),e.forEach((e=>{if(t)for(;e.labels.length<s;)e.labels.unshift("");!function(e,t){const i=t.labels.slice().reverse(),s=i.length-1;i.forEach(((t,i)=>{const n=e.children,o=n.find((e=>e.label===t)),r=i!==s;if(o&&r)e=o;else{const i=new FC(t,e);i.number=n.length,n.push(i),r&&(e=i)}}))}(i,e)})),i}function GC(e,t,i){const s=i/(t.number-e.number);t.change-=s,t.shift+=i,e.change+=s,t.prelim+=i,t.mod+=i}function BC(e,t,i){return t.getSiblings().indexOf(e.ancestor)>=0?e.ancestor:i}function zC(e,t){const i=e.children;if(i.length){let s=i[0];i.forEach((e=>{zC(e,t),s=function(e,t,i){const s=e.getLeftSibling();if(s){let n=e,o=e,r=s,a=o.getLeftmostSibling(),l=o.mod,c=n.mod,h=r.mod,d=a.mod;for(;r.nextRight()&&o.nextLeft();){r=r.nextRight(),o=o.nextLeft(),a=a.nextLeft(),n=n.nextRight(),n.ancestor=e;const s=r.prelim+h-(o.prelim+l)+i;s>0&&(GC(BC(r,e,t),e,s),l+=s,c+=s),h+=r.mod,l+=o.mod,d+=a.mod,c+=n.mod}r.nextRight()&&!n.nextRight()?(n.thread=r.nextRight(),n.mod+=h-c):(o.nextLeft()&&!a.nextLeft()&&(a.thread=o.nextLeft(),a.mod+=l-d),t=e)}return t}(e,s,t)})),function(e){const t=e.children;if(t){let e=0,i=0;for(let s=t.length-1;s>=0;s--){const n=t[s];n.prelim+=e,n.mod+=e,i+=n.change,e+=n.shift+i}}}(e);const n=(i[0].prelim+i.at(-1).prelim)/2,o=e.getLeftSibling();o?(e.prelim=o.prelim+t,e.mod=e.prelim-n):e.prelim=n}else{const i=e.getLeftSibling();e.prelim=i?i.prelim+t:0}}var HC=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(e,t){const{x:i,y:s}=t(e);i>this.right&&(this.right=i),i<this.left&&(this.left=i),s>this.bottom&&(this.bottom=s),s<this.top&&(this.top=s)}};function VC(e,t,i){e.x=e.prelim+t,e.y=e.depth,i.update(e),e.children.forEach((s=>VC(s,t+e.mod,i)))}function jC(e){const t=e.children;let i=0;t.forEach((e=>{jC(e),e.children.length?i+=e.leafCount:i++})),e.leafCount=i,t.length?(e.subtreeLeft=t[0].subtreeLeft,e.subtreeRight=t[e.children.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}function WC(e){const t=new UC;return zC(e,1),VC(e,-e.prelim,t),jC(e),t}var UC=class{constructor(){this.dimensions=new HC,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(e){this.dimensions.update(e,(e=>({x:e.x,y:e.y}))),e.children.length?this.nonLeafNodes.push(e):(this.leafCount++,this.leafNodes.push(e)),e.depth>this.depth&&(this.depth=e.depth),this.nodes.push(e)}resize(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=this.leafCount-1,r=this.depth,a=this.dimensions;let l=1,c=1;if(e>0&&o){const t=(a.right-a.left)/o;l=e/o/t,n&&(l=-l)}if(t>0&&r){const e=(a.bottom-a.top)/r;c=t/r/e}const h=new HC;this.nodes.forEach((e=>{e.screenX=e.x*l,e.screenY=e.y*c,h.update(e,(e=>({x:e.screenX,y:e.screenY})))}));const d=-h.left,u=-h.top;this.nodes.forEach((e=>{e.screenX+=d+i,e.screenY+=u+s}))}},_C=class extends mC{constructor(){super(...arguments),this.grid=!1}};Wd([lm(gm)],_C.prototype,"grid",2);var YC=class extends TC{constructor(e){const t=new nm;t.paddingOuter=.1,t.paddingInner=2*t.paddingOuter,super(e,t),this.tickScale=new nm,this.line=new fC,this.label=new _C,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:i,tickLabelGroup:s,gridLineGroup:n,tickScale:o}=this;o.paddingInner=1,o.paddingOuter=0,this.gridLineSelection=dy.select(n,Oy),this.axisLineSelection=dy.select(i,Oy),this.separatorSelection=dy.select(i,Oy),this.labelSelection=dy.select(s,_y),this.lineNode.visible=!1}updateRange(){const{range:e,visibleRange:t,scale:i}=this,s=(e[1]-e[0])/(t[1]-t[0]),n=s*t[0],o=e[0]-n;this.tickScale.range=i.range=[o,o+s],this.resizeTickTree()}resizeTickTree(){const e=this.scale,t=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,i=this.tickTreeLayout,s=this.lineHeight;i&&i.resize(Math.abs(t[1]-t[0]),i.depth*s,(Math.min(t[0],t[1])||0)+(e.bandwidth??0)/2,-i.depth*s,t[1]-t[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}onGridVisibilityChange(){this.gridLineSelection.clear(),this.labelSelection.clear()}calculateDomain(){const{direction:e}=this;let t=null;const i=this.boundSeries.filter((e=>e.visible)).flatMap((i=>{if("y"===e||t)return i.getDomain(e);if(null===t){const s=i.getDomain(e);return t=qp(s[0]),s}return[]}));this.setDomain(Bg(i)??jg(i));const{domain:s}=this.dataDomain;this.tickTreeLayout=WC(OC(s)),this.tickScale.domain=s.concat(""),this.resizeTickTree()}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){this.title.caption.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;const{tickLabelLayout:e}=this.computedLayout;this.labelSelection.update(e).each(((e,t)=>{e.setProperties(t)}))}updateSeparators(){if(!this.computedLayout)return;const{separatorLayout:e}=this.computedLayout,{range:t}=this;this.separatorSelection.update(e).each(((e,i)=>{e.x1=i.x1,e.x2=i.x2,e.y1=i.y,e.y2=i.y,e.visible=this.tick.enabled&&i.y>=t[0]-1e-7&&i.y<=t[1]+1e-7,e.stroke=this.tick.stroke,e.strokeWidth=1}))}updateAxisLines(){if(!this.computedLayout)return;const{axisLineLayout:e}=this.computedLayout;this.axisLineSelection.update(e).each(((e,t)=>{e.setProperties(t),e.stroke=this.line.stroke,e.strokeWidth=this.line.width}))}updateCategoryGridLines(){const{gridLength:e,gridLine:t,label:i,range:s,tickScale:n}=this,o=n.ticks(),r=i.getSideFlag(),a=this.gridLineSelection.update(e?o:[]);if(e){const{width:i,style:o}=t,l=o.length;a.each(((a,c,h)=>{const d=Math.round(n.convert(c)),{stroke:u,lineDash:p}=o[h%l];a.visible=t.enabled&&d>=s[0]&&d<=s[1],a.x1=0,a.x2=-r*e,a.y1=d,a.y2=d,a.stroke=u,a.strokeWidth=i,a.lineDash=p}))}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:e,label:t,label:{parallel:i},moduleCtx:{callbackCache:s},range:n,title:o,title:{formatter:r=e=>e.defaultValue}={}}=this,a=e.range[0],l=e.range[1],c=Math.abs(l-a)/e.domain.length||0,h=Math.ceil(t.fontSize/c),d=yy(this.rotation),u=Math.abs(Math.cos(d))<1e-8,p=t.getSideFlag(),g=this.lineHeight,m=this.tickTreeLayout,f=e.ticks(),y=m?m.nodes:[],v=!!m&&m.depth>1,C=o?.enabled&&f.length>0,{defaultRotation:b,configuredRotation:w,parallelFlipFlag:S}=Nv({rotation:t.rotation,parallel:i,regularFlipRotation:py(d-Math.PI/2),parallelFlipRotation:py(d)}),x=[],M=new Map;let D=0;const I=new _y,R=(e,i)=>{if(0===i){if(C){const t=s.call(r,this.getTitleFormatterParams());return I.setProperties({text:t,fill:o.color,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight,textAlign:"center",textBaseline:"hanging",translationX:e.screenY-.25*o.fontSize,translationY:e.screenX}),!0}return!1}return I.setProperties({fill:t.color,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textAlign:"center",textBaseline:-1===S?"bottom":"hanging",translationX:e.screenY-.25*t.fontSize,translationY:e.screenX}),i%h===0&&(!(e.screenX<n[0]||e.screenX>n[1])&&(t.formatter?I.text=s.call(t.formatter,{value:String(e.label),index:i})??String(e.label):I.text=String(e.label),!0))};y.forEach(((e,t)=>{if(!R(e,t))return;const i=I.getBBox();if(!i)return;M.set(t,i);!e.children.length&&i.width>D&&(D=i.width)}));const E=p*t.padding,A=this.label.grid,L=[];y.forEach(((e,t)=>{const i=!e.children.length;let s,n=R(e,t);if(I.x=E,I.y=0===t&&C?o.spacing??0:0,I.rotationCenterX=E,i)I.rotation=w,I.textAlign="end",I.textBaseline="middle";else{const i=e.leafCount*c,s=M.get(t);I.translationX-=D-g+this.label.padding,s&&s.width>i?(n=!1,M.delete(t)):I.rotation=u?b:-Math.PI/2}if(e.parent&&v){const t=i?e.screenX-c/2:e.screenX-e.leafCount*c/2;if(i)(e.number!==e.children.length-1||A)&&L.push({y:t,x1:0,x2:-D-2*this.label.padding});else{const i=-D-2*this.label.padding+e.screenY;L.push({y:t,x1:i+g,x2:i})}}if(n){const e=iy.toCanvas(I);e&&M.set(t,e),s={...(r=I,{fill:r.fill,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,fontWeight:r.fontWeight,rotation:r.rotation,rotationCenterX:r.rotationCenterX,rotationCenterY:r.rotationCenterY,text:r.text,textAlign:r.textAlign,textBaseline:r.textBaseline,translationX:r.translationX,translationY:r.translationY,visible:r.visible,x:r.x,y:r.y}),visible:n}}else M.delete(t),s={visible:n};var r;x.push(s)}));let k=0;L.forEach((e=>k=Math.min(k,e.x2))),L.push({y:Math.max(a,l),x1:0,x2:k});const T=[],P=[];L.forEach((e=>{if(e.y>=n[0]-1e-7&&e.y<=n[1]+1e-7){const{x1:t,x2:i,y:s}=e,n=new bp(Math.min(t,i),s,Math.abs(t-i),0);P.push(n),T.push({x1:t,x2:i,y:s})}}));const N=[],F=[],O=m?m.depth+1:1;for(let B=0;B<O;B++){const e=f.length>0&&(0===B||A&&v),t=B>0?-D-2*this.label.padding-(B-1)*g:0,i=new bp(t,Math.min(...n),0,Math.abs(n[1]-n[0]));F.push(i),N.push({x:t,y1:n[0],y2:n[1],visible:e})}const G=bp.merge(Wu(M.values(),P,F));return{bbox:this.getTransformBox(G),tickLabelLayout:x,separatorLayout:T,axisLineLayout:N}}calculateLayout(){const{axisLineLayout:e,separatorLayout:t,tickLabelLayout:i,bbox:s}=this.computeLayout();return this.computedLayout={axisLineLayout:e,separatorLayout:t,tickLabelLayout:i},{bbox:s,primaryTickCount:void 0}}};YC.className="GroupedCategoryAxis",YC.type="grouped-category",Wd([lm(Tm,{optional:!0})],YC.prototype,"labelColor",2);var KC=class{constructor(){this.destroyFns=[]}destroy(){for(const e of this.destroyFns)e()}},ZC=class{constructor(){this.modules=[],this.dependencies=new Map,this.dependents=new Map}register(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const s of t){this.registerDependencies(s);const e=this.modules.find((e=>s.type===e.type&&s.optionsKey===e.optionsKey&&s.identifier===e.identifier));if(e){if("enterprise"===s.packageType&&"community"===e.packageType){const t=this.modules.indexOf(e);this.modules.splice(t,1,s)}}else this.modules.push(s)}}hasEnterpriseModules(){return this.modules.some((e=>"enterprise"===e.packageType))}*byType(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const{dependents:s}=this,n=new Set;let o=0;const r=this.modules.filter((e=>t.includes(e.type)));do{for(const e of r)if(!n.has(e.optionsKey)&&!s.has(e.optionsKey)){yield e,n.add(e.optionsKey);for(const[t,i]of s.entries())i.delete(e.optionsKey),0===i.size&&s.delete(t)}o++}while(n.size<r.length&&o<3);if(s.size>0)throw new Error(`Could not resolve module dependencies: [${[...s.keys()]}]`)}registerDependencies(e){if(null!=e.dependencies&&0!==e.dependencies.length){for(const t of e.dependencies){const i=this.dependencies.get(t)??new Set;i.add(e.optionsKey),this.dependencies.set(t,i)}this.dependents.set(e.optionsKey,new Set(e.dependencies))}}},$C=new ZC;function QC(e){return new Promise((t=>{setTimeout((()=>t(void 0)),e)}))}var XC=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(e){return new Promise((t=>{this.acquireQueue.push([e,t]),this.available&&this.dispatchNext().catch((e=>Xd.errorOnce(e)))}))}async acquireImmediately(e){return!!this.available&&(await this.acquire(e),!0)}async waitForClearAcquireQueue(){return this.acquire((async()=>{}))}async dispatchNext(){this.available=!1;let[e,t]=this.acquireQueue.shift()??[];for(;e;){try{await e(),t?.()}catch(i){Xd.error("mutex callback error",i),t?.()}[e,t]=this.acquireQueue.shift()??[]}this.available=!0}},qC=class{constructor(){this.eventListeners=new Map}addEventListener(e,t){if("function"!==typeof t)throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(e);i?i.add(t):this.eventListeners.set(e,new Set([t]))}removeEventListener(e,t){this.eventListeners.get(e)?.delete(t),0===this.eventListeners.size&&this.eventListeners.delete(e)}hasEventListener(e){return this.eventListeners.has(e)}clearEventListeners(){this.eventListeners.clear()}fireEvent(e){this.eventListeners.get(e.type)?.forEach((t=>t(e)))}},JC=class extends om{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;super(),this.top=e,this.right=t,this.bottom=i,this.left=s}};function eb(e,t){let i,s,n=0,o=!1;const r=()=>o,a=()=>{o=!1,s?.(),s=void 0,i=void 0,n>0&&e(l)},l=()=>{const e=n;n=0,o=!0;const i=t({count:e});i?i.then(a,a):a()};return{schedule(t){0!==n||r()||e(l,t),n++},async await(){if(r())for(null==i&&(i=new Promise((e=>{s=e})));r();)await i}}}Wd([lm(bm)],JC.prototype,"top",2),Wd([lm(bm)],JC.prototype,"right",2),Wd([lm(bm)],JC.prototype,"bottom",2),Wd([lm(bm)],JC.prototype,"left",2);var tb=class{constructor(){this.events=new Map}on(e,t){return this.events.has(e)||this.events.set(e,new Set),this.events.get(e)?.add(t),()=>this.off(e,t)}off(e,t){const i=this.events.get(e);i&&(i.delete(t),0===i.size&&this.events.delete(e))}emit(e,t){this.events.get(e)?.forEach((e=>e(t)))}clear(e){e?this.events.delete(e):this.events.clear()}},ib=(e=>(e[e.Caption=0]="Caption",e[e.Legend=1]="Legend",e[e.Toolbar=2]="Toolbar",e[e.Navigator=3]="Navigator",e[e.Overlay=4]="Overlay",e))(ib||{}),sb=class{constructor(){this.events=new tb,this.elements=new Map}addListener(e,t){return this.events.on(e,t)}registerElement(e,t){return this.elements.has(e)?this.elements.get(e).add(t):this.elements.set(e,new Set([t])),()=>this.elements.get(e)?.delete(t)}createContext(e,t){const i=new nb(e,t);for(const s of Object.values(ib))"number"===typeof s&&this.elements.get(s)?.forEach((e=>e(i)));return i}emitLayoutComplete(e,t){const i="layout:complete",{width:s,height:n}=e;this.events.emit(i,{type:i,axes:t.axes??[],chart:{width:s,height:n},clipSeries:t.clipSeries??!1,series:t.series})}},nb=class{constructor(e,t){this.width=e,this.height=t,this.layoutBox=new bp(0,0,e,t)}},ob=class{constructor(){this.title=new Ev,this.subtitle=new Ev,this.footnote=new Ev}positionCaptions(e){const{title:t,subtitle:i,footnote:s}=this,n=e.layoutBox.height/10;if(t.enabled){const{spacing:s=(i.enabled?Ev.SMALL_PADDING:Ev.LARGE_PADDING)}=t;this.positionCaption("top",t,e.layoutBox,n),this.shrinkLayoutByCaption("top",t,e.layoutBox,s)}i.enabled&&(this.positionCaption("top",i,e.layoutBox,n),this.shrinkLayoutByCaption("top",i,e.layoutBox,i.spacing)),s.enabled&&(this.positionCaption("bottom",s,e.layoutBox,n),this.shrinkLayoutByCaption("bottom",s,e.layoutBox,s.spacing))}positionAbsoluteCaptions(e){const{title:t,subtitle:i,footnote:s}=this,{rect:n}=e.series;for(const o of[t,i,s])if("overlay"===o.layoutStyle)if("left"===o.textAlign)o.node.x=n.x+o.padding;else if("right"===o.textAlign){const e=o.node.getBBox();o.node.x=n.x+n.width-e.width-o.padding}}computeX(e,t){return"left"===e?t.x:"right"===e?t.x+t.width:t.x+t.width/2}positionCaption(e,t,i,s){const n=Math.max(Hy.getLineHeight(t.fontSize),s);t.node.x=this.computeX(t.textAlign,i)+t.padding,t.node.y=i.y+("top"===e?0:i.height)+t.padding,t.node.textBaseline=e,t.computeTextWrap(i.width,n)}shrinkLayoutByCaption(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if("block"===t.layoutStyle){const n=t.node.getBBox();i.shrink("top"===e?Math.ceil(n.y-i.y+n.height+s):Math.ceil(i.y+i.height-n.y+s),e)}}};Wd([lm(um)],ob.prototype,"title",2),Wd([lm(um)],ob.prototype,"subtitle",2),Wd([lm(um)],ob.prototype,"footnote",2);var rb=class{constructor(){this.registeredListeners=new Map}addListener(e,t){const i={symbol:Symbol(e),handler:t};return this.registeredListeners.has(e)?this.registeredListeners.get(e).push(i):this.registeredListeners.set(e,[i]),()=>this.removeListener(i.symbol)}removeListener(e){for(const[t,i]of this.registeredListeners.entries()){const s=i.findIndex((t=>t.symbol===e));if(s>=0){i.splice(s,1),0===i.length&&this.registeredListeners.delete(t);break}}}dispatch(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];for(const o of this.getListenersByType(e))try{o.handler(...i)}catch(n){Xd.errorOnce(n)}}dispatchWrapHandlers(e,t){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];for(const r of this.getListenersByType(e))try{t(r.handler,...s)}catch(o){Xd.errorOnce(o)}}getListenersByType(e){return this.registeredListeners.get(e)??[]}destroy(){this.registeredListeners.clear()}},ab=class{constructor(){this.listeners=new rb,this.destroyFns=[]}addListener(e,t){return this.listeners.addListener(e,t)}destroy(){this.listeners.destroy(),this.destroyFns.forEach((e=>e()))}},lb=(e=>(e[e.Default=32]="Default",e[e.ZoomDrag=16]="ZoomDrag",e[e.Annotations=8]="Annotations",e[e.ContextMenu=4]="ContextMenu",e[e.Animation=2]="Animation",e[e.AnnotationsSelected=1]="AnnotationsSelected",e[e.All=63]="All",e))(lb||{}),cb=class extends ab{addListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;return super.addListener(e,(e=>{this.getState()&i&&t(e)}))}},hb=class{constructor(){this.destroyFns=[]}destroy(){this.destroyFns.forEach((e=>e())),this.destroyFns.length=0}setFns(e){this.destroy(),this.destroyFns=e}},db="10.3.3",ub=Symbol("previous-memento-not-found"),pb=class{constructor(e){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=hy.create(!0,"history"),this.destroyFns=new hb,this.destroyFns.setFns([e.addListener("undo",this.undo.bind(this),63),e.addListener("redo",this.redo.bind(this),63)])}destroy(){this.destroyFns.destroy()}addMementoOriginator(e){this.originators.set(e.mementoOriginatorKey,e),this.clearState.set(e.mementoOriginatorKey,e.createMemento()),this.debugEvent("History add originator:",e.mementoOriginatorKey)}clear(){this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1;for(const[e,t]of this.originators.entries())this.clearState.set(e,t.createMemento())}record(e){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));const t=new Map;for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];for(const o of s){if(!this.originators.has(o.mementoOriginatorKey))throw new Error(`Originator [${o.mementoOriginatorKey}] has not been added to the HistoryManager.`);t.set(o.mementoOriginatorKey,o.createMemento())}this.history.push({label:e,mementos:t}),this.historyIndex=this.history.length-1,this.debugEvent(`History record: [${e}]`)}undo(){const e=this.history[this.historyIndex];if(e){for(const t of e.mementos.keys()){const e=this.findPreviousMemento(t);if(e===ub)throw new Error(`Could not find previous memento for [${t}].`);this.restoreMemento(t,e)}this.historyIndex-=1,this.debugEvent(`History undo: [${e.label}]`)}}redo(){const e=this.history[this.historyIndex+1];if(e){for(const[t,i]of e.mementos.entries())this.restoreMemento(t,i);this.historyIndex+=1,this.debugEvent(`History redo: [${e.label}]`)}}findPreviousMemento(e){for(let t=this.historyIndex-1;t>=0;t--)if(this.history[t].mementos.has(e))return this.history[t].mementos.get(e);return this.clearState.has(e)?this.clearState.get(e):ub}restoreMemento(e,t){this.originators.get(e)?.restoreMemento(db,db,t)}debugEvent(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.debug(...t,this.history.map(((e,t)=>t===this.historyIndex?`** ${e.label} **`:e.label)))}},gb=class{constructor(e){this.version=e.split("-")[0]}save(){const e={version:this.version};for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];for(const n of Object.values(i))e[n.mementoOriginatorKey]=this.encode(n,n.createMemento());return e}restore(e){if("object"===typeof e)if(null!=e)if("version"in e&&"string"===typeof e.version){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];for(const t of i){if(!(t.mementoOriginatorKey in e))continue;const i=this.decode(t,e[t.mementoOriginatorKey]);if(!t.guardMemento(i))return void Xd.warnOnce(`Could not restore [${t.mementoOriginatorKey}] data, value was invalid, ignoring.`,i);t.restoreMemento(this.version,e.version,i)}}else Xd.warnOnce("Could not restore data, missing [version] string in object, ignoring.");else Xd.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");else Xd.warnOnce(`Could not restore data of type [${typeof e}], expecting an object, ignoring.`)}encode(e,t){try{return JSON.parse(JSON.stringify(t,this.encodeTypes))}catch(i){throw new Error(`Failed to encode [${e.mementoOriginatorKey}] value [${i}].`,{cause:i})}}decode(e,t){try{return JSON.parse(JSON.stringify(t),this.decodeTypes)}catch(i){throw new Error(`Failed to decode [${e.mementoOriginatorKey}] value [${i}].`,{cause:i})}}encodeTypes(e,t){return Up(this[e])?{__type:"date",value:String(this[e])}:t}decodeTypes(e,t){return Zp(this[e])&&"__type"in this[e]&&"date"===this[e].__type?new Date(this[e].value):t}},mb=class{constructor(){this.caretaker=new gb(db),this.state=new Map}setState(e,t){null!=qy(this.state.get(e.mementoOriginatorKey),t)&&(this.state.set(e.mementoOriginatorKey,t),this.restoreState(e))}restoreState(e){const{caretaker:t,state:i}=this;if(!i.has(e.mementoOriginatorKey))return;const s=i.get(e.mementoOriginatorKey);t.restore({version:t.version,[e.mementoOriginatorKey]:s},e)}};function fb(e,t,i,s){t.addEventListener(i,s);const n=()=>t.removeEventListener(i,s);return e.push(n),n}function yb(e,t,i){fb(e,t,"keydown",(e=>{"Escape"===e.key&&i(e)}))}function vb(e,t,i){const s=fb(e,window,"mousedown",(e=>{[0,2].includes(e.button)&&!function(e,t){if(t.target instanceof Element){const{x:i,y:s,width:n,height:o}=e.getBoundingClientRect(),{clientX:r,clientY:a}=t;return r>=i&&a>=s&&r<=i+n&&a<=s+o}return!1}(t,e)&&(i(),s())}));return s}function Cb(e){return!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)}function bb(e,t){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];return Cb(e)&&(e.key===t||s.some((t=>e.key===t)))}function wb(e,t,i,s){i&&fb(e,t,"keydown",(e=>{bb(e,s)&&i.focus()}))}function Sb(e,t,i,s,n,o){wb(e,t,n,o),wb(e,t,i,s),fb(e,t,"keydown",(e=>{bb(e,s,o)&&e.preventDefault()}))}var xb={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}};function Mb(e){return e.toolbar.role="toolbar",e.toolbar.ariaOrientation=e.orientation,e.toolbar.ariaHidden=(0===e.buttons.length).toString(),Db(e)}function Db(e){const{orientation:t,buttons:i,wrapAround:s=!1,onEscape:n,onFocus:o,onBlur:r}=e,{nextKey:a,prevKey:l}=xb[t],c=e=>{e.target&&"tabIndex"in e.target&&(i.forEach((e=>e.tabIndex=-1)),e.target.tabIndex=0)},[h,d]=s?[i.length,i.length]:[0,1/0],u=[];for(let p=0;p<i.length;p++){const e=i[(h+p-1)%d],t=i[p],s=i[(h+p+1)%d];fb(u,t,"focus",c),o&&fb(u,t,"focus",o),r&&fb(u,t,"blur",r),n&&yb(u,t,n),Sb(u,t,e,l,s,a),t.tabIndex=0===p?0:-1}return u}var Ib=class{constructor(e,t,i){this.lastFocus=t,this.closeCallback=i,this.destroyFns=[],this.destroyFns.push(vb(this.destroyFns,e,(()=>this.close())))}close(){this.destroyFns.forEach((e=>e())),this.destroyFns.length=0,this.closeCallback(),this.finishClosing()}finishClosing(){this.destroyFns.forEach((e=>e())),this.destroyFns.length=0,fv(this.lastFocus,"aria-expanded",!1),this.lastFocus?.focus(),this.lastFocus=void 0}};function Rb(e){const{sourceEvent:t,orientation:i,menu:s,buttons:n,closeCallback:o,autoCloseOnBlur:r=!1}=e,{nextKey:a,prevKey:l}=xb[i],c=Lb(t);fv(c,"aria-expanded",!0);const h=new Ib(s,c,o),d=()=>h.close(),{destroyFns:u}=h;if(s.role="menu",s.ariaOrientation=i,u.push(...Db({orientation:i,buttons:n,onEscape:d,wrapAround:!0})),s.tabIndex=-1,yb(u,s,d),fb(u,s,"keydown",(e=>{e.target!==s||e.key!==a&&e.key!==l||(e.preventDefault(),n[0]?.focus())})),r){const e=e=>{!n.includes(e.relatedTarget)&&d()};for(const t of n)fb(u,t,"blur",e)}return n[0]?.focus(),h}function Eb(e,t){return i=>{if("true"===e.ariaDisabled)return i.preventDefault();t(i)}}function Ab(e){return"button"in e?0===e.button:Cb(e)&&("Space"===e.code||"Enter"===e.key)}function Lb(e){if(e?.target instanceof HTMLElement&&"tabindex"in e.target.attributes)return e.target}function kb(e){const t=e=>{if(e.defaultPrevented)return;vv(e.target,"data-preventdefault",!0)&&bb(e,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&e.preventDefault()};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}var Tb=class{constructor(){this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach((e=>{let[t,i]=e;return this.observe(t,i)})),this.queuedObserveRequests=[]},"undefined"!==typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver((e=>{for(const{target:t,contentRect:{width:i,height:s}}of e){const e=this.elements.get(t);this.checkSize(e,t,i,s)}})),this.documentReady="complete"===Qu("readyState"),this.documentReady||Xu()?.addEventListener("load",this.onLoad))}destroy(){Xu()?.removeEventListener("load",this.onLoad),this.resizeObserver?.disconnect(),this.resizeObserver=null}checkSize(e,t,i,s){e&&(i===e.size?.width&&s===e.size?.height||(e.size={width:i,height:s},e.cb(e.size,t)))}observe(e,t){if(!this.documentReady)return void this.queuedObserveRequests.push([e,t]);this.elements.has(e)?this.removeFromQueue(e):this.resizeObserver?.observe(e);const i={cb:t};this.elements.set(e,i)}unobserve(e){this.resizeObserver?.unobserve(e),this.elements.delete(e),this.removeFromQueue(e),this.elements.size||this.destroy()}removeFromQueue(e){this.queuedObserveRequests=this.queuedObserveRequests.filter((t=>{let[i]=t;return i!==e}))}},Pb=["styles","canvas","canvas-center","canvas-overlay","canvas-proxy","series-area"],Nb=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}]]);var Fb={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON:()=>Fb},Ob=class extends ab{constructor(e,t){super(),this.styles=new Map,this.container=void 0,this.containerSize=void 0,this.sizeMonitor=new Tb;const i=qu("div");i.innerHTML='<div role="presentation" class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="img" class="ag-charts-series-area" tabindex="-1"></div></div><div role="presentation" class="ag-charts-canvas-overlay"></div></div></div></div>',this.element=i.children.item(0),this.styleRootElement=t,this.rootElements=Pb.reduce(((e,t)=>{const i=`ag-charts-${t}`,s=this.element.classList.contains(i)?this.element:this.element.querySelector(`.${i}`);if(!s)throw new Error(`AG Charts - unable to find DOM element ${i}`);return e[t]={element:s,children:new Map,listeners:[]},e}),{});let s=!1;this.observer=function(e,t){if("undefined"===typeof IntersectionObserver)return;const i=new IntersectionObserver((i=>{for(const s of i)s.target===e&&t(s.intersectionRatio)}),{root:e});return i.observe(e),i}(this.element,(e=>{0!==e||s||this.listeners.dispatch("hidden",{type:"hidden"}),s=0===e})),this.setSizeOptions(),this.addStyles("ag-charts-community",'.ag-charts-wrapper,.ag-charts-wrapper:focus,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:focus,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box;outline:none}.ag-charts-wrapper{position:relative;user-select:none}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;display:flex;align-items:var(--ag-charts-align);justify-content:var(--ag-charts-justify)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{display:block;pointer-events:none}.ag-charts-series-area{opacity:0;pointer-events:auto;position:absolute}.ag-charts-series-area:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-active-color: var(--ag-active-color, #2196f3);--ag-charts-background-color: var(--ag-background-color, #fff);--ag-charts-foreground-color: var(--ag-foreground-color, #181d1f);--ag-charts-border-color: var(--ag-border-color, #dddddd);--ag-charts-hover-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 12%);--ag-charts-font-family: "Verdana", sans-serif;--ag-charts-font-size: var(--ag-font-size, 14px);--ag-charts-size: var(--ag-grid-size, 8px);--ag-charts-border: var(--ag-charts-border-color) var(--ag-borders, solid 1px);--ag-charts-border-critical: var(--ag-borders-critical, solid 1px);--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1;--ag-charts-align: center;--ag-charts-justify: center;--ag-charts-axis-label-background-color: #474747;--ag-charts-axis-label-color: #ffffff;--ag-charts-toolbar-foreground-color: var(--ag-header-foreground-color, var(--ag-charts-foreground-color));--ag-charts-toolbar-background-color: var( --ag-header-background-color, color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 2%) );--ag-charts-toolbar-size: 34px;--ag-charts-toolbar-size-small: 24px;--ag-charts-toolbar-border: var(--ag-charts-border-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-toolbar-hover-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 12% );--ag-charts-toolbar-focus-color: var(--ag-charts-active-color);--ag-charts-toolbar-active-background-color: var(--ag-charts-toolbar-hover-color);--ag-charts-toolbar-active-color: var(--ag-charts-active-color);--ag-charts-toolbar-disabled-foreground-color: var( --ag-disabled-foreground-color, color-mix(in srgb, transparent, var(--ag-charts-toolbar-foreground-color) 50%) );--ag-charts-toolbar-disabled-background-color: color-mix( in srgb, var(--ag-charts-toolbar-background-color), var(--ag-charts-toolbar-foreground-color) 6% );--ag-charts-toolbar-gap: var(--ag-charts-size);--ag-charts-toolbar-font-size: 13px;--ag-charts-toolbar-font-size-small: 12px;--ag-charts-toolbar-button-padding: 6px;--ag-charts-toolbar-button-padding-small: 1px;--ag-charts-popover-background-color: var(--ag-charts-toolbar-background-color);--ag-charts-popover-foreground-color: var(--ag-charts-toolbar-foreground-color);--ag-charts-popover-border: var(--ag-charts-toolbar-border);--ag-charts-popover-border-radius: var(--ag-border-radius, 4px);--ag-charts-popover-active-color: var(--ag-charts-toolbar-active-color);--ag-charts-popover-hover-color: var(--ag-charts-toolbar-hover-color);--ag-charts-popover-active-background-color: var(--ag-charts-toolbar-active-background-color);--ag-charts-popover-font-size: 14px;--ag-charts-popover-font-size-small: var(--ag-charts-toolbar-font-size-small);--ag-charts-dialog-input-group-label-color: color-mix(in srgb, transparent, var(--ag-charts-foreground-color) 55%);--ag-charts-dialog-tab-color--inactive: color-mix(in srgb, transparent, var(--ag-charts-foreground-color) 55%);--ag-charts-button-radius: var(--ag-border-radius, 4px);--ag-charts-focus-border-color: var(--ag-input-focus-border-color, var(--ag-charts-active-color));--ag-charts-focus-border: solid 1px var(--ag-charts-focus-border-color);--ag-charts-focus-border-shadow: var( --ag-input-focus-box-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-input-focus-border-color, var(--ag-charts-active-color)) 20%) );--ag-charts-focus-box-shadow: var(--box-shadow), 0 0 0 2px #fff8, var(--ag-charts-focus-border-shadow);--ag-charts-icon-font-family: "agChartsDefault";--ag-charts-icon-font-weight: normal;--ag-charts-icon-font-color: color-mix(in srgb, transparent, var(--ag-charts-foreground-color), 90%);--ag-charts-icon-size: 20px;--ag-charts-input-background-color: var(--ag-charts-background-color);--ag-charts-input-background-color--hover: var(--ag-charts-hover-color);--ag-charts-input-background-color--active: var(--ag-charts-hover-color);--ag-charts-input-border-color: var(--ag-charts-border-color);--ag-charts-input-border-color--active: var(--ag-charts-active-color);--ag-charts-input-border-radius: var(--ag-border-radius, 4px);--ag-charts-input-color--active: var(--ag-charts-active-color);--ag-charts-input-focus-outline: var(--ag-charts-focus-border);--ag-charts-input-focus-box-shadow: var(--ag-charts-focus-border-shadow);--ag-charts-input-font-family: var(--ag-charts-font-family);--ag-charts-input-font-size: var(--ag-charts-font-size);--ag-charts-input-padding: 8px;--ag-charts-input-padding-large: 10px;--ag-charts-input-placeholder-color: #888888;--ag-charts-input-spacing: 8px;--ag-charts-input-transition-duration: .25s;--ag-charts-input-transition-duration--fast: .1s;--ag-charts-input-transition-timing-function: ease-out;--ag-charts-input-checkbox-background-color: #babbbc;--ag-charts-input-checkbox-background-color--checked: var(--ag-charts-active-color)}.ag-charts-theme-default-dark{--ag-charts-background-color: var(--ag-background-color, color-mix(in srgb, #fff, #182230 97%));--ag-charts-foreground-color: var(--ag-foreground-color, #fff);--ag-charts-border-color: var(--ag-border-color, rgba(255, 255, 255, .16));--ag-charts-hover-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 18%);--ag-charts-axis-label-background-color: #9caebb;--ag-charts-axis-label-color: #000000;--ag-charts-toolbar-background-color: var(--ag-header-background-color, color-mix(in srgb, #fff, #182230 93%));--ag-charts-toolbar-hover-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 18% );--ag-charts-dialog-input-group-label-text-color: #ffffff;--ag-charts-focus-border-shadow: var( --ag-input-focus-box-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-input-focus-border-color, var(--ag-charts-active-color)) 20%) );--ag-charts-input-placeholder-color: #aaaaaa}.ag-charts-icon{display:block;width:var(--ag-charts-icon-size);height:var(--ag-charts-icon-size);speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04Ljc1IDQuNWEuNzUuNzUgMCAwIDAtMS41IDB2Mi43NUg0LjVhLjc1Ljc1IDAgMCAwIDAgMS41aDIuNzV2Mi43NWEuNzUuNzUgMCAwIDAgMS41IDBWOC43NWgyLjc1YS43NS43NSAwIDAgMCAwLTEuNUg4Ljc1VjQuNVoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zLjc1IDhhLjc1Ljc1IDAgMCAxIC43NS0uNzVoN2EuNzUuNzUgMCAwIDEgMCAxLjVoLTdBLjc1Ljc1IDAgMCAxIDMuNzUgOFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt,.ag-charts-icon-zoom-in-alt-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt,.ag-charts-icon-zoom-out-alt-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-icon-reset-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00LjQxMiA0LjA1OCAyLjc1IDIuMzk2VjYuNzVoLjc0NGEuNzYuNzYgMCAwIDAgLjAxMiAwaDMuNTk4TDUuNDc4IDUuMTI1YTQuMTI1IDQuMTI1IDAgMCAxIDIuNTIzLS44NzUgMy43NSAzLjc1IDAgMSAxLTMuMTE5IDUuODMzLjc1Ljc1IDAgMCAwLTEuMjQ3LjgzNEE1LjI1IDUuMjUgMCAxIDAgOCAyLjc1aC0uMDAzYTUuNjI1IDUuNjI1IDAgMCAwLTMuNTg1IDEuMzA4WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-left-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMC4wMyA0LjQ3YS43NS43NSAwIDAgMSAwIDEuMDZMNy41NiA4bDIuNDcgMi40N2EuNzUuNzUgMCAxIDEtMS4wNiAxLjA2bC0zLTNhLjc1Ljc1IDAgMCAxIDAtMS4wNmwzLTNhLjc1Ljc1IDAgMCAxIDEuMDYgMFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-pan-right-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01Ljk3IDExLjUzYS43NS43NSAwIDAgMSAwLTEuMDZMOC40NCA4IDUuOTcgNS41M2EuNzUuNzUgMCAwIDEgMS4wNi0xLjA2bDMgM2EuNzUuNzUgMCAwIDEgMCAxLjA2bC0zIDNhLjc1Ljc1IDAgMCAxLTEuMDYgMFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-pan-start-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tZmlyc3QiPjxwYXRoIGQ9Im0xNyAxOC02LTYgNi02Ii8+PHBhdGggZD0iTTcgNnYxMiIvPjwvc3ZnPg==)}.ag-charts-icon-pan-end-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tbGFzdCI+PHBhdGggZD0ibTcgMTggNi02LTYtNiIvPjxwYXRoIGQ9Ik0xNyA2djEyIi8+PC9zdmc+)}.ag-charts-icon-trend-line-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMi41IiBjeT0iOCIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEuNSIvPjxjaXJjbGUgY3g9IjEzLjUiIGN5PSI4IiByPSIxLjc1IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS41Ii8+PHBhdGggc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEuNSIgZD0iTTQgOGg4Ii8+PC9zdmc+)}.ag-charts-icon-horizontal-line-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMC4zODYgOC43NWEyLjUwMSAyLjUwMSAwIDAgMS00Ljc3MiAwSC43NWEuNzUuNzUgMCAwIDEgMC0xLjVoNC44NjRhMi41MDEgMi41MDEgMCAwIDEgNC43NzIgMGg0Ljg2NGEuNzUuNzUgMCAwIDEgMCAxLjVoLTQuODY0Wk05IDhhMSAxIDAgMSAxLTIgMCAxIDEgMCAwIDEgMiAwWiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-vertical-line-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04Ljc1IDUuNjE0YTIuNTAxIDIuNTAxIDAgMCAxIDAgNC43NzJ2NC44NjRhLjc1Ljc1IDAgMCAxLTEuNSAwdi00Ljg2NGEyLjUwMSAyLjUwMSAwIDAgMSAwLTQuNzcyVi43NWEuNzUuNzUgMCAwIDEgMS41IDB2NC44NjRaTTggN2ExIDEgMCAxIDEgMCAyIDEgMSAwIDAgMSAwLTJaIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-parallel-channel-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC40MjQgNC45MmEyLjUgMi41IDAgMSAwLTMuMzc3LTIuMTRsLTYuNjMgMi45YTIuNTAxIDIuNTAxIDAgMSAwIC42MDcgMS4zNzJsNi41ODUtMi44OGEyLjUwMSAyLjUwMSAwIDAgMCAyLjgxNS43NDhabS4wNS0yLjY5M2ExIDEgMCAxIDEtMS44Ny43MDggMSAxIDAgMCAxIDEuODctLjcwOFptLTExIDQuNzVhMSAxIDAgMSAxLTEuODcuNzA4IDEgMSAwIDAgMSAxLjg3LS43MDhabTEuNTUgNi4wNzVhMi41MDEgMi41MDEgMCAxIDEtLjYwNy0xLjM3Mmw2LjYzLTIuOWEyLjUwMSAyLjUwMSAwIDEgMSAuNTYyIDEuMzkxbC02LjU4NSAyLjg4Wm0tMS41NS0uMDc1YTEgMSAwIDEgMS0xLjg3LjcwOCAxIDEgMCAwIDEgMS44Ny0uNzA4Wm0xMC40Mi0zLjQ2YTEgMSAwIDEgMC0uNzA5LTEuODcgMSAxIDAgMCAwIC43MDggMS44N1oiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-disjoint-channel-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC40MjQgNC45MmEyLjUgMi41IDAgMSAwLTMuMzgzLTIuNDUzTDQuNjkgNC4wNTVhMi41IDIuNSAwIDEgMCAuMzQ0IDEuNDZsNi4zOTItMS41OThhMi41MDEgMi41MDEgMCAwIDAgMyAxLjAwM1ptLjA1LTIuNjkzYTEgMSAwIDEgMS0xLjg3LjcwOCAxIDEgMCAwIDEgMS44Ny0uNzA4Wm0tMTEgMi43NWExIDEgMCAxIDEtMS44Ny43MDggMSAxIDAgMCAxIDEuODctLjcwOFptMS41NiA1LjQyYTIuNSAyLjUgMCAxIDAtLjM0NSAxLjQ2MWw2LjM1MiAxLjU4OGEyLjUgMi41IDAgMSAwIC4zODQtMS40NWwtNi4zOTItMS41OThabS0xLjU2LjUzOGExIDEgMCAxIDAtMS44Ny0uNzA4IDEgMSAwIDAgMCAxLjg3LjcwOFptMTAuNDIgMS40NjFhMSAxIDAgMSAxLS43MDkgMS44NyAxIDEgMCAwIDEgLjcwOC0xLjg3WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLjc4OC41ODNhMi42MyAyLjYzIDAgMCAwLTEuODYuNzdMOS41NDQgMi43MzhhLjc1Ny43NTcgMCAwIDAtLjE0LjE0TDIuMDMyIDEwLjI1di4wMDFjLS4yNDIuMjQxLS40Mi41MzgtLjUyLjg2NGwtLjAwMi4wMDItLjg4IDIuOTAyLS4wMDEuMDAzYTEuMDgzIDEuMDgzIDAgMCAwIDEuMzUgMS4zNDdoLjAwMWwyLjkwMi0uODhoLjAwMWMuMzI2LS4xLjYyMy0uMjc3Ljg2NS0uNTE4di0uMDAxbDcuMzc1LTcuMzc2YS43NjMuNzYzIDAgMCAwIC4xMzktLjEzOWwxLjM4NC0xLjM4NEEyLjYzIDIuNjMgMCAwIDAgMTIuNzg4LjU4M1ptLS4xMjYgNC4zNTIuOTI0LS45MjRhMS4xMyAxLjEzIDAgMCAwLTEuNTk3LTEuNTk3bC0uOTI0LjkyNCAxLjU5NyAxLjU5N1ptLTIuNjU3LS41MzYtNi45MTMgNi45MTRIMy4wOWEuNTgzLjU4MyAwIDAgMC0uMTQ2LjI0MmwtLjY1MyAyLjE1MyAyLjE1NS0uNjU0YS41ODMuNTgzIDAgMCAwIC4yNDEtLjE0NGw2LjkxNC02LjkxNC0xLjU5Ny0xLjU5N1oiIGZpbGw9IiMwMDAiLz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDE2djE2SDB6Ii8+PC9jbGlwUGF0aD48L2RlZnM+PC9zdmc+)}.ag-charts-icon-delete-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjA4MyAyLjY2N2MwLS4wOS4wNTMtLjI0Mi4xOTctLjM4Ny4xNDUtLjE0NC4yOTctLjE5Ny4zODctLjE5N2gyLjY2N2MuMDg5IDAgLjI0MS4wNTMuMzg2LjE5Ny4xNDUuMTQ1LjE5Ny4yOTcuMTk3LjM4N3YuNTgzSDYuMDg0di0uNTgzWk01LjMzIDQuNzVIMTEuOTE3djguNTgzYzAgLjA5LS4wNTIuMjQyLS4xOTcuMzg3LS4xNDUuMTQ0LS4yOTcuMTk3LS4zODYuMTk3SDQuNjY3Yy0uMDkgMC0uMjQyLS4wNTMtLjM4Ny0uMTk3LS4xNDQtLjE0NS0uMTk3LS4yOTctLjE5Ny0uMzg3VjQuNzVINS4zM1ptLS43NDUtMS41di0uNTgzYzAtLjU3OC4yOC0xLjA5Mi42MzYtMS40NDcuMzU1LS4zNTYuODctLjYzNyAxLjQ0Ny0uNjM3aDIuNjY3Yy41NzcgMCAxLjA5MS4yODEgMS40NDcuNjM3LjM1NS4zNTUuNjM2Ljg3LjYzNiAxLjQ0N3YuNTgzSDE0YS43NS43NSAwIDAgMSAwIDEuNWgtLjU4M3Y4LjU4M2MwIC41NzgtLjI4MSAxLjA5Mi0uNjM2IDEuNDQ3LS4zNTYuMzU2LS44Ny42MzctMS40NDcuNjM3SDQuNjY3Yy0uNTc3IDAtMS4wOTItLjI4MS0xLjQ0Ny0uNjM3LS4zNTUtLjM1NS0uNjM3LS44Ny0uNjM3LTEuNDQ3VjQuNzVIMmEuNzUuNzUgMCAwIDEgMC0xLjVoMi41ODNabTIuMDgzIDMuMzMzYS43NS43NSAwIDAgMSAuNzUuNzV2NGEuNzUuNzUgMCAxIDEtMS41IDB2LTRhLjc1Ljc1IDAgMCAxIC43NS0uNzVabTMuNDE3Ljc1YS43NS43NSAwIDAgMC0xLjUgMHY0YS43NS43NSAwIDEgMCAxLjUgMHYtNFoiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-lock-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjE3MyAyLjg0YTIuNTgzIDIuNTgzIDAgMCAxIDQuNDEgMS44Mjd2MS45MTZINS40MTZWNC42NjdjMC0uNjg1LjI3My0xLjM0My43NTctMS44MjdaTTMuOTE3IDYuNTgzVjQuNjY3YTQuMDgzIDQuMDgzIDAgMCAxIDguMTY2IDB2MS45MTZoLjU4NGMxLjE1IDAgMi4wODMuOTMzIDIuMDgzIDIuMDg0djQuNjY2YzAgMS4xNS0uOTMzIDIuMDg0LTIuMDgzIDIuMDg0SDMuMzMzYTIuMDgzIDIuMDgzIDAgMCAxLTIuMDgzLTIuMDg0VjguNjY3YzAtMS4xNTEuOTMzLTIuMDg0IDIuMDgzLTIuMDg0aC41ODNabTcuNDE2IDEuNWgtOGEuNTgzLjU4MyAwIDAgMC0uNTgzLjU4NHY0LjY2NmMwIC4zMjIuMjYxLjU4NC41ODMuNTg0aDkuMzM0YS41ODMuNTgzIDAgMCAwIC41ODMtLjU4NFY4LjY2N2EuNTgzLjU4MyAwIDAgMC0uNTgzLS41ODRoLTEuMzM0WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02LjkyMyAyLjg0YTIuNTgzIDIuNTgzIDAgMCAxIDMuNjUzIDAgMyAzIDAgMCAxIC41Ny43OThjLjEzNC4yNzguMTcuNDc0LjE3LjU0NWEuNzUuNzUgMCAwIDAgMS41IDBjMC0uMzgxLS4xMzItLjgwOS0uMzItMS4xOThhNC41MDEgNC41MDEgMCAwIDAtLjg1OS0xLjIwNiA0LjA4MyA0LjA4MyAwIDAgMC02Ljk3IDIuODg4djEuOTE2aC0uNTg0QzIuOTMzIDYuNTgzIDIgNy41MTYgMiA4LjY2N3Y0LjY2NmMwIDEuMTUuOTMzIDIuMDg0IDIuMDgzIDIuMDg0aDkuMzM0YzEuMTUgMCAyLjA4My0uOTMzIDIuMDgzLTIuMDg0VjguNjY3YzAtMS4xNTEtLjkzMy0yLjA4NC0yLjA4My0yLjA4NGgtNy4yNVY0LjY2N2MwLS42ODUuMjcyLTEuMzQzLjc1Ni0xLjgyN1pNNS40MTcgOC4wODNINC4wODJhLjU4My41ODMgMCAwIDAtLjU4My41ODR2NC42NjZjMCAuMzIyLjI2MS41ODQuNTgzLjU4NGg5LjMzNGEuNTgzLjU4MyAwIDAgMCAuNTgzLS41ODRWOC42NjdhLjU4My41ODMgMCAwIDAtLjU4My0uNTg0aC04WiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-plus-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXBsdXMiPjxwYXRoIGQ9Ik01IDEyaDE0Ii8+PHBhdGggZD0iTTEyIDV2MTQiLz48L3N2Zz4=)}.ag-charts-icon-crossline-add-line-legacy{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43NSA0LjVhLjc1Ljc1IDAgMCAwLTEuNSAwdjIuNzVINC41YS43NS43NSAwIDAgMCAwIDEuNWgyLjc1djIuNzVhLjc1Ljc1IDAgMCAwIDEuNSAwVjguNzVoMi43NWEuNzUuNzUgMCAwIDAgMC0xLjVIOC43NXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;color:inherit;font-family:var(--ag-charts-input-font-family);font-size:var(--ag-charts-input-font-size);transition-duration:var(--ag-charts-input-transition-duration);transition-property:none;transition-timing-function:var(--ag-charts-input-transition-timing-function)}.ag-charts-input:focus-visible{outline:var(--ag-charts-input-focus-outline);box-shadow:var(--ag-charts-input-focus-box-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);cursor:pointer;padding:var(--ag-charts-input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-input-background-color--hover)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{appearance:none;background:var(--ag-charts-input-checkbox-background-color);border-radius:9px;cursor:pointer;height:18px;margin:0;transition-duration:var(--ag-charts-input-transition-duration--fast);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:7px;content:" ";height:14px;margin:2px;transition-duration:var(--ag-charts-input-transition-duration--fast);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-input-checkbox-background-color--checked)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--line-height: 1.38;background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);line-height:var(--line-height);font-family:var(--ag-charts-input-font-family);font-size:var(--ag-charts-input-font-size);padding:var(--ag-charts-input-padding-large) var(--ag-charts-input-padding)}.ag-charts-textarea[placeholder]:empty:before{color:var(--ag-charts-input-placeholder);content:attr(placeholder)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:none;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:var(--ag-charts-focus-border);outline-width:2px;box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;stroke:var(--ag-charts-focus-border-color);stroke-width:2px}.ag-charts-toolbar{align-items:center;background:none;border:none;display:flex;flex-wrap:nowrap;opacity:1;position:absolute;transform:translateY(0);transition:opacity .2s ease-in-out,transform .2s ease-in-out}.ag-charts-toolbar--hidden,.ag-charts-toolbar--prevent-flash{visibility:hidden}.ag-charts-toolbar--floating-hidden{opacity:0;transition:opacity .4s ease-in-out}.ag-charts-toolbar--small{--ag-charts-toolbar-size: var(--ag-charts-toolbar-size-small);--ag-charts-toolbar-font-size: var(--ag-charts-toolbar-font-size-small);--ag-charts-toolbar-button-padding: var(--ag-charts-toolbar-button-padding-small)}.ag-charts-toolbar--top,.ag-charts-toolbar--bottom{flex-direction:row;width:100%}.ag-charts-toolbar--left,.ag-charts-toolbar--right{flex-direction:column}.ag-charts-toolbar--floating,.ag-charts-toolbar--floating-top,.ag-charts-toolbar--floating-bottom{background:none;border:none;flex-direction:row;pointer-events:none;width:100%}.ag-charts-toolbar--floating{padding:0;width:auto;z-index:var(--ag-charts-layer-toolbar)}.ag-charts-toolbar--floating-top{height:calc(var(--ag-charts-toolbar-size) + 10px);padding-top:10px}.ag-charts-toolbar--floating-bottom{height:calc(var(--ag-charts-toolbar-size) + 10px);padding-bottom:10px;overflow:hidden}.ag-charts-toolbar__align{display:flex;flex-direction:inherit;flex-wrap:inherit;gap:var(--ag-charts-toolbar-gap);max-width:100%;width:100%}.ag-charts-toolbar__align--start{justify-content:start}.ag-charts-toolbar__align--center{justify-content:center}.ag-charts-toolbar__align--end{justify-content:end}.ag-charts-toolbar__align--center,.ag-charts-toolbar__align--end{margin-left:auto}.ag-charts-toolbar--left .ag-charts-toolbar__align--center,.ag-charts-toolbar--left .ag-charts-toolbar__align--end,.ag-charts-toolbar--right .ag-charts-toolbar__align--center,.ag-charts-toolbar--right .ag-charts-toolbar__align--end{margin-left:0;margin-top:auto}.ag-charts-toolbar--floating-top .ag-charts-toolbar__align,.ag-charts-toolbar--floating-bottom .ag-charts-toolbar__align{transition:transform .4s ease-in-out;width:auto}.ag-charts-toolbar__section{display:inherit;flex-direction:inherit;flex-wrap:inherit;justify-content:inherit;max-width:inherit;width:inherit}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-toolbar-background-color);border:var(--ag-charts-toolbar-border);color:var(--ag-charts-toolbar-foreground-color);display:flex;font:var(--ag-charts-toolbar-font-size) var(--ag-charts-font-family);justify-content:center;margin:0 0 0 -1px;min-height:var(--ag-charts-toolbar-size);min-width:var(--ag-charts-toolbar-size);padding:var(--ag-charts-toolbar-button-padding);pointer-events:all;position:relative;white-space:nowrap;--stroke-width-color: var(--ag-charts-toolbar-foreground-color)}.ag-charts-toolbar__no-pointer-events{pointer-events:none}.ag-charts-toolbar__button--drag-handle{min-width:24px;padding-left:0;padding-right:0}.ag-charts-toolbar__button--with-transition{transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out}.ag-charts-toolbar__button[data-toolbar-group=ranges]{padding:var(--ag-charts-toolbar-button-padding) calc(var(--ag-charts-toolbar-button-padding) * 1.5)}.ag-charts-toolbar--top,.ag-charts-toolbar--bottom,.ag-charts-toolbar--floating,.ag-charts-toolbar--floating-top,.ag-charts-toolbar--floating-bottom{.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-button-radius);border-top-left-radius:var(--ag-charts-button-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-button-radius);border-top-right-radius:var(--ag-charts-button-radius)}}.ag-charts-toolbar--left,.ag-charts-toolbar--right{.ag-charts-toolbar__button{border-radius:0;margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-button-radius);border-top-right-radius:var(--ag-charts-button-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-button-radius);border-bottom-right-radius:var(--ag-charts-button-radius)}}.ag-charts-toolbar__button--hidden-value,.ag-charts-toolbar__button--hidden-toggled{display:none}.ag-charts-toolbar__button:hover:not([aria-disabled=true],.ag-charts-toolbar__button--drag-handle){background:var(--ag-charts-toolbar-hover-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button.ag-charts-toolbar__button--active{background:var(--ag-charts-toolbar-active-background-color);border-color:var(--ag-charts-toolbar-active-color);color:var(--ag-charts-toolbar-active-color);z-index:2;--stroke-width-color: var(--ag-charts-toolbar-active-color)}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-toolbar-disabled-background-color);color:var(--ag-charts-toolbar-disabled-foreground-color)}.ag-charts-toolbar__button:not([aria-disabled=true]){cursor:pointer}.ag-charts-toolbar__button.ag-charts-toolbar__button--drag-handle{cursor:grab}.ag-charts-toolbar__button.ag-charts-toolbar__button--dragging{cursor:grabbing}.ag-charts-toolbar__button--fill-visible:after{content:"";display:block;position:absolute;bottom:3px;left:5px;right:5px;height:4px;border-radius:99px;box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--ag-charts-foreground-color) 10%,transparent);background:var(--fill)}.ag-charts-toolbar__button--fill-visible[aria-disabled=true]:after{filter:grayscale(1);opacity:.5}.ag-charts-toolbar__button--stroke-width-visible:before{content:"";height:min(var(--strokeWidth),20px);width:12px;background:var(--stroke-width-color);margin-right:var(--ag-charts-toolbar-button-padding)}.ag-charts-toolbar__button--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--ag-charts-toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-chart-overlay{color:#181d1f;pointer-events:none}.ag-chart-overlay.ag-chart-dark-overlay{color:#fff}.ag-chart-overlay--loading{color:#8c8c8c}.ag-chart-overlay__loading-background{background:#fff;pointer-events:none}.ag-chart-overlay.ag-chart-dark-overlay .ag-chart-overlay__loading-background{background:#192232}.ag-chart-tooltip{transition:transform .1s ease;width:max-content;z-index:99999;font:12px Verdana,sans-serif;color:#464646;box-shadow:0 4px 8px #00000014}.ag-chart-tooltip-wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-chart-tooltip-wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-chart-tooltip-wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-chart-tooltip-wrap-never{white-space:pre;text-overflow:ellipsis}.ag-chart-tooltip-no-interaction{pointer-events:none;user-select:none}.ag-chart-tooltip-no-animation{transition:none!important}.ag-chart-tooltip-hidden{visibility:hidden}.ag-chart-tooltip-title{overflow:hidden;position:relative;padding:8px 14px;border-top-left-radius:2px;border-top-right-radius:2px;color:#fff;background-color:#888;z-index:1;text-overflow:inherit}.ag-chart-tooltip-title:only-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.ag-chart-tooltip-content{overflow:hidden;padding:6px 14px;line-height:1.7em;background:#fff;border-bottom-left-radius:2px;border-bottom-right-radius:2px;border:1px solid rgba(0,0,0,.15);text-overflow:inherit}.ag-chart-tooltip-arrow:before{content:"";position:absolute;top:100%;left:50%;transform:translate(-50%);border:5px solid #d9d9d9;border-left-color:transparent;border-right-color:transparent;border-bottom-color:transparent;width:0;height:0;margin:0 auto}.ag-chart-tooltip-arrow:after{content:"";position:absolute;top:calc(100% - 1px);left:50%;transform:translate(-50%);border:5px solid white;border-left-color:transparent;border-right-color:transparent;border-bottom-color:transparent;width:0;height:0;margin:0 auto}\n'),e&&this.setContainer(e),this.destroyFns.push(kb(this.element))}destroy(){super.destroy(),this.observer?.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),Object.values(this.rootElements).forEach((e=>{e.children.forEach((e=>e.remove())),e.element.remove()})),this.element.remove()}setSizeOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;const{style:n}=this.element;n.width=`${i??e}px`,n.height=`${s??t}px`}updateContainerSize(){const{style:e}=this.rootElements["canvas-center"].element;e.width=`${this.containerSize?.width??0}px`,e.height=`${this.containerSize?.height??0}px`}setContainer(e){if(e===this.container)return;this.container&&(this.container.removeChild(this.element),this.sizeMonitor.unobserve(this.container));if(!(null!=this.getShadowDocumentRoot(e)))for(const t of this.rootElements.styles.children.keys())this.removeChild("styles",t);this.container=e;for(const[t,i]of this.styles)this.addStyles(t,i);e.appendChild(this.element),this.sizeMonitor.observe(e,(e=>{this.containerSize=e,this.updateContainerSize(),this.listeners.dispatch("resize",{type:"resize"})})),this.listeners.dispatch("container-changed",{type:"container-changed"})}setThemeClass(e){this.element.classList.forEach((t=>{t.startsWith("ag-charts-theme-")&&t!==e&&this.element.classList.remove(t)})),this.element.classList.add(e)}setTabIndex(e){this.rootElements["series-area"].element.tabIndex=e}updateCanvasLabel(e){fv(this.rootElements["canvas-proxy"].element,"aria-label",e)}getEventElement(e,t){return["focus","blur","keydown","keyup"].includes(t)?this.rootElements["series-area"].element:e}addEventListener(e,t,i){this.getEventElement(this.element,e).addEventListener(e,t,i)}removeEventListener(e,t,i){this.getEventElement(this.element,e).removeEventListener(e,t,i)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){const e=Xu(),t=new bp(0,0,e.innerWidth,e.innerHeight),i=this.getRawOverlayClientRect(),s=bp.fromDOMRect(i??this.getBoundingClientRect());return t.intersection(s)?.toDOMRect()??Fb}getRawOverlayClientRect(){let e=this.element;for(;null!=e;){const t=e.computedStyleMap?.(),i=t?.get("overflow-x")?.toString(),s=t?.get("overflow-y")?.toString();if(null!=i&&"visible"!==i||s&&"visible"!==s)return e.getBoundingClientRect();e=e.parentElement}const t=this.getShadowDocumentRoot();if(t)return t.getBoundingClientRect()}getShadowDocumentRoot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.container;const t=e?.ownerDocument?.body??Qu("body");for(;null!=e;){if(e===t)return;if(e.parentNode instanceof DocumentFragment)return e;e=e.parentNode}return this.container}getChildBoundingClientRect(e){const{children:t}=this.rootElements[e],i=[];for(const s of t.values())i.push(bp.fromDOMRect(s.getBoundingClientRect()));return bp.merge(i)}calculateCanvasPosition(e){let t=0,i=0;const{x:s=0,y:n=0}=this.getChildBoundingClientRect("canvas")??{},o=e.getBoundingClientRect();return t=o.x-s,i=o.y-n,{x:t,y:i}}isManagedChildDOMElement(e,t,i){const{children:s}=this.rootElements[t],n=s?.get(i);return null!=n&&e.contains(n)}isEventOverElement(e){const t=e.target;return null!=t&&this.element.contains(t)}addStyles(e,t){const i="data-ag-charts";if(this.styles.set(e,t),null==this.container)return;const s=t=>t.getAttribute(i)===e,n=e=>{for(const i of e.children)if(s(i))return;const t=qu("style");return e.appendChild(t),t};let o;if(this.styleRootElement)o=n(this.styleRootElement);else{o=null!=this.getShadowDocumentRoot(this.container)?this.addChild("styles",e):n(Qu("head"))}null==o||s(o)||(o.setAttribute(i,e),o.innerHTML=t)}removeStyles(e){this.removeChild("styles",e)}updateCursor(e){this.element.style.cursor=e}getCursor(){return this.element.style.cursor}addChild(e,t,i,s){const{element:n,children:o,listeners:r}=this.rootElements[e];if(!o)throw new Error("AG Charts - unable to create DOM elements after destroy()");if(o.has(t))return o.get(t);const{childElementType:a="div"}=Nb.get(e)??{};if(i&&i.tagName.toLowerCase()!==a.toLowerCase())throw new Error("AG Charts - mismatching DOM element type");const l=i??qu(a);for(const[c,h,d]of r)l.addEventListener(c,h,d);if(o.set(t,l),s){const e=n.querySelector(s.query);if(null==e)throw new Error(`AG Charts - addChild query failed ${s.query}`);e.insertAdjacentElement(s.where,l)}else n?.appendChild(l);return l}removeChild(e,t){const{children:i}=this.rootElements[e];i&&(i.get(t)?.remove(),i.delete(t))}incrementDataCounter(e){const{dataset:t}=this.element;t[e]??(t[e]="0"),t[e]=String(Number(t[e])+1)}setDataBoolean(e,t){this.element.dataset[e]=String(t)}getIconClassNames(e){return`ag-charts-icon ag-charts-icon-${e}`}};function Gb(e,t,i,s){if(0===e)return function(e,t,i){if(0===e)return function(e,t){const i=-t/e;return 0!==e&&i>=0&&i<=1?[i]:[]}(t,i);const s=t*t-4*e*i,n=[];if(0===s){const i=-t/(2*e);i>=0&&i<=1&&n.push(i)}else if(s>0){const i=Math.sqrt(s),o=(-t-i)/(2*e),r=(-t+i)/(2*e);o>=0&&o<=1&&n.push(o),r>=0&&r<=1&&n.push(r)}return n}(t,i,s);const n=t/e,o=i/e,r=(3*o-n*n)/9,a=(9*n*o-27*(s/e)-2*n*n*n)/54,l=r*r*r+a*a,c=1/3,h=[];if(l>=0){const e=Math.sqrt(l),t=Math.sign(a+e)*Math.pow(Math.abs(a+e),c),i=Math.sign(a-e)*Math.pow(Math.abs(a-e),c),s=Math.abs(Math.sqrt(3)*(t-i)/2),o=-c*n+(t+i);if(o>=0&&o<=1&&h.push(o),0===s){const e=-c*n-(t+i)/2;e>=0&&e<=1&&h.push(e)}}else{const e=Math.acos(a/Math.sqrt(-r*r*r)),t=c*n,i=2*Math.sqrt(-r),s=i*Math.cos(c*e)-t,o=i*Math.cos(c*(e+2*Math.PI))-t,l=i*Math.cos(c*(e+4*Math.PI))-t;s>=0&&s<=1&&h.push(s),o>=0&&o<=1&&h.push(o),l>=0&&l<=1&&h.push(l)}return h}function Bb(e,t,i,s,n,o,r,a){const l=(i-e)*(a-o)-(s-t)*(r-n);if(0===l)return 0;const c=((r-n)*(t-o)-(e-n)*(a-o))/l,h=((i-e)*(t-o)-(s-t)*(e-n))/l;return c>=0&&c<=1&&h>=0&&h<=1?1:0}function zb(e,t,i,s,n,o,r,a,l,c,h,d){let u=0;const p=c-d,g=h-l,m=l*(d-c)-c*(h-l),f=Hb(e,i,n,r),y=Hb(t,s,o,a),v=Gb(p*f[0]+g*y[0],p*f[1]+g*y[1],p*f[2]+g*y[2],p*f[3]+g*y[3]+m);for(const C of v){const e=C*C,t=C*e,i=f[0]*t+f[1]*e+f[2]*C+f[3],s=y[0]*t+y[1]*e+y[2]*C+y[3];let n;n=l===h?(s-c)/(d-c):(i-l)/(h-l),n>=0&&n<=1&&u++}return u}function Hb(e,t,i,s){return[3*t-e-3*i+s,3*e-6*t+3*i,-3*e+3*t,e]}function Vb(e,t,i,s,n,o,r,a,l,c){if(isNaN(e)||isNaN(t))return 0;o&&([n,s]=[s,n]);const h=(c-a)/(l-r),d=a-h*r,u=Math.pow(h,2)+1,p=2*(h*(d-t)-e),g=Math.pow(e,2)+Math.pow(d-t,2)-Math.pow(i,2),m=Math.pow(p,2)-4*u*g;if(m<0)return 0;const f=(-p+Math.sqrt(m))/2/u,y=(-p-Math.sqrt(m))/2/u;let v=0;return[f,y].forEach((i=>{if(!(i>=Math.min(r,l)&&i<=Math.max(r,l)))return;const o=i-e,a=h*i+d-t;fy(Math.atan2(a,o),s,n)&&v++})),v}function jb(e,t,i,s,n){return(1-n)**3*e+3*(1-n)**2*n*t+3*(1-n)*n**2*i+n**3*s}function Wb(e,t,i,s,n){if(n<=Math.min(e,s))return e<s?0:1;if(n>=Math.max(e,s))return e<s?1:0;let o=0,r=1,a=NaN;for(let l=0;l<12;l+=1){a=(o+r)/2;jb(e,t,i,s,a)<n?o=a:r=a}return a}function Ub(e,t,i,s,n,o,r,a,l){const c=(1-l)*e+l*i,h=(1-l)*t+l*s,d=(1-l)*i+l*n,u=(1-l)*s+l*o,p=(1-l)*n+l*r,g=(1-l)*o+l*a,m=(1-l)*c+l*d,f=(1-l)*h+l*u,y=(1-l)*d+l*p,v=(1-l)*u+l*g,C=(1-l)*m+l*y,b=(1-l)*f+l*v;return[[{x:e,y:t},{x:c,y:h},{x:m,y:f},{x:C,y:b}],[{x:C,y:b},{x:y,y:v},{x:p,y:g},{x:r,y:a}]]}function _b(e,t,i,s){const n=3*t-e-3*i+s,o=3*e-6*t+3*i,r=-3*e+3*t;if(0===n){if(0!==o){const e=-r/o;if(e>0&&e<1)return[e]}return[]}const a=o*o-4*n*r;if(a>=0){const e=Math.sqrt(a);return[(-o+e)/(2*n),(-o-e)/(2*n)].filter((e=>e>0&&e<1))}return[]}function Yb(e,t,i,s,n,o,r,a){return[..._b(e,i,n,r),..._b(t,s,o,a)]}var Kb=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(e,t){this.openedPath=!0,this.path2d.moveTo(e,t),this.commands.push(0),this.params.push(e,t)}lineTo(e,t){this.openedPath?(this.path2d.lineTo(e,t),this.commands.push(1),this.params.push(e,t)):this.moveTo(e,t)}rect(e,t,i,s){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+s),this.lineTo(e,t+s),this.closePath()}roundRect(e,t,i,s,n){n=Math.min(n,i/2,s/2),this.moveTo(e,t+n),this.arc(e+n,t+n,n,Math.PI,1.5*Math.PI),this.lineTo(e+n,t),this.lineTo(e+i-n,t),this.arc(e+i-n,t+n,n,1.5*Math.PI,2*Math.PI),this.lineTo(e+i,t+n),this.lineTo(e+i,t+s-n),this.arc(e+i-n,t+s-n,n,0,Math.PI/2),this.lineTo(e+i-n,t+s),this.lineTo(e+n,t+s),this.arc(e+ +n,t+s-n,n,Math.PI/2,Math.PI),this.lineTo(e,t+s-n),this.closePath()}arc(e,t,i,s,n,o){this.openedPath=!0,this.path2d.arc(e,t,i,s,n,o),this.commands.push(2),this.params.push(e,t,i,s,n,o?1:0)}cubicCurveTo(e,t,i,s,n,o){this.openedPath||this.moveTo(e,t),this.path2d.bezierCurveTo(e,t,i,s,n,o),this.commands.push(3),this.params.push(e,t,i,s,n,o)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(e){e&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(e,t){const i=this.commands,s=this.params,n=i.length,o=-1e4,r=-1e4;let a=NaN,l=NaN,c=0,h=0,d=0;for(let u=0,p=0;u<n;u++)switch(i[u]){case 0:d+=Bb(a,l,c,h,o,r,e,t),c=s[p++],a=c,h=s[p++],l=h;break;case 1:d+=Bb(c,h,s[p++],s[p++],o,r,e,t),c=s[p-2],h=s[p-1];break;case 3:d+=zb(c,h,s[p++],s[p++],s[p++],s[p++],s[p++],s[p++],o,r,e,t),c=s[p-2],h=s[p-1];break;case 2:{const i=s[p++],n=s[p++],l=s[p++],u=s[p++],g=s[p++];if(d+=Vb(i,n,l,u,g,Boolean(s[p++]),o,r,e,t),!isNaN(a)){d+=Bb(c,h,i+Math.cos(u)*l,n+Math.sin(u)*l,o,r,e,t)}c=i+Math.cos(g)*l,h=n+Math.sin(g)*l;break}case 4:d+=Bb(a,l,c,h,o,r,e,t)}return d%2===1}distanceSquared(e,t){let i=1/0;const s=this.commands,n=this.params,o=s.length;let r=NaN,a=NaN,l=0,c=0;for(let h=0,d=0;h<o;h++)switch(s[h]){case 0:l=r=n[d++],c=a=n[d++];break;case 1:i=Dy(e,t,l,c,n[d++],n[d++],i);break;case 3:Xd.error("Command.Curve distanceSquare not implemented");break;case 2:{const s=n[d++],o=n[d++],r=n[d++],a=n[d++],h=n[d++],u=s+Math.cos(a)*r,p=o+Math.sin(a)*r,g=Boolean(n[d++]);i=Dy(e,t,l,c,u,p,i),i=Iy(e,t,s,o,r,a,h,g,i),l=s+Math.cos(h)*r,c=o+Math.sin(h)*r;break}case 4:i=Dy(e,t,l,c,r,a,i)}return i}getPoints(){const{commands:e,params:t}=this,i=[];let s=0;for(const n of e)switch(n){case 0:case 1:i.push({x:t[s++],y:t[s++]});break;case 3:s+=4,i.push({x:t[s++],y:t[s++]});break;case 2:i.push({x:t[s++],y:t[s++]}),s+=4}return i}toSVG(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(e,t)=>({x:e,y:t});const t=[],{commands:i,params:s}=this,n=function(i){t.push(i);for(let s=0;s<(arguments.length<=1?0:arguments.length-1);s+=2){const{x:i,y:n}=e(s+1<1||arguments.length<=s+1?void 0:arguments[s+1],s+1+1<1||arguments.length<=s+1+1?void 0:arguments[s+1+1]);t.push(i,n)}};let o=0;for(const r of i)switch(r){case 0:n("M",s[o++],s[o++]);break;case 1:n("L",s[o++],s[o++]);break;case 3:n("C",s[o++],s[o++],s[o++],s[o++],s[o++],s[o++]);break;case 2:{const e=s[o++],i=s[o++],r=s[o++],a=s[o++],l=s[o++],c=s[o++];let h=c?a-l:l-a;h<0&&(h+=2*Math.ceil(-h/(2*Math.PI))*Math.PI),c&&(h=-h);const d=Math.max(Math.ceil(Math.abs(h)/(Math.PI/2)),1),u=h/d,p=4/3*Math.tan(u/4);n(0===t.length?"M":"L",e+Math.cos(a)*r,i+Math.sin(a)*r);for(let t=0;t<d;t+=1){const s=a+u*(t+0),o=a+u*(t+1),l=r*Math.sin(s),c=r*Math.cos(s),h=r*Math.sin(o),d=r*Math.cos(o);n("C",e+c-p*l,i+l+p*c,e+d+p*h,i+h-p*d,e+d,i+h)}break}case 4:t.push("Z")}return t.join(" ")}computeBBox(){const{commands:e,params:t}=this;let[i,s,n,o]=[1/0,1/0,-1/0,-1/0],[r,a]=[NaN,NaN],[l,c]=[NaN,NaN];const h=(e,t,l)=>{i=Math.min(t,i),s=Math.min(e,s),n=Math.max(e,n),o=Math.max(t,o),l&&([r,a]=[e,t])};let d=0;for(const u of e)switch(u){case 0:h(t[d++],t[d++],!0),[l,c]=[r,a];break;case 1:h(t[d++],t[d++],!0);break;case 3:{const e=t[d++],i=t[d++],s=t[d++],n=t[d++],o=t[d++],l=t[d++];h(o,l,!0);Yb(r,a,e,i,s,n,o,l).forEach((t=>{const c=jb(r,e,s,o,t),d=jb(a,i,n,l,t);h(c,d)}));break}case 2:{const e=t[d++],i=t[d++],s=t[d++];let n=py(t[d++]),o=py(t[d++]);t[d++]&&([n,o]=[o,n]);const r=(t,n)=>{const o=e+s*Math.cos(t),r=i+s*Math.sin(t);h(o,r,n)};r(n),r(o,!0);const a=[0,Math.PI/2,Math.PI,3*Math.PI/2];for(const t of a)(n<o&&n<=t&&t<=o||n>o&&(n<=t||t<=o))&&r(t);break}case 4:[r,a]=[l,c]}return new bp(s,i,n-s,o-i)}};function Zb(e){const{redraw:t=3,changeCb:i,convertor:s}=e??{};return Sp({redraw:t,type:"path",convertor:s,changeCb:i})}var $b=class extends Fy{constructor(){super(...arguments),this.path=new Kb,this._clipX=NaN,this._clipY=NaN,this.clip=!1,this._dirtyPath=!0}set clipX(e){this._clipX=e,this.dirtyPath=!0}set clipY(e){this._clipY=e,this.dirtyPath=!0}set dirtyPath(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty(3))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){this._dirtyPath||(this.dirtyPath=this.path.isDirty()||(this.fillShadow?.isDirty()??!1)||(this._clipPath?.isDirty()??!1))}isPointInPath(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)}distanceSquared(e,t){return this.distanceSquaredTransformedPoint(e,t)}svgPathData(e){return this.dirtyPath&&(this.updatePath(),this.dirtyPath=!1),this.path.toSVG(e)}distanceSquaredTransformedPoint(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)?0:this.path.distanceSquared(e,t)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(){return this.updatePathIfDirty(),super.preRender()}render(e){const{ctx:t,forceRender:i,stats:s}=e;if(0!==this.dirty||i){if(!this.clip||isNaN(this._clipX)||isNaN(this._clipY))this._clipPath=void 0,this.drawPath(t);else{t.save();const e=this.strokeWidth/2;this._clipPath??(this._clipPath=new Kb),this._clipPath.clear(),this._clipPath.rect(-e,-e,this._clipX+e,this._clipY+e+e),t.clip(this._clipPath?.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(t),t.restore()}this.fillShadow?.markClean(),super.render(e)}else s&&(s.nodesSkipped+=Uf(this).count)}drawPath(e){this.fillStroke(e,this.path.getPath2D())}toSVG(){if(!this.visible)return;const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",this.svgPathData()),e.setAttribute("fill","string"===typeof this.fill?this.fill:"none"),e.setAttribute("fill-opacity",String(this.fillOpacity)),null!=this.stroke&&(e.setAttribute("stroke",this.stroke),e.setAttribute("stroke-opacity",String(this.strokeOpacity)),e.setAttribute("stroke-width",String(this.strokeWidth))),{elements:[e]}}};$b.className="Path",Wd([Zb()],$b.prototype,"clip",2),Wd([Zb()],$b.prototype,"clipX",1),Wd([Zb()],$b.prototype,"clipY",1);var Qb="ag-charts-focus-indicator",Xb=class{constructor(e){this.domManager=e,this.div=Qu().createElement("div"),this.svg=Qu().createElementNS("http://www.w3.org/2000/svg","svg"),this.path=Qu().createElementNS("http://www.w3.org/2000/svg","path"),this.svg.append(this.path),this.element=e.addChild("series-area",Qb),this.element.classList.add(Qb),this.element.ariaHidden="true",this.element.append(this.svg)}destroy(){this.domManager.removeStyles(Qb),this.domManager.removeChild("series-area",Qb)}updateBounds(e){if(void 0===e);else if(e instanceof $b){const t=(t,i)=>iy.toCanvasPoint(e,t,i);this.path.setAttribute("d",e.svgPathData(t)),this.show(this.svg)}else sp(this.div,e),this.show(this.div)}show(e){this.element.innerHTML="",this.element.append(e)}getFocusableElement(){const e=this.element.parentElement;if(null==e||0!==e.tabIndex&&-1!==e.tabIndex)throw new Error("AG Charts - the focus indicator must be a child of a focusable element");return e}overrideFocusVisible(e){this.getFocusableElement().style.setProperty("opacity",{true:"1",false:"0",undefined:""}[`${e}`])}isFocusVisible(){const e=this.getFocusableElement();return null!=e&&"1"===Xu().getComputedStyle(e).opacity}},qb=class{set textContent(e){this.textElement.textContent=e;const t=this.textElement,i=t.getBBox?.();i&&this.svgElement.setAttribute("viewBox",`${i.x} ${i.y} ${i.width} ${i.height}`)}get textContent(){return this.textElement.textContent}constructor(){this.textElement=Ju("http://www.w3.org/2000/svg","text"),this.textElement.role="presentation",this.svgElement=Ju("http://www.w3.org/2000/svg","svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.boundedContainer=qu("div"),this.boundedContainer.appendChild(this.svgElement),this.boundedContainer.role="presentation"}remove(){this.boundedContainer.remove()}getContainer(){return this.boundedContainer}updateBounds(e){sp(this.boundedContainer,e)}};function Jb(e,t){return t.params?.type===e}function ew(e){const t={params:e,result:void 0};return t.result=function(e){if("button"===e)return qu("button");if("slider"===e)return qu("input");if(["toolbar","group","list"].includes(e))return qu("div");if("text"===e)return new qb;if("listswitch"===e)return{button:qu("button"),listitem:qu("div")};throw Error("AG Charts - error allocating meta")}(t.params.type),t}var tw=class{constructor(e,t){this.localeManager=e,this.domManager=t,this.destroyFns=[]}destroy(){this.destroyFns.forEach((e=>e()))}addLocalisation(e){e(),this.destroyFns.push(this.localeManager.addListener("locale-changed",e))}createProxyContainer(e){const t=ew(e),{params:i,result:s}=t;return this.domManager.addChild("canvas-proxy",i.id,s),s.classList.add(...i.classList,"ag-charts-proxy-container"),s.role=i.type,"ariaOrientation"in i&&(s.ariaOrientation=i.ariaOrientation),"boolean"===typeof i.ariaHidden&&(s.ariaHidden=i.ariaHidden.toString()),this.addLocalisation((()=>{s.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)})),s}createProxyElement(e){const t=ew(e);if(Jb("button",t)){const{params:e,result:i}=t;if(this.initInteract(e,i),i.style.pointerEvents="auto","string"===typeof e.textContent)i.textContent=e.textContent;else{const{textContent:t}=e;this.addLocalisation((()=>{i.textContent=this.localeManager.t(t.id,t.params)}))}this.setParent(e,i)}if(Jb("slider",t)){const{params:e,result:i}=t;this.initInteract(e,i),i.type="range",i.role="presentation",i.style.margin="0px",i.ariaOrientation=e.ariaOrientation,this.addLocalisation((()=>{i.ariaLabel=this.localeManager.t(e.ariaLabel.id,e.ariaLabel.params)})),this.setParent(e,i)}if(Jb("text",t)){const{params:e,result:i}=t;this.initElement(e,i.getContainer()),this.setParent(e,i.getContainer())}if(Jb("listswitch",t)){const{params:e,result:{button:i,listitem:s}}=t;this.initInteract(e,i),i.style.width="100%",i.style.height="100%",i.textContent=e.textContent,i.role="switch",i.ariaChecked=e.ariaChecked.toString(),i.style.pointerEvents="auto",i.setAttribute("aria-describedby",e.ariaDescribedBy),s.role="listitem",s.style.position="absolute",s.replaceChildren(i),this.setParent(e,s)}return t.result}initElement(e,t){const{id:i}=e;t.id=i,t.classList.toggle("ag-charts-proxy-elem",!0)}initInteract(e,t){const{onclick:i,ondblclick:s,onmouseenter:n,onmouseleave:o,oncontextmenu:r,onchange:a,onfocus:l,onblur:c,tabIndex:h}=e;this.initElement(e,t),void 0!==h&&(t.tabIndex=h),i&&t.addEventListener("click",i),s&&t.addEventListener("dblclick",s),n&&t.addEventListener("mouseenter",n),o&&t.addEventListener("mouseleave",o),r&&t.addEventListener("contextmenu",r),l&&t.addEventListener("focus",l),c&&t.addEventListener("blur",c),a&&t.addEventListener("change",a)}setParent(e,t){const{id:i,parent:s}=e;if("string"===typeof s){const e={where:s,query:".ag-charts-series-area"};this.domManager.addChild("canvas-proxy",i,t,e)}else s.appendChild(t)}},iw=/\$\{(\w+)}(?:\[(\w+)])?/gi,sw={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},nw=class extends rb{constructor(){super(...arguments),this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(e){this.localeText!==e&&(this.localeText=e,this.dispatch("locale-changed"))}setLocaleTextFormatter(e){this.getLocaleText=e,this.getLocaleText!==e&&(this.getLocaleText=e,this.dispatch("locale-changed"))}t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{localeText:i=Ud,getLocaleText:s}=this,n=i[e];return s?.({key:e,defaultValue:n,variables:t})??(e=>{let{defaultValue:t,variables:i}=e;return t?.replaceAll(iw,((e,t,s)=>{const n=i[t],o=null!=s?sw[s]:null;return null!=s&&null==o&&Xd.warnOnce(`Format style [${s}] is not supported`),null!=o?o.format(n):"number"===typeof n?sw.number.format(n):n instanceof Date?sw.datetime.format(n):String(n)}))})({key:e,defaultValue:n,variables:t})??e}};var ow=class e{constructor(t){this.enabled=!0,this.width=600,this.height=300;const{width:i,height:s,pixelRatio:n,canvasElement:o,willReadFrequently:r=!1}=t;this.pixelRatio=function(){if("undefined"===typeof navigator)return!1;const e=/\(iPhone; CPU iPhone OS (\d+_\d+_\d+) like Mac OS X\)/.exec(navigator.userAgent);if(null==e)return!1;const[t,i]=e[1].split("_").map(Number);return t<16||16===t&&i<6}()?1:n??Xu("devicePixelRatio"),this.element=o??qu("canvas"),this.element.style.display="block",this.element.style.width=(i??this.width)+"px",this.element.style.height=(s??this.height)+"px",this.element.width=Math.round((i??this.width)*this.pixelRatio),this.element.height=Math.round((s??this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:r}),this.onEnabledChange(),this.resize(i??0,s??0),e.debugContext(this.context)}static is(t){return t instanceof e}drawImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.drawImage(this.context.canvas,t,i)}toDataURL(e){return this.element.toDataURL(e)}resize(e,t){if(!(e>0&&t>0))return;const{element:i,context:s,pixelRatio:n}=this;i.width=Math.round(e*n),i.height=Math.round(t*n),s.setTransform(n,0,0,n,0,0),i.style.width=e+"px",i.style.height=t+"px",this.width=e,this.height=t}clear(){this.context.save(),this.context.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}static debugContext(e){if(hy.check("canvas")){const t=e.save.bind(e),i=e.restore.bind(e);let s=0;Object.assign(e,{save(){t(),s++},restore(){if(0===s)throw new Error("AG Charts - Unable to restore() past depth 0");i(),s--},verifyDepthZero(){if(0!==s)throw new Error(`AG Charts - Save/restore depth is non-zero: ${s}`)}})}}};Wd([cv((e=>e.onEnabledChange()))],ow.prototype,"enabled",2);var rw=ow,aw=class e{constructor(e,t){this.canvas=e,this.markDirty=t,this.debug=hy.create(!0,"scene"),this.layersMap=new Map,this.nextZIndex=0,this.nextLayerId=0}static sortLayers(e,t){return Wf([e.zIndex,...e.zIndexSubOrder??[void 0,void 0],e.id],[t.zIndex,...t.zIndexSubOrder??[void 0,void 0],t.id],Vf)}get size(){return this.layersMap.size}forEach(t){Array.from(this.layersMap.values()).sort(e.sortLayers).forEach(t)}resize(e,t){this.canvas.resize(e,t),this.layersMap.forEach((i=>{let{canvas:s}=i;return s.resize(e,t)}))}addLayer(e){const{width:t,height:i,pixelRatio:s}=this.canvas,{zIndex:n=this.nextZIndex++,name:o,zIndexSubOrder:r,getComputedOpacity:a,getVisibility:l}=e,c=new rw({width:t,height:i,pixelRatio:s});return n>=this.nextZIndex&&(this.nextZIndex=n+1),this.layersMap.set(c,{id:this.nextLayerId++,name:o,canvas:c,zIndex:n,zIndexSubOrder:r,getComputedOpacity:a,getVisibility:l}),this.debug("Scene.addLayer() - layers",this.layersMap),c}removeLayer(e){this.layersMap.has(e)&&(this.layersMap.delete(e),e.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}moveLayer(e,t,i){const s=this.layersMap.get(e);s&&(s.zIndex=t,s.zIndexSubOrder=i,this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layersMap))}clear(){this.layersMap.clear()}},lw=class e{constructor(){this.offscreenCanvas="undefined"!==typeof OffscreenCanvas?new OffscreenCanvas(0,0):qu("canvas"),e.offscreenCanvasCount++;const t=this.offscreenCanvas.getContext("2d");if(null==t)throw new TypeError("AG Charts - invalid 2d context");this.renderCtx={ctx:t,devicePixelRatio:1,forceRender:!0,resized:!1,debugNodes:{}}}resize(e){let{spritePixelRatio:t,spriteWidth:i,spriteHeight:s}=e;this.offscreenCanvas.width=Math.max(i,0)*t,this.offscreenCanvas.height=Math.max(s,0)*t}renderSprite(e,t){e=Uu(e);const{renderCtx:i,renderCtx:{ctx:s},offscreenCanvas:n}=this,{scale:o=1,translateX:r=0,translateY:a=0}=t??{};s.resetTransform(),s.clearRect(0,0,n.width,n.height),s.save(),s.beginPath(),s.setTransform(o,0,0,o,r,a);for(const c of e)c.preRender(),c.render(i);if(s.closePath(),s.restore(),"transferToImageBitmap"in this.offscreenCanvas)return this.offscreenCanvas.transferToImageBitmap();const l=qu("canvas");return l.style.display="block",l.style.width=n.width+"px",l.style.height=n.height+"px",l.getContext("2d")?.putImageData(s.getImageData(0,0,n.width,n.height),0,0),l}};lw.offscreenCanvasCount=0;var cw=lw;function hw(e,t,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:bp.zero;if(!hy.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:r=0,layersSkipped:a=0,nodesRendered:l=0,nodesSkipped:c=0}=s??{},h=performance.now(),{start:d,...u}=t,p=Object.entries(u).map((e=>{let[t,i]=e;return yw(t,i)})).filter((e=>null!=e)).join(" + "),g=Object.entries(n).map((e=>{let[t,i]=e;return`${t}: ${i}`})).join(" ; "),m=hy.check("scene:stats:verbose"),f=[`${yw("\u23f1\ufe0f",d,h)} (${p})`,`${g}`,`Layers: ${m?fw(r,a):e.size}; Sprites: ${cw.offscreenCanvasCount}`,m?`Nodes: ${fw(l,c)}`:null].filter(Xp),y=new Vy((e=>i.measureText(e))),v=new Map(f.map((e=>[e,y.measureLines(e)]))),C=Math.max(...Array.from(v.values(),(e=>e.width))),b=function(e,t){let i=0;for(const s of e)i+=t(s);return i}(v.values(),(e=>e.height)),w=2+o.x;i.save(),i.fillStyle="white",i.fillRect(w,0,C,b),i.fillStyle="black";let S=0;for(const[x,M]of v.entries())S+=M.height,i.fillText(x,w,S);i.restore()}var dw=new Set,uw=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"]);function pw(e){const{...t}=e;for(const i in t)uw.has(i)||"number"!==typeof t[i]&&"string"!==typeof t[i]&&"boolean"!==typeof t[i]&&(dw.add(i),delete t[i]);return t}function gw(e,t){if(!hy.check(!0,"scene"))return{};const{parentNode:i}=e;let s=0;return{node:"json"===t?pw(e):e,name:e.name??e.id,dirty:wp[e.dirty],...i?.isVirtual?{virtualParentDirty:wp[i.dirty],virtualParent:i}:{},...Array.from(e.children(!1),(e=>gw(e,t))).reduce(((e,t)=>{let{name:i}=t;const{node:{visible:n,opacity:o,zIndex:r,zIndexSubOrder:a,translationX:l,translationY:c,rotation:h,scalingX:d,scalingY:u},node:p,virtualParent:g}=t;(!n||o<=0)&&(i=`(${i})`),Lv.is(p)&&(i=`*${i}*`);const m=a?.map((e=>"function"===typeof e?`${e()} (fn)`:e)).join(" / "),f=[`${(s++).toString().padStart(3,"0")}|`,`${i??"<unknown>"}`,`z: ${r}`,m&&`zo: ${m}`,g&&"(virtual parent)",l&&`x: ${l}`,c&&`y: ${c}`,h&&`r: ${h}`,null!=d&&1!==d&&`sx: ${d}`,null!=u&&1!==u&&`sy: ${u}`].filter((e=>!!e)).join(" ");let y=f,v=1;for(;null!=e[y]&&v<100;)y=`${f} (${v++})`;return e[y]=t,e}),{})}}function mw(e){if(0===e.dirty)return{dirtyTree:{},paths:[]};const t=Array.from(e.children(),(e=>mw(e))).filter((e=>e.paths.length>0)),i=ny.is(e)?e.name??e.id:e.id,s=t.length?t.flatMap((e=>e.paths)).map((e=>`${i}.${e}`)):[i];return{dirtyTree:{name:i,node:e,dirty:wp[e.dirty],...t.map((e=>e.dirtyTree)).filter((e=>null!=e.dirty)).reduce(((e,t)=>(e[t.name??"<unknown>"]=t,e)),{})},paths:s}}function fw(e,t){const i=e+t;return`${e} / ${i} (${Math.round(100*e/i)}%)`}function yw(e,t,i){const s=null!=i?i-t:t;return`${e}: ${Math.round(100*s)/100}ms`}var vw=class{constructor(e){this.debug=hy.create(!0,"scene"),this.id=Vu(this),this.root=null,this.pendingSize=null,this.isDirty=!1,this.canvas=new rw(e),this.layersManager=new aw(this.canvas,(()=>{this.isDirty=!0}))}get width(){return this.pendingSize?.[0]??this.canvas.width}get height(){return this.pendingSize?.[1]??this.canvas.height}setContainer(e){const{element:t}=this.canvas;return t.parentElement?.removeChild(t),e.appendChild(t),this}setRoot(e){return this.root===e||(this.isDirty=!0,this.root?._setLayerManager(),this.root=e,e&&(e.visible=!0,e._setLayerManager(this.layersManager))),this}attachNode(e){return this.appendChild(e),()=>this.removeChild(e)}appendChild(e){return this.root?.appendChild(e),this}removeChild(e){return this.root?.removeChild(e),this}download(e,t){ep(this.canvas.toDataURL(t),e?.trim()??"image")}getDataURL(e){return this.canvas.toDataURL(e)}resize(e,t){return e=Math.round(e),t=Math.round(t),e>0&&t>0&&(e!==this.width||t!==this.height)&&(this.pendingSize=[e,t],this.isDirty=!0,!0)}async render(e){const{debugSplitTimes:t={start:performance.now()},extraDebugStats:i,seriesRect:s}=e??{},{canvas:n,canvas:{context:o}={},root:r,pendingSize:a}=this;if(!o)return;const l=performance.now();if(a&&(this.layersManager.resize(...a),this.pendingSize=null),r&&!r.visible)return void(this.isDirty=!1);if(r&&!this.isDirty)return this.debug.check()&&this.debug("Scene.render() - no-op",{redrawType:wp[r.dirty],tree:gw(r,"console")}),void hw(this.layersManager,t,o,void 0,i,s);const c={ctx:o,devicePixelRatio:this.canvas.pixelRatio??1,forceRender:!0,resized:Boolean(a),debugNodes:{}};hy.check("scene:stats:verbose")&&(c.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0}),function(e){const t=Vg(Xu("agChartsSceneDebug")),i=[];for(const s of t)"layout"===s?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(s);e.debugNodeSearch=i}(c);let h=!1;if((!r||r.dirty>=1)&&(h=!0,n.clear()),r&&hy.check("scene:dirtyTree")){const{dirtyTree:e,paths:t}=mw(r);hy.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:e,paths:t})}if(r&&h){if(r.visible&&r.preRender(),this.debug.check()){const e=gw(r,"console");this.debug("Scene.render() - before",{redrawType:wp[r.dirty],canvasCleared:h,tree:e})}r.visible&&(o.save(),r.render(c),o.restore())}if(t["\u270d\ufe0f"]=performance.now()-l,this.layersManager.size&&h){const e=performance.now();o.save(),o.resetTransform(),this.layersManager.forEach((e=>{e.canvas.enabled&&e.getVisibility()&&(o.globalAlpha=e.getComputedOpacity(),e.canvas.drawImage(o))})),o.restore(),t["\u26d9"]=performance.now()-e}o.verifyDepthZero?.(),this.isDirty=!1,hw(this.layersManager,t,o,c.stats,i,s),function(e,t){e.save();for(const[i,s]of Object.entries(t)){const t=iy.toCanvas(s);t?(e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(t.x,t.y,t.width,t.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(i,t.x,t.y,t.width),e.fillText(i,t.x,t.y,t.width)):Xd.log(`Scene.render() - no bbox for debugged node [${i}].`)}e.restore()}(o,c.debugNodes),r&&this.debug.check()&&this.debug("Scene.render() - after",{redrawType:wp[r.dirty],tree:gw(r,"console"),canvasCleared:h})}toSVG(){const e=this.root?.toSVG();if(null==e)return;const t=document.createElementNS("http://www.w3.org/2000/svg","svg");if(t.setAttribute("width",String(this.width)),t.setAttribute("height",String(this.height)),null!=e.defs){const i=document.createElementNS("http://www.w3.org/2000/svg","defs");i.append(...e.defs),t.append(i)}return t.append(...e.elements),t.outerHTML}strip(){const{context:e,pixelRatio:t}=this.canvas;e.setTransform(t,0,0,t,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1}destroy(){this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0})}};vw.className="Scene";var Cw=class{constructor(){this.cache=new WeakMap}call(e){let t,i=this.cache.get(e);for(var s=arguments.length,n=new Array(s>1?s-1:0),o=1;o<s;o++)n[o-1]=arguments[o];try{t=JSON.stringify(n)}catch(r){return this.invoke(e,n,i)}return null==i&&(i=new Map,this.cache.set(e,i)),i.has(t)?i.get(t):this.invoke(e,n,i,t)}invoke(e,t,i,s){try{const n=e(...t);return i&&null!=s&&i.set(s,n),n}catch(n){return void Xd.warnOnce("User callback errored, ignoring",n)}}invalidateCache(){this.cache=new WeakMap}},bw=class extends ab{constructor(e){super(),this.annotationRoot=e,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(e){return jp(e)}restoreMemento(e,t,i){this.annotations=this.cleanData(i).map((e=>ag(e,this.getAnnotationTypeStyles(e.type)))),this.listeners.dispatch("restore-annotations",{type:"restore-annotations",annotations:this.annotations})}updateData(e){this.annotations=this.cleanData(e??[])}attachNode(e){return this.annotationRoot.append(e),()=>(this.annotationRoot?.removeChild(e),this)}setAnnotationStyles(e){this.styles=e}getAnnotationTypeStyles(e){return this.styles?.[e]}cleanData(e){for(const t of e)"textAlign"in t&&delete t.textAlign;return e}},ww=class{constructor(e){this.sceneRoot=e,this.axes=new Map,this.axisGridGroup=new Lv({name:"Axes-Grids",zIndex:1}),this.axisGroup=new Lv({name:"Axes",zIndex:2}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup)}updateAxes(e,t){for(const i of e)t.includes(i)||(i.detachAxis(this.axisGroup,this.axisGridGroup),i.destroy());for(const i of t)e?.includes(i)||i.attachAxis(this.axisGroup,this.axisGridGroup);this.axes.clear();for(const i of t){const e=i.createAxisContext();this.axes.has(e.direction)?this.axes.get(e.direction)?.push(e):this.axes.set(e.direction,[e])}}getAxisContext(e){return this.axes.get(e)??[]}destroy(){this.axes.clear(),this.sceneRoot.removeChild(this.axisGroup),this.sceneRoot.removeChild(this.axisGridGroup)}},Sw=class extends rb{constructor(e){super(),this.animationManager=e,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=hy.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(e){"function"===typeof e&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=e,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(e){this.isLoadingData=!0,this.throttledFetch(e)}isLazy(){return null!=this.dataSourceCallback}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(e){return Qd((e=>this.fetch(e)),e,{leading:!1,trailing:!0})}createThrottledDispatch(e){return Qd(((e,t)=>{this.debug(`DataService - dispatching 'data-load' | ${e}`),this.dispatch("data-load",{type:"data-load",data:t})}),e,{leading:!0,trailing:!0})}async fetch(e){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const t=performance.now(),i=this.requestCounter++;let s;this.debug(`DataService - requesting | ${i}`),this.freshRequests.push(i);try{s=await this.dataSourceCallback(e),this.debug(`DataService - response | ${performance.now()-t}ms | ${i}`)}catch(o){this.debug(`DataService - request failed | ${i}`),Xd.errorOnce(`DataService - request failed | [${o}]`)}this.isLoadingInitialData=!1;const n=this.freshRequests.findIndex((e=>e===i));-1===n||this.dispatchOnlyLatest&&n!==this.freshRequests.length-1?this.debug(`DataService - discarding stale request | ${i}`):(this.freshRequests=this.freshRequests.slice(n+1),0===this.freshRequests.length&&(this.isLoadingData=!1),Array.isArray(s)?this.throttledDispatch(i,s):this.dispatch("data-error"))}};Wd([lv({newValue(e){this.throttledDispatch=this.createThrottledDispatch(e)}})],Sw.prototype,"dispatchThrottle",2),Wd([lv({newValue(e){this.throttledFetch=this.createThrottledFetch(e)}})],Sw.prototype,"requestThrottle",2);var xw=class{constructor(e){this.maxAnimationTime=e,this.debug=hy.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(Dg.map((e=>[e,[]]))),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){return this.phases.get(Dg[this.currentPhase])??[]}checkOverlappingId(e){null!=e&&this.controllers.has(e)&&(this.controllers.get(e).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${e}`),this.skip())}addAnimation(e){if(e.isComplete)return;if(Dg.indexOf(e.phase)<this.currentPhase)return this.debug("Skipping animation due to being for an earlier phase",e.id),void e.stop();this.controllers.set(e.id,e),this.phases.get(e.phase)?.push(e)}removeAnimation(e){this.controllers.delete(e.id);const t=this.phases.get(e.phase),i=t?.indexOf(e);null!=i&&i>=0&&t?.splice(i,1)}progress(e){if(!this.isReady)return;let t=0===e?.01:e;const i=()=>{const e=Dg[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:e,phaseMeta:Ig[e]}};let{phase:s,phaseControllers:n,phaseMeta:o}=i();const r=()=>null==Dg[this.currentPhase],a=()=>{for(({phase:s,phaseControllers:n,phaseMeta:o}=i());!r()&&0===n.length;)this.currentPhase++,({phase:s,phaseControllers:n,phaseMeta:o}=i()),this.debug(`AnimationBatch - phase changing to ${s}`,{unusedTime:t},n)},l=this.controllers.size;this.debug(`AnimationBatch - ${e}ms; phase ${s} with ${n?.length} of ${l}`);do{const e=t,i=o.skipIfNoEarlierAnimations&&0===this.animationTimeConsumed;let s=0;for(const o of n)i?o.stop():t=Math.min(o.update(e),t),o.isComplete&&(s++,this.removeAnimation(o));this.animationTimeConsumed+=e-t,this.debug(`AnimationBatch - updated ${n.length} controllers; ${s} completed`),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),a()}while(t>0&&!r());this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let e=!0;for(const[,t]of this.controllers)if(t.duration>0&&!0!==Ig[t.phase].skipIfNoEarlierAnimations){e=!1;break}if(!e)for(const[,t]of this.controllers)t.autoplay&&t.play(!0)}skip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!1===this.skipAnimations&&!0===e){for(const e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=e}play(){for(const e of this.controllers.values())e.play()}pause(){for(const e of this.controllers.values())e.pause()}stop(){for(const t of this.controllers.values())try{t.stop(),this.removeAnimation(t)}catch(e){Xd.error("Error during animation stop",e)}this.dispatchStopped()}stopByAnimationId(e){if(null!=e&&this.controllers.has(e)){const t=this.controllers.get(e);t&&(t.stop(),this.removeAnimation(t))}}stopByAnimationGroupId(e){for(const t of this.controllers.values())t.groupId===e&&this.stopByAnimationId(t.id)}dispatchStopped(){this.stoppedCbs.forEach((e=>e())),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){this.stop(),this.controllers.clear()}};function Mw(e){const t={...e,preventDefault(){t.sourceEvent?.preventDefault()}};return t}function Dw(e,t){e.dispatchWrapHandlers(t.type,((e,t)=>e(t)),Mw(t))}var Iw=["drag-start","drag","drag-end"],Rw=[...Iw,"click","dblclick","contextmenu","hover","leave","enter","page-left","wheel"],Ew=["blur","focus"],Aw=["keydown","keyup"],Lw=["mousemove","mouseup"],kw=["pagehide","mousemove","mouseup"],Tw=["dblclick","contextmenu","mousedown","mouseleave","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel","blur","focus","keydown","keyup"];var Pw=class e extends cb{constructor(e,t){super(),this.keyboardOptions=e,this.domManager=t,this.debug=hy.create(!0,"interaction"),this.eventHandler=e=>this.processEvent(e),this.mouseDown=!1,this.touchDown=!1,this.clickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.dblclickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"},{offsetX:NaN,offsetY:NaN,type:"mouseup"},{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.stateQueue=34,this.rootElement=this.domManager.getShadowDocumentRoot();for(const i of Tw)i.startsWith("touch")||"wheel"===i?this.domManager.addEventListener(i,this.eventHandler,{passive:!1}):this.domManager.addEventListener(i,this.eventHandler);for(const i of kw)Xu().addEventListener(i,this.eventHandler);this.containerChanged(!0),this.domManager.addListener("container-changed",(()=>this.containerChanged()))}containerChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.domManager.getShadowDocumentRoot();if(e||t!==this.rootElement){for(const e of Lw)this.rootElement?.removeEventListener(e,this.eventHandler);this.rootElement=t,this.debug("[InteractionManager] Switching rootElement to:",this.rootElement);for(const e of Lw)this.rootElement?.addEventListener(e,this.eventHandler)}}destroy(){super.destroy();for(const e of kw)Xu().removeEventListener(e,this.eventHandler);for(const e of Lw)this.rootElement?.removeEventListener(e,this.eventHandler);for(const e of Tw)this.domManager.removeEventListener(e,this.eventHandler);this.domManager.removeStyles("interactionManager")}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}getState(){return this.stateQueue&-this.stateQueue}processEvent(e){this.debug("Received raw event",e);let t=this.decideInteractionEventTypes(e);null==t||Array.isArray(t)||(t=[t]);for(const i of t??[])this.dispatchEvent(e,i).catch((e=>Xd.errorOnce(e)))}async dispatchEvent(e,t){if(function(e){return Rw.includes(e)}(t))return void this.dispatchPointerEvent(e,t);const{relatedElement:i,targetElement:s}=this.extractElements(e);if(function(e){return Ew.includes(e)}(t)){const n=e;this.dispatchTypedEvent(this.listeners,{type:t,sourceEvent:n,relatedElement:i,targetElement:s})}else if(function(e){return Aw.includes(e)}(t)){const n=e;this.dispatchTypedEvent(this.listeners,{type:t,sourceEvent:n,relatedElement:i,targetElement:s})}}dispatchTypedEvent(e,t){const i=Mw(t);this.debug("Dispatching typed event",i,this.getState()),e.dispatchWrapHandlers(t.type,((e,t)=>e(t)),i)}extractElements(e){let t,i;return"relatedTarget"in e&&e.relatedTarget instanceof HTMLElement&&(t=e.relatedTarget),"target"in e&&e.target instanceof HTMLElement&&(i=e.target),{relatedElement:t,targetElement:i}}dispatchPointerEvent(e,t){const i=this.calculateCoordinates(e);if(null==i)return;const s=this.buildPointerEvent({type:t,event:e,...i});this.debug("Dispatching pointer event",s,this.getState()),Dw(this.listeners,s)}getEventHTMLTarget(e){return e.target instanceof HTMLElement?e.target:e.currentTarget instanceof HTMLElement?e.currentTarget:void 0}recordDown(e){e instanceof MouseEvent&&(gg(["offsetX","offsetY"],this.clickHistory[0],e),gg(["offsetX","offsetY"],this.dblclickHistory[2],this.dblclickHistory[0]),gg(["offsetX","offsetY"],this.dblclickHistory[0],e)),this.dragPreStartElement=this.getEventHTMLTarget(e)}recordUp(e){return e instanceof MouseEvent&&gg(["offsetX","offsetY"],this.dblclickHistory[1],e),this.dragPreStartElement=void 0,!!this.dragStartElement&&(this.dragStartElement=void 0,!0)}decideInteractionEventTypes(e){switch(e.type){case"blur":case"focus":case"keydown":case"keyup":return this.keyboardOptions.enabled?e.type:void 0;case"dblclick":case"contextmenu":case"wheel":return e.type;case"mousedown":if(!this.isEventOverElement(e))return;return this.mouseDown=!0,void this.recordDown(e);case"touchstart":if(!this.isEventOverElement(e))return;return this.touchDown=!0,void this.recordDown(e);case"touchmove":case"mousemove":if(!this.mouseDown&&!this.touchDown&&!this.isEventOverElement(e))return;return this.mouseDown||this.touchDown?this.dragStartElement?"drag":(this.dragStartElement=this.dragPreStartElement,this.dragPreStartElement=void 0,["drag-start","drag"]):"hover";case"mouseup":if(!this.mouseDown&&!this.isEventOverElement(e))return;return this.mouseDown=!1,this.recordUp(e)?"drag-end":"click";case"touchend":if(!this.touchDown&&!this.isEventOverElement(e))return;return this.touchDown=!1,this.recordUp(e)?"drag-end":"click";case"mouseleave":case"touchcancel":return"leave";case"mouseenter":return"enter";case"pagehide":return"page-left"}}isEventOverElement(e){return this.domManager.isEventOverElement(e)}calculateCoordinates(t){if(t instanceof MouseEvent)return this.getMouseEventCoords(t);if("undefined"!==typeof TouchEvent&&t instanceof TouchEvent){const i=t.touches[0]??t.changedTouches[0],{clientX:s,clientY:n,pageX:o,pageY:r}=i;return{...e.NULL_COORDS,clientX:s,clientY:n,pageX:o,pageY:r}}if(t instanceof PageTransitionEvent){if(t.persisted)return;return e.NULL_COORDS}}getMouseEventCoords(e){const{clientX:t,clientY:i,pageX:s,pageY:n}=e;let{offsetX:o,offsetY:r}=e;const a=this.getEventHTMLTarget(e),{x:l=0,y:c=0}=a?this.domManager.calculateCanvasPosition(a):{};if(null!=this.dragStartElement&&e.target!==this.dragStartElement){const e=this.domManager.calculateCanvasPosition(this.dragStartElement);o-=e.x-l,r-=e.y-c}else o+=l,r+=c;return{clientX:t,clientY:i,pageX:s,pageY:n,offsetX:o,offsetY:r}}isWheelEvent(e){return"wheel"===e.type}buildPointerEvent(e){const{type:t,event:i,clientX:s,clientY:n}=e;let{offsetX:o,offsetY:r,pageX:a,pageY:l}=e;if(!Jp(o)||!Jp(r)){const e=this.domManager.getBoundingClientRect();o=s-e.left,r=n-e.top}if(!Jp(a)||!Jp(l)){const e=this.rootElement?.getBoundingClientRect();a=s-(e?.left??0),l=n-(e?.top??0)}let[c,h]=[NaN,NaN];if(this.isWheelEvent(i)){const e=0===i.deltaMode?.01:1;c=i.deltaX*e,h=i.deltaY*e}let d=[];"click"===i.type?d=this.clickHistory:"dblclick"===i.type&&(d=this.dblclickHistory);const{relatedElement:u,targetElement:p}=this.extractElements(i),g={type:t,offsetX:o,offsetY:r,pageX:a,pageY:l,deltaX:c,deltaY:h,button:"button"in i?Number(i.button):0,pointerHistory:d,sourceEvent:i,relatedElement:u,targetElement:p};return this.debug("InteractionManager - builtEvent: ",g,this.getState()),g}};Pw.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};var Nw=Pw;function Fw(e){return null==e||!isNaN(e)&&e>=0&&e<=2}var Ow=class{constructor(e,t){this.interactionManager=e,this.chartUpdateMutex=t,this.defaultDuration=1e3,this.batch=new xw(1.5*this.defaultDuration),this.debug=hy.create(!0,"animation"),this.events=new tb,this.rafAvailable="undefined"!==typeof requestAnimationFrame,this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0}addListener(e,t){return this.events.on(e,t)}animate(e){const t=this.batch;try{t.checkOverlappingId(e.id)}catch(a){return void this.failsafeOnError(a)}let{id:i}=e;null==i&&(i=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);const s=this.isSkipped()||"none"===e.phase;s&&this.debug("AnimationManager - skipping animation");const{delay:n,duration:o}=e;if(!Fw(n))throw new Error(`Animation delay of ${n} is unsupported (${i})`);if(!Fw(o))throw new Error(`Animation duration of ${o} is unsupported (${i})`);const r=new Lg({...e,id:i,skip:s,autoplay:!!this.isPlaying&&e.autoplay,phase:e.phase,defaultDuration:this.defaultDuration});if(!this.forceTimeJump(r,this.defaultDuration))return this.batch.addAnimation(r),r}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(e){this.failsafeOnError(e)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");try{this.batch.pause()}catch(e){this.failsafeOnError(e)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(e){try{this.batch.stopByAnimationId(e)}catch(t){this.failsafeOnError(t)}}stopByAnimationGroupId(e){try{this.batch.stopByAnimationGroupId(e)}catch(t){this.failsafeOnError(t)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.skipAnimations=e}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:(new Error).stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(e){this.requestId=Xu().requestAnimationFrame(e)}forceTimeJump(e,t){return!1}requestAnimation(){if(!this.rafAvailable)return;if(!this.batch.isActive()||null!==this.requestId)return;let e;const t=async i=>{const s=async()=>{const t=i-(e??i);e=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:t}),this.interactionManager.pushState(2);try{this.batch.progress(t)}catch(s){this.failsafeOnError(s)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:t})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(s):await this.chartUpdateMutex.acquire(s),this.batch.isActive()?this.scheduleAnimationFrame(t):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(t)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Xd.error("Error during animation, skipping animations",e),t&&this.cancelAnimation()}startBatch(e){this.debug(`AnimationManager - startBatch() with skipAnimations=${e}.`),this.reset(),this.batch.destroy(),this.batch=new xw(1.5*this.defaultDuration),!0===e&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(e){this.batch.stoppedCbs.add(e)}destroy(){this.stop(),this.events.clear()}},Gw=class extends ab{legendItemClick(e,t,i,s){const n={type:"legend-item-click",series:e,itemId:t,enabled:i,legendItemName:s};this.listeners.dispatch("legend-item-click",n)}legendItemDoubleClick(e,t,i,s,n){const o={type:"legend-item-double-click",series:e,itemId:t,enabled:i,legendItemName:n,numVisibleItems:s};this.listeners.dispatch("legend-item-double-click",o)}axisHover(e,t){const i={type:"axis-hover",axisId:e,direction:t};this.listeners.dispatch("axis-hover",i)}},Bw=class e{constructor(e){this.defaultActions=[],this.disabledActions=new Set,this.hiddenActions=new Set,this.listeners=new rb;const{Default:t,ContextMenu:i}=lb;this.destroyFns=[e.listenAll("contextmenu",(e=>this.onContextMenu(e)),t|i)]}destroy(){this.destroyFns.forEach((e=>e()))}onContextMenu(t){"all"===e.toContextType(t.region)&&this.dispatchContext("all",t,{})}static toContextType(e){return"legend"===e||"series"===e?e:"all"}static check(e,t){return t.type===e}static checkCallback(e,t,i){return e===t}dispatchContext(e,t,i,s){const{sourceEvent:n}=t,o=s?.x??t.offsetX,r=s?.y??t.offsetY;n.stopPropagation(),this.listeners.dispatch("",Mw({type:e,x:o,y:r,context:i,sourceEvent:n}))}addListener(e){return this.listeners.addListener("",e)}filterActions(e){return this.defaultActions.filter((t=>t.id&&!this.hiddenActions.has(t.id)&&["all",e].includes(t.type)))}registerDefaultAction(e){const t=null!=e.id&&!this.defaultActions.some((t=>{let{id:i}=t;return i===e.id}));return t&&this.defaultActions.push(e),()=>{const i=t?this.defaultActions.findIndex((t=>{let{id:i}=t;return i===e.id})):-1;-1!==i&&this.defaultActions.splice(i,1)}}enableAction(e){this.disabledActions.delete(e)}disableAction(e){this.disabledActions.add(e)}showAction(e){this.hiddenActions.add(e)}hideAction(e){this.hiddenActions.delete(e)}isDisabled(e){return this.disabledActions.has(e)}},zw=class extends Map{constructor(e,t){super(),this.defaultValue=e,this.defaultState=t}set(e,t){return this.delete(e),"undefined"!==typeof t&&super.set(e,t),this}stateId(){return Array.from(this.keys()).pop()??this.defaultState}stateValue(){return Array.from(this.values()).pop()??this.defaultValue}},Hw=(e=>(e.Auto="auto",e.Default="default",e.Grab="grab",e.Grabbing="grabbing",e.Move="move",e.NotAllowed="not-allowed",e.Pointer="pointer",e.EWResize="ew-resize",e.NSResize="ns-resize",e.ZoomIn="zoom-in",e.ZoomOut="zoom-out",e))(Hw||{}),Vw=class{constructor(e){this.domManager=e,this.stateTracker=new zw("default")}updateCursor(e,t){this.stateTracker.set(e,t),this.domManager.updateCursor(this.stateTracker.stateValue())}getCursor(){return this.domManager.getCursor()}};function jw(e,t){return Math.sqrt(function(e,t){const i=e.screenX-t.screenX,s=e.screenY-t.screenY;return i*i+s*s}(e,t))}var Ww=class extends ab{constructor(e){super(),this.domManager=e,this.touchstart=e=>this.onTouchStart(e),this.touchmove=e=>this.onTouchMove(e),this.touchend=e=>this.onTouchEnd(e),this.touchcancel=e=>this.onTouchCancel(e),this.pinch={finger1:{identifier:NaN,screenX:NaN,screenY:NaN},finger2:{identifier:NaN,screenX:NaN,screenY:NaN},origin:{x:NaN,y:NaN},distance:NaN,status:0},this.domManager.addEventListener("touchstart",this.touchstart,{passive:!0}),this.domManager.addEventListener("touchmove",this.touchmove,{passive:!1}),this.domManager.addEventListener("touchend",this.touchend),this.domManager.addEventListener("touchcancel",this.touchcancel)}destroy(){this.domManager.removeEventListener("touchstart",this.touchstart),this.domManager.removeEventListener("touchmove",this.touchmove),this.domManager.removeEventListener("touchend",this.touchend),this.domManager.removeEventListener("touchcancel",this.touchcancel)}findPinchTouches(e){const{touches:t}=e,{finger1:i,finger2:s}=this.pinch;if(0!==this.pinch.status&&2===t.length){if(t[0].identifier===i.identifier&&t[1].identifier===s.identifier)return[t[0],t[1]];if(t[0].identifier===s.identifier&&t[1].identifier===i.identifier)return[t[1],t[0]]}}copyTouchData(e){const t=["identifier","screenX","screenY"];gg(t,this.pinch.finger1,e.touches[0]),gg(t,this.pinch.finger2,e.touches[1]),this.pinch.distance=jw(this.pinch.finger1,this.pinch.finger2)}dispatchPinchEvent(e,t,i){const{finger1:s,finger2:n,origin:o}=this.pinch;this.listeners.dispatch(e,Mw({sourceEvent:i,type:e,finger1:s,finger2:n,deltaDistance:t,origin:o}))}onTouchStart(e){this.stopPinchTracking(e);const{pinch:t}=this;2===e.touches.length&&(t.status=1,this.copyTouchData(e),t.origin.x=(e.touches[0].clientX+e.touches[1].clientX)/2,t.origin.y=(e.touches[0].clientY+e.touches[1].clientY)/2)}onTouchMove(e){const t=this.findPinchTouches(e);if(void 0!==t){const[i,s]=t,{pinch:n}=this,o=jw(i,s),r=o-n.distance;1===n.status?Math.abs(r)>1&&(n.status=2,this.copyTouchData(e),this.dispatchPinchEvent("pinch-start",0,e)):2===n.status?(n.distance=o,this.copyTouchData(e),this.dispatchPinchEvent("pinch-move",r,e)):Xd.error(`unexpected pinch.status: ${n.status}`)}}onTouchEnd(e){this.stopPinchTracking(e)}onTouchCancel(e){this.stopPinchTracking(e)}stopPinchTracking(e){const{pinch:t}=this;2===t.status&&this.dispatchPinchEvent("pinch-end",0,e),this.pinch.status=0}},Uw=class extends ab{constructor(){super(...arguments),this.highlightStates=new zw}updateHighlight(e,t){const{activeHighlight:i}=this;this.highlightStates.set(e,t),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,i)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:i,callerId:e})}getActiveHighlight(){return this.activeHighlight}isEqual(e,t){return e===t||null!=e&&null!=t&&e?.series===t?.series&&e?.itemId===t?.itemId&&e?.datum===t?.datum}},_w=class extends cb{constructor(e,t,i){super(),this.focusIndicator=e,this.interactionManager=t,this.previousInputDevice="keyboard";this.destroyFns.push(t.addListener("click",(()=>this.onClick()),41),t.addListener("hover",(()=>this.onMouse()),41),t.addListener("drag-start",(()=>this.onMouse()),41),t.addListener("blur",(e=>this.onBlur(e)),63),t.addListener("focus",(e=>this.onFocus(e)),63),t.addListener("keydown",(e=>this.onKeyDown(e)),63)),this.focusIndicator.overrideFocusVisible("integrated"!==i&&void 0)}getState(){return this.interactionManager.getState()}destroy(){super.destroy()}onClick(){this.focusIndicator.overrideFocusVisible(!1),this.previousInputDevice="mouse"}onMouse(){this.previousInputDevice="mouse"}onBlur(e){this.focusIndicator.overrideFocusVisible(void 0),this.dispatch("blur",0,e)}onFocus(e){this.dispatch("focus",0,e)}onKeyDown(e){const t=this.getState(),{key:i,code:s,altKey:n,shiftKey:o,metaKey:r,ctrlKey:a}=e.sourceEvent;if(a||r){if("y"===i||"z"===i&&o)return this.focusIndicator.overrideFocusVisible("keyboard"===this.previousInputDevice),this.dispatch("redo",0,e);if("z"===i)return this.focusIndicator.overrideFocusVisible("keyboard"===this.previousInputDevice),this.dispatch("undo",0,e)}if(9&t)this.focusIndicator.overrideFocusVisible(!1);else{switch(i){case"+":return this.dispatch("nav-zoom",1,e);case"-":return this.dispatch("nav-zoom",-1,e)}if(!(n||o||r||a))switch(this.focusIndicator.overrideFocusVisible(!0),s){case"ArrowDown":return this.dispatch("nav-vert",1,e);case"ArrowUp":return this.dispatch("nav-vert",-1,e);case"ArrowLeft":return this.dispatch("nav-hori",-1,e);case"ArrowRight":return this.dispatch("nav-hori",1,e);case"ZoomIn":case"Add":return this.dispatch("nav-zoom",1,e);case"ZoomOut":case"Substract":return this.dispatch("nav-zoom",-1,e);case"Space":case"Enter":return this.dispatch("submit",0,e)}}}dispatch(e,t,i){const{previousInputDevice:s}=this;Dw(this.listeners,{type:e,delta:t,sourceEvent:i,previousInputDevice:s});"keydown"!==i.type||["redo","undo","nav-zoom"].includes(e)||(this.previousInputDevice="keyboard")}},Yw=(e=>(e.NAVIGATOR="navigator",e.ROOT="root",e.SERIES="series",e.HORIZONTAL_AXES="horizontal-axes",e.VERTICAL_AXES="vertical-axes",e))(Yw||{}),Kw=class{constructor(e,t){this.node=e,this.overrideId=t}get id(){return this.overrideId??this.node.id}get visible(){return this.node.visible}toCanvasBBox(){return iy.toCanvas(this.node)}fromCanvasPoint(e,t){return iy.fromCanvasPoint(this.node,e,t)}},Zw=class extends Kw{constructor(e,t,i){super(e,i),this.bboxFn=t}toCanvasBBox(){return this.bboxFn()}},$w=class extends rb{};function Qw(e,t,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32;return e?.addListener(i,(e=>{t.getState()&n&&s(e)}))??(()=>{})}function Xw(e){return e instanceof Ip?new Kw(e):e instanceof Kw?e:new Kw(e.node,e.id)}function qw(e){const{type:t,sourceEvent:i}=e,{id:s,className:n,classList:o,ariaHidden:r}=i?.target??{};if(!(o instanceof DOMTokenList))return"leave";const a=Iw;return o.contains("ag-charts-annotations__axis-button-icon")&&!a.includes(t)||"ag-charts-series-area"===n||"ag-charts-canvas-proxy"===n||"ag-charts-proxy-elem"===n&&!s?.toString().startsWith("ag-charts-legend-item-")||i?.target instanceof HTMLCanvasElement?"none":function(e){if(null==e||!(e instanceof HTMLElement))return;let t=e;for(;null!=t&&!t?.classList.contains("ag-charts-wrapper");){if(t.classList.contains("ag-chart-tooltip"))return t;t=t.parentElement}}(i.target)&&"true"!==r?"wait":"leave"}var Jw=class{constructor(e){this.interactionManager=e,this.debug=hy.create(!0,"region"),this.isDragging=!1,this.leftCanvas=!1,this.regions=new Map,this.destroyFns=[],this.allRegionsListeners=new $w,this.destroyFns.push(...Rw.map((t=>e.addListener(t,this.processPointerEvent.bind(this),63))))}destroy(){this.destroyFns.forEach((e=>e())),this.current=void 0;for(const e of this.regions.values())e.listeners.destroy();this.regions.clear()}addRegion(e){if(this.regions.has(e))throw new Error(`AG Charts - Region: ${e} already exists`);for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];const n={properties:{name:e,bboxproviders:i.map(Xw)},listeners:new $w};return this.regions.set(e,n),this.makeObserver(n)}updateRegion(e){const t=this.regions.get(e);if(!t)throw new Error("AG Charts - unknown region: "+e);for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];t.properties.bboxproviders=s.map(Xw)}getRegion(e){return this.makeObserver(this.regions.get(e))}listenAll(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;return Qw(this.allRegionsListeners,this.interactionManager,e,t,i)}makeObserver(e){const{interactionManager:t}=this;return new class{addListener(i,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;return Qw(e?.listeners,t,i,s,n)}}}checkPointerHistory(e,t){for(const i of t.pointerHistory){const{region:t}=this.pickRegion(i.offsetX,i.offsetY)??{};if(e.properties.name!==t?.properties.name)return!1}return!0}dispatch(e,t){if(null==e)return;const i=e.region.properties.bboxproviders[0];let s=0,n=0;if("offsetX"in t&&"offsetY"in t)({x:s,y:n}=i.fromCanvasPoint(t.offsetX,t.offsetY));else{const e=i.toCanvasBBox();s=e.width/2,n=e.height/2}const o=Mw({...t,region:e.region.properties.name,bboxProviderId:e.bboxProvider?.id,regionOffsetX:s,regionOffsetY:n});this.debug("Dispatching region event: ",o),this.allRegionsListeners.dispatch(o.type,o),e.region.listeners.dispatch(o.type,o)}handleDragging(e){const{current:t}=this;switch(e.type){case"drag-start":this.isDragging=!0,this.leftCanvas=!1;break;case"leave":return this.leftCanvas=!0,this.isDragging;case"enter":return this.leftCanvas=!1,this.isDragging;case"drag":if(this.isDragging)return this.dispatch(t,e),!0;break;case"drag-end":if(this.isDragging)return this.isDragging=!1,this.dispatch(t,e),this.leftCanvas&&this.dispatch(t,{...e,type:"leave"}),!0}return!1}processPointerEvent(e){if(this.handleDragging(e))return;const{current:t}=this;let i;switch(qw(e)){case"wait":return;case"none":i=this.pickRegion(e.offsetX,e.offsetY);break;case"leave":i=void 0}const s=i?.region;void 0!==t&&s?.properties.name!==t.region.properties.name&&this.dispatch(t,{...e,type:"leave"}),void 0!==s&&s.properties.name!==t?.region.properties.name&&this.dispatch(i,{...e,type:"enter"}),void 0!==s&&this.checkPointerHistory(s,e)&&this.dispatch(i,e),this.current=i}pickRegion(e,t){let i,s,n=1/0;for(const o of this.regions.values())for(const r of o.properties.bboxproviders){if(!1===r.visible)continue;const a=r.toCanvasBBox(),l=a.width*a.height;l<n&&a.containsPoint(e,t)&&(n=l,i=o,s=r)}return i?{region:i,bboxProvider:s}:void 0}},eS=["start","center","end"],tS=["seriesType","annotations","annotationOptions","ranges","zoom"],iS={seriesType:0,annotations:1,annotationOptions:2,ranges:3,zoom:4},sS=(e=>(e.Top="top",e.Left="left",e.Right="right",e.Bottom="bottom",e.Floating="floating",e.FloatingTop="floating-top",e.FloatingBottom="floating-bottom",e))(sS||{}),nS=Object.values(sS);function oS(e){return["floating-top","floating-bottom"].includes(e)}var rS=class extends ab{static isGroup(e,t){return t.group===e}static isChildElement(e,t){for(const i of nS)if(e.isManagedChildDOMElement(t,"canvas-overlay",`toolbar-${i}`))return!0;return!1}pressButton(e,t,i,s,n){this.listeners.dispatch("button-pressed",{type:"button-pressed",group:e,id:t,value:i,rect:s,sourceEvent:n})}cancel(e){this.listeners.dispatch("cancelled",{type:"cancelled",group:e})}toggleButton(e,t,i){const{active:s=!1,enabled:n=!0,visible:o=!0,checked:r=!1}=i;this.listeners.dispatch("button-toggled",{type:"button-toggled",group:e,id:t,active:s,enabled:n,visible:o,checked:r})}updateButton(e,t,i){this.listeners.dispatch("button-updated",{type:"button-updated",group:e,id:t,...i})}toggleGroup(e,t,i){const{active:s,visible:n}=i;this.listeners.dispatch("group-toggled",{type:"group-toggled",caller:e,group:t,active:s,visible:n})}updateGroup(e){this.listeners.dispatch("group-updated",{type:"group-updated",group:e})}groupMoved(e){this.listeners.dispatch("group-moved",{type:"group-moved",group:e})}changeFloatingAnchor(e,t){this.listeners.dispatch("floating-anchor-changed",{type:"floating-anchor-changed",group:e,anchor:t})}buttonMoved(e,t,i,s){this.listeners.dispatch("button-moved",{type:"button-moved",group:e,value:t,rect:i,groupRect:s})}proxyGroupOptions(e,t,i){this.listeners.dispatch("proxy-group-options",{type:"proxy-group-options",caller:e,group:t,options:i})}},aS=class{constructor(e,t){this.domManager=e,this.tooltip=t,this.stateTracker=new zw,this.suppressState=new zw(!1),this.appliedState=null,t.setup(e),e.addListener("hidden",(()=>this.tooltip.toggle(!1)))}updateTooltip(e,t,i){this.tooltip.enabled&&(i??(i=this.stateTracker.get(e)?.content),this.stateTracker.set(e,{content:i,meta:t}),this.applyStates())}removeTooltip(e){this.tooltip.enabled&&(this.stateTracker.delete(e),this.applyStates())}suppressTooltip(e){this.suppressState.set(e,!0)}unsuppressTooltip(e){this.suppressState.delete(e)}getTooltipMeta(e){return this.stateTracker.get(e)?.meta}destroy(){this.domManager.removeStyles("tooltip")}applyStates(){const e=this.stateTracker.stateId(),t=e?this.stateTracker.get(e):null;if(this.suppressState.stateValue()||null==t?.meta||null==t?.content)return this.appliedState=null,void this.tooltip.toggle(!1);const i=this.domManager.getBoundingClientRect(),s="extended"===this.tooltip.bounds?this.domManager.getOverlayClientRect():i;if(this.appliedState?.content===t?.content){const e=this.tooltip.isVisible();this.tooltip.show(s,i,t?.meta,null,e)}else this.tooltip.show(s,i,t?.meta,t?.content);this.appliedState=t}static makeTooltipMeta(e,t){const{offsetX:i,offsetY:s}=e,n=t.series.properties.tooltip,o={offsetX:i,offsetY:s,enableInteraction:n.interaction?.enabled??!1,lastPointerEvent:{type:e.type,offsetX:i,offsetY:s},showArrow:n.showArrow,position:{type:n.position.type,xOffset:n.position.xOffset,yOffset:n.position.yOffset}},r=t.yBar?.upperPoint??t.midPoint??t.series.datumMidPoint?.(t);if(("node"===n.position.type||"sparkline"===n.position.type)&&r){const{x:e,y:i}=r,s=iy.toCanvasPoint(t.series.contentGroup,e,i);return{...o,offsetX:Math.round(s.x),offsetY:Math.round(s.y)}}return o}},lS=class extends ab{constructor(){super(...arguments),this.mementoOriginatorKey="zoom",this.axisZoomManagers=new Map,this.state=new zw(void 0,"initial"),this.rejectCallbacks=new Map}addLayoutListeners(e){this.destroyFns.push(e.addListener("layout:complete",(e=>{this.axes=e.axes})))}createMemento(){const e=this.getDefinedZoom();return{rangeX:this.getRangeDirection(e,"x"),rangeY:this.getRangeDirection(e,"y"),ratioX:{start:e.x.min,end:e.x.max},ratioY:{start:e.y.min,end:e.y.max}}}guardMemento(e){return Zp(e)&&(null!=e.ratioX||null!=e.ratioY||null!=e.rangeX||null!=e.rangeY)}restoreMemento(e,t,i){this.listeners.dispatch("restore-zoom",{...i,type:"restore-zoom"})}updateAxes(e){const t=new Map(e.map((e=>[e.id,this.axisZoomManagers.get(e.id)])));this.axisZoomManagers.clear();for(const i of e)this.axisZoomManagers.set(i.id,t.get(i.id)??new cS(i));this.state.size>0&&e.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}updateZoom(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3?arguments[3]:void 0;if(s&&this.rejectCallbacks.set(e,s),0!==this.axisZoomManagers.size)this.state.set(e,t),this.axisZoomManagers.forEach((i=>{i.updateZoom(e,t?.[i.getDirection()])})),this.applyChanges(e);else{const n=this.state.stateId();"initial"===n||n===e||i?(this.state.set(e,t),n!==e&&this.rejectCallbacks.get(n)?.(e)):s?.(n)}}updateAxisZoom(e,t,i){this.axisZoomManagers.get(t)?.updateZoom(e,i),this.applyChanges(e)}fireZoomPanStartEvent(e){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:e})}getZoom(){let e,t;if(this.axisZoomManagers.forEach((i=>{"x"===i.getDirection()?e??(e=i.getZoom()):"y"===i.getDirection()&&(t??(t=i.getZoom()))})),e||t)return{x:e,y:t}}getAxisZoom(e){return this.axisZoomManagers.get(e)?.getZoom()??{min:0,max:1}}getAxisZooms(){const e={};for(const[t,i]of this.axisZoomManagers.entries())e[t]={direction:i.getDirection(),zoom:i.getZoom()};return e}applyChanges(e){if(!Array.from(this.axisZoomManagers.values(),(e=>e.applyChanges())).some(Boolean))return;const t={};for(const[i,s]of this.axisZoomManagers.entries())t[i]=s.getZoom();this.listeners.dispatch("zoom-change",{type:"zoom-change",...this.getZoom(),axes:t,callerId:e})}getRangeDirection(e,t){for(const i of this.axes??[]){if(i.direction!==t)continue;const s=i.scale.getDomain?.(),n=i.scale.convert?.(s?.at(0)),o=i.scale.convert?.(s?.at(-1));if(!Jp(n)||!Jp(o))return;let r,a;if(n<=o){const s=o-n;r=i.scale.invert?.(0),a=i.scale.invert?.(n+s*e[t].max)}else{const s=n-o;r=i.scale.invert?.(n-s*e[t].min),a=i.scale.invert?.(0)}return{start:r,end:a}}}getDefinedZoom(){const e=this.getZoom();return{x:{min:e?.x?.min??0,max:e?.x?.max??1},y:{min:e?.y?.min??0,max:e?.y?.max??1}}}},cS=class{constructor(e){this.axis=e;const[t=0,i=1]=e.visibleRange;this.state=new zw({min:t,max:i}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(e,t){this.state.set(e,t)}getZoom(){return Jy(this.state.stateValue())}applyChanges(){const e=this.currentZoom;return this.currentZoom=this.state.stateValue(),e.min!==this.currentZoom.min||e.max!==this.currentZoom.max}},hS=class{constructor(){this.groups={}}registerSeries(e){let{internalId:t,seriesGrouping:i,visible:s,type:n}=e;var o;i&&((o=this.groups)[n]??(o[n]={}),this.groups[n][t]={grouping:i,visible:s})}updateSeries(e){let{internalId:t,seriesGrouping:i,visible:s,type:n}=e;if(!i)return;const o=this.groups[n]?.[t];o&&(o.grouping=i,o.visible=s)}deregisterSeries(e){let{internalId:t,type:i}=e;this.groups[i]&&delete this.groups[i][t],this.groups[i]&&0===Object.keys(this.groups[i]).length&&delete this.groups[i]}getVisiblePeerGroupIndex(e){let{type:t,seriesGrouping:i,visible:s}=e;if(!i)return{visibleGroupCount:s?1:0,visibleSameStackCount:s?1:0,index:0};const n=new Set,o=new Set;for(const a of Object.values(this.groups[t]??{}))a.visible&&(n.add(a.grouping.groupIndex),a.grouping.groupIndex===i.groupIndex&&o.add(a.grouping.stackIndex));const r=Array.from(n);return r.sort(((e,t)=>e-t)),{visibleGroupCount:r.length,visibleSameStackCount:o.size,index:r.indexOf(i.groupIndex)}}},dS=(e=>(e[e.FULL=0]="FULL",e[e.UPDATE_DATA=1]="UPDATE_DATA",e[e.PROCESS_DATA=2]="PROCESS_DATA",e[e.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",e[e.SERIES_UPDATE=4]="SERIES_UPDATE",e[e.PRE_SCENE_RENDER=5]="PRE_SCENE_RENDER",e[e.SCENE_RENDER=6]="SCENE_RENDER",e[e.NONE=7]="NONE",e))(dS||{}),uS=class extends rb{constructor(e){super(),this.updateCallback=e}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.updateCallback(e,t)}dispatchUpdateComplete(e){this.dispatch("update-complete",{type:"update-complete",minRect:e?.minRect,minVisibleRect:e?.minVisibleRect})}dispatchPreDomUpdate(){this.dispatch("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(e){this.dispatch("pre-scene-render",{type:"pre-scene-render",...e})}},pS=class{constructor(e,t){this.callbackCache=new Cw,this.chartEventManager=new Gw,this.highlightManager=new Uw,this.layoutManager=new sb,this.localeManager=new nw,this.seriesStateManager=new hS,this.stateManager=new mb,this.toolbarManager=new rS,this.zoomManager=new lS;const{scene:i,root:s,syncManager:n,container:o,updateCallback:r,updateMutex:a,pixelRatio:l,styleContainer:c}=t;this.chartService=e,this.syncManager=n,this.domManager=new Ob(o,c);const h=this.domManager.addChild("canvas","scene-canvas",i?.canvas.element);this.scene=i??new vw({pixelRatio:l,canvasElement:h}),this.scene.setRoot(s),this.axisManager=new ww(s),this.annotationManager=new bw(e.annotationRoot),this.cursorManager=new Vw(this.domManager),this.interactionManager=new Nw(e.keyboard,this.domManager),this.focusIndicator=new Xb(this.domManager),this.keyNavManager=new _w(this.focusIndicator,this.interactionManager,e.mode),this.regionManager=new Jw(this.interactionManager),this.contextMenuRegistry=new Bw(this.regionManager),this.gestureDetector=new Ww(this.domManager),this.updateService=new uS(r),this.proxyInteractionService=new tw(this.localeManager,this.domManager),this.historyManager=new pb(this.keyNavManager),this.animationManager=new Ow(this.interactionManager,a),this.dataService=new Sw(this.animationManager),this.tooltipManager=new aS(this.domManager,e.tooltip),this.zoomManager.addLayoutListeners(this.layoutManager)}destroy(){this.animationManager.destroy(),this.highlightManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.chartEventManager.destroy(),this.contextMenuRegistry.destroy(),this.domManager.destroy(),this.highlightManager.destroy(),this.interactionManager.destroy(),this.keyNavManager.destroy(),this.focusIndicator.destroy(),this.proxyInteractionService.destroy(),this.regionManager.destroy(),this.syncManager.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy()}},gS=class extends om{constructor(){super(...arguments),this.range="tooltip"}};Wd([lm(ef(["tooltip","node"],"a range"))],gS.prototype,"range",2);var mS=class e{constructor(){this.domain=new Set}static is(t){return t instanceof e}extend(e){this.domain.add(e)}getDomain(){return Array.from(this.domain)}},fS=class e{constructor(){this.domain=[1/0,-1/0]}static is(t){return t instanceof e}static extendDomain(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1/0,-1/0];for(const i of e)"number"===typeof i&&(t[0]>i&&(t[0]=i),t[1]<i&&(t[1]=i));return t}extend(e){this.domain[0]>e&&(this.domain[0]=e),this.domain[1]<e&&(this.domain[1]=e)}getDomain(){return[...this.domain]}};function yS(e){return e.map((e=>Zp(e)?JSON.stringify(e):e)).join("-")}function vS(e){const t=1e4;return Number.isInteger(e)?e:Math.abs(e)>t?Math.trunc(e):Math.round(e*t)/t}function CS(e){if(null==e)return[];const[t,i]=e.map(Number);return 0===t&&0===i?[0,1]:Jp(t)&&Jp(i)?[t,i]:[]}function bS(e,t){return t?.get(e.id)??0}var wS=Symbol("invalid");function SS(e){const t=[];let i,s=0;const n=/((?:(?:^|\.)\s*\w+|\[\s*(?:'(?:[^']|\\')*'|"(?:[^"]|\\")*"|-?\d+)\s*\])\s*)/g;for(;i=n.exec(e);){if(i.index!==s)return;s=i.index+i[0].length;const e=i[1].trim();if(e.startsWith("."))t.push(e.slice(1).trim());else if(e.startsWith("[")){const i=e.slice(1,-1).trim();i.startsWith("'")?t.push(i.slice(1,-1).replace(/\\'/g,"'")):i.startsWith('"')?t.push(i.slice(1,-1).replace(/\\"/g,'"')):t.push(i)}else t.push(e)}if(s===e.length)return t}function xS(e){return t=>{let i=t;for(const s of e)i=i[s];return i}}var MS=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"standalone";this.opts=e,this.mode=t,this.debug=hy.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[];let i=!0;for(const n of e.props){if("key"===n.type&&!i)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===n.type&&i&&(i=!1)}const s=e=>{let{matchGroupIds:t=[]}=e;for(const i of t)if(this.values.every((e=>e.groupId!==i)))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${i}).`)};for(const n of e.props)switch(n.type){case"key":this.keys.push({...n,index:this.keys.length,missing:new Map});break;case"value":if(null==n.property)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(n)}`);this.values.push({...n,index:this.values.length,missing:new Map});break;case"aggregate":s(n),this.aggregates.push({...n,index:this.aggregates.length});break;case"group-value-processor":s(n),this.groupProcessors.push({...n,index:this.groupProcessors.length});break;case"property-value-processor":this.propertyProcessors.push({...n,index:this.propertyProcessors.length});break;case"reducer":this.reducers.push({...n,index:this.reducers.length});break;case"processor":this.processors.push({...n,index:this.processors.length})}}resolveProcessedDataDefById(e,t){const i=this.scopeCache.get(e.id)?.get(t);if(!i)throw new Error(`AG Charts - didn't find property definition for [${t}, ${e.id}]`);return{index:i.index,def:i}}resolveProcessedDataIndexById(e,t){return this.resolveProcessedDataDefById(e,t).index}resolveProcessedDataDefsByIds(e,t){return t.map((t=>[t,this.resolveProcessedDataDefById(e,t)]))}resolveProcessedDataDefsValues(e,t){let{keys:i,values:s}=t;const n={};for(const[o,{index:r,def:a}]of e){const e="key"===a.type?i:s;n[o]=e[r]}return n}getDomain(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",s=arguments.length>3?arguments[3]:void 0;const n=this.getDomainsByType(i,s);return n?.[this.resolveProcessedDataIndexById(e,t)]??[]}getDomainsByType(e,t){switch(e){case"key":return t.domain.keys;case"value":return t.domain.values;case"aggregate":return t.domain.aggValues;case"group-value-processor":return t.domain.groups;default:return null}}processData(e,t){const{opts:{groupByKeys:i,groupByFn:s},aggregates:n,groupProcessors:o,reducers:r,processors:a,propertyProcessors:l}=this,c=performance.now();if(i&&0===this.keys.length)return;let h=this.extractData(e,t);if(i?h=this.groupData(h):s&&(h=this.groupData(h,s(h))),o.length>0&&this.postProcessGroups(h),n.length>0&&this.aggregateData(h),l.length>0&&this.postProcessProperties(h),r.length>0&&this.reduceData(h),a.length>0&&this.postProcessData(h),e.length>0)for(const u of Wu(this.keys,this.values))for(const[t,i]of u.missing)if(i>=e.length){const e=null==t?"":` for ${t}`;Xd.warnOnce(`the key '${u.property}' was not found in any data element${e}.`)}const d=performance.now();h.time=d-c,this.debug.check()&&function(e){const t=(e,t)=>{t.length>0&&(Xd.log(`DataModel.processData() - ${e}`),Xd.table(t))};if(Xd.log("DataModel.processData() - processedData",e),t("Key Domains",e.domain.keys),t("Group Domains",e.domain.groups??[]),t("Value Domains",e.domain.values),t("Aggregate Domains",e.domain.aggValues??[]),"grouped"===e.type){t("Values",e.data.reduce(((e,t)=>{const i=t.keys??[],s=t.aggValues??[],n=t.keys.map((()=>{})),o=s?.map((()=>{}));return e.push(...t.values.map(((e,t)=>[...0===t?i:n,...e??[],...0==t?s:o]))),e}),[]))}else{t("Values",e.data.reduce(((e,t)=>{const i=t.aggValues??[];return e.push([...t.keys,...t.values,...i]),e}),[]))}}(h),this.scopeCache.clear();for(const u of Wu(this.keys,this.values,this.aggregates))if(u.idsMap)for(const[e,t]of u.idsMap)for(const i of t)if(this.scopeCache.has(e)){if(this.scopeCache.get(e)?.has(i))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(e).set(i,u)}else this.scopeCache.set(e,new Map([[i,u]]));return h}valueGroupIdxLookup(e){let{matchGroupIds:t}=e;const i=[];for(const[s,n]of this.values.entries())(!t||n.groupId&&t.includes(n.groupId))&&i.push(s);return i}valueIdxLookup(e,t){const i=null==e||0===e.length,s="string"===typeof t?t:t.id,n=this.values.findIndex((t=>(null==t.scopes||i&&!t.scopes.length||t.scopes.some((t=>e?.includes(t))))&&(t.property===s||t.id===s||(t=>{if(t.idsMap)for(const[i,n]of t.idsMap)if(e?.includes(i)&&n.has(s))return!0;return!1})(t))));if(-1===n)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(t)} in scope(s) ${JSON.stringify(e)}`);return n}extractData(e,t){const{dataDomain:i,processValue:s,scopes:n,allScopesHaveSameDefs:o}=this.initDataDomainProcessor(),r=new Map(t?.map((e=>[e.id,e]))),{keys:a,values:l}=this,c=new Array(e.length);let h=0,d=0;for(const[p,g]of e.entries()){const e={},t=n.size>0?new Set(n):void 0,i=new Array(a.length);let u,m=0;for(const n of a){if(u=s(n,g,u),u===wS)break;i&&(i[m++]=u)}if(u===wS)continue;const f=l.length>0?new Array(l.length):void 0;let y;for(const[a,c]of l.entries()){for(const t of c.scopes??n){const i=r.get(t);if(y=s(c,i?.data[p]??g,y,t),y!==wS&&f){if(null!=i&&!1!==c.includeProperty){const i=c.includeProperty&&null!=c.id?c.id:c.property;e[t]??(e[t]={}),e[t][i]=y}f[a]=y}}if(y===wS){if(o)break;for(const e of c.scopes??n)t?.delete(e);if(0===t?.size)break}}if(y===wS&&o)continue;if(0===t?.size)continue;const v={datum:{...g,...e},keys:i,values:f};!o&&t&&t.size<n.size&&(d++,v.validScopes=new Set(t)),c[h++]=v}c.length=h;const u=e=>{const t=i.get(e),s=t.getDomain();return fS.is(t)&&s[0]>s[1]?[]:s};return{type:"ungrouped",input:{count:e.length},data:c,domain:{keys:a.map(u),values:l.map(u)},defs:{allScopesHaveSameDefs:o,keys:a,values:l},partialValidDataCount:d,time:0}}groupData(e,t){const i=new Map;for(const r of e.data){const{keys:e,values:s,datum:n,validScopes:o}=r,a=t?.(r)??e,l=yS(a);if(i.has(l)){const e=i.get(l);if(e.values.push(s),e.datum.push(n),null!=o&&null!=e.validScopes)for(const t of e.validScopes)o.has(t)||e.validScopes.delete(t)}else i.set(l,{keys:a,values:[s],datum:[n],validScopes:o})}const s=new Array(i.size),n=new Array(i.size);let o=0;for(const{keys:r,values:a,datum:l,validScopes:c}of i.values())0!==c?.size&&(n[o]=r,s[o++]={keys:r,values:a,datum:l,validScopes:c});return{...e,type:"grouped",data:s,domain:{...e.domain,groups:n}}}aggregateData(e){const t="ungrouped"===e.type;e.domain.aggValues=[];for(const[i,s]of this.aggregates.entries()){const n=this.valueGroupIdxLookup(s),o=[1/0,-1/0];for(const r of e.data){if(r.aggValues??(r.aggValues=new Array(this.aggregates.length)),r.validScopes)continue;const e=t?[r.values]:r.values;let a=s.groupAggregateFunction?.()??[1/0,-1/0];for(const t of e){const e=n.map((e=>t[e])),i=s.aggregateFunction(e,r.keys);i&&(a=s.groupAggregateFunction?.(i,a)??fS.extendDomain(i,a))}const l=(s.finalFunction?.(a)??a).map((e=>vS(e)));r.aggValues[i]=l,fS.extendDomain(l,o)}e.domain.aggValues.push(o)}}postProcessGroups(e){const{groupProcessors:t}=this,i=new Set,s=new Map,n=new Map,o=new Map;for(const a of t){const e=this.valueGroupIdxLookup(a);n.set(a,e),o.set(a,a.adjust());for(const t of e){const e="category"===this.values[t].valueType;i.add(t),s.set(t,e?new mS:new fS)}}const r=e=>{for(const t of i)s.get(t)?.extend(e[t])};for(const a of e.data){for(const i of t){if(a.validScopes)continue;const t=n.get(i)??[],s=o.get(i)?.();if(s)if("grouped"===e.type)for(const e of a.values)e&&s(e,t);else a.values&&s(a.values,t)}if("grouped"===e.type)for(const e of a.values)r(e);else r(a.values)}for(const[a,l]of s)e.domain.values[a]=l.getDomain()}postProcessProperties(e){for(const{adjust:t,property:i,scopes:s}of this.propertyProcessors)t()(e,this.valueIdxLookup(s,i))}reduceData(e){e.reduced??(e.reduced={});for(const t of this.reducers){const i=t.reducer();let s=t.initialValue;for(const n of e.data)n.validScopes&&!t.scopes?.some((e=>n.validScopes?.has(e)))||(s=i(s,n));e.reduced[t.property]=s}}postProcessData(e){e.reduced??(e.reduced={});for(const t of this.processors)e.reduced[t.property]=t.calculate(e)}initDataDomainProcessor(){const{keys:e,values:t}=this,i=new Set;for(const l of t)if(l.scopes)for(const e of l.scopes)i.add(e);const s=new Map,n=new Map;let o=!0;const r=()=>{for(const n of Wu(e,t))"category"===n.valueType?s.set(n,new mS):(s.set(n,new fS),o&&(o=(n.scopes??[]).length===i.size))};r();const a=this.buildAccessors(Wu(e,t));return{dataDomain:s,processValue:(e,t,i,o)=>{let l,c;if(a.has(e.property)){try{c=a.get(e.property)(t)}catch(h){}l=null!=c}else l=e.property in t,c=l?t[e.property]:e.missingValue;if(null!=e.forceValue){c=l&&up(c)?-1*e.forceValue:e.forceValue,l=!0}if(!l&&!("missingValue"in e)){const t=e.missing.get(o)??0;e.missing.set(o,t+1)}if(s.has(e)||r(),l&&!1===e.validation?.(c,t)){if(!("invalidValue"in e))return"integrated"!==this.mode&&Xd.warnOnce(`invalid value of type [${typeof c}] for [${e.scopes} / ${e.id}] ignored:`,`[${c}]`),wS;c=e.invalidValue}return e.processor&&(n.has(e)||n.set(e,e.processor()),c=n.get(e)?.(c,i===wS?void 0:i)),s.get(e)?.extend(c),c},initDataDomain:r,scopes:i,allScopesHaveSameDefs:o}}buildAccessors(e){const t=new Map;if("integrated"===this.mode)return t;for(const i of e){if(!(i.property.includes(".")||i.property.includes("[")))continue;const e=SS(i.property);if(null==e){Xd.warnOnce("Invalid property path [%s]",i.property);continue}const s=xS(e);t.set(i.property,s)}return t}};var DS=class e{constructor(e){this.mode=e,this.debug=hy.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(e,t,i){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise(((s,n)=>{this.requested.push({id:e,opts:i,data:t,resolve:s,reject:n})}))}execute(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const e=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",e);const t=this.mergeRequested(e);this.debug("DataController.execute() - merged",t),this.debug.check()&&(Xu().processedData=[]);const i=this.requested.map((e=>{let{id:t}=e;return t})),s=this.hasMultipleDataSources(e);for(const{opts:o,data:r,resolves:a,rejects:l,ids:c}of t)try{const t=new MS(o,this.mode),n=t.processData(r,e);this.debug.check()&&Xu("processedData").push(n),0===n?.partialValidDataCount?a.forEach(((e,o)=>e({dataModel:t,processedData:this.processScopedData(c[o],n,i,s)}))):n?this.splitResult(t,n,c,a):l.forEach((e=>e(new Error("AG Charts - no processed data generated"))))}catch(n){l.forEach((e=>e(n)))}}hasMultipleDataSources(e){if(e.length){const[{data:t},...i]=e;return i.some((e=>t!==e.data))}return!1}processScopedData(e,t,i,s){const n=t=>{if(Array.isArray(t))return t.map(n);const o=s?{...t,...t[e]}:t;for(const e of i)delete o[e];return o},o=t=>Array.isArray(t)?t.map(o):t?.[e]??t;return{...t,data:t.data.map((e=>({...e,datum:n(e.datum),values:s?e.values?.map(o):e.values})))}}validateRequests(e){const t=[];for(const[i,s]of e.entries())i>0&&s.data.length!==e[0].data.length&&!1===s.opts.groupByData?s.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):t.push(s);return t}mergeRequested(t){const i=[];for(const s of t){const t=i.find(e.groupMatch(s));t?t.push(s):i.push([s])}return i.map(e.mergeRequests)}splitResult(e,t,i,s){for(let n=0;n<i.length;n++){const o=i[n];(0,s[n])({dataModel:e,processedData:{...t,data:t.data.filter((e=>{let{validScopes:t}=e;return t?.has(o)??!0}))}})}}static groupMatch(e){let{data:t,opts:i}=e;function s(e){return e.filter((e=>"key"===e.type)).map((e=>e.property)).join(";")}return e=>{let[n]=e;return(!1===i.groupByData||n.data===t)&&n.opts.groupByKeys===i.groupByKeys&&n.opts.groupByFn===i.groupByFn&&s(n.opts.props)===s(i.props)}}static mergeRequests(t){return t.reduce(((t,i)=>{let{id:s,data:n,resolve:o,reject:r,opts:{props:a,...l}}=i;t.ids.push(s),t.rejects.push(r),t.resolves.push(o),t.data??(t.data=n),t.opts??(t.opts={...l,props:[]});for(const c of a){const i={...c,scopes:[s]};e.createIdsMap(s,i);const n=t.opts.props.find((t=>t.type===i.type&&e.deepEqual(t,i)));n?(n.scopes??(n.scopes=[]),n.scopes.push(...i.scopes??[]),"key"!==n.type&&"value"!==n.type||!i.idsMap?.size||e.mergeIdsMap(i.idsMap,n.idsMap)):t.opts.props.push(i)}return t}),{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(e,t){for(const[i,s]of e){const e=t.get(i);if(null!=e)for(const t of s)e.add(t);else t.set(i,new Set(s))}}static createIdsMap(e,t){null!=t.id&&(t.idsMap??(t.idsMap=new Map),t.idsMap.has(e)?t.idsMap.get(e).add(t.id):t.idsMap.set(e,new Set([t.id])))}static deepEqual(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){if(t.constructor!==i.constructor)return!1;let s,n;if(Array.isArray(t)){if(n=t.length,n!==i.length)return!1;for(s=n-1;s>=0;s--)if(!e.deepEqual(t[s],i[s]))return!1;return!0}const o=Object.keys(t);if(n=o.length,n!==Object.keys(i).length)return!1;for(s=n-1;s>=0;s--){const n=o[s];if(!e.skipKeys.has(n)&&(!Object.hasOwn(i,n)||!e.deepEqual(t[n],i[n])))return!1}return!0}return!1}};DS.skipKeys=new Set(["id","idsMap","type","scopes"]);var IS=DS,RS=new class{constructor(){this.axesMap=new Map,this.hidden=new Set,this.themeTemplates=new Map}register(e,t){this.axesMap.set(e,t.moduleFactory),t.themeTemplate&&this.setThemeTemplate(e,t.themeTemplate),t.hidden&&this.hidden.add(e)}create(e,t){const i=this.axesMap.get(e);if(i)return i(t);throw new Error(`AG Charts - unknown axis type: ${e}`)}has(e){return this.axesMap.has(e)}keys(){return this.axesMap.keys()}publicKeys(){return[...this.keys()].filter((e=>!this.hidden.has(e)))}setThemeTemplate(e,t){return this.themeTemplates.set(e,t),this}getThemeTemplate(e){return this.themeTemplates.get(e)}},ES=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"foreground",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"chartToolbar",chartTypes:["cartesian"]},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"],optionsInnerKey:"miniChart"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"cone-funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"sankey"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"pyramid"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"linear-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"radial-gauge"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function AS(e){return ES.find((t=>"series"===t.type&&t.identifier===e))?.chartTypes}function LS(e){if(!function(e){return"enterprise"===e.packageType}(e))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const t=ES.find((t=>t.type===e.type&&t.optionsKey===e.optionsKey&&t.identifier===e.identifier&&e.chartTypes.every((e=>t.chartTypes.includes(e)))));return t&&(t.useCount??(t.useCount=0),t.useCount++),null!=t}var kS=new class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(e,t){let{optionsKey:i,moduleFactory:s,themeTemplate:n}=t;this.legendMap.set(e,{optionsKey:i,moduleFactory:s}),this.themeTemplates.set(i,n)}create(e,t){const i=this.legendMap.get(e)?.moduleFactory;if(i)return i(t);throw new Error(`AG Charts - unknown legend type: ${e}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce(((e,t)=>{let[i,s]=t;return e[i]=s.optionsKey,e}),{})}},TS=class extends Map{get(e){return super.get(e)??"unknown"}isCartesian(e){return"cartesian"===this.get(e)}isPolar(e){return"polar"===this.get(e)}isHierarchy(e){return"hierarchy"===this.get(e)}isTopology(e){return"topology"===this.get(e)}isFlowProportion(e){return"flow-proportion"===this.get(e)}isStandalone(e){return"standalone"===this.get(e)}isGauge(e){return"gauge"===this.get(e)}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter((e=>this.isCartesian(e)))}get polarTypes(){return this.seriesTypes.filter((e=>this.isPolar(e)))}get hierarchyTypes(){return this.seriesTypes.filter((e=>this.isHierarchy(e)))}get topologyTypes(){return this.seriesTypes.filter((e=>this.isTopology(e)))}get flowProportionTypes(){return this.seriesTypes.filter((e=>this.isFlowProportion(e)))}get standaloneTypes(){return this.seriesTypes.filter((e=>this.isStandalone(e)))}get gaugeTypes(){return this.seriesTypes.filter((e=>this.isGauge(e)))}},PS=class extends Map{set(e,t){return super.set(e,ag(t,this.get(e)))}},NS=new TS,FS=new TS,OS=new PS,GS=new class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(e,t){let{chartTypes:[i],moduleFactory:s,tooltipDefaults:n,defaultAxes:o,themeTemplate:r,paletteFactory:a,solo:l,stackable:c,groupable:h,stackedByDefault:d,hidden:u}=t;this.setThemeTemplate(e,r),this.seriesMap.set(e,{moduleFactory:s,tooltipDefaults:n,defaultAxes:o,paletteFactory:a,solo:l,stackable:c,groupable:h,stackedByDefault:d}),NS.set(e,i),u||FS.set(e,i)}create(e,t){const i=this.seriesMap.get(e)?.moduleFactory;if(i)return i(t);throw new Error(`AG Charts - unknown series type: ${e}`)}cloneDefaultAxes(e,t){const i=this.seriesMap.get(e)?.defaultAxes;if(null==i)return null;return{axes:Jy("function"===typeof i?i(t):i)}}setThemeTemplate(e,t){const i=this.themeTemplates.get(e);this.themeTemplates.set(e,ag(t,i))}getThemeTemplate(e){return this.themeTemplates.get(e)}getPaletteFactory(e){return this.seriesMap.get(e)?.paletteFactory}getTooltipDefauls(e){return this.seriesMap.get(e)?.tooltipDefaults}isSolo(e){return this.seriesMap.get(e)?.solo??!1}isGroupable(e){return this.seriesMap.get(e)?.groupable??!1}isStackable(e){return this.seriesMap.get(e)?.stackable??!1}isStackedByDefault(e){return this.seriesMap.get(e)?.stackedByDefault??!1}},BS=class e extends ab{constructor(e){super(),this.chart=e}subscribe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP,i=this.get(t);return i||(i=new Set,e.chartsGroups.set(t,i)),i.add(this.chart),this}unsubscribe(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;return this.get(t)?.delete(this.chart),this}getChart(){return this.chart}getGroup(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;const i=this.get(t);return i?Array.from(i):[]}getGroupSiblings(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_GROUP;return this.getGroup(t).filter((e=>e!==this.chart))}get(t){return e.chartsGroups.get(t)}};BS.chartsGroups=new Map,BS.DEFAULT_GROUP=Symbol("sync-group-default");var zS=BS,HS=class extends om{constructor(){super(...arguments),this.enabled=!1}};Wd([lm(gm)],HS.prototype,"enabled",2),Wd([lm(ym)],HS.prototype,"tabIndex",2);var VS=["top","right","bottom","left"];var jS=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"];function WS(e){const{series:t}=e;if(t)return t[0]?.type??"line"}function US(e){const t=WS(e);return null!=t&&(NS.isCartesian(t)||function(e){const t=AS(e)?.find((e=>"cartesian"===e));return"cartesian"===t}(t))}function _S(e){const t=WS(e);return null!=t&&("polar"===t?(Xd.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):NS.isPolar(t)||function(e){const t=AS(e)?.find((e=>"polar"===e));return"polar"===t}(t))}function YS(e){const t=WS(e);return null!=t&&("hierarchy"===t?(Xd.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):NS.isHierarchy(t)||function(e){const t=AS(e)?.find((e=>"hierarchy"===e));return"hierarchy"===t}(t))}function KS(e){const t=WS(e);return null!=t&&("topology"===t?(Xd.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):NS.isTopology(t)||function(e){const t=AS(e)?.find((e=>"topology"===e));return"topology"===t}(t))}function ZS(e){const t=WS(e);return null!=t&&("flow-proportion"===t?(Xd.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):NS.isFlowProportion(t)||function(e){const t=AS(e)?.find((e=>"flow-proportion"===e));return"flow-proportion"===t}(t))}function $S(e){const t=WS(e);return null!=t&&("standalone"===t?(Xd.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):NS.isStandalone(t)||function(e){const t=AS(e)?.find((e=>"standalone"===e));return"standalone"===t}(t))}function QS(e){const t=WS(e);return null!=t&&("gauge"===t?(Xd.warnOnce(`type '${t}' is deprecated, use a series type instead`),!0):NS.isGauge(t)||function(e){const t=AS(e)?.find((e=>"gauge"===e));return"gauge"===t}(t))}var XS=class extends cf{applyOptions(e){for(const t of this.moduleMap.values())t.module.optionsKey in e&&am(t.moduleInstance)&&t.moduleInstance.set(e[t.module.optionsKey])}*legends(){for(const{module:e,moduleInstance:t}of this.moduleMap.values())"legend"===e.type&&(yield{legendType:e.identifier,legend:t})}},qS="ag-chart-overlay",JS="ag-chart-dark-overlay",ex=class extends om{constructor(e,t){super(),this.className=e,this.defaultMessageId=t}getText(e){return e.t(this.text??this.defaultMessageId)}getElement(e,t,i){if(this.content?.remove(),this.focusBox=i,this.renderer){const e=this.renderer();if(e instanceof HTMLElement)this.content=e;else{const t=qu("div");t.innerHTML=e,this.content=t.firstElementChild}}else{const i=qu("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",font:"12px Verdana, sans-serif"});i.innerText=this.getText(t),this.content=i,e?.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(e){i.style.opacity=String(e)},onStop(){i.style.opacity="1"}})}return this.content}removeElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>this.content?.remove(),t=arguments.length>1?arguments[1]:void 0;if(this.content){if(t){const{content:i}=this;t.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(e){i.style.opacity=String(e)},onStop(){e?.()}})}else e?.();this.content=void 0,this.focusBox=void 0}}};Wd([lm(fm,{optional:!0})],ex.prototype,"text",2),Wd([lm(mm,{optional:!0})],ex.prototype,"renderer",2);var tx=class extends om{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new ex("ag-chart-loading-overlay","overlayLoadingData"),this.noData=new ex("ag-chart-no-data-overlay","overlayNoData"),this.noVisibleSeries=new ex("ag-chart-no-visible-series","overlayNoVisibleSeries")}getFocusInfo(e){for(const t of[this.loading,this.noData,this.noVisibleSeries])if(void 0!==t.focusBox)return{text:t.getText(e),rect:t.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement()}};Wd([lm(gm)],tx.prototype,"darkTheme",2),Wd([lm(um)],tx.prototype,"loading",2),Wd([lm(um)],tx.prototype,"noData",2),Wd([lm(um)],tx.prototype,"noVisibleSeries",2);var ix=(e=>(e[e.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",e[e.NEAREST_NODE=1]="NEAREST_NODE",e[e.AXIS_ALIGNED=2]="AXIS_ALIGNED",e))(ix||{}),sx=class{constructor(e,t,i,s){let{datum:n}=i;this.type=e,this.event=t,this.datum=n,this.seriesId=s.id}},nx=class{constructor(e,t,i){this.series=e,this.seriesGrouping=t,this.oldGrouping=i,this.type="groupingChanged"}},ox=class extends qC{constructor(e){super(),this.destroyFns=[],this.seriesGrouping=void 0,this.NodeEvent=sx,this.internalId=Vu(this),this.rootGroup=new ny({name:"seriesRoot",isVirtual:!0}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new cf,this._declarationOrder=-1,this.seriesListeners=new rb,this._pickNodeCache=new Gy;const{moduleCtx:t,pickModes:i,directionKeys:s={},directionNames:n={},contentGroupVirtual:o=!0,canHaveAxes:r=!1}=e;this.ctx=t,this.directionKeys=s,this.directionNames=n,this.canHaveAxes=r,this.contentGroup=this.rootGroup.appendChild(new ay({name:`${this.internalId}-content`,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new ay({name:`${this.internalId}-highlight`,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new ny({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new ny({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new ay({name:`${this.internalId}-series-labels`,zIndex:14})),this.annotationGroup=new ny({name:`${this.id}-annotation`,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}get pickModeAxis(){return"main"}get id(){return this.properties?.id??this.internalId}get type(){return this.constructor.type??""}get data(){return this._data??this._chartData}set visible(e){this.properties.visible=e,this.visibleMaybeChanged()}get visible(){return this.properties.visible}get hasData(){return null!=this.data&&this.data.length>0}get tooltipEnabled(){return this.properties.tooltip?.enabled??!1}onDataChange(){this.nodeDataRefresh=!0,this._pickNodeCache.clear()}setOptionsData(e){this._data=e,this.onDataChange()}setChartData(e){this._chartData=e,this.data===e&&this.onDataChange()}onSeriesGroupingChange(e,t){const{internalId:i,type:s,visible:n}=this;e&&this.ctx.seriesStateManager.deregisterSeries(this),t&&this.ctx.seriesStateManager.registerSeries({internalId:i,type:s,visible:n,seriesGrouping:t}),this.fireEvent(new nx(this,t,e))}getBandScalePadding(){return{inner:1,outer:0}}getGroupZIndexSubOrder(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;switch(e){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":t+=15e3;break;case"annotation":i+=15e3}return[()=>this._declarationOrder+i,t]}addListener(e,t){return this.seriesListeners.addListener(e,t)}dispatch(e,t){this.seriesListeners.dispatch(e,t)}addChartEventListeners(){}destroy(){this.destroyFns.forEach((e=>e())),this.destroyFns=[],this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(e,t){const i=this.resolveKeyDirection(e),s=t?.[i],n=[];if(!s)return n;const o=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const s of t)Array.isArray(s)?o(...s):"object"===typeof s?o(...Object.values(s)):n.push(s)};return o(...s.map((e=>this.properties[e]))),n}getKeys(e){return this.getDirectionValues(e,this.directionKeys)}getKeyProperties(e){return this.directionKeys[this.resolveKeyDirection(e)]??[]}getNames(e){return this.getDirectionValues(e,this.directionNames)}resolveKeyDirection(e){return e}getDomain(e){const t=this.getSeriesDomain(e),i=this.moduleMap.mapModules((t=>t.getDomain(e)));return t.concat(i.flat())}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){const{dimOpacity:e=1,enabled:t=!0}=this.properties.highlightStyle.series;if(!t||1===e)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;default:return e}}getStrokeWidth(e){const{strokeWidth:t,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||void 0===t)return e;switch(this.isItemIdHighlighted()){case 1:return t;case 0:case 2:return e}}isItemIdHighlighted(){const e=this.ctx.highlightManager?.getActiveHighlight()?.series;return null==e?0:e!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules((e=>e.getTooltipParams())).reduce(((e,t)=>Object.assign(e,t)),{})}pickNode(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{pickModes:s,pickModeAxis:n,visible:o,rootGroup:r}=this;if(!o||!r.visible)return;if("highlight"===t&&!this.properties.highlight.enabled)return;if("highlight-tooltip"===t&&!this.properties.highlight.enabled)return;let a=1/0;if("tooltip"===t||"highlight-tooltip"===t){const{tooltip:e}=this.properties;a="number"===typeof e.range?e.range:1/0,i||(i="exact"===e.range)}else if("event"===t||"context-menu"===t){const{nodeClickRange:e}=this.properties;a="number"===typeof e?e:1/0,i||(i="exact"===e)}const l=s.filter((e=>!i||0===e)),{x:c,y:h}=e,d=JSON.stringify({x:c,y:h,maxDistance:a,selectedPickModes:l});if(this._pickNodeCache.has(d))return this._pickNodeCache.get(d);for(const u of l){let t;switch(u){case 0:t=this.pickNodeExactShape(e);break;case 1:t=this.pickNodeClosestDatum(e);break;case 2:t=null!=u?this.pickNodeMainAxisFirst(e,"main-category"===n):void 0}if(t&&t.distance<=a)return this._pickNodeCache.set(d,{pickMode:u,match:t.datum,distance:t.distance})}return this._pickNodeCache.set(d,void 0)}pickNodeExactShape(e){const t=this.contentGroup.pickNode(e.x,e.y);if(t&&!0!==t.datum.missing)return{datum:t.datum,distance:0}}pickNodeClosestDatum(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(e,t){const i=Ku(e.x,e.y,t);if(void 0!==i.nearest&&!0!==i.nearest.datum.missing)return{datum:i.nearest.datum,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(e,t){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(e,t){this.fireEvent(new this.NodeEvent("nodeClick",e,t,this))}fireNodeDoubleClickEvent(e,t){this.fireEvent(new this.NodeEvent("nodeDoubleClick",e,t,this))}createNodeContextMenuActionEvent(e,t){return new this.NodeEvent("nodeContextMenuAction",e,t,this)}toggleSeriesItem(e,t){this.visible=t,this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.dispatch("visibility-changed",{itemId:e,enabled:t})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return{...this.ctx,series:this}}getLabelText(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:String;return e.formatter?this.ctx.callbackCache.call(e.formatter,{seriesId:this.id,...t})??i(t.value):i(t.value)}getMarkerStyle(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getStyle();const s=ag({size:t.datum.point?.size??0},i);if(e.itemStyler){return ag(this.ctx.callbackCache.call(e.itemStyler,{seriesId:this.id,...s,...t,datum:t.datum.datum}),s)}return s}updateMarkerStyle(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.getStyle(),{applyTranslation:n=!0,selected:o=!0}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{point:r}=i.datum,a=this.getMarkerStyle(t,i,s),l=this.visible&&a.size>0&&r&&!isNaN(r.x)&&!isNaN(r.y);if(n?e.setProperties({visible:l,...a,translationX:r?.x,translationY:r?.y}):e.setProperties({visible:l,...a}),o||(e.fillOpacity*=.25,e.strokeOpacity*=.125),"function"===typeof t.shape&&!e.dirtyPath){e.path.clear(!0),e.updatePath(),e.checkPathDirty();const t=e.getBBox();if(void 0!==r&&t.isFinite()){const e=t.computeCenter(),[i,s]=["x","y"].map((t=>(a.strokeWidth??0)+Math.abs(e[t]-r[t]))),n=Math.max(t.width+i,t.height+s);r.focusSize=n}}}getMinRects(e,t){}get nodeDataDependencies(){return this._nodeDataDependencies??{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(e){const{width:t,height:i}=e??{width:NaN,height:NaN},s=e?{seriesRectWidth:t,seriesRectHeight:i}:void 0,n=null!=qy(this.nodeDataDependencies,s);return n&&(this._nodeDataDependencies=s,this.markNodeDataDirty()),n}pickFocus(e){}};function rx(e,t){!function(e,t){const{bounds:i,showFocusBox:s}=t;s&&e?.updateBounds(i)}(e,t);const{x:i,y:s}=function(e){if(null!=e)return e instanceof bp?e.computeCenter():iy.toCanvas(e).computeCenter()}(t.bounds)??{};if(void 0!==i&&void 0!==s)return{type:"keyboard",offsetX:i,offsetY:s}}function ax(e){let{defs:t,values:i,xAxis:s,yAxis:n}=e;if(!s||!n)throw new Error("Axes must be defined");const o={};for(const[r,{def:a}]of t)if(Object.hasOwn(i,r)){const{scale:e}="key"===a.type?s:n;o[r]=Math.round(e.convert(i[r]))}return o}function lx(e,t,i,s){const n=[...e].reverse();let o;for(const r of n){if(!r.visible||!r.rootGroup.visible)continue;const{match:e,distance:n}=r.pickNode(t,i,s)??{};if(e&&null!=n&&((!o||o.distance>n)&&(o={series:r,distance:n,datum:e}),0===n))break}return o}ox.highlightedZIndex=1e12,Wd([lv({changeValue:function(e,t){this.onSeriesGroupingChange(t,e)}})],ox.prototype,"seriesGrouping",2);var cx=class{constructor(e,t){this.element=e,this.id=t,e.id=t,e.style.display="none",fv(e.parentElement,"aria-labelledby",t)}layoutComplete(e){this.element.parentElement.style.width=`${e.chart.width}px`,this.element.parentElement.style.height=`${e.chart.height}px`}set text(e){this.element.textContent=e}},hx=class extends ab{constructor(e){super(),this.chart=e,this.id=Vu(this),this.series=[],this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="mouse",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.hoverScheduler=eb(((e,t)=>Xu().requestAnimationFrame(e)),(()=>{(this.tooltip.lastHover||this.highlight.pendingHoverEvent)&&(this.chart.getUpdateType()<=4?this.hoverScheduler.schedule():(this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)))}));const t=e.ctx.regionManager.getRegion("series"),i=e.ctx.regionManager.getRegion("horizontal-axes"),s=e.ctx.regionManager.getRegion("vertical-axes"),n=e.ctx.domManager.addChild("series-area","series-area-aria-label");this.ariaLabel=new cx(n,`${this.id}-aria-label`),this.destroyFns.push((()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label")),t.addListener("contextmenu",(e=>this.onContextMenu(e)),63),t.addListener("drag",(e=>this.onHoverLikeEvent(e)),41),t.addListener("hover",(e=>this.onHover(e)),41),t.addListener("leave",(()=>this.onLeave()),41),i.addListener("hover",(e=>this.onHover(e)),41),i.addListener("leave",(()=>this.onLeave())),s.addListener("hover",(e=>this.onHover(e)),41),s.addListener("leave",(()=>this.onLeave())),e.ctx.animationManager.addListener("animation-start",(()=>this.clearAll())),e.ctx.domManager.addListener("resize",(()=>this.clearAll())),e.ctx.highlightManager.addListener("highlight-change",(e=>this.changeHighlightDatum(e))),e.ctx.keyNavManager.addListener("blur",(()=>this.onBlur())),e.ctx.keyNavManager.addListener("focus",(e=>this.onFocus(e)),34),e.ctx.keyNavManager.addListener("nav-hori",(e=>this.onNavHori(e)),34),e.ctx.keyNavManager.addListener("nav-vert",(e=>this.onNavVert(e)),34),e.ctx.keyNavManager.addListener("submit",(e=>this.onSubmit(e)),34),e.ctx.layoutManager.addListener("layout:complete",(e=>this.layoutComplete(e))),e.ctx.regionManager.listenAll("click",(e=>this.onClick(e))),e.ctx.regionManager.listenAll("dblclick",(e=>this.onClick(e))),e.ctx.updateService.addListener("pre-scene-render",(()=>this.preSceneRender())),e.ctx.zoomManager.addListener("zoom-change",(()=>this.clearAll())),e.ctx.zoomManager.addListener("zoom-pan-start",(()=>this.clearAll())))}dataChanged(){var e;(e=this.highlight).stashedHoverEvent??(e.stashedHoverEvent=this.highlight.appliedHoverEvent),this.chart.ctx.tooltipManager.removeTooltip(this.id),this.chart.ctx.focusIndicator.updateBounds(void 0),this.clearHighlight()}preSceneRender(){this.refreshFocus(),null!=this.highlight.stashedHoverEvent&&(this.highlight.pendingHoverEvent=this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0)),null!=this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}update(e,t){this.chart.ctx.updateService.update(e,t)}seriesChanged(e){this.focus.sortedSeries=[...e].sort(((e,t)=>{let i=e.properties.focusPriority??1/0,s=t.properties.focusPriority??1/0;return i===s&&([i,s]=[e._declarationOrder,t._declarationOrder]),i<s?-1:i>s?1:0})),this.series=e}layoutComplete(e){this.seriesRect=e.series.rect,this.hoverRect=e.series.paddedRect,this.ariaLabel.layoutComplete(e)}onContextMenu(e){const{Default:t,ContextMenu:i}=lb;let s,n;if(this.chart.ctx.focusIndicator.isFocusVisible())s=this.chart.ctx.highlightManager.getActiveHighlight(),s&&this.seriesRect&&s.midPoint&&(n=iy.toCanvasPoint(s.series.contentGroup,s.midPoint.x,s.midPoint.y));else if(this.chart.ctx.interactionManager.getState()&(t|i)){const t=lx(this.series,{x:e.regionOffsetX,y:e.regionOffsetY},"context-menu");t&&(this.chart.ctx.highlightManager.updateHighlight(this.id),s=t.datum)}this.clearAll(),this.chart.ctx.contextMenuRegistry.dispatchContext("series",e,{pickedNode:s},n)}onLeave(){this.chart.ctx.cursorManager.updateCursor(this.id),this.chart.ctx.focusIndicator.isFocusVisible()||this.clearAll()}onHover(e){this.hoverDevice="mouse",this.onHoverLikeEvent(e)}onHoverLikeEvent(e){if(ng(e,"drag")&&(this.tooltip.lastHover=e),this.highlight.pendingHoverEvent=e,this.hoverScheduler.schedule(),32===this.chart.ctx.interactionManager.getState()){const{regionOffsetX:t,regionOffsetY:i}=e,s=lx(this.series,{x:t,y:i},"event");s?.series.hasEventListener("nodeClick")||s?.series.hasEventListener("nodeDoubleClick")?this.chart.ctx.cursorManager.updateCursor(this.id,"pointer"):this.chart.ctx.cursorManager.updateCursor(this.id)}}onClick(e){if(this.hoverDevice="mouse",this.onHoverLikeEvent(e),this.seriesRect?.containsPoint(e.offsetX,e.offsetY)&&this.checkSeriesNodeClick(e))return this.update(4),void e.preventDefault();const t={type:"click"===e.type?"click":"doubleClick",event:e.sourceEvent};this.chart.fireEvent(t)}onFocus(e){this.hoverDevice=this.chart.ctx.focusIndicator.isFocusVisible()?"keyboard":"mouse",this.handleFocus(0,0),e.preventDefault()}onBlur(){this.hoverDevice="mouse",this.clearAll()}onNavVert(e){this.hoverDevice="keyboard",this.focus.seriesIndex+=e.delta,this.handleFocus(e.delta,0),e.preventDefault()}onNavHori(e){this.hoverDevice="keyboard",this.focus.datumIndex+=e.delta,this.handleFocus(0,e.delta),e.preventDefault()}onSubmit(e){const{series:t,datum:i}=this.focus,s=e.sourceEvent.sourceEvent;void 0!==t&&void 0!==i?t.fireNodeClickEvent(s,i):this.chart.fireEvent({type:"click",event:s}),e.preventDefault()}checkSeriesNodeClick(e){let t={x:e.regionOffsetX,y:e.regionOffsetY};"series"!==e.region&&(t=iy.fromCanvasPoint(this.chart.seriesRoot,e.offsetX,e.offsetY));const i=lx(this.series,t,"event");return null!=i&&("click"===e.type?(i.series.fireNodeClickEvent(e.sourceEvent,i.datum),!0):"dblclick"===e.type&&(e.preventZoomDblClick=0===i.distance,i.series.fireNodeDoubleClickEvent(e.sourceEvent,i.datum),!0))}refreshFocus(){this.chart.ctx.focusIndicator.isFocusVisible()&&this.handleSeriesFocus(0,0)}handleFocus(e,t){const i=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);null==i?this.handleSeriesFocus(e,t):this.chart.ctx.focusIndicator.updateBounds(i.rect)}handleSeriesFocus(e,t){if("hierarchy"===this.chart.chartType)return void this.handleHierarchySeriesFocus(e,t);const{focus:i,seriesRect:s}=this,n=i.sortedSeries.filter((e=>e.visible));if(0===n.length)return;i.seriesIndex=ap(0,i.seriesIndex,n.length-1),i.series=n[i.seriesIndex];const{datumIndex:o,seriesIndex:r}=i,a=i.series.pickFocus({datumIndex:o,datumIndexDelta:t,otherIndex:r,otherIndexDelta:e,seriesRect:s});this.updatePickedFocus(a)}handleHierarchySeriesFocus(e,t){this.focus.series=this.focus.sortedSeries[0];const{focus:{series:i,seriesIndex:s,datumIndex:n},seriesRect:o}=this;if(void 0===i)return;const r=i.pickFocus({datumIndex:n,datumIndexDelta:t,otherIndex:s,otherIndexDelta:e,seriesRect:o});this.updatePickedFocus(r)}updatePickedFocus(e){const{focus:t}=this;if(void 0===e||void 0===t.series)return;const{datum:i,datumIndex:s}=e;t.datumIndex=s,t.datum=i,this.chart.ctx.focusIndicator.isFocusVisible()&&this.chart.ctx.animationManager.reset();const n=rx(this.chart.ctx.focusIndicator,e);if(void 0!==n&&"keyboard"===this.hoverDevice){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;const e=t.series.getTooltipHtml(i),s=aS.makeTooltipMeta(n,i);this.chart.ctx.highlightManager.updateHighlight(this.id,i),this.chart.ctx.tooltipManager.updateTooltip(this.id,s,e),this.ariaLabel.text=this.getDatumAriaText(i,e)}}getDatumAriaText(e,t){const i=t.ariaLabel;return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:e.series.getDatumAriaText?.(e,i)??i})}clearHighlight(){this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id)}clearTooltip(){this.chart.ctx.tooltipManager.removeTooltip(this.id),this.tooltip.lastHover=void 0}clearAll(){this.clearHighlight(),this.clearTooltip(),this.chart.ctx.focusIndicator.updateBounds(void 0)}handleHoverHighlight(e){this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;const t=this.highlight.appliedHoverEvent;if(!t)return;const i=this.chart.ctx.interactionManager.getState();if(32!==i&&8!==i&&1!==i)return;const{offsetX:s,offsetY:n}=t;if(e?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(s,n))return void this.clearHighlight();let o={x:t.regionOffsetX,y:t.regionOffsetY};"series"!==t.region&&(o=iy.fromCanvasPoint(this.chart.seriesRoot,s,n));const{range:r}=this.chart.highlight,a="tooltip"===r?"highlight-tooltip":"highlight",l=lx(this.series,o,a);if(l)return this.chart.ctx.highlightManager.updateHighlight(this.id,l.datum),void(this.hoverDevice="mouse");this.chart.ctx.highlightManager.updateHighlight(this.id)}handleHoverTooltip(e,t){const i=this.chart.ctx.interactionManager.getState();if(32!==i&&8!==i&&1!==i)return;const{offsetX:s,offsetY:n,targetElement:o,regionOffsetX:r,regionOffsetY:a}=e;if(t?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(s,n))return void("mouse"==this.hoverDevice&&this.clearTooltip());if(o&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(o,"canvas-overlay",wv))return;let l={x:r,y:a};"series"!==e.region&&(l=iy.fromCanvasPoint(this.chart.seriesRoot,s,n));const c=lx(this.series,l,"tooltip");if(!c)return void("mouse"==this.hoverDevice&&this.clearTooltip());this.hoverDevice="mouse";const h=c.series.getTooltipHtml(c.datum);if(this.chart.tooltip.enabled&&c.series.tooltipEnabled&&null!=h){const t=aS.makeTooltipMeta(e,c.datum);this.chart.ctx.tooltipManager.updateTooltip(this.id,t,h)}}changeHighlightDatum(e){const t=new Set,{series:i,datum:s}=e.currentHighlight??{},{series:n,datum:o}=e.previousHighlight??{};n&&t.add(n),i&&t.add(i),n?.properties.cursor&&o&&this.chart.ctx.cursorManager.updateCursor(n.id),i?.properties.cursor&&"default"!==i?.properties.cursor&&s&&this.chart.ctx.cursorManager.updateCursor(i.id,i.properties.cursor);null==i||null==n?this.update(4):this.update(4,{seriesToUpdate:t})}},dx=class{constructor(e,t,i){this.seriesRoot=e,this.highlightRoot=t,this.annotationRoot=i,this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(e){this.expectedSeriesCount=e}requestGroup(e){var t,i;const{internalId:s,type:n,rootGroup:o,highlightGroup:r,annotationGroup:a,seriesGrouping:l}=e,{groupIndex:c=s}=l??{};if(null!=this.series[s])throw new Error(`AG Charts - series already has an allocated layer: ${this.series[s]}`);0===Object.keys(this.series).length&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal"),(t=this.groups)[n]??(t[n]={});const h=this.lookupIdx(c),d=(i=this.groups[n])[h]??(i[h]={type:n,id:h,seriesIds:[],group:this.seriesRoot.appendChild(new Lv({name:`${n}-content`,zIndex:4,zIndexSubOrder:e.getGroupZIndexSubOrder("data")})),highlight:this.highlightRoot.appendChild(new ny({name:`${n}-highlight`,zIndex:4,zIndexSubOrder:e.getGroupZIndexSubOrder("highlight")})),annotation:this.annotationRoot.appendChild(new ny({name:`${n}-annotation`,zIndex:4,zIndexSubOrder:e.getGroupZIndexSubOrder("annotation")}))});return this.series[s]={layerState:d,seriesConfig:e},d.seriesIds.push(s),d.group.appendChild(o),d.highlight.appendChild(r),d.annotation.appendChild(a),d.group}changeGroup(e){const{internalId:t,seriesGrouping:i,type:s,rootGroup:n,highlightGroup:o,annotationGroup:r,oldGrouping:a}=e,{groupIndex:l=t}=i??{};this.groups[s]?.[l]?.seriesIds.includes(t)||(null!=this.series[t]&&this.releaseGroup({internalId:t,seriesGrouping:a,type:s,rootGroup:n,highlightGroup:o,annotationGroup:r}),this.requestGroup(e))}releaseGroup(e){const{internalId:t,rootGroup:i,highlightGroup:s,annotationGroup:n,type:o}=e;if(null==this.series[t])throw new Error(`AG Charts - series doesn't have an allocated layer: ${t}`);const r=this.series[t]?.layerState;if(r&&(r.seriesIds=r.seriesIds.filter((e=>e!==t)),r.group.removeChild(i),r.highlight.removeChild(s),r.annotation.removeChild(n)),0===r?.seriesIds.length)this.seriesRoot.removeChild(r.group),this.highlightRoot.removeChild(r.highlight),this.annotationRoot.removeChild(r.annotation),delete this.groups[r.type][r.id],delete this.groups[o][t];else if(r?.seriesIds.length>0){const e=this.series[r?.seriesIds?.[0]]?.seriesConfig;r.group.zIndexSubOrder=e?.getGroupZIndexSubOrder("data"),r.highlight.zIndexSubOrder=e?.getGroupZIndexSubOrder("highlight"),r.annotation.zIndexSubOrder=e?.getGroupZIndexSubOrder("annotation")}delete this.series[t]}lookupIdx(e){return"normal"===this.mode?e:"string"!==typeof e||(e=Number(e.split("-").at(-1)))?Math.floor(30*ap(0,e/this.expectedSeriesCount,1)):0}destroy(){for(const e of Object.values(this.groups))for(const t of Object.values(e))this.seriesRoot.removeChild(t.group),this.highlightRoot.removeChild(t.highlight),this.annotationRoot.removeChild(t.annotation);this.groups={},this.series={}}},ux=class{constructor(e,t,i,s){this.chart=e,this.dataService=t,this.updateService=i,this.zoomManager=s,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",(()=>this.onDataSourceChange())),this.dataService.addListener("data-load",(()=>this.onDataLoad())),this.dataService.addListener("data-error",(()=>this.onDataError())),this.updateService.addListener("update-complete",(()=>this.onUpdateComplete())),this.zoomManager.addListener("zoom-change",(()=>this.onZoomChange())))}destroy(){this.destroyFns.forEach((e=>e()))}onDataLoad(){this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){(this.dirtyZoom||this.dirtyDataSource)&&this.updateWindow().catch((e=>Xd.errorOnce(e)))}onZoomChange(){this.dirtyZoom=!0}async updateWindow(){if(!this.dataService.isLazy())return;const e=this.getValidAxis();let t,i=!0;if(e){const s=this.zoomManager.getAxisZoom(e.id);t=this.getAxisWindow(e,s),i=this.shouldRefresh(e,s)}this.dirtyZoom=!1,this.dirtyDataSource=!1,i&&this.dataService.load({windowStart:t?.min,windowEnd:t?.max})}getValidAxis(){return this.chart.axes.find((e=>"time"===e.type))}shouldRefresh(e,t){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const i=this.lastAxisZooms.get(e.id);return(!i||t.min!==i.min||t.max!==i.max)&&(this.lastAxisZooms.set(e.id,t),!0)}getAxisWindow(e,t){const i=e.scale.getDomain?.();if(!t||!i||0===i.length||isNaN(Number(i[0])))return;const s=Number(i[1])-Number(i[0]);return{min:new Date(Number(i[0])+s*t.min),max:new Date(Number(i[0])+s*t.max)}}},px=class{constructor(e,t,i,s,n,o,r){this.chartLike=e,this.overlays=t,this.dataService=i,this.layoutManager=s,this.localeManager=n,this.animationManager=o,this.domManager=r,this.destroyFns=[],this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(qS),this.destroyFns.push(this.layoutManager.addListener("layout:complete",(e=>this.onLayoutComplete(e))))}destroy(){this.destroyFns.forEach((e=>e())),this.domManager.removeStyles("overlays"),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete(e){let{series:{rect:t}}=e;const i=this.dataService.isLoading(),s=this.chartLike.series.some((e=>e.hasData)),n=this.chartLike.series.some((e=>e.visible));this.overlays.darkTheme?this.overlayElem.classList.add(JS):this.overlayElem.classList.remove(JS),this.overlayElem.style.left=`${t.x}px`,this.overlayElem.style.top=`${t.y}px`,this.overlayElem.style.width=`${t.width}px`,this.overlayElem.style.height=`${t.height}px`;const o=i,r=!i&&!s,a=s&&!n;o?this.showOverlay(this.overlays.loading,t):this.hideOverlay(this.overlays.loading),r?this.showOverlay(this.overlays.noData,t):this.hideOverlay(this.overlays.noData),a?this.showOverlay(this.overlays.noVisibleSeries,t):this.hideOverlay(this.overlays.noVisibleSeries);const l=o||r||a;fv(this.overlayElem,"aria-hidden",!l)}showOverlay(e,t){const i=e.getElement(this.animationManager,this.localeManager,t);this.overlayElem.appendChild(i)}hideOverlay(e){e.removeElement((()=>{this.overlayElem.innerText="\xa0"}),this.animationManager)}},gx=hy.create(!0,"opts"),mx=class extends om{constructor(){super(...arguments),this.padding=new JC(0)}};Wd([lm(gm,{optional:!0})],mx.prototype,"clip",2),Wd([lm(um)],mx.prototype,"padding",2);var fx=class e extends qC{constructor(e,t){var i,s;super(),i=this,this.id=Vu(this),this.seriesRoot=new ay({name:`${this.id}-series-root`}),this.highlightRoot=new kv({name:`${this.id}-highlight-root`,zIndex:5,deriveZIndexFromChildren:!0}),this.annotationRoot=new kv({name:`${this.id}-annotation-root`,zIndex:10}),this.debug=hy.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this.padding=new JC(20),this.seriesArea=new mx,this.keyboard=new HS,this.mode="standalone",this.chartCaptions=new ob,this.destroyed=!1,this._destroyFns=[],this.skipSync=!1,this.chartAnimationPhase="initial",this.modulesManager=new XS,this.processors=[],this.queuedUserOptions=[],this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateSkipAnimations=!1,this.performUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new XC,this.updateRequestors={},this.performUpdateTrigger=eb((function(e){return setTimeout(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}),(async e=>{let{count:t}=e;this.destroyed||this.updateMutex.acquire((async()=>{try{await this.performUpdate(t)}catch(e){Xd.error("update error",e)}})).catch((e=>Xd.errorOnce(e)))})),this._performUpdateSplits={},this.axes=[],this.series=[],this.onSeriesNodeClick=e=>{this.fireEvent({...e,type:"seriesNodeClick"})},this.onSeriesNodeDoubleClick=e=>{this.fireEvent({...e,type:"seriesNodeDoubleClick"})},this.seriesGroupingChanged=e=>{if(!(e instanceof nx))return;const{series:t,seriesGrouping:i,oldGrouping:s}=e;t.rootGroup.isRoot()||this.seriesLayerManager.changeGroup({internalId:t.internalId,type:t.type,rootGroup:t.rootGroup,highlightGroup:t.highlightGroup,annotationGroup:t.annotationGroup,getGroupZIndexSubOrder:e=>t.getGroupZIndexSubOrder(e),seriesGrouping:i,oldGrouping:s})},this.chartOptions=e;const n=t?.scene,o=t?.container??e.processedOptions.container??void 0,r=t?.styleContainer??e.specialOverrides.styleContainer,a=new ny({name:"root"}),l=new Lv({name:"titles",zIndex:14});a.visible=!1,a.append(l),a.append(this.seriesRoot),a.append(this.highlightRoot),a.append(this.annotationRoot),l.append(this.title.node),l.append(this.subtitle.node),l.append(this.footnote.node),this.tooltip=new Rv,this.seriesLayerManager=new dx(this.seriesRoot,this.highlightRoot,this.annotationRoot),this.mode=e.userOptions.mode??this.mode;const c=this.ctx=new pS(this,{scene:n,root:a,container:o,styleContainer:r,syncManager:new zS(this),pixelRatio:e.specialOverrides.overrideDevicePixelRatio,updateCallback:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return i.update(e,t)},updateMutex:this.updateMutex});this._destroyFns.push(c.domManager.addListener("resize",(()=>this.parentResize(c.domManager.containerSize)))),this.overlays=new tx,(s=this.overlays.loading).renderer??(s.renderer=()=>function(e,t){const{animationDuration:i}=Ig.add,s=qu("div",`${qS}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${i*t}ms linear 50ms both`}),n=qu("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),o=qu("p",{marginTop:"1em"});o.innerText=e;const r=qu("div",`${qS}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),a=qu("style");return a.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),s.replaceChildren(a,n,o,r),s}(this.overlays.loading.getText(c.localeManager),c.animationManager.defaultDuration)),this.processors=[new ux(this,c.dataService,c.updateService,c.zoomManager),new px(this,this.overlays,c.dataService,c.layoutManager,c.localeManager,c.animationManager,c.domManager)],this.highlight=new gS,this.container=o;const h=this.getModuleContext();c.regionManager.addRegion("series",this.seriesRoot,new Zw(this.seriesRoot,(()=>this.seriesRect??bp.zero)),this.ctx.axisManager.axisGridGroup),c.regionManager.addRegion("horizontal-axes"),c.regionManager.addRegion("vertical-axes"),c.regionManager.addRegion("root",a),c.domManager.setDataBoolean("animating",!1),this.seriesAreaManager=new hx(this.initSeriesAreaDependencies()),this._destroyFns.push(c.layoutManager.registerElement(0,(e=>{e.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(e)})),c.layoutManager.addListener("layout:complete",(e=>this.chartCaptions.positionAbsoluteCaptions(e))),c.dataService.addListener("data-load",(e=>{this.data=e.data})),this.title.registerInteraction(h,"beforebegin"),this.subtitle.registerInteraction(h,"beforebegin"),this.footnote.registerInteraction(h,"afterend"),c.interactionManager.addListener("page-left",(()=>this.destroy())),c.animationManager.addListener("animation-frame",(()=>{this.update(6)})),c.animationManager.addListener("animation-start",(()=>c.domManager.setDataBoolean("animating",!0))),c.animationManager.addListener("animation-stop",(()=>c.domManager.setDataBoolean("animating",!1))),c.zoomManager.addListener("zoom-change",(()=>{this.series.forEach((e=>e.animationState?.transition("updateData")));const e="initial"!==this.chartAnimationPhase;this.update(3,{forceNodeDataRefresh:!0,skipAnimations:e})}))),this.parentResize(c.domManager.containerSize)}static getInstance(t){return e.chartsInstances.get(t)}get canvasElement(){return this.ctx.scene.canvas.element}download(e,t){this.ctx.scene.download(e,t)}getCanvasDataURL(e){return this.ctx.scene.getDataURL(e)}toSVG(){return this.ctx.scene.toSVG()}getOptions(){return this.queuedUserOptions.at(-1)??this.chartOptions.userOptions}initSeriesAreaDependencies(){const{ctx:e,tooltip:t,highlight:i,overlays:s,seriesRoot:n}=this,o=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,chartType:o,ctx:e,tooltip:t,highlight:i,overlays:s,seriesRoot:n}}getModuleContext(){return this.ctx}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter((e=>e.enabled&&e.text)).map((e=>e.text)).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}resetAnimations(){this.chartAnimationPhase="initial";for(const e of this.series)e.resetAnimation(this.chartAnimationPhase);for(const e of this.axes)e.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}destroy(e){if(this.destroyed)return;const t=e?.keepTransferableResources;let i;return this.performUpdateType=7,this._destroyFns.forEach((e=>e())),this.processors.forEach((e=>e.destroy())),this.tooltip.destroy(this.ctx.domManager),this.overlays.destroy(),this.modulesManager.destroy(),t?(this.ctx.scene.strip(),i={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach((e=>e.destroy())),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),i}requestFactoryUpdate(e){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire((async()=>{this.destroyed||(await e(this),this.destroyed||this._pendingFactoryUpdatesCount--)})).catch((e=>Xd.errorOnce(e))))}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;const{forceNodeDataRefresh:i=!1,skipAnimations:s,seriesToUpdate:n=this.series,newAnimationBatch:o}=t??{};i&&this.series.forEach((e=>e.markNodeDataDirty()));for(const r of n)this.seriesToUpdate.add(r);if(s&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),o&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this.skipSync=t?.skipSync??!1,this.debug.check()){let t=(new Error).stack??"<unknown>";t=t.replace(/\([^)]*/g,""),this.updateRequestors[t]=e}e<this.performUpdateType&&(this.performUpdateType=e,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(t?.backOffMs))}async performUpdate(e){const{performUpdateType:t,extraDebugStats:i,_performUpdateSplits:s,ctx:n}=this,o=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),0===this.updateShortcutCount&&t<6&&(n.animationManager.startBatch(this._performUpdateSkipAnimations),n.animationManager.onBatchStop((()=>this.chartAnimationPhase="ready"))),this.debug("Chart.performUpdate() - start",dS[t]);let r=performance.now();s.start??(s.start=r);const a=e=>{s[e]??(s[e]=0),s[e]+=performance.now()-r,r=performance.now()};let l=!1;switch(t){case 0:this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case 1:await this.updateData(),a("\u2b07\ufe0f");case 2:await this.processData(),this.seriesAreaManager.dataChanged(),a("\ud83c\udfed");case 3:if(this.checkUpdateShortcut(3))break;if(!this.checkFirstAutoSize(o)){l=!0;break}await this.processLayout(),a("\u2316");case 4:{if(this.checkUpdateShortcut(4))break;const{seriesRect:e}=this;await Promise.all(o.map((t=>t.update({seriesRect:e})))),a("\ud83e\udd14"),this.updateAriaLabels()}case 5:if(this.checkUpdateShortcut(5))break;n.updateService.dispatchPreSceneRender(this.getMinRects()),a("\u2196");case 6:if(this.checkUpdateShortcut(6))break;n.animationManager.endBatch(),i.updateShortcutCount=this.updateShortcutCount,await n.scene.render({debugSplitTimes:s,extraDebugStats:i,seriesRect:this.seriesRect}),this.extraDebugStats={};for(const e in s)delete s[e];this.ctx.domManager.incrementDataCounter("sceneRenders");case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,n.animationManager.endBatch()}l||(n.updateService.dispatchUpdateComplete(this.getMinRects()),this.ctx.domManager.setDataBoolean("updatePending",!1));const c=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(c-s.start))/100,count:e,performUpdateType:dS[t]})}updateThemeClassName(){const{theme:e}=this.chartOptions.processedOptions,t="ag-charts-theme-",i=[`${t}default`,`${t}default-dark`];let s=i[0],n=!1;"string"===typeof e?(s=e.replace("ag-",t),n=e.includes("-dark")):"string"===typeof e?.baseTheme&&(s=e.baseTheme.replace("ag-",t),n=e.baseTheme.includes("-dark")),i.includes(s)||(s=n?i[1]:i[0]),this.ctx.domManager.setThemeClass(s)}updateDOM(){this.updateThemeClassName();const{enabled:e,tabIndex:t}=this.keyboard;this.ctx.domManager.setTabIndex(e?t??0:-1)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(e){return this.updateShortcutCount>3?(Xd.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=e&&(this.updateShortcutCount++,!0)}checkFirstAutoSize(e){if(null!=this.width&&null!=this.height);else if(!this._lastAutoSize){const t=this._performUpdateNoRenderCount++,i=(t+1)**2*40;if(t<8)return this.update(3,{seriesToUpdate:e,backOffMs:i}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",i),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}onAxisChange(e,t){null==t&&0===e.length||this.ctx.axisManager.updateAxes(t??[],e)}onSeriesChange(e,t){const i=t?.filter((t=>!e.includes(t)))??[];this.destroySeries(i),this.seriesLayerManager?.setSeriesCount(e.length);for(const s of e){if(t?.includes(s))continue;s.rootGroup.isRoot()&&this.seriesLayerManager.requestGroup(s);const e=this;s.chart={get mode(){return e.mode},get isMiniChart(){return!1},get seriesRect(){return e.seriesRect},placeLabels:t=>e.placeLabels(t)},s.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(s),s.addChartEventListeners()}this.seriesAreaManager?.seriesChanged(e)}destroySeries(e){e?.forEach((e=>{e.removeEventListener("nodeClick",this.onSeriesNodeClick),e.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),e.removeEventListener("groupingChanged",this.seriesGroupingChanged),e.destroy(),this.seriesLayerManager.releaseGroup(e),e.chart=void 0}))}addSeriesListeners(e){this.hasEventListener("seriesNodeClick")&&e.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&e.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),e.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(const e of this.axes)e.boundSeries=this.series.filter((t=>t.axes[e.direction]===e))}assignAxesToSeries(){const e=Wg(this.axes,(e=>e.direction));this.series.forEach((t=>{t.directions.forEach((i=>{const s=e[i];if(!s)return void Xd.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);const n=t.getKeys(i),o=s.find((e=>!e.keys.length||n.some((t=>e.keys.includes(t)))));o?t.axes[i]=o:Xd.warnOnce(`no matching axis for direction [${i}] and keys [${n}]; check series and axes configuration.`)}))}))}parentResize(e){if(null==e||null!=this.width&&null!=this.height)return;let{width:t,height:i}=e;if(t=Math.floor(t),i=Math.floor(i),0===t&&0===i)return;const[s=0,n=0]=this._lastAutoSize??[];s===t&&n===i||(this._lastAutoSize=[t,i],this.resize("SizeMonitor",{}))}resize(e,t){const{scene:i,animationManager:s}=this.ctx,{inWidth:n,inHeight:o,inMinWidth:r,inMinHeight:a}=t;this.ctx.domManager.setSizeOptions(r??this.minWidth,a??this.minHeight,n??this.width,o??this.height);const l=n??this.width??this._lastAutoSize?.[0],c=o??this.height??this._lastAutoSize?.[1];if(this.debug(`Chart.resize() from ${e}`,{width:l,height:c,stack:(new Error).stack}),null!=l&&null!=c&&Jp(l)&&Jp(c)&&i.resize(l,c)){s.reset();let e=!0;null!=this.width&&null!=this.height||!this._firstAutoSize||(e=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:e})}}async updateData(){this.series.forEach((e=>e.setChartData(this.data)));const e=this.modulesManager.mapModules((e=>e.updateData?.(this.data)));await Promise.all(e)}async processData(){this.series.some((e=>e.canHaveAxes))&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const e=new IS(this.mode),t=this.series.map((t=>t.processData(e))),i=this.modulesManager.mapModules((t=>t.processData?.(e)));e.execute(),await Promise.all([...t,...i]);for(const{legendType:s,legend:n}of this.modulesManager.legends())n.data=this.getLegendData(s,"integrated"!==this.mode)}placeLabels(e){const t=[],i=[];for(const h of this.series){if(!h.visible)continue;const e=h.getLabelData();s=e?.[0],null!=s&&"object"===typeof s.point&&"object"===typeof s.label&&(i.push(e),t.push(h))}var s;const{seriesRect:n}=this,{top:o,right:r,bottom:a,left:l}=this.seriesArea.padding,c=n&&i.length>0?function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const s=[];e=e.map((e=>e.slice().sort(((e,t)=>t.point.size-e.point.size))));for(let l=0;l<e.length;l++){const c=s[l]=[],h=e[l];if(h?.length&&h[0].label)for(let l=0,d=h.length;l<d;l++){const d=h[l],{point:u,label:p,marker:g}=d,{text:m,width:f,height:y}=p,v=.5*u.size;let C=0,b=0;if(v>0&&null!=d.placement){const e=Zy[d.placement];C=(.5*f+v+i)*e.x,b=(.5*y+v+i)*e.y}const w=u.x-.5*f+C-((g?.center.x??.5)-.5)*u.size,S=u.y-.5*y+b-((g?.center.y??.5)-.5)*u.size;(!t||(r=S,a=y,(o=w)+f<(n=t).x+n.width&&o>n.x&&r>n.y&&r+a<n.y+n.height))&&(e.some((e=>e.some((e=>Yy(e.point,e.marker?.center,w,S,f,y)))))||s.some((e=>e.some((e=>Ky(e,w,S,f,y)))))||c.push({index:l,text:m,x:w,y:S,width:f,height:y,datum:d}))}}var n,o,r,a;return s}(i,{x:-l,y:-o,width:n.width+l+r,height:n.height+o+a},e):[];return new Map(c.map(((e,i)=>[t[i],e])))}getLegendData(e,t){var i;const s=this.series.filter((e=>e.properties.showInLegend)).flatMap((t=>t.getLegendData(e)));if(t&&s.every((e=>"category"===e.legendType))){const e={},t=new Map(this.series.map((e=>[e.id,e.type])));for(const{seriesId:n,symbols:[{marker:o}],label:r}of s){if(null==o.fill)continue;const s=t.get(n),a=e[s]??(e[s]={});a[i=r.text]??(a[i]=o.fill),a[r.text]!==o.fill&&Xd.warnOnce(`legend item '${r.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}return s}async processLayout(){const e=this.animationRect,{width:t,height:i}=this.ctx.scene,s=this.ctx.layoutManager.createContext(t,i);await this.performLayout(s),e&&!this.animationRect?.equals(e)&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async waitForUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=performance.now();for(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue();7!==this.performUpdateType;){if(performance.now()-i>e){const i=`Chart.waitForUpdate() timeout of ${e} reached - first chart update taking too long.`;if(t)throw new Error(i);Xd.warnOnce(i)}await QC(50)}await this.updateMutex.waitForClearAcquireQueue()}getMinRects(){const{width:e,height:t}=this.ctx.scene,i=this.series.map((i=>i.getMinRects(e,t))).filter(Vp);if(0===i.length)return;let s=0,n=0,o=0,r=0;for(const{minRect:c,minVisibleRect:h}of i)s=Math.max(s,c.width),n=Math.max(n,c.height),o=Math.max(o,h.width),r=Math.max(r,h.height);const a=new bp(0,0,s,n);let l=a.clone();return o>0&&r>0&&(l=new bp(0,0,o,r)),{minRect:a,minVisibleRect:l}}filterMiniChartSeries(e){return e?.filter((e=>!1!==e.showInMiniChart))}applyOptions(e){const t=e!==this.chartOptions?this.chartOptions.processedOptions:{},i=e.processedOptions,s=e.diffOptions(t);if(null==s)return;gx("Chart.applyOptions() - applying delta",s);const n=this.applyModules(i);s.listeners&&this.registerListeners(this,s.listeners),iv(this,s,{skip:["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer"]});let o=!1,r="no-op";null!=s.series&&(r=this.applySeries(this,s.series,t?.series),o=!0),"replaced"===r&&this.resetAnimations(),this.applyAxes(this,i,t,r,[],!0)&&(o=!0),s.data&&(this.data=s.data),s.legend?.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,s.legend.listeners),s.locale?.localeText&&(this.modulesManager.getModule("locale").localeText=s.locale?.localeText),this.chartOptions=e;const a=this.modulesManager.getModule("navigator"),l=this.modulesManager.getModule("zoom");a?.enabled||l?.enabled||this.ctx.zoomManager.updateZoom("chart");const c=a?.miniChart,h=i.navigator?.miniChart?.series??i.series;!0===c?.enabled&&null!=h?this.applyMiniChartOptions(c,h,i,t):!1===c?.enabled&&(c.series=[],c.axes=[]),this.ctx.annotationManager.setAnnotationStyles(e.annotationThemes),o||(o=this.shouldForceNodeDataRefresh(s,r));const d=o||n?0:3;this.maybeResetAnimations(r),gx("Chart.applyOptions() - update type",dS[d],{seriesStatus:r,forceNodeDataRefresh:o}),this.update(d,{forceNodeDataRefresh:o,newAnimationBatch:!0}),(s.initialState||s.theme)&&this.applyInitialState(e.userOptions.initialState)}applyInitialState(e){const{ctx:{annotationManager:t,historyManager:i,stateManager:s}}=this;if(null!=e?.annotations){const i=e.annotations.map((e=>ag(e,t.getAnnotationTypeStyles(e.type))));s.setState(t,i)}null!=e&&i.clear()}maybeResetAnimations(e){if("standalone"===this.mode)switch(e){case"series-grouping-change":case"replaced":this.resetAnimations()}}shouldForceNodeDataRefresh(e,t){const i=!!e.data||"data-change"===t||"replaced"===t,s=kS.getKeys(),n=Object.values(s).some((t=>null!=e[t])),o=null!=e.title&&null!=e.subtitle;return i||n||o}applyMiniChartOptions(e,t,i,s){const n=s?.navigator?.miniChart?.series??s?.series,o=this.applySeries(e,this.filterMiniChartSeries(t),this.filterMiniChartSeries(n));this.applyAxes(e,i,s,o,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const r=e.series;for(const c of r)c.properties.id=void 0;const a=e.axes,l=a.find((e=>"x"===e.direction));for(const c of a)c.gridLine.enabled=!1,c.label.enabled=c===l,c.tick.enabled=!1,c.interactionEnabled=!1;if(null!=l){const e=i.navigator?.miniChart,t=e?.label,s=e?.label?.interval;l.line.enabled=!1,l.label.set(hg(t,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),l.tick.set(hg(s,["enabled","width","size","color","interval","step"]));const n=s?.step;null!=n&&(l.interval.step=n)}}applyModules(e){const{type:t}=this.constructor;let i=!1;for(const s of $C.byType("root","legend")){const n=null!=e[s.optionsKey]&&s.chartTypes.includes(t);n!==this.modulesManager.isEnabled(s)&&(n?(this.modulesManager.addModule(s,(e=>e.moduleFactory(this.getModuleContext()))),"legend"===s.type&&this.modulesManager.getModule(s)?.attachLegend(this.ctx.scene),this[s.optionsKey]=this.modulesManager.getModule(s)):(this.modulesManager.removeModule(s),delete this[s.optionsKey]),i=!0)}return i}initSeriesDeclarationOrder(e){for(let t=0;t<e.length;t++)e[t]._declarationOrder=t}applySeries(e,t,i){if(!t)return"no-change";const s=function(e,t,i){const s=(e,t,i)=>{const s=[e];for(const n of jS)n in t&&null!=t[n]&&s.push(`${n}=${t[n]}`);return i?.seriesGrouping&&s.push(`seriesGrouping.groupId=${i?.seriesGrouping.groupId}`),s.join(";")},n=new Map;let o=0;for(const c of e){const e=s(c.type,c.properties,i?.[o]);n.has(e)||n.set(e,[]),n.get(e)?.push([c,o++])}const r=new Map;for(const c of t){const e=s(c.type,c,c);r.has(e)||r.set(e,[]),r.get(e)?.push(c)}if(![...n.keys()].some((e=>r.has(e))))return{status:"no-overlap",oldKeys:n.keys(),newKeys:r.keys()};const a=[];let l=-1;for(const[c,h]of r.entries())for(const e of h){l++;const t=n.get(c);if(null==t||t.length<1){a.push({opts:e,idx:l,status:"add"}),n.delete(c);continue}const[s,o]=t.shift(),r=qy(i?.[o]??{},e??{}),{groupIndex:h,stackIndex:d}=r?.seriesGrouping??{};null!=h||null!=d?a.push({opts:e,series:s,diff:r,idx:o,status:"series-grouping"}):r?a.push({opts:e,series:s,diff:r,idx:o,status:"update"}):a.push({opts:e,series:s,idx:o,status:"no-op"}),0===t.length&&n.delete(c)}for(const c of n.values())for(const[e,t]of c)a.push({series:e,idx:t,status:"remove"});return{status:"overlap",changes:a}}(e.series,t,i);if("no-overlap"===s.status)return gx(`Chart.applySeries() - creating new series instances, status: ${s.status}`,s),e.series=t.map((e=>this.createSeries(e))),this.initSeriesDeclarationOrder(e.series),"replaced";gx("Chart.applySeries() - matchResult",s);const n=[];let o=!1,r=!1,a=!1;for(const l of s.changes)switch(r||(r="series-grouping"===l.status),o||(o=null!=l.diff?.data),a||(a="no-op"!==l.status),l.status){case"add":{const e=this.createSeries(l.opts);n.push(e),gx("Chart.applySeries() - created new series",e);break}case"remove":gx(`Chart.applySeries() - removing series at previous idx ${l.idx}`,l.series);break;case"no-op":n.push(l.series),gx(`Chart.applySeries() - no change to series at previous idx ${l.idx}`,l.series);break;default:{const{series:e,diff:t,idx:i}=l;gx(`Chart.applySeries() - applying series diff previous idx ${i}`,t,e),this.applySeriesValues(e,t),e.markNodeDataDirty(),n.push(e)}}return this.initSeriesDeclarationOrder(n),gx("Chart.applySeries() - final series instances",n),e.series=n,r?"series-grouping-change":o?"data-change":a?"updated":"no-op"}applyAxes(e,t,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!("axes"in t)||!t.axes)return!1;n=["axes[].type",...n];const{axes:r}=t;if(!("replaced"===s)&&e.axes.length===r.length&&e.axes.every(((e,t)=>e.type===r[t].type))&&US(i))return e.axes.forEach(((e,t)=>{const s=qy(i.axes?.[t]??{},r[t]);gx(`Chart.applyAxes() - applying axis diff idx ${t}`,s);iv(e,s,{path:`axes[${t}]`,skip:n})})),!0;gx(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${s}`),e.axes=this.createAxis(r,n);const a={x:[],y:[]};return e.axes.forEach((e=>{const{id:t}=e,i=e.getRegionNode();null!=i&&a[e.direction].push({id:t,node:i})})),o&&(this.ctx.regionManager.updateRegion("horizontal-axes",...a.x),this.ctx.regionManager.updateRegion("vertical-axes",...a.y)),!0}createSeries(e){const t=GS.create(e.type,this.getModuleContext());return this.applySeriesOptionModules(t,e),this.applySeriesValues(t,e),t}applySeriesOptionModules(e,t){const i=e.createModuleContext(),s=e.getModuleMap();for(const n of $C.byType("series-option"))n.optionsKey in t&&n.seriesTypes.includes(e.type)&&s.addModule(n,(e=>e.moduleFactory(i)))}applySeriesValues(e,t){const i=e.getModuleMap(),{type:s,data:n,listeners:o,seriesGrouping:r,showInMiniChart:a,...l}=t;for(const c of ES)if("series-option"===c.type&&c.optionsKey in l){const e=i.getModule(c.optionsKey);if(e){const t=l[c.optionsKey];delete l[c.optionsKey],e.properties.set(t)}}e.properties.set(l),"data"in t&&e.setOptionsData(n),o&&this.registerListeners(e,o),"seriesGrouping"in t&&(e.seriesGrouping=null==r?void 0:{...e.seriesGrouping,...r})}createAxis(e,t){const i=[],s=this.getModuleContext();for(let n=0;n<e.length;n++){const o=e[n],r=RS.create(o.type,s);this.applyAxisModules(r,o),iv(r,o,{path:`axes[${n}]`,skip:t}),i.push(r)}return function(e){const t=[],i=[],s=[...VS];for(const o of e)o instanceof TC&&("string"===typeof(n=o.position)&&VS.includes(n)?i.push(o.position):t.push(o));var n;for(const o of t){let e;do{e=s.pop()}while(e&&i.includes(e));if(null==e)break;o.position=e}}(i),i}applyAxisModules(e,t){const i=e.createModuleContext(),s=e.getModuleMap();for(const n of $C.byType("axis-option")){const o=null!=t[n.optionsKey];o!==s.isEnabled(n)&&(o?(s.addModule(n,(e=>e.moduleFactory(i))),e[n.optionsKey]=s.getModule(n)):(s.removeModule(n),delete e[n.optionsKey]))}}registerListeners(e,t){e.clearEventListeners();for(const[i,s]of Object.entries(t))Kp(s)&&e.addEventListener(i,s)}};fx.chartsInstances=new WeakMap,Wd([lv({newValue(e){this.destroyed||(this.ctx.domManager.setContainer(e),fx.chartsInstances.set(e,this))},oldValue(e){fx.chartsInstances.delete(e)}})],fx.prototype,"container",2),Wd([lv({newValue(e){this.resize("width option",{inWidth:e})}})],fx.prototype,"width",2),Wd([lv({newValue(e){this.resize("height option",{inHeight:e})}})],fx.prototype,"height",2),Wd([lv({newValue(e){this.resize("minWidth option",{inMinWidth:e})}})],fx.prototype,"minWidth",2),Wd([lv({newValue(e){this.resize("minHeight option",{inMinHeight:e})}})],fx.prototype,"minHeight",2),Wd([lm(um)],fx.prototype,"padding",2),Wd([lm(um)],fx.prototype,"seriesArea",2),Wd([lm(um)],fx.prototype,"keyboard",2),Wd([lm(ef(["standalone","integrated"],"a chart mode"))],fx.prototype,"mode",2),Wd([ov("chartCaptions.title")],fx.prototype,"title",2),Wd([ov("chartCaptions.subtitle")],fx.prototype,"subtitle",2),Wd([ov("chartCaptions.footnote")],fx.prototype,"footnote",2),Wd([lv({changeValue(e,t){this.onAxisChange(e,t)}})],fx.prototype,"axes",2),Wd([lv({changeValue(e,t){this.onSeriesChange(e,t)}})],fx.prototype,"series",2);var yx=fx,vx=class{constructor(e,t,i){this.root=new wx(e,t,i)}clear(e){this.root.clear(e)}addValue(e,t){const i={hitTester:e,value:t,distanceSquared:(t,i)=>e.distanceSquared(t,i)};this.root.addElem(i)}find(e,t){const i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(e,t,i),i.best}},Cx=class{constructor(e,t,i,s){this.nw=e,this.ne=t,this.sw=i,this.se=s}addElem(e){this.nw.addElem(e),this.ne.addElem(e),this.sw.addElem(e),this.se.addElem(e)}find(e,t,i){this.nw.find(e,t,i),this.ne.find(e,t,i),this.sw.find(e,t,i),this.se.find(e,t,i)}},bx=class{constructor(e,t,i){this.capacity=e,this.maxdepth=t,this.boundary=i??bp.NaN,this.elems=[],this.subdivisions=void 0}clear(e){this.elems.length=0,this.boundary=e,this.subdivisions=void 0}addElem(e){this.addCondition(e)&&(void 0===this.subdivisions?0===this.maxdepth||this.elems.length<this.capacity?this.elems.push(e):this.subdivide(e):this.subdivisions.addElem(e))}find(e,t,i){this.findCondition(e,t,i)&&(void 0===this.subdivisions?this.findAction(e,t,i):this.subdivisions.find(e,t,i))}subdivide(e){this.subdivisions=this.makeSubdivisions();for(const t of this.elems)this.subdivisions.addElem(t);this.subdivisions.addElem(e),this.elems.length=0}makeSubdivisions(){const{x:e,y:t,width:i,height:s}=this.boundary,{capacity:n}=this,o=this.maxdepth-1,r=i/2,a=s/2,l=new bp(e,t,r,a),c=new bp(e+r,t,r,a),h=new bp(e,t+a,r,a),d=new bp(e+r,t+a,r,a);return new Cx(this.child(n,o,l),this.child(n,o,c),this.child(n,o,h),this.child(n,o,d))}},wx=class e extends bx{addCondition(e){const{x:t,y:i}=e.hitTester.midPoint;return this.boundary.containsPoint(t,i)}findCondition(e,t,i){const{best:s}=i;return 0!==s.distanceSquared&&this.boundary.distanceSquared(e,t)<s.distanceSquared}findAction(e,t,i){const s=Ku(e,t,this.elems,i.best.distanceSquared);void 0!==s.nearest&&s.distanceSquared<i.best.distanceSquared&&(i.best=s)}child(t,i,s){return new e(t,i,s)}},Sx=["ArrowDown","ArrowUp","Circle","Cross","Diamond","Heart","MapPin","Plus","Square","Star","Triangle"],xx=Object.freeze({x:.5,y:.5}),Mx=class extends $b{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}isBuiltIn(){return Sx.includes(this.constructor.className??"")}computeBBox(){if(!this.isBuiltIn())return this.path.computeBBox();const{x:e,y:t,size:i}=this,{center:s}=this.constructor;return new bp(e-i*s.x,t-i*s.y,i,i)}applyPath(e,t){const{path:i}=this;let{x:s,y:n}=this;i.clear();for(const{x:o,y:r,t:a}of t)s+=o*e,n+=r*e,"move"===a?i.moveTo(s,n):i.lineTo(s,n);i.closePath()}executeFill(e,t){if(t)return super.executeFill(e,t)}executeStroke(e,t){if(t)return super.executeStroke(e,t)}};Wd([Zb()],Mx.prototype,"x",2),Wd([Zb()],Mx.prototype,"y",2),Wd([Zb({convertor:Math.abs})],Mx.prototype,"size",2);var Dx=class extends(Jf(ey(ty(Mx)))){};Dx.center=xx;var Ix=class extends Dx{updatePath(){const{x:e,y:t,path:i,size:s}=this,n=s/2;i.clear(),i.arc(e,t,n,0,2*Math.PI),i.closePath()}};Ix.className="Circle";var Rx=class e extends Dx{updatePath(){const t=this.size/4.2;super.applyPath(t,e.moves)}};Rx.className="Cross",Rx.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];var Ex=Rx,Ax=class e extends Dx{updatePath(){const t=this.size/2;super.applyPath(t,e.moves)}};Ax.className="Diamond",Ax.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];var Lx=Ax,kx=class extends Dx{rad(e){return e/180*Math.PI}updatePath(){const{x:e,path:t,size:i,rad:s}=this,n=i/4,o=this.y+n/2;t.clear(),t.arc(e-n,o-n,n,s(130),s(330)),t.arc(e+n,o-n,n,s(220),s(50)),t.lineTo(e,o+n),t.closePath()}};kx.className="Heart";var Tx=class extends Dx{updatePath(){const{path:e,x:t,y:i}=this,s=this.size,n=.5;e.clear(),e.moveTo(t+-.34375*s,i+-.65625*s),e.cubicCurveTo(t+-.34375*s,i+-.848509*s,t+-.192259*s,i+-1*s,t+0*s,i+-1*s),e.cubicCurveTo(t+(.692259-n)*s,i+-1*s,t+.34375*s,i+-.848509*s,t+.34375*s,i+-.65625*s),e.cubicCurveTo(t+.34375*s,i+-.506176*s,t+.284625*s,i+(.600181-1)*s,t+(.716461-n)*s,i+(.695393-1)*s),e.cubicCurveTo(t+.199009*s,i+-.280231*s,t+(.681271-n)*s,i+-.256896*s,t+(.663785-n)*s,i+(.766105-1)*s),e.cubicCurveTo(t+(.611893-n)*s,i+(.834367-1)*s,t+(.562228-n)*s,i+(.899699-1)*s,t+(.528896-n)*s,i+(.980648-1)*s),e.cubicCurveTo(t+(.524075-n)*s,i+(.992358-1)*s,t+(.512663-n)*s,i+0*s,t+0*s,i+0*s),e.cubicCurveTo(t+(.487337-n)*s,i+0*s,t+(.475925-n)*s,i+(.992358-1)*s,t+(.471104-n)*s,i+(.980648-1)*s),e.cubicCurveTo(t+(.487337-n)*s,i+0*s,t+(.475925-n)*s,i+(.992358-1)*s,t+(.471104-n)*s,i+(.980648-1)*s),e.cubicCurveTo(t+(.437772-n)*s,i+(.899699-1)*s,t+(.388107-n)*s,i+(.834367-1)*s,t+(.336215-n)*s,i+(.766105-1)*s),e.cubicCurveTo(t+(.318729-n)*s,i+-.256896*s,t+-.199009*s,i+-.280231*s,t+(.283539-n)*s,i+(.695393-1)*s),e.cubicCurveTo(t+-.284625*s,i+(.600181-1)*s,t+-.34375*s,i+-.506176*s,t+-.34375*s,i+-.65625*s),e.closePath()}};Tx.className="MapPin",Tx.center={x:.5,y:1};var Px=class e extends Dx{updatePath(){const t=this.size/3;super.applyPath(t,e.moves)}};Px.className="Plus",Px.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];var Nx=Px,Fx=class extends Dx{updatePath(){const{path:e,x:t,y:i}=this,s=this.size/2;e.clear(),e.moveTo(this.align(t-s),this.align(i-s)),e.lineTo(this.align(t+s),this.align(i-s)),e.lineTo(this.align(t+s),this.align(i+s)),e.lineTo(this.align(t-s),this.align(i+s)),e.closePath()}};Fx.className="Square";var Ox=class extends Dx{updatePath(){const{x:e,y:t,path:i,size:s}=this,n=s/2,o=Math.PI/2;i.clear();for(let r=0;r<10;r++){const a=r%2===0?s:n,l=r*Math.PI/5-o,c=e+Math.cos(l)*a,h=t+Math.sin(l)*a;i.lineTo(c,h)}i.closePath()}};Ox.className="Star";var Gx=class e extends Dx{updatePath(){const t=1.1*this.size;super.applyPath(t,e.moves)}};Gx.className="Triangle",Gx.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];var Bx=Gx,zx={circle:Ix,cross:Ex,diamond:Lx,heart:kx,pin:Tx,plus:Nx,square:Fx,star:Ox,triangle:Bx},Hx=Object.keys(zx);function Vx(e){return"string"===typeof e&&Hx.includes(e)}function jx(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fx;return Vx(e)?zx[e]:"function"===typeof e?e:Fx}var Wx=class extends ox{constructor(){super(...arguments),this.showFocusBox=!0}getScaleInformation(e){let{xScale:t,yScale:i}=e;return{isContinuousX:Gg.is(t),isContinuousY:Gg.is(i),xScaleType:t?.type,yScaleType:i?.type}}getModulePropertyDefinitions(){const e=this.axes.x?.scale,t=this.axes.y?.scale;return this.moduleMap.mapModules((i=>i.getPropertyDefinitions(this.getScaleInformation({xScale:e,yScale:t})))).flat()}async requestDataModel(e,t,i){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:s,processedData:n}=await e.request(this.id,t??[],i);return this.dataModel=s,this.processedData=n,this.dispatch("data-processed",{dataModel:s,processedData:n}),{dataModel:s,processedData:n}}isProcessedDataAnimatable(){const e=this.processedData?.reduced?.animationValidation;if(!e)return!0;const{orderedKeys:t,uniqueKeys:i}=e;return t&&i}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(e){const t=this.getNodeData();if(void 0===t||0===t.length)return;const i=this.computeFocusDatumIndex(e,t);if(void 0===i)return;const{showFocusBox:s}=this,n=t[i],o={...e,datumIndex:i},r=this.computeFocusBounds(o);return void 0!==r?{bounds:r,showFocusBox:s,datum:n,datumIndex:i}:void 0}computeFocusDatumIndex(e,t){const i=e=>{const{missing:i=!1,enabled:s=!0,focusable:n=!0}=t[e];return!i&&s&&n},s=e=>{for(;e>=0&&!i(e);)e--;return-1===e?void 0:e},n=e=>{for(;e<t.length&&!i(e);)e++;return e===t.length?void 0:e};let o;const r=ap(0,e.datumIndex,t.length-1);return o=e.datumIndexDelta<0?s(r):e.datumIndexDelta>0?n(r):n(r)??s(r),void 0===o?0===e.datumIndexDelta?void 0:e.datumIndex-e.datumIndexDelta:o}},Ux=class extends om{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};Wd([lm(Tm,{optional:!0})],Ux.prototype,"fill",2),Wd([lm(wm,{optional:!0})],Ux.prototype,"fillOpacity",2),Wd([lm(Tm,{optional:!0})],Ux.prototype,"stroke",2),Wd([lm(bm,{optional:!0})],Ux.prototype,"strokeWidth",2),Wd([lm(wm,{optional:!0})],Ux.prototype,"strokeOpacity",2),Wd([lm(jm,{optional:!0})],Ux.prototype,"lineDash",2),Wd([lm(bm,{optional:!0})],Ux.prototype,"lineDashOffset",2);var _x=class extends om{};Wd([lm(bm,{optional:!0})],_x.prototype,"strokeWidth",2),Wd([lm(wm,{optional:!0})],_x.prototype,"dimOpacity",2),Wd([lm(gm,{optional:!0})],_x.prototype,"enabled",2);var Yx=class extends om{constructor(){super(...arguments),this.color="black"}};Wd([lm(Tm,{optional:!0})],Yx.prototype,"color",2);var Kx=class extends om{constructor(){super(...arguments),this.enabled=!0}};Wd([lm(gm,{optional:!0})],Kx.prototype,"enabled",2);var Zx=class extends om{constructor(){super(...arguments),this.item=new Ux,this.series=new _x,this.text=new Yx}};Wd([lm(um)],Zx.prototype,"item",2),Wd([lm(um)],Zx.prototype,"series",2),Wd([lm(um)],Zx.prototype,"text",2);var $x=class extends om{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new Kx,this.highlightStyle=new Zx}};Wd([lm(fm,{optional:!0})],$x.prototype,"id",2),Wd([lm(gm)],$x.prototype,"visible",2),Wd([lm(vm,{optional:!0})],$x.prototype,"focusPriority",2),Wd([lm(gm)],$x.prototype,"showInLegend",2),Wd([lm(fm)],$x.prototype,"cursor",2),Wd([lm(qm)],$x.prototype,"nodeClickRange",2),Wd([lm(um)],$x.prototype,"highlight",2),Wd([lm(um)],$x.prototype,"highlightStyle",2);var Qx={x:["xKey"],y:["yKey"]},Xx={x:["xName"],y:["yName"]},qx=class extends sx{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.yKey=s.properties.yKey}},Jx=class extends $x{constructor(){super(...arguments),this.pickOutsideVisibleMinorAxis=!1}};Wd([lm(fm,{optional:!0})],Jx.prototype,"legendItemName",2),Wd([lm(gm,{optional:!0})],Jx.prototype,"pickOutsideVisibleMinorAxis",2);var eM=class extends Wx{constructor(e){let{pathsPerSeries:t=["path"],hasMarkers:i=!1,hasHighlightedLabels:s=!1,pathsZIndexSubOrderOffset:n=[],datumSelectionGarbageCollection:o=!0,markerSelectionGarbageCollection:r=!0,animationAlwaysUpdateSelections:a=!1,animationResetFns:l,directionKeys:c,directionNames:h,...d}=e;if(super({directionKeys:c,directionNames:h,canHaveAxes:!0,...d}),this.NodeEvent=qx,this.dataNodeGroup=this.contentGroup.appendChild(new ny({name:`${this.id}-series-dataNodes`,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.markerGroup=this.contentGroup.appendChild(new ny({name:`${this.id}-series-markers`,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("marker")})),this.labelGroup=this.contentGroup.appendChild(new ay({name:`${this.id}-series-labels`,zIndex:14,zIndexSubOrder:this.getGroupZIndexSubOrder("labels")})),this.labelSelection=dy.select(this.labelGroup,Wy),this.highlightSelection=dy.select(this.highlightNode,(()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory())),this.highlightLabelSelection=dy.select(this.highlightLabel,Wy),this.annotationSelections=new Set,this.minRectsCache={dirtyNodeData:!0},this.debug=hy.create(),!c||!h)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:t,hasMarkers:i,hasHighlightedLabels:s,pathsZIndexSubOrderOffset:n,directionKeys:c,directionNames:h,animationResetFns:l,animationAlwaysUpdateSelections:a,datumSelectionGarbageCollection:o,markerSelectionGarbageCollection:r},this.paths=[];for(let u=0;u<t.length;u++)this.paths[u]=new $b({name:`${this.id}-${t[u]}`}),this.paths[u].zIndex=4,this.paths[u].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",u),this.contentGroup.appendChild(this.paths[u]);this.datumSelection=dy.select(this.dataNodeGroup,(()=>this.nodeFactory()),o),this.markerSelection=dy.select(this.markerGroup,(()=>this.markerFactory()),r),this.animationState=new pv("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),highlightMarkers:e=>this.animateReadyHighlightMarkers(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:e=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(e):this.animateWaitingUpdateReady(e)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:e=>this.resetAllAnimation(e),reset:"empty"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}get contextNodeData(){return this._contextNodeData}getNodeData(){return this.contextNodeData?.nodeData}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e?this.animationState.transition("skip"):"disabled"===e&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",(e=>this.onLegendItemClick(e))),this.ctx.chartEventManager.addListener("legend-item-double-click",(e=>this.onLegendItemDoubleClick(e))))}destroy(){super.destroy(),this._contextNodeData=void 0}async update(e){let{seriesRect:t}=e;const{visible:i,_contextNodeData:s}=this,n=this.ctx.highlightManager?.getActiveHighlight()?.series,o=n===this,r=this.checkResize(t),a=await this.updateHighlightSelection(o);await this.updateSelections(i),await this.updateNodes(a,o,i);const l=this.getAnimationData(t,s);l&&(r&&this.animationState.transition("resize",l),this.animationState.transition("update",l))}async updateSelections(e){var t;const i=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if((e||!i)&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=await this.createNodeData();const e=this.isProcessedDataAnimatable();this._contextNodeData&&((t=this._contextNodeData).animationValid??(t.animationValid=e)),this.minRectsCache.dirtyNodeData=!0;const{dataModel:i,processedData:s}=this;void 0!==i&&void 0!==s&&this.dispatch("data-update",{dataModel:i,processedData:s})}await this.updateSeriesSelections()}}async updateSeriesSelections(e){const{datumSelection:t,labelSelection:i,markerSelection:s,paths:n}=this,o=this._contextNodeData;if(!o)return;const{nodeData:r,labelData:a,itemId:l}=o;await this.updatePaths({seriesHighlighted:e,itemId:l,contextData:o,paths:n}),this.datumSelection=await this.updateDatumSelection({nodeData:r,datumSelection:t}),this.labelSelection=await this.updateLabelSelection({labelData:a,labelSelection:i}),this.opts.hasMarkers&&(this.markerSelection=await this.updateMarkerSelection({nodeData:r,markerSelection:s}))}markerFactory(){return new(jx())}getGroupZIndexSubOrder(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=super.getGroupZIndexSubOrder(e,t);if("paths"===e){const[e]=i,s=this.opts.pathsZIndexSubOrderOffset[t]??0;i[0]=Kp(e)?()=>Number(e())+s:Number(e)+s}return i}async updateNodes(e,t,i){const{highlightSelection:s,highlightLabelSelection:n,opts:{hasMarkers:o,hasHighlightedLabels:r}}=this,a=!this.ctx.animationManager.isSkipped(),l=this.visible&&null!=this._contextNodeData&&i;this.rootGroup.visible=a||l,this.contentGroup.visible=a||l,this.highlightGroup.visible=(a||l)&&t;const c=this.getOpacity();o?(await this.updateMarkerNodes({markerSelection:s,isHighlight:!0}),this.animationState.transition("highlightMarkers",s)):(await this.updateDatumNodes({datumSelection:s,isHighlight:!0}),this.animationState.transition("highlight",s)),r&&await this.updateLabelNodes({labelSelection:n});const{dataNodeGroup:h,markerGroup:d,datumSelection:u,labelSelection:p,markerSelection:g,paths:m,labelGroup:f}=this,{itemId:y}=this.contextNodeData??{};h.opacity=c,h.visible=a||l,f.visible=l,o&&(d.opacity=c,d.zIndex=h.zIndex>=4?h.zIndex:h.zIndex+1,d.visible=l),f&&(f.opacity=c),await this.updatePathNodes({seriesHighlighted:t,itemId:y,paths:m,opacity:c,visible:l,animationEnabled:a}),h.visible&&(await this.updateDatumNodes({datumSelection:u,highlightedItems:e,isHighlight:!1}),await this.updateLabelNodes({labelSelection:p}),o&&await this.updateMarkerNodes({markerSelection:g,isHighlight:!1}))}getHighlightLabelData(e,t){const i=e.filter((e=>e.datum===t.datum&&e.itemId===t.itemId));return 0===i.length?void 0:i}getHighlightData(e,t){return t?[t]:void 0}async updateHighlightSelection(e){const{highlightSelection:t,highlightLabelSelection:i,_contextNodeData:s}=this;if(!s)return;const n=this.ctx.highlightManager?.getActiveHighlight(),o=e&&n?.datum?n:void 0;let r,a;if(null!=o){const e=this.isLabelEnabled(),{labelData:t,nodeData:i}=s;a=this.getHighlightData(i,o),r=e?this.getHighlightLabelData(t,o):void 0}return this.highlightSelection=await this.updateHighlightSelectionItem({items:a,highlightSelection:t}),this.highlightLabelSelection=await this.updateHighlightSelectionLabel({items:r,highlightLabelSelection:i}),a}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(const{node:e}of this.datumSelection)!0!==e.datum.missing&&(yield e)}getQuadTree(){if(void 0===this.quadtree){const{width:e,height:t}=this.ctx.scene.canvas,i=new bp(0,0,e,t);this.quadtree=new vx(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(e){}pickNodeExactShape(e){const t=super.pickNodeExactShape(e);if(t)return t;const{x:i,y:s}=e,{opts:{hasMarkers:n}}=this;let o;const{dataNodeGroup:r,markerGroup:a}=this;if(o=r.pickNode(i,s),!o&&n&&(o=a?.pickNode(i,s)),o&&!0!==o.datum.missing)return{datum:o.datum,distance:0};for(const l of this.moduleMap.modules()){const{datum:t}=l.pickNodeExact(e)??{};if(null!=t&&!0!==t?.missing)return{datum:t,distance:0}}}pickNodeClosestDatum(e){const{x:t,y:i}=e,{axes:s,_contextNodeData:n}=this;if(!n)return;const o=s.x,r=s.y,a=t,l=i;let c,h=1/0;for(const d of n.nodeData){const{point:{x:e=NaN,y:t=NaN}={}}=d;if(isNaN(e)||isNaN(t))continue;if(!(o?.inRange(e)&&r?.inRange(t)))continue;const i=Math.max((a-e)**2+(l-t)**2,0);i<h&&(h=i,c=d)}for(const d of this.moduleMap.modules()){const t=d.pickNodeNearest(e);if(void 0!==t&&t.distanceSquared<h){h=t.distanceSquared,c=t.datum;break}}if(c){return{datum:c,distance:Math.max(Math.sqrt(h)-(c.point?.size??0),0)}}}pickNodeMainAxisFirst(e,t){const{x:i,y:s}=e,{axes:n,_contextNodeData:o}=this,{pickOutsideVisibleMinorAxis:r}=this.properties;if(!o)return;const a=n.x,l=n.y,c=[a,l].filter(NC.is).map((e=>e.direction));if(t&&0===c.length)return;const[h="x"]=c,d=[i,s];"x"!==h&&d.reverse();const u=[1/0,1/0];let p;for(const g of o.nodeData){const{x:e=NaN,y:t=NaN}=g.point??g.midPoint??{};if(isNaN(e)||isNaN(t)||!0===g.missing)continue;const i=[a?.inRange(e),l?.inRange(t)];if("x"!==h&&i.reverse(),!i[0]||!r&&!i[1])continue;const s=[e,t];"x"!==h&&s.reverse();let n=!0;for(let o=0;o<s.length;o++){const e=Math.abs(s[o]-d[o]);if(e>u[o]){n=!1;break}e<u[o]&&(u[o]=e,u.fill(1/0,o+1,u.length))}n&&(p=g)}if(p){let t=Math.max(u[0]**2+u[1]**2-(p.point?.size??0),0);for(const i of this.moduleMap.modules()){const s=i.pickNodeMainAxisFirst(e);if(void 0!==s&&s.distanceSquared<t){p=s.datum,t=s.distanceSquared;break}}return{datum:p,distance:Math.sqrt(t)}}}onLegendItemClick(e){const{legendItemName:t}=this.properties,{enabled:i,itemId:s,series:n}=e,o=null!=t&&t===e.legendItemName;(n.id===this.id||o)&&this.toggleSeriesItem(s,i)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:s,numVisibleItems:n}=e,{legendItemName:o}=this.properties,r=null!=o&&o===e.legendItemName;s.id===this.id||r||t&&1===n?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRects(e,t){const{dirtyNodeData:i,sizeCache:s,minRect:n,minVisibleRect:o}=this.minRectsCache,r=JSON.stringify({width:e,height:t});if(!(r!==s)&&!i&&n&&o)return{minRect:n,minVisibleRect:o};const a=this.computeMinRects(e,t);return this.minRectsCache={dirtyNodeData:!1,sizeCache:r,minRect:a?.minRect,minVisibleRect:a?.minVisibleRect},a}computeMinRects(e,t){const i=this._contextNodeData;if(!i?.nodeData.length)return;const{nodeData:s}=i,n=Array(s.length),o=Array(s.length);for(const[f,{midPoint:y}]of s.entries())n[f]=y?.x??0,o[f]=y?.y??0;let r,a,l,c;n.sort(((e,t)=>e-t)),o.sort(((e,t)=>e-t));let h=0,d=0;for(let f=1;f<s.length;f++)n[f]>=0&&(r??(r=f)),n[f]>e&&(a??(a=f)),o[f]>=0&&(l??(l=f)),o[f]>t&&(c??(c=f)),h=Math.max(h,n[f]-n[f-1]),d=Math.max(d,o[f]-o[f-1]);a??(a=s.length),c??(c=s.length);const u=null!=r&&null!=a?n.slice(r,a):[],p=null!=l&&null!=c?o.slice(l,c):[];let g=0,m=0;for(let f=1;f<Math.max(u.length,p.length);f++){const e=u[f],t=u[f-1],i=p[f],s=p[f-1];null!=e&&null!=t&&(g=Math.max(g,e-t)),null!=i&&null!=s&&(m=Math.max(m,i-s))}return{minRect:new bp(0,0,h,d),minVisibleRect:new bp(0,0,g,m)}}updateHighlightSelectionItem(e){const{opts:{hasMarkers:t}}=this,{items:i,highlightSelection:s}=e,n=i??[];if(t){const e=s;return this.updateMarkerSelection({nodeData:n,markerSelection:e})}return this.updateDatumSelection({nodeData:n,datumSelection:s})}updateHighlightSelectionLabel(e){return this.updateLabelSelection({labelData:e.items??[],labelSelection:e.highlightLabelSelection})}async updateDatumSelection(e){return e.datumSelection}async updateDatumNodes(e){}async updateMarkerSelection(e){return e.markerSelection}async updateMarkerNodes(e){}async updatePaths(e){e.paths.forEach((e=>e.visible=!1))}async updatePathNodes(e){const{paths:t,opacity:i,visible:s}=e;for(const n of t)n.opacity=i,n.visible=s}resetPathAnimation(e){const{path:t}=this.opts?.animationResetFns??{};t&&e.paths.forEach((e=>{df([e],t)}))}resetDatumAnimation(e){const{datum:t}=this.opts?.animationResetFns??{};t&&df([e.datumSelection],t)}resetLabelAnimation(e){const{label:t}=this.opts?.animationResetFns??{};t&&df([e.labelSelection],t)}resetMarkerAnimation(e){const{marker:t}=this.opts?.animationResetFns??{};t&&this.opts.hasMarkers&&df([e.markerSelection],t)}resetAllAnimation(e){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(e),this.resetDatumAnimation(e),this.resetLabelAnimation(e),this.resetMarkerAnimation(e),!1===e.contextData?.animationValid&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){const{datum:t}=this.opts?.animationResetFns??{};t&&df([e],t)}animateReadyHighlightMarkers(e){const{marker:t}=this.opts?.animationResetFns??{};t&&df([e],t)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animationTransitionClear(){const e=this.getAnimationData();e&&this.animationState.transition("clear",e)}getAnimationData(e,t){const{_contextNodeData:i}=this;if(!i)return;return{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:t,paths:this.paths,seriesRect:e}}calculateScaling(){const e={};for(const t of Object.values(lf)){const i=this.axes[t];if(i)if(i.scale instanceof Of){const{range:s,domain:n}=i.scale;e[t]={type:"log",convert:e=>i.scale.convert(e),domain:[n[0],n[1]],range:[s[0],s[1]]}}else if(i.scale instanceof Gg){const{range:s}=i.scale,n=i.scale.getDomain();e[t]={type:"continuous",domain:[n[0],n[1]],range:[s[0],s[1]]}}else if(i.scale){const{domain:s}=i.scale;e[t]={type:"category",domain:s,range:s.map((e=>i.scale.convert(e)))}}}return e}},tM=["top","right","bottom","left"],iM=class extends yx{constructor(e,t){super(e,t),this.paired=!0,this.firstSeriesTranslation=!0,this.lastUpdateClipRect=void 0,this._lastCrossLineIds=void 0,this._lastAxisAreaWidths=new Map,this._lastClipSeries=!1,this._lastVisibility={crossLines:!0,series:!0}}onAxisChange(e,t){super.onAxisChange(e,t),this.ctx?.zoomManager.updateAxes(e)}destroySeries(e){super.destroySeries(e),this.firstSeriesTranslation=!0}getChartType(){return"cartesian"}setRootClipRects(e){const{seriesRoot:t,annotationRoot:i,highlightRoot:s}=this;t.setClipRect(e),s.setClipRect(e),i.setClipRect(e)}performLayout(e){const{firstSeriesTranslation:t,seriesRoot:i,annotationRoot:s,highlightRoot:n}=this,{seriesRect:o,visibility:r,clipSeries:a}=this.updateAxes(e.layoutBox);this.seriesRoot.visible=r.series,this.seriesRect=o,this.animationRect=e.layoutBox;const{x:l,y:c}=o;if(t){for(const e of[i,s,n])e.translationX=Math.floor(l),e.translationY=Math.floor(c);this.firstSeriesTranslation=!1}else{const{translationX:e,translationY:t}=i;Pg(this.id,"seriesRect",this.ctx.animationManager,[i,n,s],{translationX:e,translationY:t},{translationX:Math.floor(l),translationY:Math.floor(c)},{phase:"update"})}const h=o.clone().grow(this.seriesArea.padding),d=this.seriesArea.clip||a?h:void 0,{lastUpdateClipRect:u}=this;this.lastUpdateClipRect=d,this.ctx.animationManager.isActive()&&null!=u?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:u,to:h,onUpdate:e=>this.setRootClipRects(e),onComplete:()=>this.setRootClipRects(d)}):this.setRootClipRects(d),this.ctx.layoutManager.emitLayoutComplete(e,{axes:this.axes.map((e=>e.getLayoutState())),series:{rect:o,paddedRect:h,visible:r.series,shouldFlipXY:this.shouldFlipXY()},clipSeries:a})}updateAxes(e){const t=this.axes.flatMap((e=>e.crossLines??[])).map((e=>e.id));let i,s,n;null!=this._lastCrossLineIds&&this._lastCrossLineIds.length===t.length&&this._lastCrossLineIds.every(((e,i)=>t[i]===e))?(i=new Map(this._lastAxisAreaWidths.entries()),s=this._lastClipSeries,n={...this._lastVisibility}):(i=new Map,s=!1,n={crossLines:!0,series:!0},this._lastCrossLineIds=t);const o=new Set(this.axes.map((e=>e.position)));for(const p of i.keys())o.has(p)||i.delete(p);const r=(e,t,o)=>{if([...e.keys()].some((e=>!i.has(e))))return!1;if(n.crossLines!==o.crossLines||n.series!==o.series||s!==t)return!1;for(const[s,n]of i.entries()){const t=e.get(s);if((null!=n||null!=t)&&n!==t)return!1}return!0},a=e=>{for(const[t,i]of e.entries())i&&Math.abs(i)===1/0?e.set(t,0):e.set(t,null!=i?Math.ceil(i):i);return e};let l=new Map,c={},h=!1,d=this.seriesRect?.clone(),u=0;do{i=new Map(l.entries()),s=h,Object.assign(n,c);const t=this.updateAxesPass(i,e.clone(),d);if(l=a(t.axisAreaWidths),c=t.visibility,h=t.clipSeries,({seriesRect:d}=t),u++>10){Xd.warn("unable to find stable axis layout.");break}}while(!r(l,h,c));this.axes.forEach((e=>{e.update()}));return this.axes.forEach((t=>{if(t.setCrossLinesVisible(n.crossLines),d)switch(t.clipGrid(d.x,d.y,d.width+5,d.height+5),t.position){case"left":case"right":t.clipTickLines(e.x,d.y,e.width+5,d.height+5);break;case"top":case"bottom":t.clipTickLines(d.x,e.y,d.width+5,e.height+5)}})),this._lastAxisAreaWidths=i,this._lastVisibility=n,this._lastClipSeries=s,{seriesRect:d,visibility:n,clipSeries:s}}updateAxesPass(e,t,i){const s=new Map,n=new Map,o={series:!0,crossLines:!0};let r=!1;const a={},l=this.applySeriesPadding(t),c=i?this.buildCrossLinePadding(e):{},h=this.buildAxisBound(l,e,c,o),d=this.buildSeriesRect(h,e);for(const g of this.axes){const{position:e="left"}=g,{clipSeries:t,axisThickness:i}=this.calculateAxisDimensions({axis:g,seriesRect:d,primaryTickCounts:a,clipSeries:r});s.set(g.id,i),n.has(e)||n.set(e,[]),n.get(e)?.push(g),r=r||t}const u=new Map,p=new Map;for(const[g,m]of n.entries()){const e="left"===g||"right"===g;u.set(g,this.calculateAxisArea(m,s,p,e))}for(const[g,m]of n.entries())this.positionAxes({axes:m,position:g,axisWidths:s,axisOffsets:p,axisAreaWidths:u,axisBound:h,seriesRect:d});return{clipSeries:r,seriesRect:d,axisAreaWidths:u,visibility:o}}buildCrossLinePadding(e){const t={};this.axes.forEach((e=>{e.crossLines?.forEach((e=>{e.calculatePadding?.(t)}))}));for(const[i,s=0]of Object.entries(t))t[i]=Math.max(s-(e.get(i)??0),0);return t}applySeriesPadding(e){const t=e.clone();return tM.forEach((e=>{const i=this.seriesArea.padding[e],s=this.axes.findLast((t=>t.position===e));s?s.seriesAreaPadding=i:t.shrink(i,e)})),t}buildAxisBound(e,t,i,s){const n=e.clone(),{top:o=0,right:r=0,bottom:a=0,left:l=0}=i,c=l+r,h=o+a,d=(t.get("left")??0)+(t.get("right")??0)+c,u=(t.get("top")??0)+(t.get("bottom")??0)+h;return n.width<=d||n.height<=u?(s.crossLines=!1,s.series=!1,n):(n.x+=l,n.y+=o,n.width-=c,n.height-=h,n)}buildSeriesRect(e,t){const i=e.clone();return i.x+=t.get("left")??0,i.y+=t.get("top")??0,i.width-=(t.get("left")??0)+(t.get("right")??0),i.height-=(t.get("top")??0)+(t.get("bottom")??0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(e,t,i,s){const{x:n,y:o,width:r,height:a}=e,l=[n,o,n+r,o+a][("x"===i?0:1)+(1===s?0:2)];return(1===s?Math.min:Math.max)(t,l)}calculateAxisDimensions(e){const{axis:t,seriesRect:i,primaryTickCounts:s}=e;let{clipSeries:n}=e;const{position:o="left",direction:r}=t;this.sizeAxis(t,i,o);const a=this.getSyncedDomain(t),l=t.calculateLayout(a,t.nice?s[r]:void 0),c="y"===r;let h;return s[r]??(s[r]=l.primaryTickCount),n||(n=t.dataDomain.clipped||t.visibleRange[0]>0||t.visibleRange[1]<1),h=null!=t.thickness&&t.thickness>0?t.thickness:c?l.bbox.width:l.bbox.height,h=Math.ceil(h),{clipSeries:n,axisThickness:h}}getSyncedDomain(e){const t=this.modulesManager.getModule("sync");if(!t?.enabled)return;const i=t.getSyncedDomain(e);if(i&&e.dataDomain.domain.length){let s;const{domain:n}=e.scale;if(Gg.is(e.scale)){const[e,t]=cp(i);s=e!==n[0]||t!==n[1]}else s=!Hg(i,n);s&&!this.skipSync&&t.updateSiblings()}return i}sizeAxis(e,t,i){const s=e instanceof NC||e instanceof YC,n="left"===i||"right"===i;let{min:o,max:r}=this.ctx.zoomManager.getAxisZoom(e.id);const{width:a,height:l}=t,c=n?l:a;let h=0,d=c;const{width:u,unit:p,align:g}=e.layoutConstraints;d="px"===p?h+u:d*u/100,"end"===g&&(h=c-(d-h),d=c),s&&n?[o,r]=[1-r,1-o]:n&&([h,d]=[d,h]),e.range=[h,d],e.visibleRange=[o,r],e.gridLength=n?a:l}calculateAxisArea(e,t,i,s){const{width:n,height:o,canvas:r}=this.ctx.scene;let a=s?o%r.pixelRatio:n%r.pixelRatio,l=0;for(const c of e){i.set(c.id,a);const e=t.get(c.id)??0;l=Math.max(l,a+e),c.layoutConstraints.stacked&&(a+=e+15)}return l}positionAxes(e){const{axes:t,axisBound:i,axisWidths:s,axisOffsets:n,axisAreaWidths:o,seriesRect:r,position:a}=e,l=o.get(a)??0;let c="x",h="y",d=1,u=0;"top"!==a&&"bottom"!==a||(c="y",h="x",u+=1),u+=i[c],"right"!==a&&"bottom"!==a||(d=-1,u+="x"===c?i.width:i.height);for(const p of t){const e=o.get("x"===h?"left":"top")??0;p.translation[h]=i[h]+e;const t=s.get(p.id)??0,a=n.get(p.id)??0;p.translation[c]=this.clampToOutsideSeriesRect(r,u+d*(a+t),c,d),p.gridPadding=l-a-t,p.updatePosition()}}shouldFlipXY(){return this.series.every((e=>e instanceof eM&&e.shouldFlipXY()))}};iM.className="CartesianChart",iM.type="cartesian";var sM=class e{constructor(e,t,i){this.factoryApi=t,this.licenseManager=i,this.chart=e}static isInstance(t){return t instanceof e||("AgChartInstanceProxy"===t.constructor?.name&&null!=t.chart||null!=t.chart&&this.validateImplementation(t))}static validateImplementation(e){const t=Object.keys(Object.getPrototypeOf(e)??{});return["getOptions","destroy"].every((e=>t.includes(e)))}async update(e){this.factoryApi.update(e,this),await this.chart.waitForUpdate()}async updateDelta(e){this.factoryApi.updateUserDelta(this,e),await this.chart.waitForUpdate()}getOptions(){const e=Jy(this.chart.getOptions());for(const t in e)t.startsWith("_")&&delete e[t];return e}waitForUpdate(){return this.chart.waitForUpdate()}async download(e){const t=await this.prepareResizedChart(this,e);try{t.chart.download(e?.fileName,e?.fileFormat)}finally{t.destroy()}}async __toSVG(e){const t=await this.prepareResizedChart(this,{width:600,height:300,...e});try{return t.chart.toSVG()}finally{t.destroy()}}async getImageDataURL(e){const t=await this.prepareResizedChart(this,e);try{return t.chart.getCanvasDataURL(e?.fileFormat)}finally{t.destroy()}}getState(){const{factoryApi:{caretaker:e},chart:{ctx:{annotationManager:t}}}=this;return e.save(t)}async setState(e){const{factoryApi:{caretaker:t},chart:{ctx:{annotationManager:i}}}=this;t.restore(e,i),await this.chart.waitForUpdate()}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.chart.publicApi=void 0,this.chart.destroy()}async prepareResizedChart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{chart:i}=e,s=t.width??i.width??i.ctx.scene.canvas.width,n=t.height??i.height??i.ctx.scene.canvas.height,o=e.getState(),r=$C.hasEnterpriseModules(),a={...i.chartOptions.processedOverrides,container:document.createElement("div"),width:s,height:n},l=i.getOptions();r&&(a.animation={enabled:!1},US(l)&&(a.toolbar={enabled:!1}),this.licenseManager?.isDisplayWatermark()&&(a.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));const c={...i.chartOptions.specialOverrides},h={...i.chartOptions.optionMetadata};null!=t.width&&null!=t.height&&(c.overrideDevicePixelRatio=1);const d=await this.factoryApi.create(l,a,c,h);return await d.setState(o),d.chart.ctx.zoomManager.updateZoom("chartProxy",i.ctx.zoomManager.getZoom()),i.series.forEach(((e,t)=>{e.visible||(d.chart.series[t].visible=!1)})),d.chart.update(0,{forceNodeDataRefresh:!0}),await d.waitForUpdate(),d}};sM.chartInstances=new WeakMap,Wd([lv({oldValue(e){e.destroyed||(e.publicApi=void 0),sM.chartInstances.delete(e)},newValue(e){e.publicApi=this,sM.chartInstances.set(e,this)}})],sM.prototype,"chart",2);var nM=sM,oM=class extends KC{constructor(e){super(),this.ctx=e,this.localeText=void 0}};Wd([cv((e=>{e.ctx.localeManager.setLocaleText(e.localeText)})),lm(pm,{optional:!0})],oM.prototype,"localeText",2),Wd([cv((e=>{e.ctx.localeManager.setLocaleTextFormatter(e.getLocaleText)})),lm(mm,{optional:!0})],oM.prototype,"getLocaleText",2);var rM={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new oM(e)},aM=class extends Gg{constructor(){super([0,1],[0,1]),this.type="number"}toDomain(e){return e}ticks(){const e=this.tickCount??Gg.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||!this.domain.every(isFinite))return[];this.refresh();const[t,i]=this.getDomain();if(this.interval){const e=Math.abs(this.interval);if(!Nf((i-t)/e,this.getPixelRange()))return Pf(t,i,e)}return Ef(t,i,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(e,t){return this.interval??Lf(e,t,this.tickCount,this.minTickCount,this.maxTickCount)}updateNiceDomain(){const e=this.tickCount;if(e<1)return void(this.niceDomain=[...this.domain]);let[t,i]=this.domain;if(1===e)[t,i]=function(e,t){const i=Math.abs(t-e),s=10**Math.floor(Math.log10(i));let n=1/0,o=[e,t];for(const r of If){const a=r*s,l=Math.floor(e/a)*a,c=Math.ceil(t/a)*a,h=1-i/Math.abs(c-l);n>h&&(n=h,o=[l,c])}return o}(t,i);else{const e=t>i?Math.ceil:Math.floor,s=i<t?Math.floor:Math.ceil,n=4;for(let o=0;o<n;o++){const n=t,o=i,r=this.getTickStep(t,i),[a,l]=this.domain;if(r>=1)t=e(a/r)*r,i=s(l/r)*r;else{const n=1/r;t=e(a*n)/n,i=s(l*n)/n}if(t===n&&i===o)break}}this.niceDomain=[t,i]}tickFormat(e){let{ticks:t,specifier:i}=e;return Tf(t??this.ticks(),i)}};function lM(e,t,i){let[s,n]=cp(e);s=function(e,t,i){const s=Math.abs(t-e)/(i-1),n=Math.floor(Math.log10(s)),o=Math.pow(10,n);return Math.floor(e/o)*o}(Math.floor(s),n,t);const o=function(e,t,i){const s=i-1,n=(t-e)/s;return function(e){const t=Math.floor(Math.log10(e)),i=Math.pow(10,t),s=e/i*10;if(s>0&&s<=1)return i/10;if(s>1&&s<=2)return 2*i/10;if(s>1&&s<=5)return 5*i/10;if(s>5&&s<=10)return 10*i/10;if(s>10&&s<=20)return 20*i/10;if(s>20&&s<=40)return 40*i/10;if(s>40&&s<=50)return 50*i/10;if(s>50&&s<=100)return 100*i/10;return s}(n)}(s,n,t);n=s+(t-1)*o;const r=i?[n,s]:[s,n],a=function(e,t,i){const s=Math.floor(Math.log10(t)),n=t>0&&t<1?Math.abs(s):0,o=Math.pow(10,n),r=[];for(let a=0;a<i;a++){const i=e+t*a;r[a]=Math.round(i*o)/o}return r}(s,o,t);return{domain:r,ticks:a}}var cM=class extends TC{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new aM),this.min=NaN,this.max=NaN}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:n}=zg(e,t,i);return{domain:s,clipped:n}}updateSecondaryAxisTicks(e){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(0===this.dataDomain.domain.length)return[];const{domain:t,ticks:i}=lM(this.dataDomain.domain,e??0,this.reverse);return this.scale.nice=!1,this.scale.domain=t,this.scale.update(),i}};cM.className="NumberAxis",cM.type="number",Wd([lm(hm(xm,Rm("max"))),uC(NaN)],cM.prototype,"min",2),Wd([lm(hm(xm,Em("min"))),uC(NaN)],cM.prototype,"max",2);var hM=nf((e=>qp(e)&&0!==e),"a non-zero number"),dM=class extends cM{constructor(e){super(e,new Of),this.min=NaN,this.max=NaN}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:n}=zg(e,t,i),o=s[0]>s[1],r=s[0]<0&&s[1]>0,a=0===s[0]&&0===s[1];return(o||r||a)&&(r?Xd.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):a&&Xd.warn("the data domain has 0 extent, no data is rendered.")),0===s[0]&&(s[0]=1),0===s[1]&&(s[1]=-1),{domain:s,clipped:n}}set base(e){this.scale.base=e}get base(){return this.scale.base}};dM.className="LogAxis",dM.type="log",Wd([lm(hm(xm,hM,Rm("max"))),uC(NaN)],dM.prototype,"min",2),Wd([lm(hm(xm,hM,Em("min"))),uC(NaN)],dM.prototype,"max",2);var uM=class extends TC{constructor(e){super(e,new Gf),this.min=void 0,this.max=void 0}normaliseDataDomain(e){let{min:t,max:i}=this,s=!1;return"number"===typeof t&&(t=new Date(t)),"number"===typeof i&&(i=new Date(i)),e.length>2&&(e=Bg(e)?.map((e=>new Date(e)))??[]),t instanceof Date&&(s||(s=t>e[0]),e=[t,e[1]]),i instanceof Date&&(s||(s=i<e[1]),e=[e[0],i]),e[0]>e[1]&&(e=[]),{domain:e,clipped:s}}onFormatChange(e,t,i,s){s?super.onFormatChange(e,t,i,s):(this.labelFormatter=this.scale.tickFormat({ticks:e,domain:i}),this.datumFormatter=this.scale.tickFormat({ticks:e,domain:i,formatOffset:1}))}};uM.className="TimeAxis",uM.type="time",Wd([lm(hm(Lm,Rm("max")),{optional:!0})],uM.prototype,"min",2),Wd([lm(hm(Lm,Em("min")),{optional:!0})],uM.prototype,"max",2);var pM=(e,t,i,s)=>{let{x0:n,y0:o,x1:r,y1:a,cx:l,cy:c}=t;if(s&&e.moveTo(n,o),n!==r||o!==a){const t=Math.atan2(o-c,n-l),s=Math.atan2(a-c,r-l);e.arc(l,c,i,t,s)}else e.lineTo(n,o)},gM=1e-6,mM=(e,t,i,s,n)=>{let o=!1,r=!1,a=s-Math.sqrt(Math.max(n**2-i**2,0)),l=0,c=0,h=i-Math.sqrt(Math.max(n**2-s**2,0));return a>e?(o=!0,a=e,l=i-Math.sqrt(Math.max(n**2-(s-e)**2))):a<gM&&(a=0),h>t?(r=!0,c=s-Math.sqrt(Math.max(n**2-(i-t)**2)),h=t):h<gM&&(h=0),{leading0:a,leading1:l,trailing0:c,trailing1:h,leadingClipped:o,trailingClipped:r}},fM=(e,t,i,s,n,o,r)=>{let{topLeft:a,topRight:l,bottomRight:c,bottomLeft:h}=o;const d=Math.max(a+h,l+c),u=Math.max(a+l,h+c);if(d<=0&&u<=0)return void(null==r?e.rect(t,i,s,n):e.rect(r.x,r.y,r.width,r.height));if(null==r&&a===l&&a===c&&a===h)return void e.roundRect(t,i,s,n,a);if(s<0&&(t+=s,s=Math.abs(s)),n<0&&(i+=n,n=Math.abs(n)),s<=0||n<=0)return;if(null==r)r=new bp(t,i,s,n);else{const e=Math.max(t,r.x),o=Math.min(t+s,r.x+r.width),a=Math.max(i,r.y),l=Math.min(i+n,r.y+r.height);r=new bp(e,a,o-e,l-a)}const p=Math.max(d/n,u/s,1);p>1&&(a/=p,l/=p,c/=p,h/=p);let g,m,f,y,v=!0,C=!0,b=!0,w=!0;if(v){const e=mM(r.height,r.width,Math.max(t+a-r.x,0),Math.max(i+a-r.y,0),a);e.leadingClipped&&(w=!1),e.trailingClipped&&(C=!1);g={x0:Math.max(r.x+e.leading1,r.x),y0:Math.max(r.y+e.leading0,r.y),x1:Math.max(r.x+e.trailing1,r.x),y1:Math.max(r.y+e.trailing0,r.y),cx:t+a,cy:i+a}}if(C){const e=mM(r.width,r.height,Math.max(i+l-r.y,0),Math.max(r.x+r.width-(t+s-l),0),l);e.leadingClipped&&(v=!1),e.trailingClipped&&(b=!1);m={x0:Math.min(r.x+r.width-e.leading0,r.x+r.width),y0:Math.max(r.y+e.leading1,r.y),x1:Math.min(r.x+r.width-e.trailing0,r.x+r.width),y1:Math.max(r.y+e.trailing1,r.y),cx:t+s-l,cy:i+l}}if(b){const e=mM(r.height,r.width,Math.max(r.x+r.width-(t+s-c),0),Math.max(r.y+r.height-(i+n-c),0),c);e.leadingClipped&&(C=!1),e.trailingClipped&&(w=!1);f={x0:Math.min(r.x+r.width-e.leading1,r.x+r.width),y0:Math.min(r.y+r.height-e.leading0,r.y+r.height),x1:Math.min(r.x+r.width-e.trailing1,r.x+r.width),y1:Math.min(r.y+r.height-e.trailing0,r.y+r.height),cx:t+s-c,cy:i+n-c}}if(w){const e=mM(r.width,r.height,Math.max(r.y+r.height-(i+n-h),0),Math.max(t+h-r.x,0),h);e.leadingClipped&&(b=!1),e.trailingClipped&&(v=!1);y={x0:Math.max(r.x+e.leading0,r.x),y0:Math.min(r.y+r.height-e.leading1,r.y+r.height),x1:Math.max(r.x+e.trailing0,r.x),y1:Math.min(r.y+r.height-e.trailing1,r.y+r.height),cx:t+h,cy:i+n-h}}let S=!1;v&&null!=g&&(pM(e,g,a,!S),S||(S=!0)),C&&null!=m&&(pM(e,m,l,!S),S||(S=!0)),b&&null!=f&&(pM(e,f,c,!S),S||(S=!0)),w&&null!=y&&(pM(e,y,h,!S),S||(S=!0)),e.closePath()},yM=class extends $b{constructor(){super(...arguments),this.borderPath=new Kb,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=Fy.defaultStyles.strokeWidth,this.effectiveStrokeWidth=Fy.defaultStyles.strokeWidth,this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint,this.microPixelEffectOpacity=1}set cornerRadius(e){this.topLeftCornerRadius=e,this.topRightCornerRadius=e,this.bottomRightCornerRadius=e,this.bottomLeftCornerRadius=e}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||Boolean(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){const{path:e,borderPath:t,crisp:i,topLeftCornerRadius:s,topRightCornerRadius:n,bottomRightCornerRadius:o,bottomLeftCornerRadius:r}=this;let{x:a,y:l,width:c,height:h,strokeWidth:d,clipBBox:u}=this;const p=1/(this.layerManager?.canvas.pixelRatio??1);let g=1;if(e.clear(!0),t.clear(!0),i&&(c<=p&&(g*=c/p),h<=p&&(g*=h/p),c=this.align(a,c),h=this.align(l,h),a=this.align(a),l=this.align(l),u=null!=u?new bp(this.align(u.x),this.align(u.y),this.align(u.x,u.width),this.align(u.y,u.height)):void 0),d)if(c<p){const e=a+p/2;t.moveTo(e,l),t.lineTo(e,l+h),d=p,this.borderClipPath=void 0}else if(h<p){const e=l+p/2;t.moveTo(a,e),t.lineTo(a+c,e),d=p,this.borderClipPath=void 0}else if(d<c&&d<h){const i=d/2;a+=i,l+=i,c-=d,h-=d;const p=u?.clone().shrink(i),g={topLeft:s>0?s-d:0,topRight:n>0?n-d:0,bottomRight:o>0?o-d:0,bottomLeft:r>0?r-d:0};this.borderClipPath=void 0,c>0&&h>0&&(null==p||p?.width>0&&p?.height>0)&&(fM(e,a,l,c,h,g,p),fM(t,a,l,c,h,g,p))}else this.borderClipPath=this.borderClipPath??new Kb,this.borderClipPath.clear(!0),this.borderClipPath.rect(a,l,c,h),t.rect(a,l,c,h);else{const t={topLeft:s,topRight:n,bottomRight:o,bottomLeft:r};this.borderClipPath=void 0,fM(e,a,l,c,h,t,u)}if([s,n,o,r].every((e=>0===e))){const e=this.getBBox();this.hittester=e.containsPoint.bind(e),this.distanceSquared=(e,t)=>this.getBBox().distanceSquared(e,t)}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=d,this.lastUpdatePathStrokeWidth=d,this.microPixelEffectOpacity=g}computeBBox(){const{x:e,y:t,width:i,height:s,clipBBox:n}=this;return n?.clone()??new bp(e,t,i,s)}isPointInPath(e,t){return this.hittester(e,t)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(e,t){return this.distanceCalculator(e,t)}applyFillAlpha(e){const{fillOpacity:t,microPixelEffectOpacity:i,opacity:s}=this;e.globalAlpha*=s*t*i}renderStroke(e){const{stroke:t,effectiveStrokeWidth:i}=this;if(t&&i){const{globalAlpha:s}=e,{strokeOpacity:n,lineDash:o,lineDashOffset:r,lineCap:a,lineJoin:l,borderPath:c,borderClipPath:h,opacity:d,microPixelEffectOpacity:u}=this;h&&e.clip(h.getPath2D()),e.strokeStyle=t,e.globalAlpha*=d*n*u,e.lineWidth=i,o&&e.setLineDash(o),r&&(e.lineDashOffset=r),a&&(e.lineCap=a),l&&(e.lineJoin=l),e.stroke(c.getPath2D()),e.globalAlpha=s}}};yM.className="Rect",Wd([Zb()],yM.prototype,"x",2),Wd([Zb()],yM.prototype,"y",2),Wd([Zb()],yM.prototype,"width",2),Wd([Zb()],yM.prototype,"height",2),Wd([Zb()],yM.prototype,"topLeftCornerRadius",2),Wd([Zb()],yM.prototype,"topRightCornerRadius",2),Wd([Zb()],yM.prototype,"bottomRightCornerRadius",2),Wd([Zb()],yM.prototype,"bottomLeftCornerRadius",2),Wd([Zb()],yM.prototype,"clipBBox",2),Wd([Zb()],yM.prototype,"crisp",2);var vM=class extends KC{constructor(e){super(),this.ctx=e,this.rectNode=new yM,this.textNode=new Wy,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.destroyFns.push(e.scene.attachNode(this.node),e.layoutManager.addListener("layout:complete",(e=>this.onLayoutComplete(e))))}createNode(){return new ny({name:"background",zIndex:0})}onLayoutComplete(e){const{width:t,height:i}=e.chart;this.rectNode.width=t,this.rectNode.height=i}};Wd([lm(gm),av("node","visible")],vM.prototype,"visible",2),Wd([lm(Tm,{optional:!0}),av("rectNode","fill")],vM.prototype,"fill",2),Wd([lm(um,{optional:!0})],vM.prototype,"image",2),Wd([lm(fm,{optional:!0}),av("textNode")],vM.prototype,"text",2);var CM={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new vM(e)};function bM(e){let{orientation:t,bboxes:i,maxHeight:s,maxWidth:n,itemPaddingY:o=0,itemPaddingX:r=0,forceResult:a=!1}=e;const l="horizontal"===t,c={max:l?n:s,fn:l?e=>e.width:e=>e.height,padding:l?r:o},h={max:l?s:n,fn:l?e=>e.height:e=>e.width,padding:l?o:r};let d=0;const u=[];for(;d<i.length;){const e=wM(i.slice(d),d,c,h,a);if(!e)return;d+=e.processedBBoxCount,u.push(e.pageIndices)}return function(e,t,i,s,n){let o=0,r=0;const a=e.map((e=>{"horizontal"===t&&(e=function(e){const t=[];for(const i of e[0])t.push([]);return e.forEach(((e,i)=>{e.forEach(((e,s)=>{t[s][i]=e}))})),t}(e));let a=0;const l=e.map((e=>{const t=e.map((e=>(a=Math.max(e,a),i[e])));let o=0,r=0;return t.forEach((e=>{o+=e.height+s,r=Math.max(r,e.width+n)})),{indices:e,bboxes:t,columnHeight:Math.ceil(o),columnWidth:Math.ceil(r)}}));let c=0,h=0;return l.forEach((e=>{c+=e.columnWidth,h=Math.max(h,e.columnHeight)})),o=Math.max(c,o),r=Math.max(h,r),{columns:l,startIndex:e[0][0],endIndex:a,pageWidth:c,pageHeight:h}}));return{pages:a,maxPageWidth:o,maxPageHeight:r}}(u,t,i,o,r)}function wM(e,t,i,s,n){let o=function(e,t){const i=e.length;let s=0;for(let n=0;n<i;n++)if(s+=t.fn(e[n])+t.padding,s>t.max){return i/n<2?Math.ceil(i/2):n}return i}(e,i);if(o<1){if(!n)return;o=1}let r=o;for(;r>=1;){const o=SM(e,t,r,i,s,n);if(null==o&&r<=1)return;if(null==o){r--;continue}if("number"===typeof o){if(o<=1)return;r=o<r&&o>1?o:r,r--;continue}return{processedBBoxCount:o.length*o[0].length,pageIndices:o}}}function SM(e,t,i,s,n,o){const r=[];let a=0,l=0,c=[];const h=[];for(let d=0;d<e.length;d++){const u=(d+i)%i;0===u&&(a+=l,l=0,c.length>0&&r.push(c),c=[]);const p=s.fn(e[d])+s.padding;h[u]=Math.max(h[u]??0,p),l=Math.max(l,n.fn(e[d])+n.padding);const g=a+l,m=!o||r.length>0;if(g>n.max&&m){c=[];break}if(h.reduce(((e,t)=>e+t),0)>s.max&&!o)return h.length<i?h.length:void 0;c.push(d+t)}return c.length>0&&r.push(c),r.length>0?r:void 0}var xM=class extends Ip{constructor(e){super(),this.sourceImage=e,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}updateBitmap(e,t,i,s){this.sourceImage=e,this.width=e.width/t,this.height=e.height/t,this.x=i/t,this.y=s/t,this.markDirty(3)}render(e){const{ctx:t,forceRender:i,stats:s}=e;if(0===this.dirty&&!i)return void(s&&s.nodesSkipped++);const n=this.sourceImage;n&&(t.globalAlpha=this.opacity,t.drawImage(n,0,0,n.width,n.height,this.x,this.y,this.width,this.height),super.render(e))}};Wd([Sp({redraw:3})],xM.prototype,"x",2),Wd([Sp({redraw:3})],xM.prototype,"y",2),Wd([Sp({redraw:3})],xM.prototype,"width",2),Wd([Sp({redraw:3})],xM.prototype,"height",2),Wd([Sp({redraw:3})],xM.prototype,"opacity",2);var MM=class extends(ty(ny)){constructor(){super({name:"markerLabelGroup"}),this.label=new Wy,this.symbolsGroup=new ny({name:"legend-markerLabel-symbols"}),this.bitmap=new xM,this.bitmapDirty=!0,this.enabled=!0,this.pageIndex=NaN,this._markers=[],this._lines=[];const{markers:e,label:t,lines:i}=this;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=1,this.updateSymbols(e,i),this.append([this.symbolsGroup,t])}destroy(){super.destroy(),this.destroyProxyButton()}destroyProxyButton(){this.proxyButton?.button.remove(),this.proxyButton?.listitem.remove(),this.proxyButton=void 0}get markers(){return this._markers}get lines(){return this._lines}updateSymbols(e,t){Hg(this._markers,e)&&Hg(this._lines,t)||(this.bitmapDirty=!0,this._markers=e,this._lines=t,this.symbolsGroup.clear(),this.symbolsGroup.append([this.bitmap,...t,...e]))}setEnabled(e){this.enabled=e,this.refreshVisibilities()}refreshVisibilities(){const e=this.enabled?1:.5;this.label.opacity=e,this.opacity=e,this.bitmap.opacity=e,this.setBitmapVisibility(!this.enabled)}setBitmapVisibility(e){const{lines:t,markers:i}=this;[t,i].forEach((t=>t.forEach((t=>t.visible=!e)))),this.bitmap.visible=e}update(e,t,i){let{spriteAAPadding:s,spritePixelRatio:n}=t;const{markers:o,lines:r}=this;let a=0,l=0,c=0;for(let v=0;v<Math.max(o.length,r.length);v++){const{length:e,spacing:t,isCustomMarker:s}=i[v]??0,n=o[v],h=r[v],d=n?.size??0;let u=1/0,p=1/0,g=1/0,m=1/0,f=1/0;if(n){const t=n.constructor.center,i=(d+n.strokeWidth)/2;s?(n.x=0,n.y=0,n.translationX=(t.x-.5)*d+e/2+c,n.translationY=(t.y-.5)*d,m=n.translationY-i,f=n.translationX-i):(n.x=(t.x-.5)*d+e/2+c,n.y=(t.y-.5)*d,m=n.y-i,f=n.x-i)}h&&(h.x1=c,h.x2=c+e,h.y1=0,h.y2=0,h.markDirty(3),u=-h.strokeWidth/2,p=h.x1,g=h.x2),c+=t+Math.max(e,d),a=Math.min(a,p,g,f),l=Math.min(l,u,m)}const h=i.at(-1),d=this.lines.at(-1),u=this.markers.at(-1),p=d?d.x2:-1/0,g=(u?.x??0)+(u?.size??0)/2;if(this.label.x=Math.max(p,g)+(h?.spacing??0),this.bitmapDirty){this.setBitmapVisibility(!1);const t=(s+a)*n,i=(s-l)*n,o=e.renderSprite(this.symbolsGroup,{scale:n,translateX:Math.floor(t),translateY:Math.floor(i)});this.bitmap.updateBitmap(o,n,Math.ceil(-t),Math.ceil(-i)),this.bitmapDirty=!1,this.refreshVisibilities()}if(i.length<2)return;const m=this.symbolsGroup.getBBox(),f=Math.max(u?.size??0,h?.length??0),y=new bp(m.x+f/2,m.y,f,m.height);this.symbolsGroup.setClipRect(y)}computeBBox(){const{label:e,lines:t,markers:i}=this;return this.toParent(ny.computeChildrenBBox(Wu([e],t,i),!1))}};MM.className="MarkerLabel",Wd([av("label")],MM.prototype,"text",2),Wd([av("label")],MM.prototype,"fontStyle",2),Wd([av("label")],MM.prototype,"fontWeight",2),Wd([av("label")],MM.prototype,"fontSize",2),Wd([av("label")],MM.prototype,"fontFamily",2),Wd([av("label","fill")],MM.prototype,"color",2);var DM=class extends om{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};Wd([lm(Tm)],DM.prototype,"color",2),Wd([lm(Um,{optional:!0})],DM.prototype,"fontStyle",2),Wd([lm(_m,{optional:!0})],DM.prototype,"fontWeight",2),Wd([lm(bm)],DM.prototype,"fontSize",2),Wd([lm(fm)],DM.prototype,"fontFamily",2);var IM=class extends om{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};Wd([lm(bm)],IM.prototype,"size",2),Wd([lm(Tm,{optional:!0})],IM.prototype,"fill",2),Wd([lm(wm,{optional:!0})],IM.prototype,"fillOpacity",2),Wd([lm(Tm,{optional:!0})],IM.prototype,"stroke",2),Wd([lm(bm)],IM.prototype,"strokeWidth",2),Wd([lm(wm)],IM.prototype,"strokeOpacity",2);var RM=class extends om{constructor(e){super(),this.parent=e,this.shape=Bx,this.size=15,this.padding=8}};Wd([lv({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],RM.prototype,"shape",2),Wd([lm(bm)],RM.prototype,"size",2),Wd([lm(bm)],RM.prototype,"padding",2);var EM=class extends om{constructor(e,t){super(),this.chartUpdateCallback=e,this.pageUpdateCallback=t,this.id=Vu(this),this.marker=new RM(this),this.activeStyle=new IM,this.inactiveStyle=new IM,this.highlightStyle=new IM,this.label=new DM,this.group=new ay({name:"pagination"}),this.labelNode=new Wy,this.destroyFns=[],this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new Bx,this._previousButton=new Bx,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}destroy(){this.destroyFns.forEach((e=>e()))}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){if(this._orientation=e,"horizontal"===e)this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;else this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}get orientation(){return this._orientation}set nextButton(e){this._nextButton!==e&&(this.group.removeChild(this._nextButton),this._nextButton=e,this.group.appendChild(e))}get nextButton(){return this._nextButton}set previousButton(e){this._previousButton!==e&&(this.group.removeChild(this._previousButton),this._previousButton=e,this.group.appendChild(e))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:e,padding:t}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+t}updateNextButtonPosition(){const e=this.labelNode.getBBox();this.nextButton.translationX=e.width+2*(this.marker.size/2+this.marker.padding)}updateLabel(){const{currentPage:e,totalPages:t,labelNode:i,label:{color:s,fontStyle:n,fontWeight:o,fontSize:r,fontFamily:a}}=this;i.text=`${e+1} / ${t}`,i.fill=s,i.fontStyle=n,i.fontWeight=o,i.fontSize=r,i.fontFamily=a}updateMarkers(){const{nextButton:e,previousButton:t,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:n,inactiveStyle:o,highlightStyle:r,highlightActive:a}=this,l=(e,t)=>t?o:e===a?r:n;this.updateMarker(e,l("next",i)),this.updateMarker(t,l("previous",s))}updateMarker(e,t){const{size:i}=this.marker;e.size=i,e.fill=t.fill,e.fillOpacity=t.fillOpacity??1,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.strokeOpacity=t.strokeOpacity}enableOrDisableButtons(){const{currentPage:e,totalPages:t}=this,i=0===t,s=e===t-1,n=0===e;this.nextButtonDisabled=s||i,this.previousButtonDisabled=n||i}setPage(e){e=ap(0,e,this.totalPages-1),this.currentPage!==e&&(this.currentPage=e,this.onPaginationChanged())}getCursor(e){return{previous:this.previousButtonDisabled,next:this.nextButtonDisabled}[e]?void 0:"pointer"}onClick(e,t){e.preventDefault(),"next"!==t||this.nextButtonDisabled?"previous"!==t||this.previousButtonDisabled||(this.decrementPage(),this.onPaginationChanged()):(this.incrementPage(),this.onPaginationChanged())}onMouseHover(e){this.highlightActive=e,this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const e=Jf(jx(this.marker.shape||Bx));this.previousButton=new e,this.nextButton=new e,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(e){e.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){return{prev:iy.toCanvas(this.previousButton),next:iy.toCanvas(this.nextButton)}}};EM.className="Pagination",Wd([lm(um)],EM.prototype,"marker",2),Wd([lm(um)],EM.prototype,"activeStyle",2),Wd([lm(um)],EM.prototype,"inactiveStyle",2),Wd([lm(um)],EM.prototype,"highlightStyle",2),Wd([lm(um)],EM.prototype,"label",2);var AM=class extends om{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};Wd([lm(bm,{optional:!0})],AM.prototype,"maxLength",2),Wd([lm(Tm)],AM.prototype,"color",2),Wd([lm(Um,{optional:!0})],AM.prototype,"fontStyle",2),Wd([lm(_m,{optional:!0})],AM.prototype,"fontWeight",2),Wd([lm(bm)],AM.prototype,"fontSize",2),Wd([lm(fm)],AM.prototype,"fontFamily",2),Wd([lm(mm,{optional:!0})],AM.prototype,"formatter",2);var LM=class extends om{constructor(){super(...arguments),this.size=15,this.padding=8}};Wd([cv((e=>e.parent?.onMarkerShapeChange()))],LM.prototype,"shape",2),Wd([lm(bm)],LM.prototype,"size",2),Wd([lm(bm)],LM.prototype,"padding",2),Wd([lm(bm,{optional:!0})],LM.prototype,"strokeWidth",2),Wd([lm(gm)],LM.prototype,"enabled",2);var kM=class extends om{};Wd([lm(bm,{optional:!0})],kM.prototype,"strokeWidth",2),Wd([lm(bm,{optional:!0})],kM.prototype,"length",2);var TM=class extends om{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new LM,this.label=new AM,this.line=new kM}};Wd([lm(bm,{optional:!0})],TM.prototype,"maxWidth",2),Wd([lm(bm)],TM.prototype,"paddingX",2),Wd([lm(bm)],TM.prototype,"paddingY",2),Wd([lm(gm)],TM.prototype,"showSeriesStroke",2),Wd([lm(um)],TM.prototype,"marker",2),Wd([lm(um)],TM.prototype,"label",2),Wd([lm(um)],TM.prototype,"line",2);var PM=class extends om{};Wd([lm(mm,{optional:!0})],PM.prototype,"legendItemClick",2),Wd([lm(mm,{optional:!0})],PM.prototype,"legendItemDoubleClick",2);var NM="legend-visibility",FM="legend-other-series",OM=class{constructor(e,t,i,s,n){this.type=e,this.enabled=t,this.itemId=i,this.seriesId=s,this.event=n,this.defaultPrevented=!1}preventDefault(){this.defaultPrevented=!0}},GM=class extends om{constructor(e){super(),this.ctx=e,this.id=Vu(this),this.group=new kv({name:"legend",zIndex:15}),this.itemSelection=dy.select(this.group,MM),this.spriteRenderer=void 0,this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this._symbolsDirty=!0,this.toggleSeries=!0,this.item=new TM,this.listeners=new PM,this.enabled=!0,this.position="bottom",this.spacing=20,this.destroyFns=[],this.proxyLegendDirty=!0,this.proxyLegendToolbarDestroyFns=new hb,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new EM((t=>e.updateService.update(t)),(e=>this.updatePageNumber(e))),this.pagination.attachPagination(this.group),this.destroyFns.push(e.contextMenuRegistry.registerDefaultAction({id:NM,type:"legend",label:"contextMenuToggleSeriesVisibility",action:e=>this.contextToggleVisibility(e)}),e.contextMenuRegistry.registerDefaultAction({id:FM,type:"legend",label:"contextMenuToggleOtherSeries",action:e=>this.contextToggleOtherSeries(e)})),this.destroyFns.push(e.layoutManager.registerElement(1,(e=>this.positionLegend(e))),e.localeManager.addListener("locale-changed",(()=>this.onLocaleChanged())),(()=>this.group.remove())),this.proxyLegendToolbar=this.ctx.proxyInteractionService.createProxyContainer({type:"list",id:`${this.id}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"},ariaHidden:!0}),this.proxyLegendPagination=this.ctx.proxyInteractionService.createProxyContainer({type:"group",id:`${this.id}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"},ariaOrientation:"horizontal",ariaHidden:!0}),this.proxyLegendItemDescription=qu("p"),this.proxyLegendItemDescription.style.display="none",this.proxyLegendItemDescription.id=`${this.id}-ariaDescription`,this.proxyLegendItemDescription.textContent=this.getItemAriaDescription(),this.proxyLegendToolbar.append(this.proxyLegendItemDescription)}set data(e){this.onDataUpdate(this._data,e),this._data=e,this._symbolsDirty=!0,this.updateGroupVisibility()}get data(){return this._data}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.destroyFns.forEach((e=>e())),this.pagination.destroy(),this.itemSelection.clear(),this.proxyLegendToolbarDestroyFns.destroy()}initLegendItemToolbar(){if(!this.proxyLegendDirty)return;this.itemSelection.each(((e,t,i)=>{e.destroyProxyButton(),e.proxyButton??(e.proxyButton=this.ctx.proxyInteractionService.createProxyElement({type:"listswitch",id:`ag-charts-legend-item-${i}`,textContent:this.getItemAriaText(i),ariaChecked:!!e.datum.enabled,ariaDescribedBy:this.proxyLegendItemDescription.id,parent:this.proxyLegendToolbar,onclick:t=>this.onClick(t,e.datum,e.proxyButton.button),ondblclick:t=>this.onDoubleClick(t,e.datum),onmouseenter:t=>this.onHover(t,e),onmouseleave:()=>this.onLeave(),oncontextmenu:t=>this.onContextClick(t,e),onblur:()=>this.onLeave(),onfocus:t=>this.onHover(t,e)}))}));const e=this.itemSelection.nodes().map((e=>e.proxyButton?.button)).filter(Vp);this.proxyLegendToolbarDestroyFns.setFns([...Db({orientation:"horizontal",buttons:e}),...Db({orientation:"vertical",buttons:e})]),this.proxyLegendToolbar.ariaHidden=(0===e.length).toString(),this.proxyLegendDirty=!1}onDataUpdate(e,t){this.proxyLegendDirty=e.length!==t.length||e.some(((i,s,n)=>{const[o,r]=[t[s],e[s]];return o.id!==r.id}))}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(2)}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(e){e.appendChild(this.group)}getItemLabel(e){const{ctx:{callbackCache:t}}=this,{formatter:i}=this.item.label;return i?t.call(i,{itemId:e.itemId,value:e.label.text,seriesId:e.seriesId}):e.label.text}calcLayout(e,t){const{paddingX:i,paddingY:s,label:n,maxWidth:o,label:{maxLength:r=1/0,fontStyle:a,fontWeight:l,fontSize:c,fontFamily:h}}=this.item,d=[...this.data];this.reverseOrder&&d.reverse(),this.itemSelection.update(d),this.initLegendItemToolbar();const u=[],p=Hy.toFontString(n),g=o??.8*e,m=this.calculateSpriteDimensions();if(this.spriteRenderer??(this.spriteRenderer=new cw),this.spriteRenderer.resize(m),this.itemSelection.each(((e,t)=>{e.fontStyle=a,e.fontWeight=l,e.fontSize=c,e.fontFamily=h;const i=this.updateMarkerLabel(this.spriteRenderer,e,t,m),s=t.itemId??t.id,n=(this.getItemLabel(t)??"<unknown>").replace(/\r?\n/g," ");e.text=this.truncate(n,r,g,i,p,s),u.push(e.getBBox())})),this._symbolsDirty=!1,e=Math.max(1,e),t=Math.max(1,t),!isFinite(e))return{};const f=this.size,y=this.oldSize;f[0]=e,f[1]=t,f[0]===y[0]&&f[1]===y[1]||(y[0]=f[0],y[1]=f[1]);const{pages:v,maxPageHeight:C,maxPageWidth:b}=this.updatePagination(u,e,t),w=this.pages;this.pages=v,this.maxPageSize=[b-i,C-s];const S=this.pagination.currentPage,x=this.pages[S];return this.pages.length<1||!x?(this.visible=!1,{oldPages:w}):(this.visible=!0,this.updatePositions(S),this.update(),{oldPages:w})}isCustomMarker(e,t){return e&&void 0!==t&&"string"!==typeof t}calcSymbolsEnabled(e){const{showSeriesStroke:t,marker:i}=this.item,s=!!i.enabled||!t||(e.marker.enabled??!0);return{markerEnabled:s,lineEnabled:!(!e.line||!t),isCustomMarker:this.isCustomMarker(s,e.marker.shape)}}calcSymbolsLengths(e){const{marker:t,line:i}=this.item,{markerEnabled:s,lineEnabled:n}=this.calcSymbolsEnabled(e),{strokeWidth:o}=this.getMarkerStyles(e),{strokeWidth:r}=n?this.getLineStyles(e):{strokeWidth:0};let a;const{shape:l}=e.marker;if(this.isCustomMarker(s,l)){const e=new l;e.updatePath();const t=e.getBBox();a=Math.max(t.width,t.height)}return{markerLength:s?t.size:0,markerStrokeWidth:o,lineLength:n?i.length??25:0,lineStrokeWidth:r,customMarkerSize:a}}calculateSpriteDimensions(){let e=0,t=0,i=0,s=0;this.itemSelection.each(((n,o)=>{o.symbols.forEach((n=>{const{markerLength:o,markerStrokeWidth:r,lineLength:a,lineStrokeWidth:l,customMarkerSize:c=-1/0}=this.calcSymbolsLengths(n),h=o+r;s=Math.max(s,a,c,o),t=Math.max(t,a,c,h),i=Math.max(i,l,h),e=Math.max(e,r+.5)}))})),t+=2*e,i+=2*e;return{spritePixelRatio:Xu().devicePixelRatio,spriteAAPadding:e,spriteWidth:t,spriteHeight:i,markerWidth:s}}updateMarkerLabel(e,t,i,s){const{marker:n,paddingX:o}=this.item,{markerWidth:r}=s,a=[];let l=o;if(this._symbolsDirty){const e=[],s=[];i.symbols.forEach((t=>{const{shape:i=t.marker.shape}=n,o=jx(i);s.push(new Oy({zIndex:0})),e.push(new o({zIndex:1}))})),t.updateSymbols(e,s)}return i.symbols.forEach(((e,i)=>{const s=e.marker.padding??n.padding,{markerEnabled:o,lineEnabled:c,isCustomMarker:h}=this.calcSymbolsEnabled(e);t.markers[i].size=o||!c?n.size:0,a.push({length:r,spacing:s,isCustomMarker:h}),(o||c)&&(l+=s+r);const d=t.markers[i],u=t.lines[i];if(d){const{strokeWidth:t,fill:i,stroke:s,fillOpacity:n,strokeOpacity:o}=this.getMarkerStyles(e);d.fill=i,d.stroke=s,d.strokeWidth=t,d.fillOpacity=n,d.strokeOpacity=o}if(u){const t=this.getLineStyles(e);u.stroke=t.stroke,u.strokeOpacity=t.strokeOpacity,u.strokeWidth=t.strokeWidth,u.lineDash=t.lineDash}})),t.update(e,s,a),l}truncate(e,t,i,s,n,o){let r=!1;e.length>t&&(e=e.substring(0,t),r=!0);const a=By.getMeasurer({font:n}),l=gv.truncateLine(e,a,i-s,r);return l.endsWith(Hy.EllipsisChar)?this.truncatedItems.add(o):this.truncatedItems.delete(o),l}updatePagination(e,t,i){const s=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:o,maxPageHeight:r,maxPageWidth:a,paginationBBox:l,paginationVertical:c}=this.calculatePagination(e,t,i),h=o.findIndex((e=>e.endIndex>=n));this.pagination.currentPage=ap(0,h,o.length-1);const{paddingX:d,paddingY:u}=this.item,p=a-d,g=r-u;let m=0,f=-l.y-this.item.marker.size/2;c?f+=g+8:(m+=-l.x+p+8,f+=(g-l.height)/2),this.pagination.translationX=m,this.pagination.translationY=f,this.pagination.update(),this.pagination.updateMarkers();let y=0;return this.itemSelection.each(((e,t,i)=>{i>(o[y]?.endIndex??1/0)&&y++,e.pageIndex=y})),{maxPageHeight:r,maxPageWidth:a,pages:o}}updateItemProxyButtons(){const e=this.toggleSeries?"pointer":void 0,t=Math.max(...this.itemSelection.nodes().map((e=>e.getBBox().height)));this.itemSelection.each((i=>{if(i.proxyButton){const{listitem:s,button:n}=i.proxyButton,o=i.pageIndex===this.pagination.currentPage;let r=iy.toCanvas(i);if(r.height!==t){const e=(t-r.height)/2;r={x:r.x,y:r.y-e,height:t,width:r.width}}Cv(n,"pointer-events",o?"auto":"none"),Cv(n,"cursor",e),sp(s,r)}}))}updatePaginationProxyButtons(e){this.proxyLegendPagination.style.display=this.pagination.visible?"absolute":"none";const t=(e?.length??this.pages.length)>1,i=this.pages.length>1;t!==i&&(i?(this.proxyPrevButton=this.ctx.proxyInteractionService.createProxyElement({type:"button",id:`${this.id}-prev-page`,textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.proxyLegendPagination,onclick:e=>this.pagination.onClick(e,"previous"),onmouseenter:()=>this.pagination.onMouseHover("previous"),onmouseleave:()=>this.pagination.onMouseHover(void 0)}),this.proxyNextButton??(this.proxyNextButton=this.ctx.proxyInteractionService.createProxyElement({type:"button",id:`${this.id}-next-page`,textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.proxyLegendPagination,onclick:e=>this.pagination.onClick(e,"next"),onmouseenter:()=>this.pagination.onMouseHover("next"),onmouseleave:()=>this.pagination.onMouseHover(void 0)})),this.proxyLegendPagination.ariaHidden="false"):(this.proxyNextButton?.remove(),this.proxyPrevButton?.remove(),[this.proxyNextButton,this.proxyPrevButton]=[void 0,void 0],this.proxyLegendPagination.ariaHidden="true"));const{prev:s,next:n}=this.pagination.computeCSSBounds();sp(this.proxyPrevButton,s),sp(this.proxyNextButton,n),Cv(this.proxyNextButton,"cursor",this.pagination.getCursor("next")),Cv(this.proxyPrevButton,"cursor",this.pagination.getCursor("previous"))}calculatePagination(e,t,i){const{paddingX:s,paddingY:n}=this.item,o=this.getOrientation(),r=["left","right"].includes(this.position);let a=this.pagination.getBBox(),l=new bp(0,0,0,0),c=[],h=0,d=0,u=0;const p=void 0!==this.maxWidth&&void 0!==this.maxHeight;do{if(u++>10){Xd.warn("unable to find stable legend layout.");break}a=l;const g=t-(r?0:a.width),m=bM({orientation:o,bboxes:e,maxHeight:i-(r?a.height:0),maxWidth:g,itemPaddingY:n,itemPaddingX:s,forceResult:p});c=m?.pages??[],h=m?.maxPageWidth??0,d=m?.maxPageHeight??0;const f=c.length;if(this.pagination.visible=f>1,this.pagination.totalPages=f,this.pagination.update(),this.pagination.updateMarkers(),l=this.pagination.getBBox(),!this.pagination.visible)break}while((g=l).width!==a.width||g.height!==a.height);var g;return{maxPageWidth:h,maxPageHeight:d,pages:c,paginationBBox:l,paginationVertical:r}}updatePositions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{item:{paddingY:t},itemSelection:i,pages:s}=this;if(s.length<1||!s[e])return;const{columns:n,startIndex:o,endIndex:r}=s[e];let a=0,l=0;const c=n.length,h=n[0].indices.length,d="horizontal"===this.getOrientation(),u=n[0].bboxes[0].height+t,p=[];i.each(((e,t,i)=>{if(i<o||i>r)return void(e.visible=!1);const s=i-o;let g,m;d?(g=s%c,m=Math.floor(s/c)):(g=Math.floor(s/h),m=s%h),e.visible=!0;const f=n[g];f&&(l=Math.floor(u*m),a=Math.floor(p[m]??0),p[m]=(p[m]??0)+f.columnWidth,e.translationX=a,e.translationY=l)})),this.updateItemProxyButtons()}updatePageNumber(e){const{pages:t}=this,{startIndex:i,endIndex:s}=t[e];0===i?this.paginationTrackingIndex=0:e===t.length-1?this.paginationTrackingIndex=s:this.paginationTrackingIndex=Math.floor((i+s)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(e),Cv(this.proxyNextButton,"cursor",this.pagination.getCursor("next")),Cv(this.proxyPrevButton,"cursor",this.pagination.getCursor("previous")),this.ctx.updateService.update(6)}update(){const{label:{color:e}}=this.item;this.itemSelection.each(((t,i)=>{t.setEnabled(i.enabled),t.color=e})),this.updateContextMenu()}updateContextMenu(){const{toggleSeries:e,ctx:{contextMenuRegistry:t}}=this;e?(t.hideAction(NM),t.hideAction(FM)):(t.showAction(NM),t.showAction(FM))}getLineStyles(e){const{stroke:t,strokeOpacity:i=1,strokeWidth:s,lineDash:n}=e.line??{},o=Math.min(2,s??1);return{stroke:t,strokeOpacity:i,strokeWidth:this.item.line.strokeWidth??o,lineDash:n}}getMarkerStyles(e){const{fill:t,stroke:i,strokeOpacity:s=1,fillOpacity:n=1,strokeWidth:o}=e.marker,r=Math.min(2,o??1);return{fill:t,stroke:i,strokeOpacity:s,fillOpacity:n,strokeWidth:this.item.marker.strokeWidth??r}}computePagedBBox(){const e=ny.computeChildrenBBox(this.group.children());if(this.pages.length>1){const[t,i]=this.maxPageSize;e.height=Math.max(i,e.height),e.width=Math.max(t,e.width)}return e}findNode(e){const{datum:t,proxyButton:i}=this.itemSelection.select((t=>t.datum?.itemId===e.itemId))[0]??{};if(void 0===t||void 0===i)throw new Error(`AG Charts - Missing required properties { datum: ${t}, proxyButton: ${i} }`);return{datum:t,proxyButton:i}}contextToggleVisibility(e){const{datum:t,proxyButton:i}=this.findNode(e);this.doClick(e.event,t,i.button)}contextToggleOtherSeries(e){this.doDoubleClick(e.event,this.findNode(e).datum)}onContextClick(e,t){const i=t.datum;this.preventHidingAll&&this.contextMenuDatum?.enabled&&this.getVisibleItemCount()<=1?this.ctx.contextMenuRegistry.disableAction(NM):this.ctx.contextMenuRegistry.enableAction(NM);const{button:s,offsetX:n,offsetY:o}=e,{x:r,y:a}=iy.toCanvasPoint(t,n,o),l={type:"contextmenu",sourceEvent:e,button:s,offsetX:r,offsetY:a,deltaX:0,deltaY:0,pageX:NaN,pageY:NaN,preventDefault:()=>e.preventDefault(),pointerHistory:[]};this.ctx.contextMenuRegistry.dispatchContext("legend",l,{legendItem:i})}onClick(e,t,i){this.doClick(e,t,i)&&e.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap((e=>e.getLegendData("category"))).filter((e=>e.enabled)).length}doClick(e,t,i){const{listeners:{legendItemClick:s},ctx:{chartService:n,highlightManager:o},preventHidingAll:r,toggleSeries:a}=this;if(!t)return!1;const{id:l,itemId:c,enabled:h}=t,d=n.series.find((e=>e.id===l));if(!d)return!1;let u=h;const p=new OM("click",u,c,d.id,e);if(s?.(p),p.defaultPrevented)return!0;if(a){if(u=!h,r&&!u){this.getVisibleItemCount()<2&&(u=!0)}i.ariaChecked=u.toString(),this.ctx.chartEventManager.legendItemClick(d,c,u,t.legendItemName)}return u?o.updateHighlight(this.id,{series:d,itemId:c,datum:void 0}):o.updateHighlight(this.id),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}onDoubleClick(e,t){this.doDoubleClick(e,t)&&e.preventDefault()}doDoubleClick(e,t){const{listeners:{legendItemDoubleClick:i},ctx:{chartService:s},toggleSeries:n}=this;if("integrated"===s.mode)return!1;if(!t)return!1;const{id:o,itemId:r,seriesId:a}=t,l=s.series.find((e=>e.id===o));if(!l)return!1;const c=new OM("dblclick",!0,r,l.id,e);if(i?.(c),c.defaultPrevented)return!0;if(n){const e=s.series.flatMap((e=>e.getLegendData("category"))),t=e.filter((e=>e.enabled)).length,i=e.find((e=>e.itemId===r&&e.seriesId===a));this.ctx.chartEventManager.legendItemDoubleClick(l,r,i?.enabled??!1,t,i?.legendItemName)}return this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(e,t){let i;if(e instanceof FocusEvent){const{x:e,y:s}=iy.toCanvas(t).computeCenter();i={type:"keyboard",offsetX:e,offsetY:s}}else{e.preventDefault();const{x:s,y:n}=iy.toCanvasPoint(t,e.offsetX,e.offsetY);i={type:"hover",offsetX:s,offsetY:n}}const{offsetX:s,offsetY:n}=i;return{offsetX:s,offsetY:n,lastPointerEvent:i,showArrow:!1}}onHover(e,t){if(!this.enabled)throw new Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(t.pageIndex);const i=t.datum,s=i?this.ctx.chartService.series.find((e=>e.id===i?.id)):void 0;if(i&&this.truncatedItems.has(i.itemId??i.id)){const s=this.toTooltipMeta(e,t);this.ctx.tooltipManager.updateTooltip(this.id,s,Dv({content:this.getItemLabel(i)}))}else this.ctx.tooltipManager.removeTooltip(this.id);i?.enabled&&s?this.updateHighlight({series:s,itemId:i?.itemId,datum:void 0}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id),this.updateHighlight()}updateHighlight(e){const t=this.ctx.interactionManager.getState();32===t?this.ctx.highlightManager.updateHighlight(this.id,e):2===t&&(this.pendingHighlightDatum=e,this.ctx.animationManager.onBatchStop((()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)})))}onLocaleChanged(){this.itemSelection.each(((e,t,i)=>{let{proxyButton:s}=e;null!=s?.button&&(s.button.textContent=this.getItemAriaText(i))})),this.proxyLegendItemDescription.textContent=this.getItemAriaDescription()}getItemAriaText(e){const t=this.data[e],i=t&&this.getItemLabel(t),s=this.ctx.localeManager;if(e>=0&&i){const t=e+1,n=this.data.length;return s.t("ariaLabelLegendItem",{label:i,index:t,count:n})}return s.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(){return this.ctx.localeManager.t("ariaDescriptionLegendItem")}positionLegend(e){if(Cv(this.proxyLegendToolbar,"display",this.visible&&this.enabled?void 0:"none"),!this.enabled||!this.data.length)return;const{layoutBox:t}=e,{x:i,y:s,width:n,height:o}=t,[r,a]=this.calculateLegendDimensions(t),{oldPages:l}=this.calcLayout(r,a),c=this.computePagedBBox(),h=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return o-c.height;default:return n-c.width}};if(this.visible){const e=this.spacing;let r,a;switch(this.position){case"top":case"bottom":r=(n-c.width)/2,a=h(),t.shrink(c.height+e,this.position);break;default:r=h(),a=(o-c.height)/2,t.shrink(c.width+e,this.position)}this.group.translationX=Math.floor(i+r-c.x),this.group.translationY=Math.floor(s+a-c.y),this.proxyLegendToolbar.ariaOrientation=this.getOrientation()}this.updateItemProxyButtons(),this.updatePaginationProxyButtons(l)}calculateLegendDimensions(e){const{width:t,height:i}=e,s=t/i;let n,o;switch(this.position){case"top":case"bottom":{const e=s<1?Math.min(.5,1/s*.2):.2;n=this.maxWidth?Math.min(this.maxWidth,t):t,o=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*e);break}default:{const e=s>1?Math.min(.5,.25*s):.25;n=this.maxWidth?Math.min(this.maxWidth,t):Math.round(t*e),o=this.maxHeight?Math.min(this.maxHeight,i):i}}return[n,o]}};GM.className="Legend",Wd([lm(gm)],GM.prototype,"toggleSeries",2),Wd([lm(um)],GM.prototype,"pagination",2),Wd([lm(um)],GM.prototype,"item",2),Wd([lm(um)],GM.prototype,"listeners",2),Wd([cv((e=>e.updateGroupVisibility())),lm(gm)],GM.prototype,"enabled",2),Wd([cv((e=>e.proxyLegendDirty=!0)),lm(Wm)],GM.prototype,"position",2),Wd([lm(bm,{optional:!0})],GM.prototype,"maxWidth",2),Wd([lm(bm,{optional:!0})],GM.prototype,"maxHeight",2),Wd([lm(gm,{optional:!0})],GM.prototype,"reverseOrder",2),Wd([lm(ef(["horizontal","vertical"],"an orientation"),{optional:!0})],GM.prototype,"orientation",2),Wd([lm(gm,{optional:!0})],GM.prototype,"preventHidingAll",2),Wd([lm(bm)],GM.prototype,"spacing",2);var BM={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new GM(e),packageType:"community"},zM=class extends $b{constructor(){super(...arguments),this.zIndex=3,this.centerX=0,this.centerY=0,this.width=8,this.height=16,this.gripLineGap=2,this.gripLineLength=8}setCenter(e,t){this.dirtyPath=!0,this.centerX===e&&this.centerY===t||(this.centerX=e,this.centerY=t,this.markDirty(3))}static align(e,t,i,s,n,o,r,a){const l=e.strokeWidth/2,c=e.align(i+n*r)+l,h=c+e.align(i+n*r,n*(a-r))-2*l,d=e.align(s+o/2)+l;e.setCenter(c,d),t.setCenter(h,d)}computeBBox(){const{centerX:e,centerY:t,width:i,height:s}=this;return new bp(e-i/2,t-s/2,i,s)}isPointInPath(e,t){return this.getBBox().containsPoint(e,t)}updatePath(){const{centerX:e,centerY:t,path:i,strokeWidth:s,gripLineGap:n,gripLineLength:o}=this,r=this.layerManager?.canvas?.pixelRatio??1;i.clear();const a=Math.floor(this.width/2*r)/r,l=Math.floor(this.height/2*r)/r;i.moveTo(e-a,t-l),i.lineTo(e+a,t-l),i.lineTo(e+a,t+l),i.lineTo(e-a,t+l),i.closePath();const c=Math.floor((n+s)/2*r)/r,h=Math.floor(o/2*r)/r;i.moveTo(e-c,t-h),i.lineTo(e-c,t+h),i.moveTo(e+c,t-h),i.lineTo(e+c,t+h)}};zM.className="RangeHandle",Wd([lm(bm),Sp({redraw:3,type:"path"})],zM.prototype,"width",2),Wd([lm(bm),Sp({redraw:3,type:"path"})],zM.prototype,"height",2),Wd([lm(bm),Sp({redraw:3,type:"path"})],zM.prototype,"gripLineGap",2),Wd([lm(bm),Sp({redraw:3,type:"path"})],zM.prototype,"gripLineLength",2);var HM=class extends $b{constructor(){super(...arguments),this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1}layout(e,t,i,s){e===this.x&&t===this.y&&i===this.width&&this.height===s||(this.x=e,this.y=t,this.width=i,this.height=s,this.dirtyPath=!0,this.markDirty(3))}update(e,t){e=isNaN(e)?this.min:e,t=isNaN(t)?this.max:t,e===this.min&&t===this.max||(this.min=e,this.max=t,this.dirtyPath=!0,this.markDirty(3))}computeBBox(){const{x:e,y:t,width:i,height:s}=this;return new bp(e,t,i,s)}computeVisibleRangeBBox(){const{x:e,y:t,width:i,height:s,min:n,max:o}=this,r=e+i*n;return new bp(r,t,e+i*o-r,s)}updatePath(){const{path:e,x:t,y:i,width:s,height:n,min:o,max:r,strokeWidth:a}=this,l=a/2;e.clear();const c=this.align(t)+l,h=this.align(i)+l,d=c+this.align(t,s)-2*l,u=h+this.align(i,n)-2*l;e.moveTo(c,h),e.lineTo(d,h),e.lineTo(d,u),e.lineTo(c,u),e.closePath();const p=this.align(t+s*o)+l,g=p+this.align(t+s*o,s*(r-o))-2*l;e.moveTo(p,h),e.lineTo(p,u),e.lineTo(g,u),e.lineTo(g,h),e.closePath()}};HM.className="RangeMask";var VM=class extends Lv{constructor(e){super({name:"rangeSelectorGroup",zIndex:16}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.background=this.appendChild(new ay({name:"navigator-background",zIndex:1})),this.append(e)}layout(e,t,i,s,n,o){this.x=e,this.y=t,this.width=i,this.height=s,this.lOffset=n,this.rOffset=o,this.background.translationX=e,this.background.translationY=t,this.markDirty(3)}updateBackground(e,t){null!=e&&this.background.removeChild(e),null!=t&&this.background.appendChild(t),this.markDirty(3)}computeBBox(){const{x:e,y:t,width:i,height:s,lOffset:n,rOffset:o}=this;return new bp(e-n,t,i+(n+o),s)}},jM=class extends KC{constructor(e){super(),this.ctx=e,this.miniChart=void 0,this.enabled=!1,this.mask=new HM,this.minHandle=new zM,this.maxHandle=new zM,this.maskVisibleRange={id:"navigator-mask-visible-range",getBBox:()=>this.mask.computeVisibleRangeBBox(),toCanvasBBox:()=>this.mask.computeVisibleRangeBBox(),fromCanvasPoint:(e,t)=>({x:e,y:t})},this.height=30,this.spacing=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new VM([this.mask,this.minHandle,this.maxHandle]),this._min=0,this._max=1,this.minRange=.001;const t=e.regionManager.addRegion("navigator",this.rangeSelector);this.destroyFns.push(e.scene.attachNode(this.rangeSelector),t.addListener("hover",(e=>this.onHover(e)),50),t.addListener("drag-start",(e=>this.onDragStart(e)),50),t.addListener("drag",(e=>this.onDrag(e)),50),t.addListener("drag-end",(e=>this.onDragEnd(e)),50),t.addListener("leave",(e=>this.onLeave(e)),50),this.ctx.localeManager.addListener("locale-changed",(()=>this.updateZoom())),this.ctx.layoutManager.registerElement(3,(e=>this.onLayoutStart(e))),this.ctx.layoutManager.addListener("layout:complete",(e=>this.onLayoutComplete(e))),e.zoomManager.addListener("zoom-change",(e=>this.onZoomChange(e)))),this.proxyNavigatorToolbar=this.ctx.proxyInteractionService.createProxyContainer({type:"toolbar",id:"navigator-toolbar",classList:["ag-charts-proxy-navigator-toolbar"],ariaOrientation:"vertical",ariaLabel:{id:"ariaLabelNavigator"}}),this.updateGroupVisibility(),this.proxyNavigatorElements=[this.ctx.proxyInteractionService.createProxyElement({type:"slider",id:"ag-charts-navigator-min",ariaLabel:{id:"ariaLabelNavigatorMinimum"},ariaOrientation:"horizontal",parent:this.proxyNavigatorToolbar,onchange:e=>this.onMinSliderChange(e)}),this.ctx.proxyInteractionService.createProxyElement({type:"slider",id:"ag-charts-navigator-pan",ariaLabel:{id:"ariaLabelNavigatorRange"},ariaOrientation:"horizontal",parent:this.proxyNavigatorToolbar,onchange:e=>this.onPanSliderChange(e)}),this.ctx.proxyInteractionService.createProxyElement({type:"slider",id:"ag-charts-navigator-max",ariaLabel:{id:"ariaLabelNavigatorMaximum"},ariaOrientation:"horizontal",parent:this.proxyNavigatorToolbar,onchange:e=>this.onMaxSliderChange(e)})],this.proxyNavigatorElements.forEach((e=>fv(e,"data-preventdefault",!1))),this.setSliderRatio(this.proxyNavigatorElements[0],this._min),this.setSliderRatio(this.proxyNavigatorElements[2],this._max),this.setPanSliderValue(this._min,this._max),Mb({orientation:"vertical",toolbar:this.proxyNavigatorToolbar,buttons:this.proxyNavigatorElements}),this.destroyFns.push((()=>{this.proxyNavigatorElements.forEach((e=>e.remove())),this.proxyNavigatorToolbar.remove()}))}updateBackground(e,t){this.rangeSelector?.updateBackground(e,t)}updateGroupVisibility(){const{enabled:e}=this;null!=this.rangeSelector&&e!==this.rangeSelector.visible&&(this.rangeSelector.visible=e,this.proxyNavigatorToolbar.ariaHidden=(!e).toString(),e?this.updateZoom():this.ctx.zoomManager.updateZoom("navigator"))}onLayoutStart(e){if(this.enabled){const{layoutBox:t}=e,i=this.height+this.spacing;t.shrink(i,"bottom"),this.y=t.y+t.height+this.spacing}else this.y=0}onLayoutComplete(e){const{x:t,width:i}=e.series.rect;if(this.enabled){const{y:e,height:s}=this;this.layoutNodes(t,e,i,s),sp(this.proxyNavigatorToolbar,{x:t,y:e,width:i,height:s}),this.proxyNavigatorToolbar.style.removeProperty("display")}else this.proxyNavigatorToolbar.style.display="none";this.x=t,this.width=i}onHover(e){this.enabled&&this.updateCursor(e)}updateCursor(e){if(!this.enabled)return;const{mask:t,minHandle:i,maxHandle:s}=this,{regionOffsetX:n,regionOffsetY:o}=e;i.containsPoint(n,o)||s.containsPoint(n,o)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):t.computeVisibleRangeBBox().containsPoint(n,o)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator")}onDragStart(e){if(!this.enabled)return;this.updateCursor(e);const{mask:t,minHandle:i,maxHandle:s,x:n,width:o,_min:r}=this,{regionOffsetX:a,regionOffsetY:l}=e;i.zIndex<s.zIndex?s.containsPoint(a,l)?this.dragging="max":i.containsPoint(a,l)&&(this.dragging="min"):i.containsPoint(a,l)?this.dragging="min":s.containsPoint(a,l)&&(this.dragging="max"),null==this.dragging&&t.computeVisibleRangeBBox().containsPoint(a,l)&&(this.dragging="pan",this.panStart=(a-n)/o-r),null!=this.dragging&&this.ctx.zoomManager.fireZoomPanStartEvent("navigator")}onDrag(e){if(!this.enabled||null==this.dragging)return;const{dragging:t,minRange:i,panStart:s,x:n,width:o}=this;let{_min:r,_max:a}=this;const{regionOffsetX:l}=e,c=(l-n)/o;if("min"===t)r=ap(0,c,a-i);else if("max"===t)a=ap(r+i,c,1);else if("pan"===t&&null!=s){const e=a-r;r=ap(0,c-s,1-e),a=r+e}this._min=r,this._max=a,this.updateZoom()}onDragEnd(e){this.dragging=void 0,this.updateCursor(e)}onLeave(e){this.ctx.cursorManager.updateCursor("navigator")}onZoomChange(e){const{x:t}=e;t&&(this._min=t.min,this._max=t.max,this.updateNodes(t.min,t.max),this.setPanSliderValue(t.min,t.max),this.setSliderRatio(this.proxyNavigatorElements[0],t.min),this.setSliderRatio(this.proxyNavigatorElements[2],t.max))}onPanSliderChange(e){const t=this.getSliderRatio(this.proxyNavigatorElements[1]),i=this._max-this._min;this._min=ap(0,t,1-i),this._max=this._min+i,this.updateZoom()}onMinSliderChange(e){const t=this.proxyNavigatorElements[0];this._min=this.setSliderRatioClamped(t,0,this._max-this.minRange),this.updateZoom()}onMaxSliderChange(e){const t=this.proxyNavigatorElements[2];this._max=this.setSliderRatioClamped(t,this._min+this.minRange,1),this.updateZoom()}setPanSliderValue(e,t){this.proxyNavigatorElements[1].value=`${Math.round(100*e)}`,this.proxyNavigatorElements[1].ariaValueText=this.ctx.localeManager.t("ariaValuePanRange",{min:e,max:t})}setSliderRatioClamped(e,t,i){const s=this.getSliderRatio(e),n=ap(t,s,i);return n!==s&&this.setSliderRatio(e,n),n}setSliderRatio(e,t){const i=Math.round(100*t);e.value=`${i}`,e.ariaValueText=vp(i)}getSliderRatio(e){return parseFloat(e.value)/100}layoutNodes(e,t,i,s){const{rangeSelector:n,mask:o,minHandle:r,maxHandle:a,_min:l,_max:c}=this;n.layout(e,t,i,s,r.width/2,a.width/2),o.layout(e,t,i,s),zM.align(r,a,e,t,i,s,l,c),l+(c-l)/2<.5?(r.zIndex=3,a.zIndex=4):(r.zIndex=4,a.zIndex=3),[r,this.maskVisibleRange,a].forEach(((i,s)=>{const n=i.getBBox(),o={x:n.x-e,y:n.y-t,height:n.height,width:n.width};sp(this.proxyNavigatorElements[s],o)}))}updateNodes(e,t){this.mask.update(e,t)}updateZoom(){if(!this.enabled)return;const{_min:e,_max:t}=this;if(null==e||null==t)return;return this.ctx.zoomManager.updateZoom("navigator",{x:{min:e,max:t}},!1,(e=>{null==this.min&&null==this.max||Xd.warnOnce(`Could not apply [navigator.min] or [navigator.max] as [${e}] has modified the initial zoom state.`)}))}};Wd([lm(um,{optional:!0})],jM.prototype,"miniChart",2),Wd([lm(gm),cv((e=>e.updateGroupVisibility()))],jM.prototype,"enabled",2),Wd([lm(bm)],jM.prototype,"height",2),Wd([lm(bm)],jM.prototype,"spacing",2),Wd([lv({newValue(e){this._min=e,this.updateZoom()}}),lm(hm(wm,Rm("max")),{optional:!0})],jM.prototype,"min",2),Wd([lv({newValue(e){this._max=e,this.updateZoom()}}),lm(hm(wm,Em("min")),{optional:!0})],jM.prototype,"max",2);var WM={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],moduleFactory:e=>new jM(e),themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8}}}};function UM(e){let{takeColors:t}=e;const{fills:[i],strokes:[s]}=t(1);return{fill:i,stroke:s}}function _M(e){return{marker:UM(e)}}var YM=(e=>(e[e.SMALL=12]="SMALL",e[e.MEDIUM=13]="MEDIUM",e[e.LARGE=17]="LARGE",e))(YM||{}),KM=(e=>(e.NORMAL="normal",e.BOLD="bold",e.BOLDER="bolder",e.LIGHTER="lighter",e))(KM||{}),ZM=(e=>(e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e))(ZM||{}),$M=(e=>(e.CATEGORY="category",e.ORDINAL_TIME="ordinal-time",e.NUMBER="number",e.TIME="time",e.LOG="log",e))($M||{}),QM=(e=>(e.ANGLE_CATEGORY="angle-category",e.ANGLE_NUMBER="angle-number",e.RADIUS_CATEGORY="radius-category",e.RADIUS_NUMBER="radius-number",e))(QM||{}),XM=(e=>(e.CIRCLE="circle",e.POLYGON="polygon",e))(XM||{}),qM=Symbol("is-dark-theme"),JM=Symbol("is-community"),eD=Symbol("is-enterprise"),tD=Symbol("default-font"),iD=Symbol("default-label-colour"),sD=Symbol("default-inverted-label-colour"),nD=Symbol("default-inside-series-label-colour"),oD=Symbol("default-muted-label-colour"),rD=Symbol("default-axis-grid-colour"),aD=Symbol("default-axis-line-colour"),lD=Symbol("default-cross-lines-colour"),cD=Symbol("default-background-colour"),hD=Symbol("default-shadow-colour"),dD=Symbol("default-colours"),uD=Symbol("default-padding"),pD=Symbol("default-caption-layout-style"),gD=Symbol("default-caption-alignment"),mD=Symbol("palette-up-stroke"),fD=Symbol("palette-down-stroke"),yD=Symbol("palette-up-fill"),vD=Symbol("palette-down-fill"),CD=Symbol("palette-neutral-stroke"),bD=Symbol("palette-neutral-fill"),wD=Symbol("palette-alt-up-stroke"),SD=Symbol("palette-alt-down-stroke"),xD=Symbol("palette-alt-up-fill"),MD=Symbol("palette-alt-down-fill"),DD=Symbol("palette-gray-fill"),ID=Symbol("palette-gray-stroke"),RD=Symbol("default-polar-series-stroke"),ED=Symbol("default-diverging-series-colour-range"),AD=Symbol("default-gauge-series-colour-range"),LD=Symbol("default-funnel-series-colour-range"),kD=Symbol("default-hierarchy-fills"),TD=Symbol("default-hierarchy-strokes"),PD=Symbol("default-annotation-stroke"),ND=Symbol("default-text-annotation-color"),FD=Symbol("default-annotation-background-fill"),OD=Symbol("default-annotation-handle-fill"),GD=Symbol("default-annotation-statistics-fill"),BD=Symbol("default-annotation-statistics-stroke"),zD=Symbol("default-annotation-statistics-color"),HD=Symbol("default-annotation-statistics-divider-stroke"),VD=Symbol("default-annotation-statistics-fill"),jD=Symbol("default-annotation-statistics-stroke"),WD=Symbol("default-textbox-fill"),UD=Symbol("default-textbox-stroke"),_D=Symbol("default-textbox-color"),YD=Symbol("default-toolbar-position"),KD=Symbol("default-gridline-enabled");function ZD(e,t,i,s,n){const{addPhaseFn:o,updatePhaseFn:r,removePhaseFn:a}=n,l=(s,n,o)=>{i.animate({id:`${e}_${t}_${n.id}_${s}`,groupId:e,from:0,to:1,ease:vg,collapsable:!1,onUpdate(e,t){t&&"removed"!==s||(n.path.clear(!0),o(e,n),n.checkPathDirty())},onStop(){"added"===s&&(n.path.clear(!0),o(1,n),n.checkPathDirty())},phase:kg[s]})};for(const c of s)i.isSkipped()||(l("removed",c,a),l("updated",c,r)),l("added",c,o)}function $D(e){return"number"===typeof e?e.toFixed(2):String(e??"")}var QD=null;function XD(e){if(null!=e)return""===e?"":(QD??(QD=qu("div")),QD.textContent=String(e),QD.innerHTML)}var qD=new WeakMap;function JD(e,t){const i=JSON.stringify(e,null,0);return qD.has(t)||qD.set(t,new Map),qD.get(t)?.has(i)||qD.get(t)?.set(i,t(e)),qD.get(t)?.get(i)}function eI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];for(const i of e)"number"===typeof i&&(i<0&&(t[0]+=i),i>0&&(t[1]+=i));return t}function tI(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:e=>eI(e)}}function iI(e,t){return{id:e,type:"aggregate",matchGroupIds:t?[t]:void 0,aggregateFunction:e=>eI(e),groupAggregateFunction:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];return t[0]+=e?.[0]??0,t[1]+=e?.[1]??0,t}}}function sI(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:e=>fS.extendDomain(e)}}function nI(e){return{id:e,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];return t[0]+=e?.[0]??0,t[1]+=e?.[1]??0,t}}}function oI(e,t){const i={id:e,matchGroupIds:t?[t]:void 0,type:"aggregate",aggregateFunction:e=>eI(e),groupAggregateFunction:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,-1];return t[0]+=e?.[0]??0,t[1]+=e?.[1]??0,t[2]++,t},finalFunction:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];const t=e[0]+e[1];return t>=0?[0,t/e[2]]:[t/e[2],0]}};return i}function rI(e,t,i){const s={id:e,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const s=i[1]-i[0];return t.aggregateFunction(e).map((e=>e/s))}};return t.groupAggregateFunction&&(s.groupAggregateFunction=t.groupAggregateFunction),s}function aI(e){return()=>{let t=0;return i=>Jp(i)?(t+=e?Math.max(0,i):i,t):i}}function lI(){return()=>{let e=0;return t=>{if(!Jp(t))return t;const i=e;return e+=t,i}}}function cI(e){return null!=e&&Vv(e)}function hI(e){return null!=e}function dI(e){switch(e){case"number":case"log":case"ordinal-time":case"time":case"color":return cI;default:return hI}}function uI(e){switch(e){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function pI(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{property:e,type:"key",valueType:uI(t),validation:dI(t),...i}}function gI(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{property:e,type:"value",valueType:uI(t),validation:dI(t),...i}}function mI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{min:i=-1/0,max:s=1/0,...n}=t;return{type:"value",property:e,valueType:"range",validation:cI,processor:()=>e=>Jp(e)?ap(i,e,s):e,...n}}function fI(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{onlyPositive:s,...n}=i;return{...gI(e,t,n),processor:aI(s)}}function yI(e,t){return{...gI(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),processor:lI()}}function vI(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"current",s=arguments.length>3?arguments[3]:void 0;return[gI(e,arguments.length>4?arguments[4]:void 0,s),LI(s.groupId,t,i,s.separateNegative),...null!=s.rangeId?[sI(s.rangeId,s.groupId)]:[]]}function CI(e,t,i){return[gI(e,t,i),TI(i.groupId)]}var bI={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let e=NaN;return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;const i=(arguments.length>1?arguments[1]:void 0).keys[0],s=Math.abs(i-e);return e=i,!isNaN(s)&&s>0&&s<t?s:t}}},wI={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let e=NaN;return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1/0;const i=(arguments.length>1?arguments[1]:void 0).keys[0],s=Math.abs(i-e);return e=i,!isNaN(s)&&s>0&&s>t?s:t}}},SI={type:"processor",property:"sortedGroupDomain",calculate:e=>{let{domain:{groups:t}}=e;return t?.slice().sort(((e,t)=>{for(let i=0;i<e.length;i++){const s=e[i]-t[i];if(0!==s)return s}return 0}))}};function xI(e){let{normaliseTo:t,mode:i}=e;const s=(e,i)=>{const s=e*t/i;return s>=0?Math.min(t,s):Math.max(-t,s)};return()=>()=>(e,t)=>{const n=[0,0];for(const s of t){const t=e[s],o="number"===typeof t?t:Math.max(...t),r=o<0?0:1;"sum"===i?n[r]+=o:n[r]=0===r?Math.min(n[r],o):Math.max(n[r],o)}const o=Math.max(Math.abs(n[0]),n[1]);for(const i of t){const t=e[i];e[i]="number"===typeof t?s(t,o):t.map((e=>s(e,o)))}}}function MI(e,t){return{type:"group-value-processor",matchGroupIds:e,adjust:JD({normaliseTo:t,mode:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sum"},xI)}}function DI(e){let{normaliseTo:t,zeroDomain:i,rangeMin:s,rangeMax:n}=e;const o=t[1]-t[0],r=(e,s,n)=>{const r=t[0]+(e-s)/n*o;return 0===n?i:r>=t[1]?t[1]:r<t[0]?t[0]:r};return()=>(e,i)=>{let[o,a]=e.domain.values[i];null!=s&&(o=s),null!=n&&(a=n);const l=a-o;e.domain.values[i]=[t[0],t[1]];for(const t of e.data){let s=t.values;"ungrouped"===e.type&&(s=[s]);for(const e of s)e[i]=r(e[i],o,l)}}}function II(e,t,i,s,n){return{type:"property-value-processor",property:e,adjust:JD({normaliseTo:t,rangeMin:s,rangeMax:n,zeroDomain:i},DI)}}function RI(e){return{type:"processor",property:"animationValidation",calculate(t){const{keys:i,values:s}=t.defs,{input:n,data:o}=t;let r=!0,a=!0;const l=[];for(let h=0;h<s.length;h++)e?.includes(s[h].id)&&l.push([h,s[h]]);const c=(e,i,s)=>{if("category"===i.valueType){const i=t.domain[s][e];return void(r&&(r=i.length===n.count))}let l=o[0]?.[s][e];for(let t=1;(r||a)&&t<o.length;t++){const i=o[t][s][e];a&&(a=l<=i),r&&(r=l!==i),l=i}};for(let e=0;(r||a)&&e<i.length;e++)c(e,i[e],"keys");for(let e=0;(r||a)&&e<l.length;e++){const[t,i]=l[e];c(t,i,"values")}return{uniqueKeys:r,orderedKeys:a}}}}function EI(e){let{mode:t,separateNegative:i}=e;return()=>()=>(e,s)=>{const n=[0,0];for(const o of s){const s=e[o],r=up(s)&&i?0:1;Jp(s)&&("normal"===t&&(n[r]+=s),e[o]=n[r],"trailing"===t&&(n[r]+=s))}}}function AI(e){let{mode:t,sum:i}=e;return()=>{const e=[];let s=!0;return()=>(n,o)=>{let r=0;for(const a of o){const o=n[a],l=s&&"current"===i?0:e[a];e[a]=o;const c="current"===i?o:l;Jp(o)&&Jp(l)?("normal"===t&&(r+=c),n[a]=r,"trailing"===t&&(r+=c)):n[a]=r}s=!1}}}function LI(e,t,i){let s,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.startsWith("window")){s=JD({mode:t.endsWith("-trailing")?"trailing":"normal",sum:i},AI)}else s=JD({mode:t,separateNegative:n},EI);return{type:"group-value-processor",matchGroupIds:[e],adjust:s}}function kI(){return()=>(e,t)=>{const i=new Float64Array(32);let s=0;for(const n of t){const t=e[n];i[s]=Number.isFinite(t)?t:NaN,s+=1,e[n]=i.subarray(0,s)}}}function TI(e){return{type:"group-value-processor",matchGroupIds:[e],adjust:kI}}function PI(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:"processor",property:"diff",calculate:i=>{const s=new Map,n=new Map,o=new Map,r=new Map,a=Math.max(e.data.length,i.data.length);for(let l=0;l<a;l++){const a=e.data[l],c=i.data[l],h=a?NI(a.keys):"",d=c?NI(c.keys):"";c&&a&&h===d?Hg(a.values,c.values)||o.set(d,c):(r.has(d)?(!t&&Hg(r.get(d).values,c.values)||(o.set(d,c),s.set(d,c)),r.delete(d)):c&&n.set(d,c),n.has(h)?(!t&&Hg(n.get(h).values,a.values)||(o.set(h,a),s.set(h,a)),n.delete(h)):a&&(o.delete(h),r.set(h,a)))}return{changed:n.size>0||o.size>0||r.size>0,added:n,updated:o,removed:r,moved:s}}}}function NI(e){let t;t=jp(e)?e.map((e=>Wv(e))).join("___"):Wv(e);const i="string"===typeof t||"number"===typeof t||"boolean"===typeof t||t instanceof Date;for(var s=arguments.length,n=new Array(s>1?s-1:0),o=1;o<s;o++)n[o-1]=arguments[o];return i&&n.length>0&&(t+=`___${n.join("___")}`),t}function FI(e,t,i){let{id:s}=e;for(var n=arguments.length,o=new Array(n>3?n-3:0),r=3;r<n;r++)o[r-3]=arguments[r];Pg(s,t,i,o,{opacity:0},{opacity:1},{phase:"trailing"})}function OI(e,t,i){let{id:s}=e;for(var n=arguments.length,o=new Array(n>3?n-3:0),r=3;r<n;r++)o[r-3]=arguments[r];Pg(s,t,i,o,{opacity:1},{opacity:0},{phase:"remove"})}function GI(e){return{opacity:1}}var BI=class extends om{constructor(){super(...arguments),this._dirty=3}markDirty(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._dirty<e&&(this._dirty=e)}markClean(e){this._dirty=0}isDirty(){return this._dirty>0}},zI=class extends BI{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};Wd([lm(gm),Sp({redraw:3})],zI.prototype,"enabled",2),Wd([lm(Tm),Sp({redraw:3})],zI.prototype,"color",2),Wd([lm(ym),Sp({redraw:3})],zI.prototype,"xOffset",2),Wd([lm(ym),Sp({redraw:3})],zI.prototype,"yOffset",2),Wd([lm(bm),Sp({redraw:3})],zI.prototype,"blur",2);var HI=nf((e=>Vx(e)||"function"===typeof e&&Object.create(e.prototype)instanceof Dx),"a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),VI=class extends BI{constructor(){super(...arguments),this.enabled=!0,this.shape=Ix,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:e,shape:t,fill:i,fillOpacity:s,stroke:n,strokeWidth:o,strokeOpacity:r}=this;return{size:e,shape:t,fill:i,fillOpacity:s,stroke:n,strokeWidth:o,strokeOpacity:r}}getDiameter(){return this.size+this.strokeWidth}};Wd([lm(gm),Sp({redraw:3})],VI.prototype,"enabled",2),Wd([lm(HI),Sp({redraw:3})],VI.prototype,"shape",2),Wd([lm(bm),Sp({redraw:3})],VI.prototype,"size",2),Wd([lm(Tm,{optional:!0}),Sp({redraw:3})],VI.prototype,"fill",2),Wd([lm(wm),Sp({redraw:3})],VI.prototype,"fillOpacity",2),Wd([lm(Tm,{optional:!0}),Sp({redraw:3})],VI.prototype,"stroke",2),Wd([lm(bm),Sp({redraw:3})],VI.prototype,"strokeWidth",2),Wd([lm(wm),Sp({redraw:3})],VI.prototype,"strokeOpacity",2),Wd([lm(mm,{optional:!0}),Sp({redraw:3})],VI.prototype,"itemStyler",2);var jI=class extends om{constructor(){super(...arguments),this.enabled=!1}};Wd([lm(gm)],jI.prototype,"enabled",2);var WI=class extends om{constructor(){super(...arguments),this.enabled=!0,this.interaction=new jI,this.position=new Iv,this.range=void 0}toTooltipHtml(e,t){return this.renderer?Dv(this.renderer(t),e):Dv(e)}};Wd([lm(gm)],WI.prototype,"enabled",2),Wd([lm(gm,{optional:!0})],WI.prototype,"showArrow",2),Wd([lm(mm,{optional:!0})],WI.prototype,"renderer",2),Wd([lm(um)],WI.prototype,"interaction",2),Wd([lm(um)],WI.prototype,"position",2),Wd([lm(qm,{optional:!0})],WI.prototype,"range",2);var UI=ef(["linear","smooth","step"],"a line style"),_I=ef(["start","middle","end"]),YI=class extends om{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}};Wd([lm(UI)],YI.prototype,"type",2),Wd([lm(wm)],YI.prototype,"tension",2),Wd([lm(_I)],YI.prototype,"position",2);var KI=class extends Jx{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new YI,this.shadow=new zI,this.marker=new VI,this.label=new Pv,this.tooltip=new WI,this.connectMissingData=!1}};function ZI(e){switch(e.type){case"linear":case"step":return[{x:e.x0,y:e.y0},{x:e.x1,y:e.y1}];case"cubic":return[{x:e.cp0x,y:e.cp0y},{x:e.cp3x,y:e.cp3y}]}}function $I(e,t,i){const[s,n]=ZI(e),o=n.x!==s.x?(i.x-t.x)/(n.x-s.x):0,r=n.y!==s.y?(i.y-t.y)/(n.y-s.y):0;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:t.x,cp0y:t.y,cp1x:i.x-(e.cp2x-s.x)*o,cp1y:i.y-(e.cp2y-s.y)*r,cp2x:i.x-(e.cp1x-s.x)*o,cp2y:i.y-(e.cp1y-s.y)*r,cp3x:i.x,cp3y:i.y};case"step":return{type:"step",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y,stepX:i.x-(e.stepX-s.x)*o}}}function QI(e,t,i){const{moveTo:s}=e,[n,o]=function(e){const t=ZI(e);return t[0].x>t[1].x&&t.reverse(),t}(e),{x:r,y:a}=n,{x:l,y:c}=o;if(i<r)return $I(e,n,n);if(t>l)return $I(e,o,o);switch(e.type){case"linear":{const e=a===c?void 0:(c-a)/(l-r);return{type:"linear",moveTo:s,x0:t,y0:null==e?a:e*(t-r)+a,x1:i,y1:null==e?a:e*(i-r)+a}}case"step":if(i<=e.stepX){const n=e.y0;return{type:"step",moveTo:s,x0:t,y0:n,x1:i,y1:n,stepX:i}}if(t>=e.stepX){const n=e.y1;return{type:"step",moveTo:s,x0:t,y0:n,x1:i,y1:n,stepX:t}}{const{y0:n,y1:o,stepX:r}=e;return{type:"step",moveTo:s,x0:t,y0:n,x1:i,y1:o,stepX:r}}case"cubic":{const n=Wb(e.cp0x,e.cp1x,e.cp2x,e.cp3x,t);let[o,r]=Ub(e.cp0x,e.cp0y,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.cp3x,e.cp3y,n);const a=Wb(r[0].x,r[1].x,r[2].x,r[3].x,i);return[r,o]=Ub(r[0].x,r[0].y,r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y,a),{type:"cubic",moveTo:s,cp0x:r[0].x,cp0y:r[0].y,cp1x:r[1].x,cp1y:r[1].y,cp2x:r[2].x,cp2y:r[2].y,cp3x:r[3].x,cp3y:r[3].y}}}}Wd([lm(fm)],KI.prototype,"xKey",2),Wd([lm(fm,{optional:!0})],KI.prototype,"xName",2),Wd([lm(fm)],KI.prototype,"yKey",2),Wd([lm(fm,{optional:!0})],KI.prototype,"yName",2),Wd([lm(fm,{optional:!0})],KI.prototype,"yFilterKey",2),Wd([lm(bm,{optional:!0})],KI.prototype,"normalizedTo",2),Wd([lm(Tm)],KI.prototype,"fill",2),Wd([lm(wm)],KI.prototype,"fillOpacity",2),Wd([lm(Tm)],KI.prototype,"stroke",2),Wd([lm(bm)],KI.prototype,"strokeWidth",2),Wd([lm(wm)],KI.prototype,"strokeOpacity",2),Wd([lm(jm)],KI.prototype,"lineDash",2),Wd([lm(bm)],KI.prototype,"lineDashOffset",2),Wd([lm(um)],KI.prototype,"interpolation",2),Wd([lm(um)],KI.prototype,"shadow",2),Wd([lm(um)],KI.prototype,"marker",2),Wd([lm(um)],KI.prototype,"label",2),Wd([lm(um)],KI.prototype,"tooltip",2),Wd([lm(gm)],KI.prototype,"connectMissingData",2);var XI={start:0,middle:.5,end:1};var qI=.05;function JI(e,t,i){return(t-e)*i+e}function eR(e,t){return"linear"===e.type?function(e,t){const{x0:i,y0:s,x1:n,y1:o}=e,r=(o-s)/(n-i)*(t-i)+s;return{leftCp1x:i,leftCp1y:s,leftCp2x:t,leftCp2y:r,stepX:t,stepY0:r,stepY1:r,rightCp1x:t,rightCp1y:r,rightCp2x:n,rightCp2y:o}}(e,t):"cubic"===e.type?function(e,t){const{cp0x:i,cp0y:s,cp1x:n,cp1y:o,cp2x:r,cp2y:a,cp3x:l,cp3y:c}=e,h=Wb(i,n,r,l,t),[d,u]=Ub(i,s,n,o,r,a,l,c,h),p=d[3].y;return{leftCp1x:d[1].x,leftCp1y:d[1].y,leftCp2x:d[2].x,leftCp2y:d[2].y,stepX:t,stepY0:p,stepY1:p,rightCp1x:u[1].x,rightCp1y:u[1].y,rightCp2x:u[2].x,rightCp2y:u[2].y}}(e,t):function(e){const{x0:t,y0:i,x1:s,y1:n,stepX:o}=e;return{leftCp1x:(t+o)/2,leftCp1y:i,leftCp2x:(t+o)/2,leftCp2y:i,stepX:o,stepY0:i,stepY1:n,rightCp1x:(o+s)/2,rightCp1y:n,rightCp2x:(o+s)/2,rightCp2y:n}}(e)}function tR(e,t,i,s,n,o,r){switch(t){case 1:r?e.moveTo(n,o):e.moveTo(i,s);break;case 2:r?e.lineTo(n,o):e.lineTo(i,s)}}function iR(e,t,i,s,n,o){o?e.lineTo(t,i):e.lineTo(s,n)}function sR(e,t,i,s,n,o,r,a,l,c){c?e.cubicCurveTo(o,r,s,n,t,i):e.cubicCurveTo(s,n,o,r,a,l)}function nR(e,t,i,s,n,o,r){r?(e.lineTo(o,n),e.lineTo(o,i),e.lineTo(t,i)):(e.lineTo(o,i),e.lineTo(o,n),e.lineTo(s,n))}function oR(e,t,i,s){const[n,o]=ZI(t);switch(tR(e,i,n.x,n.y,o.x,o.y,s),t.type){case"linear":iR(e,t.x0,t.y0,t.x1,t.y1,s);break;case"cubic":sR(e,t.cp0x,t.cp0y,t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.cp3x,t.cp3y,s);break;case"step":nR(e,t.x0,t.y0,t.x1,t.y1,t.stepX,s)}}function rR(e,t,i,s,n,o){const[r,a]=ZI(t),[l,c]=ZI(i),h=JI(r.x,l.x,s),d=JI(r.y,l.y,s),u=JI(a.x,c.x,s),p=JI(a.y,c.y,s);if(tR(e,n,h,d,u,p,o),"cubic"===t.type&&"cubic"===i.type){sR(e,h,d,JI(t.cp1x,i.cp1x,s),JI(t.cp1y,i.cp1y,s),JI(t.cp2x,i.cp2x,s),JI(t.cp2y,i.cp2y,s),u,p,o)}else if("step"===t.type&&"step"===i.type){nR(e,h,d,u,p,JI(t.stepX,i.stepX,s),o)}else if("linear"===t.type&&"linear"===i.type)iR(e,h,d,u,p,o);else{let n;n="step"===t.type?t.stepX:"step"===i.type?i.stepX:(h+u)/2;const r=eR(t,n),a=eR(i,n),l=JI(r.leftCp1x,a.leftCp1x,s),c=JI(r.leftCp1y,a.leftCp1y,s),g=JI(r.leftCp2x,a.leftCp2x,s),m=JI(r.leftCp2y,a.leftCp2y,s),f=JI(r.stepX,a.stepX,s),y=JI(r.stepY0,a.stepY0,s),v=JI(r.stepY1,a.stepY1,s),C=JI(r.rightCp1x,a.rightCp1x,s),b=JI(r.rightCp1y,a.rightCp1y,s),w=JI(r.rightCp2x,a.rightCp2x,s),S=JI(r.rightCp2y,a.rightCp2y,s);o?(e.cubicCurveTo(w,S,C,b,f,v),e.lineTo(f,y),e.cubicCurveTo(g,m,l,c,h,d)):(e.cubicCurveTo(l,c,g,m,f,y),e.lineTo(f,v),e.cubicCurveTo(C,b,w,S,u,p))}}function aR(e,t,i){let{id:s}=e;const n={phase:i?kg[i]:"trailing"};for(var o=arguments.length,r=new Array(o>3?o-3:0),a=3;a<o;a++)r[a-3]=arguments[a];Pg(s,"markers",t,r,{opacity:0},{opacity:1},n),r.forEach((e=>e.cleanup()))}function lR(e,t){let{id:i}=e;for(var s=arguments.length,n=new Array(s>2?s-2:0),o=2;o<s;o++)n[o-2]=arguments[o];Pg(i,"markers",t,n,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),n.forEach((e=>e.cleanup()))}function cR(e,t){let{id:i,nodeDataDependencies:s}=e;const n=s.seriesRectWidth;for(var o=arguments.length,r=new Array(o>2?o-2:0),a=2;a<o;a++)r[a-2]=arguments[a];Tg(i,"markers",t,r,{fromFn:(e,t)=>{const i=t.midPoint?.x??n;let s=ap(0,xg(i/n),1);return isNaN(s)&&(s=0),{scalingX:0,scalingY:0,delay:s,duration:Mg,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function hR(e){return{opacity:1,scalingX:1,scalingY:1}}function dR(e,t){return{translationX:t.point?.x??NaN,translationY:t.point?.y??NaN}}function uR(e,t){const i=(t,i)=>{const s=e[i][t];return Array.isArray(s)?s[0]:s},s=t=>{const{xValue:s}=t;return e.moved[s]?{point:i(s,"moved"),status:"updated"}:e.removed[s]?{point:i(s,"removed"),status:"removed"}:e.added[s]?{point:i(s,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(e,i)=>{const{status:n,point:o}=s(i);if("unknown"===n)return{opacity:0};const r={translationX:o?.from?.x??e.translationX,translationY:o?.from?.y??e.translationY,opacity:e.opacity,phase:kg[n]};return"added"===t?{...r,opacity:0,translationX:o?.to?.x,translationY:o?.to?.y,phase:kg.added}:("added"===n&&(r.opacity=0),r)},toFn:(e,i)=>{const{status:n,point:o}=s(i);if("unknown"===n)return{opacity:0};const r={translationX:i.point.x,translationY:i.point.y,opacity:1,phase:kg[n]};return"removed"===n||"removed"===t?{...r,translationX:o?.to?.x,translationY:o?.to?.y,opacity:0,phase:kg.removed}:r}}}function pR(e,t){let{datumIndex:i}=t;const s=e.getNodeData();if(void 0===s)return;const n=s[i],{point:o}=n;if(null==n||null==o)return;const r=o.focusSize??e.getFormattedMarkerStyle(n).size,a=r/2,l=n.point.x-a,c=n.point.y-a;return iy.toCanvas(e.contentGroup,new bp(l,c,r,r))}var gR=.05;function mR(e){return e.reduce(((e,t)=>{let{min:i,max:s}=e;return(null==i||i.point.x>t.point.x)&&(i=t),(null==s||s.point.x<t.point.x)&&(s=t),{min:i,max:s}}),{})}function fR(e,t,i){const s=(t.y-e.y)/(t.x-e.x);return{x:i,y:(i-e.x)*s+e.y}}function yR(e,t,i,s){let n=-1,o=0;const r=[];for(;o<e.length;)e[o].change!==t?e[o].change!==i?(r.length>0&&(s(r,n,o),r.length=0),n=o,o++):o++:(r.push(e[o]),o++);r.length>0&&s(r,n,o)}function vR(e,t){yR(e,"out","in",((i,s,n)=>{-1===s&&e[n]?i.forEach((t=>t.to=e[n].from)):n===e.length&&e[s]?i.forEach((t=>t.to=e[s].from)):"intersect"===t&&e[s]?.from&&e[n]?.from?i.forEach((t=>t.to=fR(e[s].from,e[n].from,t.from.x))):i.forEach((e=>e.to=e.from))})),yR(e,"in","out",((i,s,n)=>{-1===s&&e[n]?i.forEach((t=>t.from=e[n].to)):n===e.length&&e[s]?i.forEach((t=>t.from=e[s].to)):"intersect"===t&&e[s]?.to&&e[n]?.to?i.forEach((t=>t.from=fR(e[s].to,e[n].to,t.to.x))):i.forEach((e=>e.from=e.to))}))}function CR(e,t,i){const s=isNaN(e.x)?t.x:e.x,n=isNaN(e.y)?t.y:e.y,o=t.x-e.x,r=t.y-e.y;return{x:s+(isNaN(o)?0:o*i),y:n+(isNaN(r)?0:r*i)}}var bR={start:0,middle:.5,end:1};function wR(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{path:n}=t;"smooth"===i?.type?function(e,t,i,s){const n=Array.isArray(t)?t:Array.from(t);if(0===n.length)return;if(s?e.lineTo(n[0].x,n[0].y):e.moveTo(n[0].x,n[0].y),n.length<=1)return;const o=n.map(((e,t)=>{const i=0===t?e:n[t-1],s=t===n.length-1?e:n[t+1],o=0===t||t===n.length-1;if(Math.sign(i.y-e.y)===Math.sign(s.y-e.y))return 0;if(!o){const t=Math.abs(i.y-s.y),n=Math.abs(e.y-i.y)/t,o=Math.abs(e.y-s.y)/t;if(n<=gR||1-n<=gR||o<=gR||1-o<=gR)return 0}return(s.y-i.y)/(s.x-i.x)}));0===o[1]&&(o[0]*=2),0===o[o.length-2]&&(o[o.length-1]*=2);for(let r=1;r<n.length;r+=1){const t=n[r-1],s=o[r-1],a=n[r],l=o[r],c=a.x-t.x,h=a.y-t.y;let d=c*i/3,u=c*s*i/3,p=c*i/3,g=c*l*i/3;0===l&&Math.abs(u)>Math.abs(h)&&(d*=Math.abs(h/u),u=Math.sign(u)*Math.abs(h)),0===s&&Math.abs(g)>Math.abs(h)&&(p*=Math.abs(h/g),g=Math.sign(g)*Math.abs(h)),e.cubicCurveTo(t.x+d,t.y+u,a.x-p,a.y-g,a.x,a.y)}}(n,e,i.tension??1,s):"step"===i?.type?function(e,t,i,s){let n;for(const o of t){if(null!=n){const t=n.x<o.x?i:1-i,s=(o.x-n.x)*t+n.x;e.lineTo(s,n?.y??o.y),e.lineTo(s,o.y),e.lineTo(o.x,o.y)}else s?e.lineTo(o.x,o.y):e.moveTo(o.x,o.y);n=o}}(n,e,bR[i.position??"end"],s):function(e,t,i){let s=i;for(const{x:n,y:o}of t)s?e.lineTo(n,o):(e.moveTo(n,o),s=!0)}(n,e,s)}function SR(e,t){let i,s;const n=[],o=()=>{null!=s&&(n.push(s),s=void 0)};for(const r of e){const{from:e,to:n}=r,a=t[r.change];if(null==a||null==e||null==n)continue;const l=CR(e,n,a);if(!1===r.moveTo)s??(s=[]),s.push(l);else if(!0!==r.moveTo&&i){if(i){const e="in"===r.moveTo?a:1-a,{x:t,y:n}=CR(i,l,e);s??(s=[]),s.push({x:t,y:n}),o(),s=[l]}}else o(),s=[l];i=l}return o(),n}function xR(e,t,i,s){SR(e,t).forEach((e=>{wR(e,i,s)}))}function MR(e,t){let{id:i,visible:s,nodeDataDependencies:n}=e;const{seriesRectWidth:o,seriesRectHeight:r}=n;for(var a=arguments.length,l=new Array(a>2?a-2:0),c=2;c<a;c++)l[c-2]=arguments[c];Pg(i,"path_properties",t,l,{clipX:0},{clipX:o},{phase:"initial",start:{clip:!0,clipY:r,visible:s},finish:{clip:!1,visible:s}})}function DR(e,t,i){let{id:s}=e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"add";for(var o=arguments.length,r=new Array(o>4?o-4:0),a=4;a<o;a++)r[a-4]=arguments[a];Pg(s,t,i,r,{opacity:0},{opacity:1},{phase:n})}function IR(e,t,i){let{id:s}=e;for(var n=arguments.length,o=new Array(n>3?n-3:0),r=3;r<n;r++)o[r-3]=arguments[r];Pg(s,t,i,o,{opacity:1},{opacity:0},{phase:"remove"})}function RR(e){return t=>({visible:e.getVisible(),opacity:e.getOpacity(),clipScalingX:1,clip:!1})}function ER(e,t){let{nodeDataDependencies:i}=e;const s=e=>isFinite(e)?e:0;t.clipX=s(i.seriesRectWidth),t.clipY=s(i.seriesRectHeight)}function AR(e){return"continuous"===e.type||"log"===e.type}function LR(e){return"category"===e.type}function kR(e,t){return e.domain.length===t.domain.length&&e.range.length===t.range.length&&e.domain.every(((e,i)=>e===t.domain[i]))&&e.range.every(((e,i)=>e===t.range[i]))}function TR(e,t){return void 0===e||void 0===t?void 0!==e||void 0!==t:AR(e)&&AR(t)?e.type===t.type&&kR(e,t):!(!LR(e)||!LR(t))&&kR(e,t)}function PR(e){return null!=e&&(!!e.range.every((e=>Number.isFinite(e)))&&("category"===e.type?e.domain.every((e=>null!=e)):e.domain.every((e=>Number.isFinite(e)||e instanceof Date))))}function*NR(e){let t=-1,i=0;for(const{point:s}of e){if(s.moveTo){const e=t>=0?{start:t,end:i}:void 0;t=i,i=t,void 0!==e&&(yield e)}i+=1}-1!==t&&(yield{start:t,end:i})}function FR(e,t){let{start:i,end:s}=t;return function*(){for(let t=i;t<s;t+=1)yield e[t].point}()}function OR(e,t){let{start:i,end:s}=t;return function*(){for(let t=s-1;t>=i;t-=1)yield e[t].point}()}function GR(e,t){if(!t)return NaN;if(e instanceof Date&&(e=e.getTime()),"continuous"===t.type&&"number"===typeof e){return(e-t.domain[0])/(t.domain[1]-t.domain[0])*(t.range[1]-t.range[0])+t.range[0]}if("log"===t.type&&"number"===typeof e)return t.convert(e);const i=t.domain.findIndex((t=>t===e));if(i>=0)return t.range[i];const s=t.domain.findIndex((t=>{return s=t,null!=(i=e)&&null!=s&&"object"===typeof i&&"object"===typeof s&&("id"in i&&"id"in s?i.id===s.id:i.toString()===s.toString());var i,s}));return s>=0?t.range[s]:NaN}function BR(e,t){const i=Number(e),s=Number(t);return isNaN(i)||isNaN(s)?e===t:Math.abs(s-i)<.25}function zR(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])?Boolean(e):e?"in":"out"}function HR(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{backfillSplitMode:s="intersect"}=i,n=[],o={added:{},moved:{},removed:{}},r=function(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"move";e&&(isNaN(e.point.x)||isNaN(e.point.y))&&(e=t);const r={from:e?.point,to:t?.point,moveTo:zR(e?.point.moveTo,t?.point.moveTo),change:s};"move"===s?(o.moved[i]=r,d++,u++):"in"===s?(o.added[i]=r,u++):"out"===s&&(o.removed[i]=r,d++),n.push(r)},{min:a,max:l}=mR(t.nodeData),{min:c,max:h}=mR(e.nodeData);let d=0,u=0;for(;d<t.nodeData.length||u<e.nodeData.length;){const i=t.nodeData[d],s=e.nodeData[u],n=i?GR(i.xValue??NaN,e.scales.x):void 0,o=s?GR(s.xValue??NaN,t.scales.x):void 0,p=void 0;if(null!=n&&BR(n,s?.point.x))r(i,s,s.xValue,"move");else if(null!=n&&n<(c?.point.x??-1/0))r(i,p,i.xValue,"out");else if(null!=n&&n>(h?.point.x??1/0))r(i,p,i.xValue,"out");else if(null!=o&&o<(a?.point.x??-1/0))r(p,s,s.xValue,"in");else if(null!=o&&o>(l?.point.x??1/0))r(p,s,s.xValue,"in");else if(null!=n&&n<s?.point.x)r(i,p,i.xValue,"out");else if(null!=o&&o<i?.point.x)r(p,s,s.xValue,"in");else if(i)r(i,p,i.xValue,"out");else{if(!s)throw new Error("Unable to process points");r(p,s,s.xValue,"in")}}return vR(n,s),{result:n,resultMap:o}}function VR(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{backfillSplitMode:n="intersect",multiDatum:o=!1}=s,r=[],a={added:{},moved:{},removed:{}},l={added:{},moved:{},removed:{}},c={in:"added",move:"moved",out:"removed"};let h,d;const u=(e,t)=>{var i;const s=c[t.change];o?((i=l[s])[e]??(i[e]=[]),l[s][e].push(t)):a[s][e]=t,h=t,d=Wv(e)};let p=0,g=0,m=!1;for(;p<t.nodeData.length||g<e.nodeData.length;){const s=t.nodeData[p],n=e.nodeData[g],a=Wv(s?.xValue),l=Wv(n?.xValue);let c;if(a===l)c={change:"move",moveTo:zR(s.point.moveTo??!1,n.point.moveTo),from:s.point,to:n.point},u(s?.xValue,c),p++,g++;else if(i?.removed.has(String(a)))c={change:"out",moveTo:s.point.moveTo??!1,from:s.point},u(s?.xValue,c),p++;else if(i?.added.has(String(l)))c={change:"in",moveTo:n.point.moveTo??!1,to:n.point},u(n?.xValue,c),g++;else if(o&&h&&d===a)c={...h},u(s?.xValue,c),p++;else{if(!o||!h||d!==l){m=!0;break}c={...h},u(n?.xValue,c),g++}r.push(c)}let f=-1/0;return m||(m=r.some((e=>{const{change:t,to:{x:i=-1/0}={}}=e;if("out"===t)return;const s=i<f;return f=i,s}))),m?{result:void 0,resultMap:void 0}:(vR(r,n),{result:r,resultMap:o?l:a})}function jR(e,t,i){let s="updated";const n=e=>e.visible;if(!n(t)&&n(e))s="added";else if(n(t)&&!n(e))s="removed";else for(let o=0;o<i.length&&"move"===i[o].change&&i[o].from?.x===i[o].to?.x&&i[o].from?.y===i[o].to?.y;o++)if(o===i.length-1)return"no-op";return s}function WR(e,t){const i="none"===t?"updated":e,s={fromFn:t=>{let s;return s="removed"===e?{finish:{visible:!1}}:"added"===e?{start:{visible:!0}}:{},{phase:kg[i],...s}},toFn:e=>({phase:kg[i]})};return"fade"===t?{fromFn:t=>({opacity:"added"===e?0:t.opacity,...s.fromFn(t)}),toFn:t=>({opacity:"removed"===e?0:1,...s.toFn(t)})}:s}function UR(e,t,i,s,n,o){const r=jR(e,t,i);return{status:r,path:{addPhaseFn:(e,t)=>{o(i,{move:1,in:e},t,n)},updatePhaseFn:(e,t)=>{o(i,{move:e},t,n)},removePhaseFn:(e,t)=>{o(i,{move:0,out:e},t,n)}},pathProperties:WR(r,s)}}function _R(e,t,i,s){const n="category"===e.scales.x?.type;if(n!==("category"===t.scales.x?.type)||!PR(e.scales.x)||!PR(t.scales.x))return;const{result:o,resultMap:r}=n?VR(e,t,i):HR(e,t);let a="updated";if(t.visible&&!e.visible?a="removed":!t.visible&&e.visible&&(a="added"),void 0===o||void 0===r)return;const l=(i?.changed??!0)||function(e,t){return!TR(e.scales.x,t.scales.x)||!TR(e.scales.y,t.scales.y)}(e,t)||"updated"!==a;return{...UR(e,t,o,"fade",s,xR),marker:uR(r,a),hasMotion:l}}function YR(e){return Wv(e).valueOf()}function KR(e,t){let{data:i}=e;return i.map(((e,i)=>({xValue0Index:t.indexOf(YR(e.xValue0)),xValue1Index:t.indexOf(YR(e.xValue1)),datumIndex:i})))}function ZR(e,t){const i=new Set;for(const{xValue0:a,xValue1:l}of e.data){const e=YR(a),t=YR(l);i.add(e).add(t)}const s=Array.from(i).sort(((t,i)=>GR(t,e.scales.x)-GR(i,e.scales.x))),n=[];for(const{xValue0:a,xValue1:l}of t.data){const e=YR(a),t=YR(l);i.has(e)||(i.add(e),n.push(e)),i.has(t)||(i.add(t),n.push(t))}n.sort(((e,i)=>GR(e,t.scales.x)-GR(i,t.scales.x)));const o=s;let r=0;for(const a of n){e:for(let e=o.length;e>r;e-=1){if(GR(a,t.scales.x)>GR(o[e],t.scales.x)){r=e+1;break e}}o.splice(r,0,a),r+=1}if(!function(e,t){let i=-1/0;for(const s of e){const e=GR(s,t.scales.x);if(Number.isFinite(e)){if(e<i)return!1;i=e}}return!0}(o,t))return;return{axisValues:o,oldDataAxisIndices:KR(t,o),newDataAxisIndices:KR(e,o)}}function $R(e,t,i){if(i.xValue1Index===i.xValue0Index+1)return e;const s=ZI(e),n=(s[1].x-s[0].x)/(i.xValue1Index-i.xValue0Index),o=s[0].x+(t-i.xValue0Index)*n;return QI(e,o,o+n)}function QR(e,t){const[i,s]=ZI(e),n=GR(0,t.scales.y);return $I(e,{x:i.x,y:n},{x:s.x,y:n})}function XR(e,t,i,s,n){let o,r;if(s.xValue0Index>=n.xValue1Index){const e=i.findLast((e=>e.xValue1Index<=n.xValue1Index))?.datumIndex,s=null!=e?t.data[e]:void 0;o=s?.xValue1,r=s?.yValue1}else if(s.xValue0Index<=n.xValue0Index){const e=i.find((e=>e.xValue0Index>=n.xValue0Index))?.datumIndex,s=null!=e?t.data[e]:void 0;o=s?.xValue0,r=s?.yValue0}if(null==o||null==r)return QR(e,t);const a={x:GR(o,t.scales.x),y:GR(r,t.scales.y)};return $I(e,a,a)}function qR(e,t){const i=YR(e.xValue0),s=YR(e.xValue1);return t?.find((e=>YR(e.xValue0)===i&&YR(e.xValue1)===s))?.span}function JR(e,t,i,s,n,o){const r=e.data[i.datumIndex],a=r.span,l=qR(r,s);if(null!=l)o.removed.push({from:l,to:l}),o.moved.push({from:l,to:a}),o.added.push({from:a,to:a});else{const s=XR(a,e,t,i,n);o.added.push({from:s,to:a})}}function eE(e,t,i,s,n,o){const r=e.data[i.datumIndex],a=r.span,l=qR(r,s);if(null!=l)o.removed.push({from:a,to:a}),o.moved.push({from:a,to:l}),o.added.push({from:l,to:l});else{const s=XR(a,e,t,i,n);o.removed.push({from:a,to:s})}}function tE(e,t,i,s,n){const o=t[n.xValue0Index],r=i.data.find((e=>YR(e.xValue0)===o)),a=t[n.xValue1Index],l=i.data.find((e=>YR(e.xValue1)===a));if(null==r||null==l)return;const[{x:c},{x:h}]=ZI(e),d=GR(r.xValue0,i.scales.x),u=GR(r.yValue0,i.scales.y),p=GR(l.xValue1,i.scales.x),g=GR(l.yValue1,i.scales.y);let m=s.data[n.datumIndex].span;return m=$I(m,{x:d,y:u},{x:p,y:g}),m=QI(m,c,h),m}function iE(e,t,i,s,n,o,r,a){const l=s+1,c=o.find((e=>e.xValue0Index<=s&&e.xValue1Index>=l)),h=n.find((e=>e.xValue0Index<=s&&e.xValue1Index>=l)),d=t.zeroData,u=e.zeroData;if(null==c&&null!=h)return void JR(e,n,h,d,r,a);if(null!=c&&null==h)return void eE(t,o,c,u,r,a);if(null==c||null==h)return;let p;p=c.xValue0Index===h.xValue0Index&&c.xValue1Index===h.xValue1Index?0:c.xValue0Index<=h.xValue0Index&&c.xValue1Index>=h.xValue1Index?-1:c.xValue0Index>=h.xValue0Index&&c.xValue1Index<=h.xValue1Index?1:0;const g=$R(t.data[c.datumIndex].span,s,c),m=$R(e.data[h.datumIndex].span,s,h);if(1===p){const s=tE(g,i,t,e,h);null!=s?(a.removed.push({from:g,to:s}),a.moved.push({from:s,to:m}),a.added.push({from:m,to:m})):eE(t,o,c,u,r,a)}else if(-1===p){const s=tE(m,i,e,t,c);null!=s?(a.removed.push({from:g,to:g}),a.moved.push({from:g,to:s}),a.added.push({from:s,to:m})):JR(e,n,h,d,r,a)}else a.removed.push({from:g,to:g}),a.moved.push({from:g,to:m}),a.added.push({from:m,to:m})}function sE(e,t){const i={removed:[],moved:[],added:[]},s=ZR(e,t);return null==s?function(e,t,i){for(const s of t.data){const e=s.span,n=qR(s,t.zeroData)??QR(e,t);i.removed.push({from:e,to:n})}for(const s of e.data){const t=s.span,n=qR(s,e.zeroData)??QR(t,e);i.added.push({from:n,to:t})}}(e,t,i):function(e,t,i,s){const{axisValues:n,oldDataAxisIndices:o,newDataAxisIndices:r}=e,a={xValue0Index:Math.max(o.at(0)?.xValue0Index??-1/0,r.at(0)?.xValue0Index??-1/0),xValue1Index:Math.min(o.at(-1)?.xValue1Index??1/0,r.at(-1)?.xValue1Index??1/0)};for(let l=0;l<n.length-1;l+=1)iE(t,i,n,l,r,o,a,s)}(s,e,t,i),i}function nE(e,t,i,s){for(let n=0;n<i.length;n+=1){const o=i[n],r=s[n];rR(t.path,o.from,o.to,e,1,!1),rR(t.path,r.from,r.to,e,2,!0),t.path.closePath()}}function oE(e,t,i){for(const s of i)rR(t.path,s.from,s.to,e,1,!1)}function rE(e,t){if("category"===e.scales.x?.type!==("category"===t.scales.x?.type)||!PR(e.scales.x)||!PR(t.scales.x))return;let i="updated";t.visible&&!e.visible?i="removed":!t.visible&&e.visible&&(i="added");const s=sE({scales:e.scales,data:e.fillData.spans,visible:e.visible},{scales:t.scales,data:t.fillData.spans,visible:t.visible}),n=sE({scales:e.scales,data:e.fillData.phantomSpans,visible:e.visible},{scales:t.scales,data:t.fillData.phantomSpans,visible:t.visible}),o=sE({scales:e.scales,data:e.strokeData.spans,visible:e.visible,zeroData:e.fillData.phantomSpans},{scales:t.scales,data:t.strokeData.spans,visible:t.visible,zeroData:t.fillData.phantomSpans}),r="none",a=function(e,t,i,s){return{status:e,path:{addPhaseFn:(e,s)=>nE(e,s,t.added,i.added),updatePhaseFn:(e,s)=>nE(e,s,t.moved,i.moved),removePhaseFn:(e,s)=>nE(e,s,t.removed,i.removed)},pathProperties:WR(e,s)}}(i,s,n,r),l=function(e,t,i){return{status:e,path:{addPhaseFn:(e,i)=>oE(e,i,t.added),updatePhaseFn:(e,i)=>oE(e,i,t.moved),removePhaseFn:(e,i)=>oE(e,i,t.removed)},pathProperties:WR(e,i)}}(i,o,r);return{status:i,fill:a,stroke:l}}var aE=class extends eM{constructor(e){super({moduleCtx:e,directionKeys:Qx,directionNames:Xx,pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[2,0],animationResetFns:{path:RR({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:GI,marker:(e,t)=>({opacity:1,scalingX:1,scalingY:1,...dR(0,t)})}}),this.properties=new KI}async processData(e){if(null==this.data||!this.properties.isValid())return;const{data:t,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:n=1}={}}=this,{xKey:o,yKey:r,yFilterKey:a,connectMissingData:l,normalizedTo:c}=this.properties,h=!this.ctx.animationManager.isSkipped(),d=this.axes.x?.scale,u=this.axes.y?.scale,{xScaleType:p,yScaleType:g}=this.getScaleInformation({xScale:d,yScale:u}),m={value:`area-stack-${s}-yValue`,values:`area-stack-${s}-yValues`,stack:`area-stack-${s}-yValue-stack`,marker:`area-stack-${s}-yValues-marker`},f=[];Vp(c)&&f.push(MI(Object.values(m),c,"range")),h&&f.push(RI());const y={invalidValue:null};l&&n>1&&(y.invalidValue=0),i||(y.forceValue=0),await this.requestDataModel(e,t,{props:[pI(o,p,{id:"xValue"}),gI(r,g,{id:"yValueRaw",...y}),...null!=a?[gI(a,g,{id:"yFilterRaw"})]:[],...CI(r,g,{id:"yValueStack",...y,groupId:m.stack}),gI(r,g,{id:"yValue",...y,groupId:m.value}),...vI(r,"window","current",{id:"yValueEnd",...y,groupId:m.values},g),...vI(r,"normal","current",{id:"yValueCumulative",...y,groupId:m.marker},g),...f],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i,axes:s}=this;if(!t||!i||0===t.data.length)return[];const n=s.y,o=i.resolveProcessedDataDefById(this,"xValue"),r=i.getDomain(this,"xValue","key",t),a=i.getDomain(this,"yValueEnd","value",t);if("x"===e)return"key"===o?.def.type&&"category"===o.def.valueType?r:CS(Bg(r));if(n instanceof dM||n instanceof uM)return CS(a);return CS([a[0]>0?0:a[0],a[1]<0?0:a[1]])}async createNodeData(){const{axes:e,data:t,processedData:{data:i}={},dataModel:s}=this,n=e.x,o=e.y;if(!n||!o||!t||!s||!this.properties.isValid())return;const{yKey:r,xKey:a,yFilterKey:l,marker:c,label:h,fill:d,stroke:u,connectMissingData:p}=this.properties,{scale:g}=n,{scale:m}=o,{isContinuousY:f}=this.getScaleInformation({xScale:g,yScale:m}),y=(g.bandwidth??0)/2,v=s.resolveProcessedDataDefsByIds(this,["yValueEnd","yValueRaw","yValueCumulative"]),C=null!=l?s.resolveProcessedDataIndexById(this,"yFilterRaw"):void 0,b=s.resolveProcessedDataIndexById(this,"yValueStack"),w=(e,t,i)=>{let s;return(Vp(this.properties.normalizedTo)?f&&Vv(i):!isNaN(i))&&(s=t),{x:g.convert(e)+y,y:m.convert(s),size:c.size}},S=r,x=[],M=[],{visibleSameStackCount:D}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);let I=-1,R=!1;i?.forEach((e=>{const{keys:t,keys:[i],datum:n,values:o}=e;o.forEach(((e,o)=>{I++;const l=n[o],p=s.resolveProcessedDataDefsValues(v,{keys:t,values:e}),{yValueRaw:g,yValueCumulative:m,yValueEnd:f}=p,y=Number.isFinite(g),b=w(i,+m,g),D=null!=C?e[C]===g:void 0;if(!1===D&&(R=!0),y&&c&&M.push({index:I,series:this,itemId:S,datum:l,midPoint:{x:b.x,y:b.y},cumulativeValue:f,yValue:g,xValue:i,yKey:r,xKey:a,point:b,fill:c.fill??d,stroke:c.stroke??u,strokeWidth:c.strokeWidth??this.getStrokeWidth(this.properties.strokeWidth),selected:D}),y&&h){const e=this.getLabelText(h,{value:g,datum:l,xKey:a,yKey:r,xName:this.properties.xName,yName:this.properties.yName},$D);x.push({index:I,series:this,itemId:r,datum:l,x:b.x,y:b.y,labelText:e})}}))}));const{interpolation:E}=this.properties,A=e=>{let t;const i=e.map((e=>e.point));switch(E.type){case"linear":t=function(e){const t=[];let i=0,s=NaN,n=NaN;for(const{x:o,y:r}of e){if(i>0){const e=1===i;t.push({type:"linear",moveTo:e,x0:s,y0:n,x1:o,y1:r})}i+=1,s=o,n=r}return t}(i);break;case"smooth":t=function(e,t){const i=Array.isArray(e)?e:Array.from(e);if(i.length<=1)return[];const s=i.map(((e,t)=>{const s=0===t?e:i[t-1],n=t===i.length-1?e:i[t+1],o=0===t||t===i.length-1;if(Math.sign(s.y-e.y)===Math.sign(n.y-e.y))return 0;if(!o){const t=Math.abs(s.y-n.y),i=Math.abs(e.y-s.y)/t,o=Math.abs(e.y-n.y)/t;if(i<=qI||1-i<=qI||o<=qI||1-o<=qI)return 0}return(n.y-s.y)/(n.x-s.x)}));0===s[1]&&(s[0]*=2),0===s[s.length-2]&&(s[s.length-1]*=2);const n=[];for(let o=1;o<i.length;o+=1){const e=i[o-1],r=s[o-1],a=i[o],l=s[o],c=a.x-e.x,h=a.y-e.y;let d=c*t/3,u=c*r*t/3,p=c*t/3,g=c*l*t/3;0===l&&Math.abs(u)>Math.abs(h)&&(d*=Math.abs(h/u),u=Math.sign(u)*Math.abs(h)),0===r&&Math.abs(g)>Math.abs(h)&&(p*=Math.abs(h/g),g=Math.sign(g)*Math.abs(h)),n.push({type:"cubic",moveTo:1===o,cp0x:e.x,cp0y:e.y,cp1x:e.x+d,cp1y:e.y+u,cp2x:a.x-p,cp2y:a.y-g,cp3x:a.x,cp3y:a.y})}return n}(i,E.tension);break;case"step":t=function(e,t){const i=[];let s=0,n=NaN,o=NaN;const r="number"===typeof t?t:XI[t];for(const{x:a,y:l}of e){if(s>0){const e=1===s,t=n+(a-n)*r;i.push({type:"step",moveTo:e,x0:n,y0:o,x1:a,y1:l,stepX:t})}s+=1,n=a,o=l}return i}(i,E.position)}return t.map(((t,i)=>({span:t,xValue0:e[i].xDatum,yValue0:e[i].yDatum,xValue1:e[i+1].xDatum,yValue1:e[i+1].yDatum})))},L=i?.flatMap((e=>{const{keys:[t],values:i}=e;return i.map((e=>({xDatum:t,values:e})))})),k=(e,t)=>({point:{x:g.convert(e)+y,y:m.convert(t)},xDatum:e,yDatum:t}),T=e=>{const t=[];if(null==L)return[];for(let i=0;i<L.length;i+=1){const{xDatum:s,values:n}=L[i],o=n[b],r=o[e],a=Number.isFinite(r);if(p&&!a)continue;const l=L[i-1]?.values[b],c=L[i+1]?.values[b];let h=0,d=0;for(let t=0;t<=e;t+=1){const e=o[t];if(Number.isFinite(e)){(null==l||Number.isFinite(l[t]))&&(h+=e),(null==c||Number.isFinite(c[t]))&&(d+=e)}}const u=t[t.length-1];if(p||h===d&&a){const e=Math.max(h,d),i=k(s,e);Array.isArray(u)?u.push(i):null!=u?(u.skip+=1,t.push([i])):t.push([i])}else if(!a&&Array.isArray(u)&&1===u.length)t[t.length-1]={skip:1};else{const e=k(s,h),i=k(s,d);Array.isArray(u)?u.push(e):null!=u&&(u.skip+=1),t.push(a?[i]:{skip:0})}}return(e=>e.flatMap((e=>Array.isArray(e)?A(e):new Array(e.skip).fill(null))))(t)},P=this.seriesGrouping?.stackIndex??0,N=()=>{if(null==L)return[];const e=L.map((e=>{let{xDatum:t,values:i}=e;const s=i[b][P];if(!p||Number.isFinite(s))return k(t,0)})).filter((e=>null!=e));return A(e)},F=T(P),O=F.map((()=>null));for(let z=P-1;z>=-1;z-=1){let e;for(let t=0;t<O.length;t+=1)null==O[t]&&(e??(e=-1!==z?T(z):N()),O[t]=e[t])}const G=F.map(((e,t)=>e??O[t])),B=F.filter((e=>null!=e));return{itemId:S,fillData:{itemId:S,spans:G,phantomSpans:O},strokeData:{itemId:S,spans:B},labelData:x,nodeData:M,scales:this.calculateScaling(),visible:this.visible,stackVisible:D>0,crossFiltering:R}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:e}=this.properties.marker;return new(jx(e))}async updatePathNodes(e){const{opacity:t,visible:i,animationEnabled:s}=e,[n,o]=e.paths,r=!0===this.contextNodeData?.crossFiltering,a=this.getStrokeWidth(this.properties.strokeWidth);o.setProperties({fill:void 0,lineJoin:o.lineCap="round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:a,strokeOpacity:this.properties.strokeOpacity*(r?.25:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:t,visible:i||s}),n.setProperties({stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity*(r?.125:1),fillShadow:this.properties.shadow,opacity:t,visible:i||s}),ER(this,o),ER(this,n)}async updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.checkPathDirty()}updateFillPath(e,t){const{spans:i,phantomSpans:s}=t.fillData,[n]=e,{path:o}=n;o.clear(!0);for(let r=0;r<i.length;r+=1){const{span:e}=i[r],t=s[r].span;oR(o,e,1,!1),oR(o,t,2,!0),o.closePath()}n.checkPathDirty()}updateStrokePath(e,t){const{spans:i}=t.strokeData,[,s]=e,{path:n}=s;n.clear(!0);for(const{span:o}of i)oR(n,o,1,!1);s.checkPathDirty()}async updateMarkerSelection(e){const{nodeData:t,markerSelection:i}=e,s=this.properties.marker.enabled||!0===this.contextNodeData?.crossFiltering;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(s?t:[])}async updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,marker:o,fill:r,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:h,highlightStyle:d}=this.properties,u=ag(i&&d.item,o.getStyle(),{fill:r,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:h});t.each(((e,t)=>{this.updateMarkerStyle(e,o,{datum:t,highlighted:i,xKey:s,yKey:n},u,{selected:t.selected})})),i||this.properties.marker.markClean()}async updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}async updateLabelNodes(e){const{labelSelection:t}=e,{enabled:i,fontStyle:s,fontWeight:n,fontSize:o,fontFamily:r,color:a}=this.properties.label;t.each(((e,t)=>{const{x:l,y:c,labelText:h}=t;h&&i&&this.visible?(e.fontStyle=s,e.fontWeight=n,e.fontSize=o,e.fontFamily=r,e.textAlign="center",e.textBaseline="bottom",e.text=h,e.x=l,e.y=c-10,e.fill=a,e.visible=!0):e.visible=!1}))}getTooltipHtml(e){const{id:t,axes:i,dataModel:s}=this,{xKey:n,xName:o,yName:r,tooltip:a,marker:l}=this.properties,{yKey:c,xValue:h,yValue:d,datum:u,itemId:p}=e,g=i.x,m=i.y;if(!this.properties.isValid()||!(g&&m&&Jp(d))||!s)return xv;const f=g.formatDatum(h),y=m.formatDatum(d),v=XD(r),C=XD(f+": "+y),b=ag({fill:this.properties.fill},l.getStyle(),{stroke:this.properties.stroke,strokeWidth:this.properties.strokeWidth}),{fill:w}=this.getMarkerStyle(l,{datum:e,xKey:n,yKey:c,highlighted:!1},b);return a.toTooltipHtml({title:v,content:C,backgroundColor:w},{datum:u,itemId:p,xKey:n,xName:o,yKey:c,yName:r,color:w,title:v,seriesId:t})}getLegendData(e){if(!this.data?.length||!this.properties.isValid()||!this.properties.showInLegend||"category"!==e)return[];const{yKey:t,yName:i,fill:s,stroke:n,fillOpacity:o,strokeOpacity:r,strokeWidth:a,lineDash:l,marker:c,visible:h,legendItemName:d}=this.properties,u=!c.enabled||void 0===c.fill;return[{legendType:e,id:this.id,itemId:t,seriesId:this.id,enabled:h,label:{text:d??i??t},symbols:[{marker:{shape:c.shape,fill:u?s:c.fill,fillOpacity:u?o:c.fillOpacity,stroke:c.stroke??n,strokeOpacity:c.strokeOpacity??r,strokeWidth:c.strokeWidth??0,enabled:c.enabled||a<=0},line:{stroke:n,strokeOpacity:r,strokeWidth:a,lineDash:l}}],legendItemName:d}]}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,contextData:s,paths:n}=e,{animationManager:o}=this.ctx;this.updateAreaPaths(n,s),MR(this,o,...n),df([t],dR),cR(this,o,t),FI(this,"labels",o,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{markerSelection:i,labelSelection:s,contextData:n,paths:o,previousContextData:r}=e,[a,l]=o;if(null==a&&null==l)return;this.resetMarkerAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateAreaPaths(o,n)},h=()=>{t.skipCurrentBatch(),c()};if(null==n||null==r)return c(),aR(this,t,"added",i),DR(this,"fill_path_properties",t,"add",a),DR(this,"stroke_path_properties",t,"add",l),void FI(this,"labels",t,s);if(n.crossFiltering!==r.crossFiltering)return void h();const d=rE(n,r);void 0!==d?"no-op"!==d.status&&(aR(this,t,void 0,i),Tg(this.id,"fill_path_properties",t,[a],d.fill.pathProperties),ZD(this.id,"fill_path_update",t,[a],d.fill.path),Tg(this.id,"stroke_path_properties",t,[l],d.stroke.pathProperties),ZD(this.id,"stroke_path_update",t,[l],d.stroke.path),FI(this,"labels",t,s),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(o,n)})):h()}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ny}getFormattedMarkerStyle(e){const{xKey:t,yKey:i}=e;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:t,yKey:i,highlighted:!0})}computeFocusBounds(e){return pR(this,e)}};aE.className="AreaSeries",aE.type="area";var lE={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",moduleFactory:e=>new aE(e),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:hD,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear",tension:1,position:"end"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:tD,color:iD}}},paletteFactory:e=>{const{marker:t}=_M(e);return{fill:t.fill,stroke:t.stroke,marker:t}}};function cE(e,t){return i=>t(i)?[{...e[0],position:e[1].position},{...e[1],position:e[0].position}]:e}function hE(e,t){for(const i of t){const t=i.datum;void 0===t?Xd.error("undefined datum"):e.addValue(i,t)}}function dE(e,t){const{x:i,y:s}=t,{nearest:n,distanceSquared:o}=e.getQuadTree().find(i,s);if(void 0!==n)return{datum:n.value,distance:Math.sqrt(o)}}var uE=class extends Jx{constructor(){super(...arguments),this.direction="vertical"}};Wd([lm(Qm)],uE.prototype,"direction",2);var pE=class extends eM{constructor(){super(...arguments),this.groupScale=new nm,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}padBandExtent(e,t){const i="boolean"===typeof t?1:.5,s=Jp(this.smallestDataInterval)?this.smallestDataInterval*i:0,n=Bg(e)??[NaN,NaN];return"boolean"===typeof t?n[t?0:1]-=(t?1:-1)*s:(n[0]-=s,n[1]+=s),CS(n)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return"vertical"===this.properties.direction}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const e=this.getBarDirection();return this.axes[e]}getCategoryAxis(){const e=this.getCategoryDirection();return this.axes[e]}getBandwidth(e){return Gg.is(e.scale)?e.scale.calcBandwidth(this.smallestDataInterval):e.scale.bandwidth}updateGroupScale(e){const t=[],{groupScale:i}=this,s=this.getBandwidth(e),{index:n,visibleGroupCount:o}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let r=0;r<o;r++)t.push(String(r));i.domain=t,i.range=[0,s??0],e instanceof NC?i.paddingInner=e.groupPaddingInner:i.padding=e instanceof YC?.1:0,i.round=0!==i.padding;return{barWidth:i.bandwidth>=1?i.bandwidth:i.rawBandwidth,groupIndex:n}}resolveKeyDirection(e){return"x"===this.getBarDirection()?"x"===e?"y":"x":e}initQuadTree(e){hE(e,this.datumNodesIter())}pickNodeClosestDatum(e){return dE(this,e)}},gE=class extends Pv{constructor(){super(...arguments),this.placement="inside-center",this.padding=0}};Wd([lm(ef(["inside-center","inside-start","inside-end","outside-start","outside-end",{value:"inside",deprecatedTo:"inside-center"},{value:"outside",deprecatedTo:"outside-end"}],"a placement"))],gE.prototype,"placement",2),Wd([lm(ym)],gE.prototype,"padding",2);var mE=class extends uE{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new zI,this.label=new gE,this.tooltip=new WI,this.sparklineMode=!1}};function fE(e,t){e.crisp=t.crisp??!0,e.fill=t.fill,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.fillOpacity=t.fillOpacity,e.strokeOpacity=t.strokeOpacity,e.lineDash=t.lineDash,e.lineDashOffset=t.lineDashOffset,e.fillShadow=t.fillShadow,e.topLeftCornerRadius=!1!==t.topLeftCornerRadius?t.cornerRadius??0:0,e.topRightCornerRadius=!1!==t.topRightCornerRadius?t.cornerRadius??0:0,e.bottomRightCornerRadius=!1!==t.bottomRightCornerRadius?t.cornerRadius??0:0,e.bottomLeftCornerRadius=!1!==t.bottomLeftCornerRadius?t.cornerRadius??0:0,e.visible=t.visible??!0}function yE(e){let{datum:t,isHighlighted:i,style:s,highlightStyle:n,itemStyler:o,seriesId:r,ctx:{callbackCache:a},...l}=e;const{fill:c,fillOpacity:h,stroke:d,strokeWidth:u,strokeOpacity:p,lineDash:g,lineDashOffset:m,cornerRadius:f=0}=ag(i&&n,s);let y;return o&&(y=a.call(o,{datum:t.datum,xKey:t.xKey,fill:c,fillOpacity:h,stroke:d,strokeWidth:u,strokeOpacity:p,lineDash:g,lineDashOffset:m,cornerRadius:f,highlighted:i,seriesId:r,...l})),{fill:y?.fill??c,fillOpacity:y?.fillOpacity??h,stroke:y?.stroke??d,strokeWidth:y?.strokeWidth??u,strokeOpacity:y?.strokeOpacity??p,lineDash:y?.lineDash??g,lineDashOffset:y?.lineDashOffset??m,cornerRadius:y?.cornerRadius??f,topLeftCornerRadius:s.topLeftCornerRadius,topRightCornerRadius:s.topRightCornerRadius,bottomRightCornerRadius:s.bottomRightCornerRadius,bottomLeftCornerRadius:s.bottomLeftCornerRadius,fillShadow:s.fillShadow}}function vE(e,t,i,s){if(null!=t){const[e,i]=t;if(0!==e||1!==i)return!1}if(Gg.is(e)){const t=e.calcBandwidth(s)-e.calcBandwidth(i);if(t>0&&t<1)return!1}return!0}Wd([lm(fm)],mE.prototype,"xKey",2),Wd([lm(fm,{optional:!0})],mE.prototype,"xName",2),Wd([lm(fm)],mE.prototype,"yKey",2),Wd([lm(fm,{optional:!0})],mE.prototype,"yName",2),Wd([lm(fm,{optional:!0})],mE.prototype,"yFilterKey",2),Wd([lm(fm,{optional:!0})],mE.prototype,"stackGroup",2),Wd([lm(ym,{optional:!0})],mE.prototype,"normalizedTo",2),Wd([lm(Tm)],mE.prototype,"fill",2),Wd([lm(wm)],mE.prototype,"fillOpacity",2),Wd([lm(Tm)],mE.prototype,"stroke",2),Wd([lm(bm)],mE.prototype,"strokeWidth",2),Wd([lm(wm)],mE.prototype,"strokeOpacity",2),Wd([lm(jm)],mE.prototype,"lineDash",2),Wd([lm(bm)],mE.prototype,"lineDashOffset",2),Wd([lm(bm)],mE.prototype,"cornerRadius",2),Wd([lm(gm,{optional:!0})],mE.prototype,"crisp",2),Wd([lm(mm,{optional:!0})],mE.prototype,"itemStyler",2),Wd([lm(um,{optional:!0})],mE.prototype,"shadow",2),Wd([lm(um)],mE.prototype,"label",2),Wd([lm(um)],mE.prototype,"tooltip",2),Wd([lm(gm)],mE.prototype,"sparklineMode",2);var CE=e=>up(e.yValue??0);function bE(e,t,i){const{startingX:s,startingY:n}=function(e,t){const i=t[e?"y":"x"];let s=1/0,n=0;if(!i)return{startingX:s,startingY:n};e?n=i.scale.convert(Gg.is(i.scale)?0:Math.max(...i.range)):s=i.scale.convert(Gg.is(i.scale)?0:Math.min(...i.range));return{startingX:s,startingY:n}}(e,t);return{isVertical:e,calculate:(t,i)=>{let o=e?t.x:s,r=e?n:t.y,a=e?t.width:0,l=e?0:t.height;const{opacity:c}=t;let h;return i&&(isNaN(o)||isNaN(r))&&(({x:o,y:r}=i),a=e?i.width:0,l=e?0:i.height,e&&!CE(i)?r+=i.height:!e&&CE(i)&&(o+=i.width)),h=null==t.clipBBox?void 0:CE(t)?e?new bp(o,r-l,a,l):new bp(o-a,r,a,l):new bp(o,r,a,l),{x:o,y:r,width:a,height:l,clipBBox:h,opacity:c}},mode:i}}function wE(e,t){return{isVertical:e,calculate:t=>({x:e?t.x:t.x+t.width/2,y:e?t.y+t.height/2:t.y,width:e?t.width:0,height:e?0:t.height,clipBBox:t.clipBBox,opacity:t.opacity}),mode:t}}function SE(e){const t=e=>null==e||isNaN(e.x)||isNaN(e.y);return{toFn:(i,s,n)=>{let o;return o="removed"===n&&null==i.datum&&"fade"===e.mode?{...xE(i,s),opacity:0}:"removed"===n||t(s)?e.calculate(s,i.previousDatum):{x:s.x,y:s.y,width:s.width,height:s.height,clipBBox:s.clipBBox,opacity:s.opacity},o},fromFn:(i,s,n)=>{let o;"updated"===n&&t(s)?n="removed":"updated"===n&&t(i.previousDatum)&&(n="added"),o="added"===n&&null==i.previousDatum&&"fade"===e.mode?{...xE(i,s),opacity:0}:"unknown"===n||"added"===n?e.calculate(s,i.previousDatum):{x:i.x,y:i.y,width:i.width,height:i.height,clipBBox:i.clipBBox,opacity:i.opacity};const r=kg[n];return{...o,phase:r}}}}function xE(e,t){let{x:i,y:s,width:n,height:o,clipBBox:r,opacity:a}=t;return{x:i,y:s,width:n,height:o,clipBBox:r,opacity:a}}function ME(e,t,i){if(void 0===e)return;const{x:s,y:n,width:o,height:r}=e;return iy.toCanvas(t,new bp(s,n,o,r)).clip(i)}function DE(e,t,i){if(t.enabled&&i){const{x:s,y:n,text:o,textAlign:r,textBaseline:a}=i,{color:l,fontStyle:c,fontWeight:h,fontSize:d,fontFamily:u}=t;e.setProperties({visible:!0,x:s,y:n,text:o,fill:l,fontStyle:c,fontWeight:h,fontSize:d,fontFamily:u,textAlign:r,textBaseline:a})}else e.visible=!1}var IE={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}};function RE(e){let{isUpward:t,isVertical:i,placement:s,padding:n=0,rect:o}=e,r=o.x+o.width/2,a=o.y+o.height/2,l="center",c="middle";if("inside-center"!==s){const e=(t?1:-1)*(i?-1:1),{direction:h,textAlignment:d}=IE[s],u=.5*(h+1);if(i){a=(t?o.y+o.height:o.y)+o.height*e*u+n*d*e,c=d===e?"top":"bottom"}else{r=(t?o.x:o.x+o.width)+o.width*e*u+n*d*e,l=d===e?"left":"right"}}return{x:r,y:a,textAlign:l,textBaseline:c}}var EE={"inside-center":"inside-center","inside-start":"inside-start","inside-end":"inside-end","outside-start":"outside-start","outside-end":"outside-end",inside:"inside-center",outside:"outside-end"},AE=class extends pE{constructor(e){super({moduleCtx:e,directionKeys:Qx,directionNames:Xx,pickModes:[2,1,0],pathsPerSeries:[],hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:xE,label:GI}}),this.properties=new mE}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return null!=this.properties.yFilterKey&&(null==this.seriesGrouping||0===this.seriesGrouping.stackIndex)}async processData(e){if(!this.properties.isValid()||!this.data)return;const{seriesGrouping:{groupIndex:t=this.id}={},data:i=[]}=this,{xKey:s,yKey:n,yFilterKey:o,normalizedTo:r}=this.properties,a=!this.ctx.animationManager.isSkipped(),l=this.getCategoryAxis()?.scale,c=this.getValueAxis()?.scale,{isContinuousX:h,xScaleType:d,yScaleType:u}=this.getScaleInformation({xScale:l,yScale:c}),p=`bar-stack-${t}-yValues`,g=`${p}-trailing`,m=[];Jp(r)&&m.push(MI([p,g],Math.abs(r),"range")),a&&this.processedData&&m.push(PI(this.processedData)),a&&m.push(RI());const f=this.visible?{}:{forceValue:0},{processedData:y}=await this.requestDataModel(e,i,{props:[pI(s,d,{id:"xValue"}),gI(n,u,{id:"yValue-raw",invalidValue:null,...f}),...this.crossFilteringEnabled()?[gI(o,u,{id:"yFilterValue",invalidValue:null,...f})]:[],...vI(n,"normal","current",{id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:p,separateNegative:!0,...f},u),...vI(n,"trailing","current",{id:"yValue-start",invalidValue:null,missingValue:0,groupId:g,separateNegative:!0,...f},u),...h?[bI,wI]:[],...m],groupByKeys:!0,groupByData:!1});this.smallestDataInterval=y.reduced?.smallestKeyInterval,this.largestDataInterval=y.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!i||!t?.data.length)return[];const s=i.resolveProcessedDataDefById(this,"xValue"),n=i.getDomain(this,"xValue","key",t);let o=i.getDomain(this,"yValue-end","value",t);const r=this.crossFilteringEnabled()?i.getDomain(this,"yFilterValue","value",t):void 0;if(null!=r&&(o=[Math.min(o[0],r[0]),Math.max(o[1],r[1])]),e===this.getCategoryDirection())return"key"===s?.def.type&&"category"===s.def.valueType?n:this.padBandExtent(n);if(this.getValueAxis()instanceof dM)return CS(o);return CS([Math.min(0,o[0]),Math.max(0,o[1])])}async createNodeData(){const{dataModel:e}=this,t=this.getCategoryAxis(),i=this.getValueAxis();if(!e||!t||!i||!this.properties.isValid())return;const s=t.scale,n=i.scale,{xKey:o,yKey:r,xName:a,yName:l,fill:c,stroke:h,strokeWidth:d,cornerRadius:u,legendItemName:p,label:g}=this.properties,m=i.isReversed(),{barWidth:f,groupIndex:y}=this.updateGroupScale(t),v=Gg.is(s)?-.5*f:0,C=e.resolveProcessedDataIndexById(this,"xValue"),b=e.resolveProcessedDataIndexById(this,"yValue-raw"),w=this.crossFilteringEnabled()?e.resolveProcessedDataIndexById(this,"yFilterValue"):void 0,S=e.resolveProcessedDataIndexById(this,"yValue-start"),x=e.resolveProcessedDataIndexById(this,"yValue-end"),M=e.resolveProcessedDataIndexById(this,"yValue-range"),D=!this.ctx.animationManager.isSkipped(),I=e=>{let{datum:t,valueIndex:i,xValue:a,yValue:l,cumulativeValue:p,phantom:C,currY:b,prevY:w,isPositive:S,yRange:x,labelText:M,crossScale:D=1}=e;const I=s.convert(a),E=S!==m,A=I+R.convert(String(y))+v,L=n.convert(b),k=n.convert(w),T="x"===this.getBarDirection(),P=n.convert(x),N=n.convert(0),F=.5*f*(1-D),O={x:T?Math.min(L,k):A+F,y:T?A+F:Math.min(L,k),width:T?Math.abs(k-L):f*D,height:T?f*D:Math.abs(k-L)},G=new bp(O.x,O.y,O.width,O.height),B={x:T?Math.min(N,P):A+F,y:T?A+F:Math.min(N,P),width:T?Math.abs(N-P):f*D,height:T?f*D:Math.abs(N-P)},z=this.shouldFlipXY()?O.height:O.width;return{series:this,itemId:C?NI(r,C):r,datum:t,valueIndex:i,cumulativeValue:p,phantom:C,xValue:a,yValue:l,yKey:r,xKey:o,capDefaults:{lengthRatioMultiplier:z,lengthMax:z},x:B.x,y:B.y,width:B.width,height:B.height,midPoint:{x:O.x+O.width/2,y:O.y+O.height/2},fill:c,stroke:h,opacity:1,strokeWidth:d,cornerRadius:u,topLeftCornerRadius:T!==E,topRightCornerRadius:E,bottomRightCornerRadius:T===E,bottomLeftCornerRadius:!E,clipBBox:G,label:null!=M?{text:M,...RE({isUpward:E,isVertical:!T,placement:EE[g.placement],padding:g.padding,rect:O})}:void 0,missing:null==l,focusable:!C}},{groupScale:R,processedData:E}=this,A=[],L=[],k=[];return E?.data.forEach((e=>{let{keys:t,datum:i,values:s,aggValues:n}=e;s.forEach(((e,s)=>{const c=t[C],h=e[b],d=Number(e[S]),u=null!=w?Number(e[w]):void 0,g=Number(e[x]),m=h>=0&&!Object.is(h,-0),f=n?.[M][m?1:0]??0;if(!Number.isFinite(g))return;if(null!=u&&!Number.isFinite(u))return;const y=null!=h?this.getLabelText(this.properties.label,{datum:i[s],value:u??h,xKey:o,yKey:r,xName:a,yName:l,legendItemName:p},$D):void 0,v=null!=u&&u>h,D=I({datum:i[s],valueIndex:s,xValue:c,yValue:u??h,cumulativeValue:u??g,phantom:!1,currY:null!=u?d+u:g,prevY:d,isPositive:m,yRange:Math.max(d+(u??-1/0),f),labelText:y,crossScale:v?.6:void 0});if(L.push(D),k.push(D),null!=u){const e=I({datum:i[s],valueIndex:s,xValue:c,yValue:u,cumulativeValue:u,phantom:!0,currY:g,prevY:d,isPositive:m,yRange:f,labelText:void 0,crossScale:void 0});A.push(e)}}))})),{itemId:r,nodeData:A.length>0?[...A,...L]:L,labelData:k,scales:this.calculateScaling(),visible:this.visible||D}}nodeFactory(){return new yM}getHighlightData(e,t){const i=e.find((e=>e.datum===t.datum&&!e.phantom));return null!=i?[i]:void 0}async updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,(e=>NI(e.xValue,e.valueIndex,e.phantom)))}async updateDatumNodes(e){if(!this.properties.isValid())return;const{yKey:t,stackGroup:i,fill:s,fillOpacity:n,stroke:o,strokeWidth:r,strokeOpacity:a,lineDash:l,lineDashOffset:c,itemStyler:h,shadow:d,highlightStyle:{item:u}}=this.properties,p=this.axes.x,g=this.properties.crisp??vE(p?.scale,p?.visibleRange,this.smallestDataInterval,this.largestDataInterval),m="x"===this.getCategoryDirection(),f={fill:s,stroke:o,lineDash:l,lineDashOffset:c,fillShadow:d,strokeWidth:this.getStrokeWidth(r),fillOpacity:0,strokeOpacity:0},y={datum:void 0,ctx:this.ctx,seriesId:this.id,isHighlighted:e.isHighlight,highlightStyle:u,yKey:t,style:f,itemStyler:h,stackGroup:i};e.datumSelection.each(((e,t)=>{f.fillOpacity=n*(t.phantom?.2:1),f.strokeOpacity=a*(t.phantom?.2:1),f.cornerRadius=t.cornerRadius,f.topLeftCornerRadius=t.topLeftCornerRadius,f.topRightCornerRadius=t.topRightCornerRadius,f.bottomRightCornerRadius=t.bottomRightCornerRadius,f.bottomLeftCornerRadius=t.bottomLeftCornerRadius;const i=m?(t.clipBBox?.width??t.width)>0:(t.clipBBox?.height??t.height)>0;y.datum=t;const s=yE(y);s.crisp=g,s.visible=i,fE(e,s)}))}async updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t,(e=>{e.pointerEvents=1}))}async updateLabelNodes(e){e.labelSelection.each(((e,t)=>{DE(e,this.properties.label,t.label)}))}getTooltipHtml(e){const{id:t,processedData:i,ctx:{callbackCache:s}}=this,n=this.getCategoryAxis(),o=this.getValueAxis();if(!i||!this.properties.isValid()||!n||!o)return xv;const{xKey:r,yKey:a,xName:l,yName:c,fill:h,stroke:d,strokeWidth:u,tooltip:p,itemStyler:g,stackGroup:m,legendItemName:f}=this.properties,{xValue:y,yValue:v,datum:C,itemId:b}=e,w=n.formatDatum(y),S=o.formatDatum(v),x=XD(c),M=XD(w+": "+S);let D;g&&(D=s.call(g,{seriesId:t,datum:C,xKey:r,yKey:a,stackGroup:m,fill:h,stroke:d,strokeWidth:this.getStrokeWidth(u),highlighted:!1,cornerRadius:this.properties.cornerRadius,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash??[],lineDashOffset:this.properties.lineDashOffset}));const I=D?.fill??h;return p.toTooltipHtml({title:x,content:M,backgroundColor:I},{seriesId:t,itemId:b,datum:C,xKey:r,yKey:a,xName:l,yName:c,stackGroup:m,title:x,color:I,legendItemName:f,...this.getModuleTooltipParams()})}getLegendData(e){const{showInLegend:t}=this.properties;if("category"!==e||!this.data?.length||!this.properties.isValid()||!t)return[];const{yKey:i,yName:s,fill:n,stroke:o,strokeWidth:r,fillOpacity:a,strokeOpacity:l,legendItemName:c,visible:h}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:h,label:{text:c??s??i},symbols:[{marker:{fill:n,fillOpacity:a,stroke:o,strokeWidth:r,strokeOpacity:l}}],legendItemName:c}]}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i,annotationSelections:s}=e;const n=SE(bE(this.isVertical(),this.axes,"normal"));Tg(this.id,"nodes",this.ctx.animationManager,[t],n),FI(this,"labels",this.ctx.animationManager,i),FI(this,"annotations",this.ctx.animationManager,...s)}animateWaitingUpdateReady(e){const{datumSelection:t,labelSelection:i,annotationSelections:s,previousContextData:n}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);const o=this.processedData?.reduced?.diff,r=null==n?"fade":"normal",a=SE(bE(this.isVertical(),this.axes,r));Tg(this.id,"nodes",this.ctx.animationManager,[t],a,((e,t)=>NI(t.xValue,t.valueIndex,t.phantom)),o);(o?.changed??!0)&&(FI(this,"labels",this.ctx.animationManager,i),FI(this,"annotations",this.ctx.animationManager,...s))}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds(e){let{datumIndex:t,seriesRect:i}=e;const s=this.contextNodeData?.nodeData[t].clipBBox;return ME(s,this.contentGroup,i)}};AE.className="BarSeries",AE.type="bar";var LE={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",moduleFactory:e=>new AE(e),stackable:!0,groupable:!0,tooltipDefaults:{range:"exact"},defaultAxes:cE([{type:"number",position:"left"},{type:"category",position:"bottom"}],(e=>"horizontal"===e?.direction)),themeTemplate:{series:{direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:"normal",fontSize:12,fontFamily:tD,color:nD,placement:"inside-center"},shadow:{enabled:!1,color:hD,xOffset:3,yOffset:3,blur:5},errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:UM},kE=class extends VI{constructor(){super(...arguments),this.maxSize=30}};Wd([lm(bm),Sp({redraw:3})],kE.prototype,"maxSize",2),Wd([lm(Fm,{optional:!0}),Sp({redraw:3})],kE.prototype,"domain",2);var TE=class extends Pv{constructor(){super(...arguments),this.placement="top"}};Wd([lm(Jm)],TE.prototype,"placement",2);var PE=class extends Jx{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new TE,this.tooltip=new WI,this.marker=new kE}};Wd([lm(fm)],PE.prototype,"xKey",2),Wd([lm(fm)],PE.prototype,"yKey",2),Wd([lm(fm)],PE.prototype,"sizeKey",2),Wd([lm(fm,{optional:!0})],PE.prototype,"labelKey",2),Wd([lm(fm,{optional:!0})],PE.prototype,"colorKey",2),Wd([lm(fm,{optional:!0})],PE.prototype,"xFilterKey",2),Wd([lm(fm,{optional:!0})],PE.prototype,"yFilterKey",2),Wd([lm(fm,{optional:!0})],PE.prototype,"sizeFilterKey",2),Wd([lm(fm,{optional:!0})],PE.prototype,"xName",2),Wd([lm(fm,{optional:!0})],PE.prototype,"yName",2),Wd([lm(fm,{optional:!0})],PE.prototype,"sizeName",2),Wd([lm(fm,{optional:!0})],PE.prototype,"labelName",2),Wd([lm(fm,{optional:!0})],PE.prototype,"colorName",2),Wd([lm(Fm,{optional:!0})],PE.prototype,"colorDomain",2),Wd([lm(Pm)],PE.prototype,"colorRange",2),Wd([lm(fm,{optional:!0})],PE.prototype,"title",2),Wd([ov("marker.shape")],PE.prototype,"shape",2),Wd([ov("marker.size")],PE.prototype,"size",2),Wd([ov("marker.maxSize")],PE.prototype,"maxSize",2),Wd([ov("marker.domain",{optional:!0})],PE.prototype,"domain",2),Wd([ov("marker.fill",{optional:!0})],PE.prototype,"fill",2),Wd([ov("marker.fillOpacity")],PE.prototype,"fillOpacity",2),Wd([ov("marker.stroke",{optional:!0})],PE.prototype,"stroke",2),Wd([ov("marker.strokeWidth")],PE.prototype,"strokeWidth",2),Wd([ov("marker.strokeOpacity")],PE.prototype,"strokeOpacity",2),Wd([ov("marker.itemStyler",{optional:!0})],PE.prototype,"itemStyler",2),Wd([lm(um)],PE.prototype,"label",2),Wd([lm(um)],PE.prototype,"tooltip",2);var NE=class extends qx{constructor(e,t,i,s){super(e,t,i,s),this.sizeKey=s.properties.sizeKey}},FE=class extends eM{constructor(e){super({moduleCtx:e,directionKeys:Qx,directionNames:Xx,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:GI,marker:hR}}),this.NodeEvent=NE,this.properties=new PE,this.sizeScale=new aM,this.colorScale=new Ly}get pickModeAxis(){return"main-category"}async processData(e){if(!this.properties.isValid()||null==this.data||!this.visible)return;const t=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:s,yScaleType:n}=this.getScaleInformation({xScale:t,yScale:i}),o=this.colorScale.type,r=this.sizeScale.type,{xKey:a,yKey:l,sizeKey:c,xFilterKey:h,yFilterKey:d,sizeFilterKey:u,labelKey:p,colorDomain:g,colorRange:m,colorKey:f,marker:y}=this.properties,{dataModel:v,processedData:C}=await this.requestDataModel(e,this.data,{props:[gI(a,s,{id:"xValue"}),gI(l,n,{id:"yValue"}),...null!=h?[gI(h,s,{id:"xFilterValue"})]:[],...null!=d?[gI(d,n,{id:"yFilterValue"})]:[],...null!=u?[gI(u,r,{id:"sizeFilterValue"})]:[],gI(c,r,{id:"sizeValue"}),...f?[gI(f,o,{id:"colorValue"})]:[],...p?[gI(p,"band",{id:"labelValue"})]:[]]}),b=v.resolveProcessedDataIndexById(this,"sizeValue"),w=C.domain.values[b]??[];if(this.sizeScale.domain=y.domain?y.domain:w,f){const e=v.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=g??C.domain.values[e]??[],this.colorScale.range=m,this.colorScale.update()}this.animationState.transition("updateData")}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];const s="x"===e?"xValue":"yValue",n=t.resolveProcessedDataDefById(this,s),o=t.getDomain(this,s,"value",i);return"value"===n?.def.type&&"category"===n?.def.valueType?o:CS(Bg(o))}async createNodeData(){const{axes:e,dataModel:t,processedData:i,colorScale:s,sizeScale:n}=this,{xKey:o,yKey:r,sizeKey:a,xFilterKey:l,yFilterKey:c,sizeFilterKey:h,labelKey:d,xName:u,yName:p,sizeName:g,labelName:m,label:f,colorKey:y,marker:v,visible:C}=this.properties,b=jx(v.shape),{placement:w}=f,S=e.x,x=e.y;if(!(t&&i&&C&&S&&x))return;const M=t.resolveProcessedDataIndexById(this,"xValue"),D=t.resolveProcessedDataIndexById(this,"yValue"),I=null!=a?t.resolveProcessedDataIndexById(this,"sizeValue"):void 0,R=null!=y?t.resolveProcessedDataIndexById(this,"colorValue"):-1,E=null!=d?t.resolveProcessedDataIndexById(this,"labelValue"):-1,A=null!=l?t.resolveProcessedDataIndexById(this,"xFilterValue"):void 0,L=null!=c?t.resolveProcessedDataIndexById(this,"yFilterValue"):void 0,k=null!=h?t.resolveProcessedDataIndexById(this,"sizeFilterValue"):void 0,T=S.scale,P=x.scale,N=(T.bandwidth??0)/2,F=(P.bandwidth??0)/2,O=[];n.range=[v.size,v.maxSize];const G=f.getFont(),B=By.getMeasurer({font:G});for(const{values:z,datum:H}of i.data??[]){const e=z[M],t=z[D],i=null!=I?z[I]:void 0,l=T.convert(e)+N,c=P.convert(t)+F;let h;null!=A&&null!=L&&(h=z[A]===e&&z[L]===t,null!=k&&h&&(h=z[k]===i));const C=this.getLabelText(f,{value:d?z[E]:t,datum:H,xKey:o,yKey:r,sizeKey:a,labelKey:d,xName:u,yName:p,sizeName:g,labelName:m}),S=B.measureText(String(C)),x=i?n.convert(i):v.size,G=y?s.convert(z[R]):void 0;O.push({series:this,itemId:r,yKey:r,xKey:o,datum:H,xValue:e,yValue:t,sizeValue:i,point:{x:l,y:c,size:x},midPoint:{x:l,y:c},fill:G,label:{text:C,...S},marker:b,placement:w,selected:h})}return{itemId:r,nodeData:O,labelData:O,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.contextNodeData?.labelData??[]}markerFactory(){const{shape:e}=this.properties.marker;return new(jx(e))}async updateMarkerSelection(e){const{nodeData:t,markerSelection:i}=e;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());const s=this.properties.marker.enabled?t:[];return i.update(s,void 0,(e=>NI([e.xValue,e.yValue,e.label.text])))}async updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,sizeKey:o,labelKey:r,marker:a}=this.properties,{size:l,shape:c,fill:h,fillOpacity:d,stroke:u,strokeWidth:p,strokeOpacity:g}=ag(i&&this.properties.highlightStyle.item,a.getStyle()),m={size:l,shape:c,fill:h,fillOpacity:d,stroke:u,strokeWidth:p,strokeOpacity:g};this.sizeScale.range=[a.size,a.maxSize],t.each(((e,t)=>{this.updateMarkerStyle(e,a,{datum:t,highlighted:i,xKey:s,yKey:n,sizeKey:o,labelKey:r},m,{selected:t.selected})})),i||this.properties.marker.markClean()}async updateLabelSelection(e){const t=this.properties.label.enabled?this.chart?.placeLabels().get(this)??[]:[];return e.labelSelection.update(t.map((e=>({...e.datum,point:{x:e.x,y:e.y,size:e.datum.point.size}}))))}async updateLabelNodes(e){const{label:t}=this.properties;e.labelSelection.each(((e,i)=>{e.text=i.label.text,e.fill=t.color,e.x=i.point?.x??0,e.y=i.point?.y??0,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.textAlign="left",e.textBaseline="top"}))}getTooltipHtml(e){const t=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!t||!i)return xv;const{xKey:s,yKey:n,sizeKey:o,labelKey:r,xName:a,yName:l,sizeName:c,labelName:h,marker:d,tooltip:u}=this.properties,p=this.properties.title??l,g=ag({fill:e.fill,strokeWidth:this.getStrokeWidth(d.strokeWidth)},d.getStyle()),{fill:m="gray"}=this.getMarkerStyle(d,{datum:e,highlighted:!1,xKey:s,yKey:n,sizeKey:o,labelKey:r},g),{datum:f,xValue:y,yValue:v,sizeValue:C,label:{text:b},itemId:w}=e,S=XD(t.formatDatum(y)),x=XD(i.formatDatum(v));let M=`<b>${XD(a??s)}</b>: ${S}<br><b>${XD(l??n)}</b>: ${x}`;return o&&(M+=`<br><b>${XD(c??o)}</b>: ${XD(String(C))}`),r&&(M=`<b>${XD(h??r)}</b>: ${XD(b)}<br>`+M),u.toTooltipHtml({title:p,content:M,backgroundColor:m},{datum:f,itemId:w,xKey:s,xName:a,yKey:n,yName:l,sizeKey:o,sizeName:c,labelKey:r,labelName:h,title:p,color:m,seriesId:this.id})}getLegendData(){if(!this.data?.length||!this.properties.isValid())return[];const{yKey:e,yName:t,title:i,marker:s,visible:n}=this.properties,{shape:o,fill:r,stroke:a,fillOpacity:l,strokeOpacity:c,strokeWidth:h}=s;return[{legendType:"category",id:this.id,itemId:e,seriesId:this.id,enabled:n,label:{text:i??t??e},symbols:[{marker:{shape:o,fill:r??"rgba(0, 0, 0, 0)",stroke:a??"rgba(0, 0, 0, 0)",fillOpacity:l??1,strokeOpacity:c??1,strokeWidth:h??0}}]}]}animateEmptyUpdateReady(e){let{markerSelection:t,labelSelection:i}=e;lR(this,this.ctx.animationManager,t),FI(this,"labels",this.ctx.animationManager,i)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ny}getFormattedMarkerStyle(e){const{xKey:t,yKey:i,sizeKey:s,labelKey:n}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:t,yKey:i,sizeKey:s,labelKey:n,highlighted:!1})}computeFocusBounds(e){return pR(this,e)}};FE.className="BubbleSeries",FE.type="bubble";var OE={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",moduleFactory:e=>new FE(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:12,fontFamily:tD,color:iD}}},paletteFactory:UM},GE=class extends Jx{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new zI,this.label=new Pv,this.tooltip=new WI}};Wd([lm(fm)],GE.prototype,"xKey",2),Wd([lm(fm,{optional:!0})],GE.prototype,"yKey",2),Wd([lm(fm,{optional:!0})],GE.prototype,"xName",2),Wd([lm(fm,{optional:!0})],GE.prototype,"yName",2),Wd([lm(Tm,{optional:!0})],GE.prototype,"fill",2),Wd([lm(wm)],GE.prototype,"fillOpacity",2),Wd([lm(Tm,{optional:!0})],GE.prototype,"stroke",2),Wd([lm(bm)],GE.prototype,"strokeWidth",2),Wd([lm(wm)],GE.prototype,"strokeOpacity",2),Wd([lm(jm)],GE.prototype,"lineDash",2),Wd([lm(bm)],GE.prototype,"lineDashOffset",2),Wd([lm(bm)],GE.prototype,"cornerRadius",2),Wd([lm(gm)],GE.prototype,"areaPlot",2),Wd([lm(Mm,{optional:!0})],GE.prototype,"bins",2),Wd([lm(ef(["count","sum","mean"],"a histogram aggregation"))],GE.prototype,"aggregation",2),Wd([lm(bm,{optional:!0})],GE.prototype,"binCount",2),Wd([lm(um)],GE.prototype,"shadow",2),Wd([lm(um)],GE.prototype,"label",2),Wd([lm(um)],GE.prototype,"tooltip",2);var BE=class extends eM{constructor(e){super({moduleCtx:e,directionKeys:Qx,directionNames:Xx,pickModes:[1,0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:xE,label:GI}}),this.properties=new GE,this.calculatedBins=[]}deriveBins(e){const t=Ef(e[0],e[1],10),i=Lf(e[0],e[1],10),[s]=t;return[[s-i,s],...t.map((e=>[e,e+i]))]}calculateNiceBins(e,t){const i=Math.floor(e[0]),s=e[1],n=t||1,{start:o,binSize:r}=this.calculateNiceStart(i,s,n);return this.getBins(o,s,r,n)}getBins(e,t,i,s){const n=[],o=this.calculatePrecision(i);for(let r=0;r<s;r++){const a=Math.round((e+r*i)*o)/o;let l=Math.round((e+(r+1)*i)*o)/o;r===s-1&&(l=Math.max(l,t)),n[r]=[a,l]}return n}calculatePrecision(e){let t=10;if(isFinite(e)&&e>0)for(;e<1;)t*=10,e*=10;return t}calculateNiceStart(e,t,i){const s=Math.abs(t-e)/i,n=Math.floor(Math.log10(s)),o=Math.pow(10,n);return{start:Math.floor(e/o)*o,binSize:s}}async processData(e){this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));const{xKey:t,yKey:i,areaPlot:s,aggregation:n}=this.properties,o=this.axes.x?.scale,r=this.axes.y?.scale,{xScaleType:a,yScaleType:l}=this.getScaleInformation({yScale:r,xScale:o}),c=[pI(t,a),SI];if(i){let e=nI("groupAgg");"count"===n||("sum"===n?e=iI("groupAgg"):"mean"===n&&(e=oI("groupAgg"))),s&&(e=rI("groupAgg",e)),c.push(gI(i,l,{invalidValue:void 0}),e)}else{let e=nI("groupAgg");s&&(e=rI("groupAgg",e)),c.push(e)}!this.ctx.animationManager.isSkipped()&&this.processedData&&c.push(PI(this.processedData,!1)),await this.requestDataModel(e,this.data,{props:c,groupByFn:e=>{const t=CS(e.domain.keys[0]);if(0===t.length)return e.domain.groups=[],()=>[];const i=qp(this.properties.binCount)?this.calculateNiceBins(t,this.properties.binCount):this.properties.bins??this.deriveBins(t),s=i.length;return this.calculatedBins=[...i],e=>{const t=e.keys[0];for(let n=0;n<s;n++){const e=i[n];if(t>=e[0]&&t<e[1])return e;if(n===s-1&&t<=e[1])return e}return[]}}}),this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i||!this.calculatedBins.length)return[];const s=i.getDomain(this,"groupAgg","aggregate",t),n=this.calculatedBins?.[0][0],o=this.calculatedBins?.[(this.calculatedBins?.length??0)-1][1];return CS("x"===e?[n,o]:s)}async createNodeData(){const{id:e,axes:t,processedData:i,ctx:{callbackCache:s}}=this,n=t.x,o=t.y;if(!n||!o)return;const{scale:r}=n,{scale:a}=o,{xKey:l,yKey:c,xName:h,yName:d,fill:u,stroke:p,strokeWidth:g,cornerRadius:m}=this.properties,f=this.properties.label.formatter??(e=>String(e.value)),y=[],v={itemId:this.properties.yKey??this.id,nodeData:y,labelData:y,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};return this.visible&&i&&"grouped"===i.type?(i.data.forEach((t=>{const{aggValues:[[i,n]]=[[0,0]],datum:v,datum:{length:C},keys:b,keys:[w,S]}=t,x=r.convert(w),M=r.convert(S),D=i+n,I=a.convert(0),R=a.convert(D),E=Math.abs(M-x),A=Math.abs(R-I),L=Math.min(x,M),k=Math.min(I,R);let T;0!==D&&(T={x:L+E/2,y:k+A/2,text:s.call(f,{value:D,datum:v,seriesId:e,xKey:l,yKey:c,xName:h,yName:d})??String(D)});const P={x:L+E/2,y:k+A/2},N=o.isReversed();y.push({series:this,datum:v,aggregatedValue:D,frequency:C,domain:b,yKey:c,xKey:l,x:L,y:k,xValue:x,yValue:R,width:E,height:A,midPoint:P,fill:u,stroke:p,cornerRadius:m,topLeftCornerRadius:!N,topRightCornerRadius:!N,bottomRightCornerRadius:N,bottomLeftCornerRadius:N,opacity:1,strokeWidth:g,label:T})})),y.sort(((e,t)=>e.x-t.x)),v):v}nodeFactory(){return new yM}async updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e;return i.update(t,(e=>{e.crisp=!0}),(e=>e.domain.join("_")))}async updateDatumNodes(e){const{isHighlight:t}=e,{fillOpacity:i,strokeOpacity:s,lineDash:n,lineDashOffset:o,shadow:r,highlightStyle:{item:{fill:a,fillOpacity:l=i,stroke:c,strokeWidth:h}}}=this.properties;e.datumSelection.each(((e,d,u)=>{const{cornerRadius:p,topLeftCornerRadius:g,topRightCornerRadius:m,bottomRightCornerRadius:f,bottomLeftCornerRadius:y}=d,v=t&&void 0!==h?h:d.strokeWidth,C=t?l:i;e.fill=(t?a:void 0)??d.fill,e.stroke=(t?c:void 0)??d.stroke,e.fillOpacity=C,e.strokeOpacity=s,e.strokeWidth=v,e.lineDash=n,e.lineDashOffset=o,e.topLeftCornerRadius=g?p:0,e.topRightCornerRadius=m?p:0,e.bottomRightCornerRadius=f?p:0,e.bottomLeftCornerRadius=y?p:0,e.fillShadow=r,e.zIndex=t?ox.highlightedZIndex:u,e.visible=d.height>0}))}async updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,(e=>{e.pointerEvents=1,e.textAlign="center",e.textBaseline="middle"}))}async updateLabelNodes(e){const{fontStyle:t,fontWeight:i,fontFamily:s,fontSize:n,color:o}=this.properties.label,r=this.isLabelEnabled();e.labelSelection.each(((e,a)=>{r&&a?.label?(e.text=a.label.text,e.x=a.label.x,e.y=a.label.y,e.fontStyle=t,e.fontWeight=i,e.fontFamily=s,e.fontSize=n,e.fill=o,e.visible=!0):e.visible=!1}))}initQuadTree(e){const{value:t}=this.contentGroup.children().next();t&&hE(e,t.children())}pickNodeClosestDatum(e){return dE(this,e)}getTooltipHtml(e){const t=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!t||!i)return xv;const{xKey:s,yKey:n,xName:o,yName:r,fill:a,aggregation:l,tooltip:c}=this.properties,{aggregatedValue:h,frequency:d,domain:[u,p],itemId:g}=e,m=`${XD(o??s)}: ${t.formatDatum(u)} - ${t.formatDatum(p)}`;let f=n?`<b>${XD(r??n)} (${l})</b>: ${i.formatDatum(h)}<br>`:"";f+=`<b>Frequency</b>: ${d}`;const y={title:m,backgroundColor:a,content:f};return c.toTooltipHtml(y,{datum:{data:e.datum,aggregatedValue:e.aggregatedValue,domain:e.domain,frequency:e.frequency},itemId:g,xKey:s,xName:o,yKey:n,yName:r,color:a,title:m,seriesId:this.id})}getLegendData(e){if(!this.data?.length||"category"!==e)return[];const{xKey:t,yName:i,fill:s,fillOpacity:n,stroke:o,strokeWidth:r,strokeOpacity:a,visible:l}=this.properties;return[{legendType:"category",id:this.id,itemId:t,seriesId:this.id,enabled:l,label:{text:i??t??"Frequency"},symbols:[{marker:{fill:s??"rgba(0, 0, 0, 0)",stroke:o??"rgba(0, 0, 0, 0)",fillOpacity:n,strokeOpacity:a,strokeWidth:r}}]}]}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i}=e;const s=SE(bE(!0,this.axes,"normal"));Tg(this.id,"datums",this.ctx.animationManager,[t],s),FI(this,"labels",this.ctx.animationManager,i)}animateWaitingUpdateReady(e){const t=this.processedData?.reduced?.diff,i=SE(bE(!0,this.axes,"normal"));Tg(this.id,"datums",this.ctx.animationManager,[e.datumSelection],i,((e,t)=>NI(t.domain)),t),FI(this,"labels",this.ctx.animationManager,e.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds(e){let{datumIndex:t,seriesRect:i}=e;return ME(this.contextNodeData?.nodeData[t],this.contentGroup,i)}};BE.className="HistogramSeries",BE.type="histogram";var zE={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",moduleFactory:e=>new BE(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:12,fontFamily:tD,color:nD},shadow:{enabled:!1,color:hD,xOffset:3,yOffset:3,blur:5}}},paletteFactory:e=>{let{takeColors:t}=e;const{fills:[i],strokes:[s]}=t(1);return{fill:i,stroke:s}}},HE=class extends Jx{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new YI,this.marker=new VI,this.label=new Pv,this.tooltip=new WI,this.connectMissingData=!1}};Wd([lm(fm)],HE.prototype,"xKey",2),Wd([lm(fm)],HE.prototype,"yKey",2),Wd([lm(fm,{optional:!0})],HE.prototype,"xName",2),Wd([lm(fm,{optional:!0})],HE.prototype,"yName",2),Wd([lm(fm,{optional:!0})],HE.prototype,"yFilterKey",2),Wd([lm(fm,{optional:!0})],HE.prototype,"stackGroup",2),Wd([lm(bm,{optional:!0})],HE.prototype,"normalizedTo",2),Wd([lm(fm,{optional:!0})],HE.prototype,"title",2),Wd([lm(Tm)],HE.prototype,"stroke",2),Wd([lm(bm)],HE.prototype,"strokeWidth",2),Wd([lm(wm)],HE.prototype,"strokeOpacity",2),Wd([lm(jm)],HE.prototype,"lineDash",2),Wd([lm(bm)],HE.prototype,"lineDashOffset",2),Wd([lm(um)],HE.prototype,"interpolation",2),Wd([lm(um)],HE.prototype,"marker",2),Wd([lm(um)],HE.prototype,"label",2),Wd([lm(um)],HE.prototype,"tooltip",2),Wd([lm(gm)],HE.prototype,"connectMissingData",2);var VE=class extends eM{constructor(e){super({moduleCtx:e,directionKeys:Qx,directionNames:Xx,hasMarkers:!0,pickModes:[2,1,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:RR({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:GI,marker:(e,t)=>({opacity:1,scalingX:1,scalingY:1,...dR(0,t)})}}),this.properties=new HE}get pickModeAxis(){return"main-category"}async processData(e){if(null==this.data||!this.properties.isValid())return;const{data:t,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:n=1}={}}=this,{xKey:o,yKey:r,yFilterKey:a,connectMissingData:l,normalizedTo:c}=this.properties,h=!this.ctx.animationManager.isSkipped(),d=this.axes.x?.scale,u=this.axes.y?.scale,{isContinuousX:p,xScaleType:g,yScaleType:m}=this.getScaleInformation({xScale:d,yScale:u}),f={invalidValue:null};l&&n>1&&(f.invalidValue=0),i||(f.forceValue=0);const y=[];if(p||y.push(pI(o,g,{id:"xKey"})),y.push(gI(o,g,{id:"xValue"}),gI(r,m,{id:"yValueRaw",...f,invalidValue:void 0})),null!=a&&y.push(gI(a,m,{id:"yFilterRaw"})),n>1){const e=[`line-stack-${s}-yValues`,`line-stack-${s}-yValues-trailing`,`line-stack-${s}-yValues-marker`];y.push(...vI(r,"window","current",{id:"yValueEnd",...f,groupId:e[0]},m),...vI(r,"window-trailing","current",{id:"yValueStart",...f,groupId:e[1]},m),...vI(r,"normal","current",{id:"yValueCumulative",...f,groupId:e[2]},m)),Vp(c)&&y.push(MI([e[0],e[1],e[2]],c,"range"))}h&&(y.push(RI(p?["xValue"]:void 0)),this.processedData&&y.push(PI(this.processedData))),await this.requestDataModel(e,t,{props:y}),this.animationState.transition("updateData")}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!t||!i?.data.length)return[];const s=t.resolveProcessedDataDefById(this,"xValue");if("x"===e){const e=t.getDomain(this,"xValue","value",i);return"value"===s?.def.type&&"category"===s.def.valueType?e:CS(Bg(e))}return CS((this.seriesGrouping?.stackCount??1)>1?t.getDomain(this,"yValueEnd","value",i):t.getDomain(this,"yValueRaw","value",i))}async createNodeData(){const{processedData:e,dataModel:t,axes:i}=this,s=i.x,n=i.y;if(!e||!t||!s||!n)return;const{xKey:o,yKey:r,yFilterKey:a,xName:l,yName:c,marker:h,label:d,connectMissingData:u,legendItemName:p}=this.properties,g=(this.seriesGrouping?.stackCount??1)>1,m=s.scale,f=n.scale,y=(m.bandwidth??0)/2,v=(f.bandwidth??0)/2,C=[],b=h.enabled?h.size:0,w=t.resolveProcessedDataIndexById(this,"xValue"),S=t.resolveProcessedDataIndexById(this,"yValueRaw"),x=null!=a?t.resolveProcessedDataIndexById(this,"yFilterRaw"):void 0,M=g?t.resolveProcessedDataIndexById(this,"yValueCumulative"):S,D=g?t.resolveProcessedDataIndexById(this,"yValueEnd"):void 0;let I=!0,R=!1;return e.data?.forEach((e=>{let{datum:t,values:i}=e;const s=i[w],n=i[S],a=i[M],h=null!=D?i[D]:void 0;if(null==n)return void(I||(I=!u));const g=m.convert(s)+y;if(isNaN(g))return void(I||(I=!u));const E=f.convert(a)+v,A=null!=x?i[x]===n:void 0;!1===A&&(R=!0);const L=this.getLabelText(d,{value:n,datum:t,xKey:o,yKey:r,xName:l,yName:c,legendItemName:p},$D);C.push({series:this,datum:t,yKey:r,xKey:o,point:{x:g,y:E,moveTo:I,size:b},midPoint:{x:g,y:E},cumulativeValue:h,yValue:n,xValue:s,capDefaults:{lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},labelText:L,selected:A}),I=!1})),{itemId:r,nodeData:C,labelData:C,scales:this.calculateScaling(),visible:this.visible,crossFiltering:R}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:e}=this.properties.marker;return new(jx(e))}async updatePathNodes(e){const{paths:[t],opacity:i,visible:s,animationEnabled:n}=e,o=!0===this.contextNodeData?.crossFiltering;t.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity*(o?.25:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),n||(t.visible=s),ER(this,t)}async updateMarkerSelection(e){let{nodeData:t}=e;const{markerSelection:i}=e;return t=this.properties.marker.enabled||!0===this.contextNodeData?.crossFiltering?t:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(t,void 0,(e=>NI(e.xValue)))}async updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,stroke:o,strokeWidth:r,strokeOpacity:a,marker:l,highlightStyle:c}=this.properties,h=ag(i&&c.item,l.getStyle(),{stroke:o,strokeWidth:r,strokeOpacity:a}),d=this.ctx.animationManager.isSkipped();t.each(((e,t)=>{this.updateMarkerStyle(e,l,{datum:t,highlighted:i,xKey:s,yKey:n},h,{applyTranslation:d,selected:t.selected})})),i||l.markClean()}async updateLabelSelection(e){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])}async updateLabelNodes(e){const{enabled:t,fontStyle:i,fontWeight:s,fontSize:n,fontFamily:o,color:r}=this.properties.label;e.labelSelection.each(((e,a)=>{t&&a?.labelText?(e.fontStyle=i,e.fontWeight=s,e.fontSize=n,e.fontFamily=o,e.textAlign="center",e.textBaseline="bottom",e.text=a.labelText,e.x=a.point.x,e.y=a.point.y-10,e.fill=r,e.visible=!0):e.visible=!1}))}getTooltipHtml(e){const t=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!t||!i)return xv;const{xKey:s,yKey:n,xName:o,yName:r,strokeWidth:a,marker:l,tooltip:c}=this.properties,{datum:h,xValue:d,yValue:u,itemId:p}=e,g=t.formatDatum(d),m=i.formatDatum(u),f=XD(this.properties.title??r),y=XD(g+": "+m),v=ag({fill:l.stroke},l.getStyle(),{strokeWidth:a}),{fill:C}=this.getMarkerStyle(l,{datum:e,xKey:s,yKey:n,highlighted:!1},v);return c.toTooltipHtml({title:f,content:y,backgroundColor:C},{datum:h,itemId:p,xKey:s,xName:o,yKey:n,yName:r,title:f,color:C,seriesId:this.id,...this.getModuleTooltipParams()})}getLegendData(e){if(!this.data?.length||!this.properties.isValid()||"category"!==e)return[];const{yKey:t,yName:i,stroke:s,strokeOpacity:n,strokeWidth:o,lineDash:r,title:a,marker:l,visible:c,legendItemName:h}=this.properties,d="rgba(0, 0, 0, 0)";return[{legendType:"category",id:this.id,itemId:t,legendItemName:h,seriesId:this.id,enabled:c,label:{text:h??a??i??t},symbols:[{marker:{shape:l.shape,fill:l.fill??d,stroke:l.stroke??s??d,fillOpacity:l.fillOpacity??1,strokeOpacity:l.strokeOpacity??n??1,strokeWidth:l.strokeWidth??0,enabled:l.enabled},line:{stroke:s??d,strokeOpacity:n,strokeWidth:o,lineDash:r}}]}]}async updatePaths(e){this.updateLinePaths(e.paths,e.contextData)}updateLinePaths(e,t){const{interpolation:i}=this.properties,{nodeData:s}=t,[n]=e;n.path.clear(!0);for(const o of NR(s))wR(FR(s,o),n,i);n.checkPathDirty()}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,annotationSelections:s,contextData:n,paths:o}=e,{animationManager:r}=this.ctx;this.updateLinePaths(o,n),MR(this,r,...o),df([t],dR),cR(this,r,t),FI(this,"labels",r,i),FI(this,"annotations",r,...s)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateLinePaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{markerSelection:i,labelSelection:s,annotationSelections:n,contextData:o,paths:r,previousContextData:a}=e,[l]=r;this.resetMarkerAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateLinePaths(r,o)},h=()=>{t.skipCurrentBatch(),c()};if(null==o||null==a)return c(),aR(this,t,"added",i),DR(this,"path_properties",t,"add",l),FI(this,"labels",t,s),void FI(this,"annotations",t,...n);if(o.crossFiltering!==a.crossFiltering)return void h();let d;try{d=_R(o,a,this.processedData?.reduced?.diff,this.properties.interpolation)}catch{d=void 0}void 0!==d?"no-op"!==d.status&&(aR(this,t,void 0,i),Tg(this.id,"path_properties",t,[l],d.pathProperties),"added"===d.status?this.updateLinePaths(r,o):"removed"===d.status?this.updateLinePaths(r,a):ZD(this.id,"path_update",t,[l],d.path),d.hasMotion&&(FI(this,"labels",t,s),FI(this,"annotations",t,...n))):h()}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new ny}getFormattedMarkerStyle(e){const{xKey:t,yKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:t,yKey:i,highlighted:!0})}computeFocusBounds(e){return pR(this,e)}};VE.className="LineSeries",VE.type="line";var jE={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",moduleFactory:e=>new VE(e),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear",tension:1,position:"end"},marker:{shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:tD,color:iD},errorBar:{cap:{lengthRatio:1}}}},paletteFactory:e=>{const{marker:t}=_M(e);return{stroke:t.fill,marker:t}}},WE=class extends Pv{constructor(){super(...arguments),this.placement="top"}};Wd([lm(Jm)],WE.prototype,"placement",2);var UE=class extends Jx{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new WE,this.tooltip=new WI,this.marker=new VI}};Wd([lm(fm)],UE.prototype,"xKey",2),Wd([lm(fm)],UE.prototype,"yKey",2),Wd([lm(fm,{optional:!0})],UE.prototype,"labelKey",2),Wd([lm(fm,{optional:!0})],UE.prototype,"colorKey",2),Wd([lm(fm,{optional:!0})],UE.prototype,"xFilterKey",2),Wd([lm(fm,{optional:!0})],UE.prototype,"yFilterKey",2),Wd([lm(fm,{optional:!0})],UE.prototype,"xName",2),Wd([lm(fm,{optional:!0})],UE.prototype,"yName",2),Wd([lm(fm,{optional:!0})],UE.prototype,"labelName",2),Wd([lm(fm,{optional:!0})],UE.prototype,"colorName",2),Wd([lm(Fm,{optional:!0})],UE.prototype,"colorDomain",2),Wd([lm(Pm)],UE.prototype,"colorRange",2),Wd([lm(fm,{optional:!0})],UE.prototype,"title",2),Wd([ov("marker.shape")],UE.prototype,"shape",2),Wd([ov("marker.size")],UE.prototype,"size",2),Wd([ov("marker.fill")],UE.prototype,"fill",2),Wd([ov("marker.fillOpacity")],UE.prototype,"fillOpacity",2),Wd([ov("marker.stroke")],UE.prototype,"stroke",2),Wd([ov("marker.strokeWidth")],UE.prototype,"strokeWidth",2),Wd([ov("marker.strokeOpacity")],UE.prototype,"strokeOpacity",2),Wd([ov("marker.itemStyler",{optional:!0})],UE.prototype,"itemStyler",2),Wd([lm(um)],UE.prototype,"label",2),Wd([lm(um)],UE.prototype,"tooltip",2);var _E=class extends eM{constructor(e){super({moduleCtx:e,directionKeys:Qx,directionNames:Xx,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:hR,label:GI}}),this.properties=new UE,this.colorScale=new Ly}get pickModeAxis(){return"main-category"}async processData(e){if(!this.properties.isValid()||null==this.data||!this.visible)return;const t=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:s,yScaleType:n}=this.getScaleInformation({xScale:t,yScale:i}),o=this.colorScale.type,{xKey:r,yKey:a,xFilterKey:l,yFilterKey:c,labelKey:h,colorKey:d,colorDomain:u,colorRange:p}=this.properties,{dataModel:g,processedData:m}=await this.requestDataModel(e,this.data,{props:[gI(r,s,{id:"xValue"}),gI(a,n,{id:"yValue"}),...null!=l?[gI(l,s,{id:"xFilterValue"})]:[],...null!=c?[gI(c,n,{id:"yFilterValue"})]:[],...d?[gI(d,o,{id:"colorValue"})]:[],...h?[gI(h,"band",{id:"labelValue"})]:[]]});if(d){const e=g.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=u??m.domain.values[e]??[],this.colorScale.range=p,this.colorScale.update()}this.animationState.transition("updateData")}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];const s="x"===e?"xValue":"yValue",n=t.resolveProcessedDataDefById(this,s),o=t.getDomain(this,s,"value",i);return"value"===n?.def.type&&"category"===n?.def.valueType?o:CS(Bg(o))}async createNodeData(){const{axes:e,dataModel:t,processedData:i,colorScale:s}=this,{xKey:n,yKey:o,xFilterKey:r,yFilterKey:a,labelKey:l,colorKey:c,xName:h,yName:d,labelName:u,marker:p,label:g,visible:m}=this.properties,{placement:f}=g,y=jx(p.shape),v=e.x,C=e.y;if(!(t&&i&&m&&v&&C))return;const b=t.resolveProcessedDataIndexById(this,"xValue"),w=t.resolveProcessedDataIndexById(this,"yValue"),S=null!=c?t.resolveProcessedDataIndexById(this,"colorValue"):-1,x=null!=l?t.resolveProcessedDataIndexById(this,"labelValue"):-1,M=null!=r?t.resolveProcessedDataIndexById(this,"xFilterValue"):void 0,D=null!=a?t.resolveProcessedDataIndexById(this,"yFilterValue"):void 0,I=v.scale,R=C.scale,E=(I.bandwidth??0)/2,A=(R.bandwidth??0)/2,L=[],k=g.getFont(),T=By.getMeasurer({font:k});for(const{values:P,datum:N}of i.data??[]){const e=P[b],t=P[w],i=I.convert(e)+E,r=R.convert(t)+A,a=null!=M&&null!=D?P[M]===e&&P[D]===t:void 0,m=this.getLabelText(g,{value:l?P[x]:t,datum:N,xKey:n,yKey:o,labelKey:l,xName:h,yName:d,labelName:u}),v=T.measureText(m),C=c?s.convert(P[S]):void 0;L.push({series:this,itemId:o,yKey:o,xKey:n,datum:N,xValue:e,yValue:t,capDefaults:{lengthRatioMultiplier:p.getDiameter(),lengthMax:1/0},point:{x:i,y:r,size:p.size},midPoint:{x:i,y:r},fill:C,label:{text:m,...v},marker:y,placement:f,selected:a})}return{itemId:o,nodeData:L,labelData:L,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.contextNodeData?.labelData??[]}markerFactory(){const{shape:e}=this.properties.marker;return new(jx(e))}async updateMarkerSelection(e){const{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])}async updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,labelKey:o,marker:r,highlightStyle:a}=this.properties,l=ag(i&&a.item,r.getStyle());t.each(((e,t)=>{this.updateMarkerStyle(e,r,{datum:t,highlighted:i,xKey:s,yKey:n,labelKey:o},l,{selected:t.selected})})),i||r.markClean()}async updateLabelSelection(e){const t=this.isLabelEnabled()?this.chart?.placeLabels().get(this)??[]:[];return e.labelSelection.update(t.map((e=>{let{datum:t,x:i,y:s}=e;return{...t,point:{x:i,y:s,size:t.point.size},placement:"top"}})),(e=>{e.pointerEvents=1}))}async updateLabelNodes(e){const{label:t}=this.properties;e.labelSelection.each(((e,i)=>{e.text=i.label.text,e.fill=t.color,e.x=i.point?.x??0,e.y=i.point?.y??0,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.textAlign="left",e.textBaseline="top"}))}getTooltipHtml(e){const t=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!t||!i)return xv;const{xKey:s,yKey:n,labelKey:o,xName:r,yName:a,labelName:l,title:c=a,marker:h,tooltip:d}=this.properties,{datum:u,xValue:p,yValue:g,label:m,itemId:f}=e,y=ag({fill:e.fill,strokeWidth:this.getStrokeWidth(h.strokeWidth)},h.getStyle()),{fill:v="gray"}=this.getMarkerStyle(h,{datum:e,highlighted:!1,xKey:s,yKey:n,labelKey:o},y),C=XD(t.formatDatum(p)),b=XD(i.formatDatum(g));let w=`<b>${XD(r??s)}</b>: ${C}<br><b>${XD(a??n)}</b>: ${b}`;return o&&(w=`<b>${XD(l??o)}</b>: ${XD(m.text)}<br>`+w),d.toTooltipHtml({title:c,content:w,backgroundColor:v},{datum:u,itemId:f,xKey:s,xName:r,yKey:n,yName:a,labelKey:o,labelName:l,title:c,color:v,seriesId:this.id,...this.getModuleTooltipParams()})}getLegendData(e){const{yKey:t,yName:i,title:s,marker:n,visible:o}=this.properties,{fill:r,stroke:a,fillOpacity:l,strokeOpacity:c,strokeWidth:h}=n;return this.data?.length&&this.properties.isValid()&&"category"===e?[{legendType:"category",id:this.id,itemId:t,seriesId:this.id,enabled:o,label:{text:s??i??t},symbols:[{marker:{shape:n.shape,fill:n.fill??r??"rgba(0, 0, 0, 0)",stroke:n.stroke??a??"rgba(0, 0, 0, 0)",fillOpacity:l??1,strokeOpacity:c??1,strokeWidth:h??0}}]}]:[]}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,annotationSelections:s}=e;lR(this,this.ctx.animationManager,t),FI(this,"labels",this.ctx.animationManager,i),FI(this,"annotations",this.ctx.animationManager,...s)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new ny}getFormattedMarkerStyle(e){const{xKey:t,yKey:i,labelKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:t,yKey:i,labelKey:s,highlighted:!0})}computeFocusBounds(e){return pR(this,e)}};_E.className="ScatterSeries",_E.type="scatter";var YE={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",moduleFactory:e=>new _E(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:12,fontFamily:tD,color:iD},errorBar:{cap:{lengthRatio:1}}}},paletteFactory:UM},KE=class e{constructor(e,t,i,s){this.startAngle=e,this.endAngle=t,this.innerRadius=i,this.outerRadius=s}clone(){const{startAngle:t,endAngle:i,innerRadius:s,outerRadius:n}=this;return new e(t,i,s,n)}equals(e){return this.startAngle===e.startAngle&&this.endAngle===e.endAngle&&this.innerRadius===e.innerRadius&&this.outerRadius===e.outerRadius}[_u](t,i){return new e(this.startAngle*(1-i)+t.startAngle*i,this.endAngle*(1-i)+t.endAngle*i,this.innerRadius*(1-i)+t.innerRadius*i,this.outerRadius*(1-i)+t.outerRadius*i)}};function ZE(e){let{startAngle:t,endAngle:i,innerRadius:s,outerRadius:n}=e,o=1/0,r=1/0,a=-1/0,l=-1/0;const c=(e,t)=>{o=Math.min(e,o),r=Math.min(t,r),a=Math.max(e,a),l=Math.max(t,l)};return c(s*Math.cos(t),s*Math.sin(t)),c(s*Math.cos(i),s*Math.sin(i)),c(n*Math.cos(t),n*Math.sin(t)),c(n*Math.cos(i),n*Math.sin(i)),fy(0,t,i)&&c(n,0),fy(.5*Math.PI,t,i)&&c(0,n),fy(Math.PI,t,i)&&c(-n,0),fy(1.5*Math.PI,t,i)&&c(0,-n),new bp(o,r,a-o,l-r)}function $E(e,t,i){const s=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),{innerRadius:n,outerRadius:o}=i;if(i.startAngle===i.endAngle||s<Math.min(n,o)||s>Math.max(n,o))return!1;const r=my(i.startAngle),a=my(i.endAngle),l=Math.atan2(t,e);return r<a?l<=a&&l>=r:l<=a&&l>=-Math.PI||l>=r&&l<=Math.PI}function QE(e,t){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:o}=t,r={x:o*Math.cos(i),y:o*Math.sin(i)},a={x:o*Math.cos(s),y:o*Math.sin(s)},l=0===n?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)},c=0===n?{x:0,y:0}:{x:n*Math.cos(s),y:n*Math.sin(s)};return Bb(e.start.x,e.start.y,e.end.x,e.end.y,r.x,r.y,l.x,l.y)||Bb(e.start.x,e.start.y,e.end.x,e.end.y,a.x,a.y,c.x,c.y)||Vb(0,0,o,i,s,!0,e.start.x,e.start.y,e.end.x,e.end.y)}function XE(e,t){const i={x:e.x,y:e.y},s={x:e.x+e.width,y:e.y},n={x:e.x,y:e.y+e.height},o={x:e.x+e.width,y:e.y+e.height};return QE({start:i,end:s},t)||QE({start:n,end:o},t)}function qE(e,t,i,s){if(0===i&&0===s)return 0;if(Math.asin(Math.abs(1*i)/(e+1*i))+Math.asin(Math.abs(1*s)/(e+1*s))-t<0)return 1;let n=0,o=1;for(let r=0;r<8;r+=1){const r=(n+o)/2;Math.asin(Math.abs(r*i)/(e+r*i))+Math.asin(Math.abs(r*s)/(e+r*s))-t<0?n=r:o=r}return n}function JE(e,t){return by(e,t)<1e-6?t:py(e-t)+t}function eA(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=Math.abs(t-e)>=2*Math.PI?2*Math.PI:py(t-e);return{startAngle:e=JE(e,i),endAngle:t=e+s}}function tA(e,t,i,s,n,o){const r=Math.sin(o),a=Math.cos(o),l=e**2+t**2-i**2;let c=NaN,h=NaN,d=NaN,u=NaN;if(a>.5){const i=r/a,s=1+i**2,n=-2*(e+t*i),o=n**2-4*s*l;if(o<0)return;const p=(-n+Math.sqrt(o))/(2*s),g=(-n-Math.sqrt(o))/(2*s);c=p,h=p*i,d=g,u=g*i}else{const i=a/r,s=1+i**2,n=-2*(t+e*i),o=n**2-4*s*l;if(o<0)return;const p=(-n+Math.sqrt(o))/(2*s),g=(-n-Math.sqrt(o))/(2*s);c=p*i,h=p,d=g*i,u=g}const p=d*a+u*r,g=c*a+h*r>0?JE(Math.atan2(h-t,c-e),s):NaN,m=p>0?JE(Math.atan2(u-t,d-e),s):NaN;return g>=s&&g<=n?g:m>=s&&m<=n?m:void 0}function iA(e,t,i,s,n,o){const r=Math.hypot(e,t),a=r-(r**2-i**2+o**2)/(2*r),l=Math.atan2(t,e),c=Math.acos(-a/i),h=JE(l+c,s),d=JE(l-c,s);return h>=s&&h<=n?h:d>=s&&d<=n?d:void 0}var sA=class{constructor(e,t,i,s,n){this.cx=e,this.cy=t,this.r=i,this.a0=s,this.a1=n,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(e){return{x:this.cx+this.r*Math.cos(e),y:this.cy+this.r*Math.sin(e)}}clipStart(e){null==e||!this.isValid()||e<this.a0||(this.a0=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(e){null==e||!this.isValid()||e>this.a1||(this.a1=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},nA=class extends $b{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(e){this.concentricEdgeInset=e,this.radialEdgeInset=e}set cornerRadius(e){this.startOuterCornerRadius=e,this.endOuterCornerRadius=e,this.startInnerCornerRadius=e,this.endInnerCornerRadius=e}computeBBox(){return ZE(this).translate(this.centerX,this.centerY)}normalizedRadii(){const{concentricEdgeInset:e}=this;let{innerRadius:t,outerRadius:i}=this;return t=t>0?t+e:0,i=Math.max(i-e,0),{innerRadius:t,outerRadius:i}}normalizedClipSector(){const{clipSector:e}=this;if(null==e)return;const{startAngle:t,endAngle:i}=eA(this.startAngle,this.endAngle),{innerRadius:s,outerRadius:n}=this.normalizedRadii(),o=eA(e.startAngle,e.endAngle,t);return new KE(Math.max(t,o.startAngle),Math.min(i,o.endAngle),Math.max(s,e.innerRadius),Math.min(n,e.outerRadius))}getAngleOffset(e){return e>0?this.radialEdgeInset/e:0}arc(e,t,i,s,n,o,r,a){if(e<=0)return;const{startAngle:l,endAngle:c}=eA(this.startAngle,this.endAngle),{innerRadius:h,outerRadius:d}=this.normalizedRadii(),u=this.normalizedClipSector();if(a&&h<=0)return;const p=a?this.getAngleOffset(h+e):this.getAngleOffset(d-e),g=r?l+p+t:c-p-t,m=a?h+e:d-e,f=m*Math.cos(g),y=m*Math.sin(g);if(null!=u){const e=1e-6;if(!r&&!(g>=l-e&&g<=u.endAngle-e))return;if(r&&!(g>=u.startAngle+e&&g<=c-e))return;if(a&&m<u.innerRadius-e)return;if(!a&&m>u.outerRadius+e)return}const v=new sA(f,y,e,i,s);if(null!=u){let t,c;if(a?(v.clipStart(tA(f,y,e,i,s,u.endAngle)),v.clipEnd(tA(f,y,e,i,s,u.startAngle))):(v.clipStart(tA(f,y,e,i,s,u.startAngle)),v.clipEnd(tA(f,y,e,i,s,u.endAngle))),r?(t=iA(f,y,e,i,s,u.innerRadius),c=iA(f,y,e,i,s,u.outerRadius)):(t=iA(f,y,e,i,s,u.outerRadius),c=iA(f,y,e,i,s,u.innerRadius)),v.clipStart(t),v.clipEnd(c),null!=t){const{x:e,y:i}=v.pointAt(t),s=JE(Math.atan2(i,e),l);r?o?.clipStart(s):n.clipEnd(s)}if(null!=c){const{x:e,y:t}=v.pointAt(c),i=JE(Math.atan2(t,e),l);r?n.clipStart(i):o?.clipEnd(i)}}if(null!=u){const{x:e,y:t}=v.pointAt((v.a0+v.a1)/2);if(!$E(e,t,u))return}const{x:C,y:b}=v.pointAt(r===a?v.a0:v.a1),w=JE(Math.atan2(b,C),l),S=a?o:n;return r?S?.clipStart(w):S?.clipEnd(w),v}updatePath(){const e=1e-6,{path:t,centerX:i,centerY:s,concentricEdgeInset:n,radialEdgeInset:o}=this;let{startOuterCornerRadius:r,endOuterCornerRadius:a,startInnerCornerRadius:l,endInnerCornerRadius:c}=this;const{startAngle:h,endAngle:d}=eA(this.startAngle,this.endAngle),{innerRadius:u,outerRadius:p}=this.normalizedRadii(),g=this.normalizedClipSector(),m=d-h,f=m>=2*Math.PI-e;if(t.clear(),0===u&&0===p||u>p)return;if((g?.startAngle??h)===(g?.endAngle??d))return;if(f&&null==this.clipSector&&0===r&&0===a&&0===l&&0===c)return t.moveTo(i+p*Math.cos(h),s+p*Math.sin(h)),t.arc(i,s,p,h,d),u>n&&(t.moveTo(i+u*Math.cos(d),s+u*Math.sin(d)),t.arc(i,s,u,d,h,!0)),void t.closePath();if(null==this.clipSector&&Math.abs(u-p)<1e-6)return t.arc(i,s,p,h,d,!1),t.arc(i,s,p,d,h,!0),void t.closePath();const y=this.getAngleOffset(u),v=this.getAngleOffset(p);if(m<2*v)return;const C=(g?.innerRadius??u)>n,b=u<n||m<2*y,w=p-u,S=Math.max(r,l,a,c),x=S>0?Math.min(w/S,1):1;r*=x,a*=x,l*=x,c*=x;const M=qE(p,m-2*v,-r,-a);if(r*=M,a*=M,!b&&C){const e=qE(u,m-2*y,l,c);l*=e,c*=e}else l=0,c=0;const D=Math.max(r+l,a+c),I=D>0?Math.min(w/D,1):1;r*=I,a*=I,l*=I,c*=I;let R=0,E=0;const A=r/(p-r),L=a/(p-a);if(A>=0&&A<.999999)R=Math.asin(A);else{R=m/2;const e=p/(1/Math.sin(R)+1);r=Math.min(e,r)}if(L>=0&&L<.999999)E=Math.asin(L);else{E=m/2;const e=p/(1/Math.sin(E)+1);a=Math.min(e,a)}const k=Math.asin(l/(u+l)),T=Math.asin(c/(u+c)),P=g?.outerRadius??p,N=this.getAngleOffset(P),F=new sA(0,0,P,h+N,d-N),O=g?.innerRadius??u,G=this.getAngleOffset(O),B=C?new sA(0,0,O,h+G,d-G):void 0;null!=g&&(F.clipStart(g.startAngle),F.clipEnd(g.endAngle),B?.clipStart(g.startAngle),B?.clipEnd(g.endAngle));const z=this.arc(r,R,h-.5*Math.PI,h+R,F,B,!0,!1),H=this.arc(a,E,d-E,d+.5*Math.PI,F,B,!1,!1),V=this.arc(c,T,d+.5*Math.PI,d+Math.PI-T,F,B,!1,!0),j=this.arc(l,k,h+Math.PI+k,h+1.5*Math.PI,F,B,!0,!0);if(b){const e=m<.5*Math.PI?o*(1+Math.cos(m))/Math.sin(m):NaN;let n;n=e>0&&e<p?Math.max(Math.hypot(o,e),u):o,n=Math.max(n,u);const r=h+.5*m;t.moveTo(i+n*Math.cos(r),s+n*Math.sin(r))}else if(!0===j?.isValid()||!0===B?.isValid());else{const e=h+m/2,n=u*Math.cos(e),o=u*Math.sin(e);t.moveTo(i+n,s+o)}if(!0===z?.isValid()){const{cx:e,cy:n,r:o,a0:r,a1:a}=z;t.arc(i+e,s+n,o,r,a)}if(F.isValid()){const{r:e,a0:n,a1:o}=F;t.arc(i,s,e,n,o)}if(!0===H?.isValid()){const{cx:e,cy:n,r:o,a0:r,a1:a}=H;t.arc(i+e,s+n,o,r,a)}if(!b){if(!0===V?.isValid()){const{cx:e,cy:n,r:o,a0:r,a1:a}=V;t.arc(i+e,s+n,o,r,a)}if(!0===B?.isValid()){const{r:e,a0:n,a1:o}=B;t.arc(i,s,e,o,n,!0)}if(!0===j?.isValid()){const{cx:e,cy:n,r:o,a0:r,a1:a}=j;t.arc(i+e,s+n,o,r,a)}}t.closePath()}isPointInPath(e,t){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:o}=this.clipSector??this;return $E(e-this.centerX,t-this.centerY,{startAngle:i,endAngle:s,innerRadius:Math.min(n,o),outerRadius:Math.max(n,o)})}};nA.className="Sector",Wd([Zb()],nA.prototype,"centerX",2),Wd([Zb()],nA.prototype,"centerY",2),Wd([Zb()],nA.prototype,"innerRadius",2),Wd([Zb()],nA.prototype,"outerRadius",2),Wd([Zb()],nA.prototype,"startAngle",2),Wd([Zb()],nA.prototype,"endAngle",2),Wd([Zb()],nA.prototype,"clipSector",2),Wd([Zb()],nA.prototype,"concentricEdgeInset",2),Wd([Zb()],nA.prototype,"radialEdgeInset",2),Wd([Zb()],nA.prototype,"startOuterCornerRadius",2),Wd([Zb()],nA.prototype,"endOuterCornerRadius",2),Wd([Zb()],nA.prototype,"startInnerCornerRadius",2),Wd([Zb()],nA.prototype,"endInnerCornerRadius",2);var oA={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},rA={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},aA=class extends Ev{constructor(){super(...arguments),this.showInLegend=!1}};Wd([lm(gm)],aA.prototype,"showInLegend",2);var lA=class extends Pv{constructor(){super(...arguments),this.spacing=2}set(e,t){return super.set(e)}};Wd([lm(fm)],lA.prototype,"text",2),Wd([lm(ym)],lA.prototype,"spacing",2);var cA=class extends om{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};Wd([lm(Tm)],cA.prototype,"fill",2),Wd([lm(wm)],cA.prototype,"fillOpacity",2);var hA=class extends Pv{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};Wd([lm(bm)],hA.prototype,"offset",2),Wd([lm(Sm)],hA.prototype,"minAngle",2),Wd([lm(bm)],hA.prototype,"minSpacing",2),Wd([lm(bm)],hA.prototype,"maxCollisionOffset",2),Wd([lm(gm)],hA.prototype,"avoidCollisions",2);var dA=class extends Pv{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};Wd([lm(ym)],dA.prototype,"positionOffset",2),Wd([lm(wm)],dA.prototype,"positionRatio",2);var uA=class extends om{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};Wd([lm(Pm,{optional:!0})],uA.prototype,"colors",2),Wd([lm(bm)],uA.prototype,"length",2),Wd([lm(bm)],uA.prototype,"strokeWidth",2);var pA=class extends $x{constructor(){super(...arguments),this.fills=Object.values(oA),this.strokes=Object.values(rA),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.innerLabels=new rm(lA),this.title=new aA,this.innerCircle=new cA,this.shadow=new zI,this.calloutLabel=new hA,this.sectorLabel=new dA,this.calloutLine=new uA,this.tooltip=new WI}isValid(){const e=super.isValid();return null==this.innerRadiusRatio&&null==this.innerRadiusOffset?(Xd.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):e}};function gA(e,t,i,s){const n=[i.convert(0),i.convert(1)],o=[s.convert(0),s.convert(1)],r=Math.PI/-2+yy(t),a=e?"initial":"update";return{nodes:{toFn:(e,t,i,s)=>{let{prevLive:o}=s,{startAngle:a,endAngle:l,innerRadius:c,outerRadius:h}=t;const{stroke:d,fill:u}=t.sectorFormat;if("removed"===i&&o?(a=o.datum?.endAngle,l=o.datum?.endAngle):"removed"!==i||o||(a=r,l=r),"removed"===i){const e=(e=>{let{radius:t}=e;return{innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*t}})(t);c=e.innerRadius,h=e.outerRadius}return{startAngle:a,endAngle:l,outerRadius:h,innerRadius:c,stroke:d,fill:u}},fromFn:(t,i,s,n)=>{let{prevFromProps:l}=n,{startAngle:c,endAngle:h,innerRadius:d,outerRadius:u}=t,{fill:p,stroke:g}=i.sectorFormat;if("unknown"===s||"added"===s&&!l?(c=r,h=r,d=i.innerRadius,u=i.outerRadius):"added"===s&&l&&(c=l.endAngle??r,h=l.endAngle??r,d=l.innerRadius??i.innerRadius,u=l.outerRadius??i.outerRadius),"added"===s&&!e){const e=(e=>{let{radius:t}=e;return{innerRadius:o[0],outerRadius:o[0]+(o[1]-o[0])*t}})(i);d=e.innerRadius,u=e.outerRadius}return"updated"===s&&(p=t.fill??p,g=t.stroke??g),{startAngle:c,endAngle:h,innerRadius:d,outerRadius:u,fill:p,stroke:g,phase:a}}},innerCircle:{fromFn:(e,t)=>({size:e.previousDatum?.radius??e.size??0,phase:a}),toFn:(e,t)=>({size:t.radius??0})}}}function mA(e,t){return{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,fill:t.sectorFormat.fill,stroke:t.sectorFormat.stroke}}function fA(e,t){const i=t.y-e.centerY,s=t.x-e.centerX,n=Math.atan2(i,s),o=e.getItemNodes();for(const r of o)if(!0!==r.datum.missing&&fy(n,r.startAngle,r.endAngle)){const e=Math.sqrt(s*s+i*i);let t=0;return e<r.innerRadius?t=r.innerRadius-e:e>r.outerRadius&&(t=e-r.outerRadius),{datum:r.datum,distance:t}}}Wd([lm(fm)],pA.prototype,"angleKey",2),Wd([lm(fm,{optional:!0})],pA.prototype,"angleName",2),Wd([lm(fm,{optional:!0})],pA.prototype,"angleFilterKey",2),Wd([lm(fm,{optional:!0})],pA.prototype,"radiusKey",2),Wd([lm(fm,{optional:!0})],pA.prototype,"radiusName",2),Wd([lm(bm,{optional:!0})],pA.prototype,"radiusMin",2),Wd([lm(bm,{optional:!0})],pA.prototype,"radiusMax",2),Wd([lm(fm,{optional:!0})],pA.prototype,"calloutLabelKey",2),Wd([lm(fm,{optional:!0})],pA.prototype,"calloutLabelName",2),Wd([lm(fm,{optional:!0})],pA.prototype,"sectorLabelKey",2),Wd([lm(fm,{optional:!0})],pA.prototype,"sectorLabelName",2),Wd([lm(fm,{optional:!0})],pA.prototype,"legendItemKey",2),Wd([lm(Pm)],pA.prototype,"fills",2),Wd([lm(Pm)],pA.prototype,"strokes",2),Wd([lm(wm)],pA.prototype,"fillOpacity",2),Wd([lm(wm)],pA.prototype,"strokeOpacity",2),Wd([lm(jm)],pA.prototype,"lineDash",2),Wd([lm(bm)],pA.prototype,"lineDashOffset",2),Wd([lm(bm)],pA.prototype,"cornerRadius",2),Wd([lm(mm,{optional:!0})],pA.prototype,"itemStyler",2),Wd([lm(Sm)],pA.prototype,"rotation",2),Wd([lm(ym)],pA.prototype,"outerRadiusOffset",2),Wd([lm(wm)],pA.prototype,"outerRadiusRatio",2),Wd([lm(ym,{optional:!0})],pA.prototype,"innerRadiusOffset",2),Wd([lm(wm,{optional:!0})],pA.prototype,"innerRadiusRatio",2),Wd([lm(bm)],pA.prototype,"strokeWidth",2),Wd([lm(ym)],pA.prototype,"sectorSpacing",2),Wd([lm(Bm)],pA.prototype,"innerLabels",2),Wd([lm(um)],pA.prototype,"title",2),Wd([lm(um)],pA.prototype,"innerCircle",2),Wd([lm(um)],pA.prototype,"shadow",2),Wd([lm(um)],pA.prototype,"calloutLabel",2),Wd([lm(um)],pA.prototype,"sectorLabel",2),Wd([lm(um)],pA.prototype,"calloutLine",2),Wd([lm(um)],pA.prototype,"tooltip",2);var yA=class extends Wx{constructor(e){let{useLabelLayer:t=!1,pickModes:i=[1,0],canHaveAxes:s=!1,animationResetFns:n,...o}=e;super({...o,useLabelLayer:t,pickModes:i,contentGroupVirtual:!1,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:s}),this.itemGroup=this.contentGroup.appendChild(new ny),this.nodeData=[],this.itemSelection=dy.select(this.itemGroup,(()=>this.nodeFactory()),!1),this.labelSelection=dy.select(this.labelGroup,(()=>this.labelFactory()),!1),this.highlightSelection=dy.select(this.highlightGroup,(()=>this.nodeFactory())),this.highlightLabelSelection=dy.select(this.highlightLabel,(()=>this.labelFactory())),this.centerX=0,this.centerY=0,this.radius=0,this.itemGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=n,this.animationState=new pv("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),highlightMarkers:e=>this.animateReadyHighlightMarkers(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}labelFactory(){const e=new Wy;return e.pointerEvents=1,e}getInnerRadius(){return 0}getLabelData(){return[]}computeLabelsBBox(e,t){return null}resetAllAnimation(){const{item:e,label:t}=this.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&df([this.itemSelection,this.highlightSelection],e),t&&df([this.labelSelection,this.highlightLabelSelection],t),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup(),this.highlightLabelSelection.cleanup()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(e){const{item:t,label:i}=this.animationResetFns??{};t&&df([this.highlightSelection],t),i&&df([this.highlightLabelSelection],i)}animateReadyHighlightMarkers(e){}animateReadyResize(e){this.resetAllAnimation()}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(e){return{seriesRect:e}}computeFocusBounds(e){const t=this.getNodeData()?.[e.datumIndex];if(void 0!==t)return this.itemSelection.select((e=>e instanceof $b&&e.datum===t))[0]}},vA=class extends sx{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},CA=class extends yA{constructor(e){super({moduleCtx:e,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:mA,label:GI}}),this.properties=new pA,this.phantomNodeData=void 0,this.previousRadiusScale=new aM,this.radiusScale=new aM,this.phantomGroup=this.contentGroup.appendChild(new ny),this.phantomSelection=dy.select(this.phantomGroup,(()=>this.nodeFactory()),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new ny({name:"pieCalloutLabels"})),this.calloutLabelSelection=new dy(this.calloutLabelGroup,ny),this.backgroundGroup=this.rootGroup.appendChild(new kv({name:`${this.id}-background`,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new ny({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Ix),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Ix),this.innerLabelsGroup=this.contentGroup.appendChild(new ny({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new ny({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=dy.select(this.innerLabelsGroup,Wy),this.innerCircleSelection=dy.select(this.innerCircleGroup,Ix),this.seriesItemEnabled=[],this.legendItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=vA,this.angleScale=new aM,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map((e=>e+Math.PI/2)),this.phantomGroup.opacity=.2,this.phantomGroup.zIndexSubOrder=[()=>this._declarationOrder,0]}get calloutNodeData(){return this.phantomNodeData??this.nodeData}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",(e=>this.onLegendItemClick(e))))}get visible(){return super.visible&&(0===this.seriesItemEnabled.length||this.seriesItemEnabled.includes(!0))}nodeFactory(){return new nA}getSeriesDomain(e){return"x"===e?this.angleScale.domain:this.radiusScale.domain}async processData(e){if(null==this.data||!this.properties.isValid())return;let{data:t}=this;const{visible:i,seriesItemEnabled:s}=this,{angleKey:n,angleFilterKey:o,radiusKey:r,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c}=this.properties,h=!this.ctx.animationManager.isSkipped(),d=[],u=[];c?d.push(pI(c,"band",{id:"legendItemKey"})):a?d.push(pI(a,"band",{id:"calloutLabelKey"})):l&&d.push(pI(l,"band",{id:"sectorLabelKey"}));const p=this.radiusScale.type,g=this.radiusScale.type;r&&u.push(mI(r,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax}),gI(r,p,{id:"radiusRaw"}),II("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),a&&u.push(gI(a,"band",{id:"calloutLabelValue"})),l&&u.push(gI(l,"band",{id:"sectorLabelValue"})),c&&u.push(gI(c,"band",{id:"legendItemValue"})),o&&u.push(fI(o,g,{id:"angleFilterValue",onlyPositive:!0}),gI(o,g,{id:"angleFilterRaw"}),II("angleFilterValue",[0,1],0,0)),h&&this.processedData&&d.length>0&&u.push(PI(this.processedData)),u.push(RI()),t=t.map(((e,t)=>i&&s[t]?e:{...e,[n]:0})),await this.requestDataModel(e,t,{props:[...d,fI(n,g,{id:"angleValue",onlyPositive:!0}),gI(n,g,{id:"angleRaw"}),II("angleValue",[0,1],0,0),...u]});for(const m of this.processedData?.defs?.values??[]){const{id:e,missing:t,property:i}=m,s=bS(this,t);"angleRaw"!==e&&s>0&&Xd.warnOnce(`no value was found for the key '${String(i)}' on ${s} data element${s>1?"s":""}`)}this.animationState.transition("updateData")}async maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:e=[],phantomNodeData:t}=await this.createNodeData()??{};this.nodeData=e,this.phantomNodeData=t,this.nodeDataRefresh=!1}getProcessedDataIndexes(e){return{angleIdx:e.resolveProcessedDataIndexById(this,"angleValue"),angleRawIdx:e.resolveProcessedDataIndexById(this,"angleRaw"),angleFilterIdx:null!=this.properties.angleFilterKey?e.resolveProcessedDataIndexById(this,"angleFilterValue"):void 0,angleFilterRawIdx:null!=this.properties.angleFilterKey?e.resolveProcessedDataIndexById(this,"angleFilterRaw"):void 0,radiusIdx:this.properties.radiusKey?e.resolveProcessedDataIndexById(this,"radiusValue"):void 0,radiusRawIdx:this.properties.radiusKey?e.resolveProcessedDataIndexById(this,"radiusRaw"):void 0,calloutLabelIdx:this.properties.calloutLabelKey?e.resolveProcessedDataIndexById(this,"calloutLabelValue"):void 0,sectorLabelIdx:this.properties.sectorLabelKey?e.resolveProcessedDataIndexById(this,"sectorLabelValue"):void 0,legendItemIdx:this.properties.legendItemKey?e.resolveProcessedDataIndexById(this,"legendItemValue"):void 0}}async createNodeData(){const{id:e,processedData:t,dataModel:i,angleScale:s}=this,{rotation:n,innerRadiusRatio:o}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,{itemId:e,nodeData:[],labelData:[]};if(!t||!i||"ungrouped"!==t.type)return;const{angleIdx:r,angleRawIdx:a,angleFilterIdx:l,angleFilterRawIdx:c,radiusIdx:h,radiusRawIdx:d,calloutLabelIdx:u,sectorLabelIdx:p,legendItemIdx:g}=this.getProcessedDataIndexes(i),m=null!=c&&t.data.some((e=>{let{values:t}=e;return t[c]>t[a]}));let f=0,y=0;const v=[],C=null!=c?[]:void 0;return t.data.forEach(((e,t)=>{const{datum:i,values:o}=e,b=m?o[l]:o[r],w=null==c||m?1:Math.sqrt(o[c]/o[a]),S=s.convert(f)+yy(n);f=b,y+=b;const x=s.convert(f)+yy(n),M=Math.abs(x-S),D=S+M/2,I=o[a],R=(null!=h?o[h]??1:1)*w,E=null!=d?o[d]:void 0,A=null!=g?o[g]:void 0,L=this.getLabels(i,D,M,!0,null!=u?o[u]:void 0,null!=p?o[p]:void 0,A),k=this.getSectorFormat(i,t,!1),T={itemId:t,series:this,datum:i,index:t,angleValue:I,midAngle:D,midCos:Math.cos(D),midSin:Math.sin(D),startAngle:S,endAngle:x,radius:R,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(R),0),sectorFormat:k,radiusValue:E,legendItemValue:A,enabled:this.seriesItemEnabled[t],focusable:!0,...L};v.push(T),null!=C&&C.push({...T,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1})})),this.zerosumOuterRing.visible=0===y,this.zerosumInnerRing.visible=0===y&&null!=o&&1!==o&&o>0,{itemId:e,nodeData:v,labelData:v,phantomNodeData:C}}getLabels(e,t,i,s,n,o,r){const{calloutLabel:a,sectorLabel:l,legendItemKey:c}=this.properties,h=!s||a.enabled?this.properties.calloutLabelKey:void 0,d=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!h&&!d&&!c)return{};const u={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return h&&i>yy(a.minAngle)&&(p.calloutLabel={...this.getTextAlignment(t),text:this.getLabelText(a,{...u,value:n}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),d&&(p.sectorLabel={text:this.getLabelText(l,{...u,value:o})}),null!=c&&null!=r&&(p.legendItem={key:c,text:r}),p}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=my(e)- -.75*Math.PI;return t[mp(Math.floor(i/(Math.PI/2)),t.length)]}getSectorFormat(e,t,i){const{callbackCache:s}=this.ctx,{angleKey:n,radiusKey:o,calloutLabelKey:r,sectorLabelKey:a,legendItemKey:l,fills:c,strokes:h,itemStyler:d}=this.properties,u=h[t%h.length],{fill:p,fillOpacity:g,stroke:m,strokeWidth:f,strokeOpacity:y,lineDash:v,lineDashOffset:C,cornerRadius:b}=ag(i&&this.properties.highlightStyle.item,{fill:c.length>0?c[t%c.length]:void 0,stroke:u,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties);let w;return d&&(w=s.call(d,{datum:e,angleKey:n,radiusKey:o,calloutLabelKey:r,sectorLabelKey:a,legendItemKey:l,fill:p,fillOpacity:g,stroke:m,strokeWidth:f,strokeOpacity:y,lineDash:v,lineDashOffset:C,cornerRadius:b,highlighted:i,seriesId:this.id})),{fill:w?.fill??p,fillOpacity:w?.fillOpacity??g,stroke:w?.stroke??m,strokeWidth:w?.strokeWidth??f,strokeOpacity:w?.strokeOpacity??y,lineDash:w?.lineDash??v,lineDashOffset:w?.lineDashOffset??C,cornerRadius:w?.cornerRadius??b}}getInnerRadius(){const{radius:e}=this,{innerRadiusRatio:t=1,innerRadiusOffset:i=0}=this.properties,s=e*t+i;return s===e||s<0?0:s}getOuterRadius(){const{outerRadiusRatio:e,outerRadiusOffset:t}=this.properties;return Math.max(this.radius*e+t,0)}updateRadiusScale(e){const t=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t);const i=e=>({...e,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(e.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){const e=Math.max(0,this.radiusScale.range[1]);if(0===e)return NaN;return-e-(2+(this.properties.title?.spacing??0))-Math.max(0,-e)}async update(e){let{seriesRect:t}=e;const{title:i}=this.properties,s={seriesRectWidth:t?.width,seriesRectHeight:t?.height},n=null!=qy(this.nodeDataDependencies,s);if(n&&(this._nodeDataDependencies=s),await this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),i){const e=this.getTitleTranslationY();i.node.y=isFinite(e)?e:0;const t=i.node.getBBox();i.node.visible=i.enabled&&isFinite(e)&&!this.bboxIntersectsSurroundingSeries(t)}for(const o of[this.zerosumInnerRing,this.zerosumOuterRing])o.fillOpacity=0,o.stroke=this.properties.calloutLabel.color,o.strokeWidth=1,o.strokeOpacity=1;this.updateNodeMidPoint(),await this.updateSelections(),await this.updateNodes(t)}updateTitleNodes(){const{oldTitle:e}=this,{title:t}=this.properties;e!==t&&(e&&this.labelGroup?.removeChild(e.node),t&&(t.node.textBaseline="bottom",this.labelGroup?.appendChild(t.node)),this.oldTitle=t)}updateNodeMidPoint(){const e=e=>{const t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,t),y:e.midSin*Math.max(0,t)}};this.nodeData.forEach(e),this.phantomNodeData?.forEach(e)}async updateSelections(){await this.updateGroupSelection(),this.updateInnerCircleSelection()}async updateGroupSelection(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,highlightLabelSelection:s,calloutLabelSelection:n,labelSelection:o,innerLabelsSelection:r}=this,a=this.nodeData.map((e=>({...e,sectorFormat:{...e.sectorFormat}}))),l=(e,t)=>{e.update(t,void 0,(e=>this.getDatumId(e))),this.ctx.animationManager.isSkipped()&&e.cleanup()};l(e,this.nodeData),l(t,a),l(i,this.phantomNodeData??[]),n.update(this.calloutNodeData,(e=>{const t=new Oy;t.tag=0,t.pointerEvents=1,e.appendChild(t);const i=new Wy;i.tag=1,i.pointerEvents=1,e.appendChild(i)})),o.update(this.nodeData),s.update(a),r.update(this.properties.innerLabels,(e=>{e.pointerEvents=1}))}updateInnerCircleSelection(){const{innerCircle:e}=this.properties;let t=0;const i=this.getInnerRadius();if(i>0){const e=Math.min(i,this.getOuterRadius()),s=1;t=Math.ceil(2*e+s)}const s=e?[{radius:t}]:[];this.innerCircleSelection.update(s)}async updateNodes(e){const t=this.ctx.highlightManager.getActiveHighlight(),i=this.visible&&this.seriesItemEnabled.includes(!0);this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&t?.series===this,this.highlightLabel.visible=i&&t?.series===this,this.labelGroup.visible=i,this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each(((e,t)=>{let{radius:i}=t;e.setProperties({fill:this.properties.innerCircle?.fill,opacity:this.properties.innerCircle?.fillOpacity,size:i})}));const s=this.ctx.animationManager.isSkipped(),n=(e,t,i,n)=>{const o=this.getSectorFormat(t.datum,t.itemId,n);t.sectorFormat.fill=o.fill,t.sectorFormat.stroke=o.stroke,s&&(e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius),(n||s)&&(e.fill=o.fill,e.stroke=o.stroke),e.strokeWidth=o.strokeWidth,e.fillOpacity=o.fillOpacity,e.strokeOpacity=o.strokeOpacity,e.lineDash=o.lineDash,e.lineDashOffset=o.lineDashOffset,e.cornerRadius=o.cornerRadius,e.fillShadow=this.properties.shadow;const r=Math.max((this.properties.sectorSpacing+(null!=o.stroke?o.strokeWidth:0))/2,0);e.inset=r,e.lineJoin=this.properties.sectorSpacing>=0||r>0?"miter":"round"};this.itemSelection.each(((e,t,i)=>n(e,t,0,!1))),this.highlightSelection.each(((e,i,s)=>{n(e,i,0,!0),e.visible=i.itemId===t?.itemId})),this.phantomSelection.each(((e,t,i)=>n(e,t,0,!1))),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{calloutLine:e}=this.properties,t=e.length,i=e.strokeWidth,s=e.colors??this.properties.strokes,{offset:n}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(((e,o)=>{const r=e.datum,{calloutLabel:a,outerRadius:l}=r;if(a?.text&&!a.hidden&&0!==l){e.visible=!0,e.strokeWidth=i,e.stroke=s[o%s.length],e.fill=void 0;const c=r.midCos*l,h=r.midSin*l;let d=r.midCos*(l+t),u=r.midSin*(l+t);if((a.collisionTextAlign??0!==a.collisionOffsetY)&&null!=a.box){const e=a.box;let t=d,i=u;d<e.x?t=e.x:d>e.x+e.width&&(t=e.x+e.width),u<e.y?i=e.y:u>e.y+e.height&&(i=e.y+e.height);const s=t-d,o=i-u,r=Math.sqrt(Math.pow(s,2)+Math.pow(o,2)),l=r-n;l>0&&(d+=s*l/r,u+=o*l/r)}e.x1=c,e.y1=h,e.x2=d,e.y2=u}else e.visible=!1}))}getLabelOverflow(e,t,i){const s=i.x-this.centerX,n=i.x+i.width-this.centerX,o=i.y-this.centerY,r=i.y+i.height-this.centerY;let a=1;t.x+1<s?a=(t.x+t.width-s)/t.width:t.x+t.width-1>n&&(a=(n-t.x)/t.width);const l=t.y+1<o||t.y+t.height-1>r;return{textLength:1===a?e.length:Math.floor(e.length*a)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(t)}}bboxIntersectsSurroundingSeries(e){const{surroundingRadius:t}=this;if(null==t)return!1;const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],s=t**2;return i.some((e=>e.x**2+e.y**2>s))}computeCalloutLabelCollisionOffsets(){const{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=t,o=e.convert(0),r=this.calloutNodeData,a=r.filter((e=>{return!(!(t=e).calloutLabel||0===t.outerRadius);var t}));if(a.forEach((e=>{const t=e.calloutLabel;null!=t&&(t.hidden=!1,t.collisionTextAlign=void 0,t.collisionOffsetY=0)})),a.length<=1)return;const l=a.filter((e=>e.midCos<0)).sort(((e,t)=>e.midSin-t.midSin)),c=a.filter((e=>e.midCos>=0)).sort(((e,t)=>e.midSin-t.midSin)),h=a.filter((e=>e.midSin<0&&"center"===e.calloutLabel?.textAlign)).sort(((e,t)=>e.midCos-t.midCos)),d=a.filter((e=>e.midSin>=0&&"center"===e.calloutLabel?.textAlign)).sort(((e,t)=>e.midCos-t.midCos)),u=e=>{const t=e.calloutLabel;if(null==t)return bp.zero.clone();const n=e.outerRadius+i.length+s,o=e.midCos*n,r=e.midSin*n+t.collisionOffsetY,a=t.collisionTextAlign??t.textAlign,l=t.textBaseline;return Wy.computeBBox(t.text,o,r,{font:this.properties.calloutLabel,textAlign:a,textBaseline:l})},p=(e,t,i)=>{const s=u(e).grow(n/2),o=u(t).grow(n/2);if(s.x<o.x+o.width&&s.x+s.width>o.x&&("to-top"===i?s.y<o.y+o.height:s.y+s.height>o.y)){const e="to-top"===i?s.y-o.y-o.height:s.y+s.height-o.y;t.calloutLabel.collisionOffsetY=e}},g=e=>{const t=e.slice().sort(((e,t)=>Math.abs(e.midSin)-Math.abs(t.midSin)))[0],i=e.indexOf(t);for(let s=i-1;s>=0;s--){const t=e[s+1],i=e[s];p(t,i,"to-top")}for(let s=i+1;s<e.length;s++){const t=e[s-1],i=e[s];p(t,i,"to-bottom")}},m=e=>{const t=a.some((e=>0!==e.calloutLabel.collisionOffsetY)),i=e.map((e=>u(e))),s=i.map((e=>e.clone().grow(n/2)));let l=!1;for(let n=0;n<s.length&&!l;n++){const t=s[n];for(let i=n+1;i<e.length;i++){const e=s[i];if(t.collidesBBox(e)){l=!0;break}}}const c=r.map((e=>{const{startAngle:t,endAngle:i,outerRadius:s}=e;return{startAngle:t,endAngle:i,innerRadius:o,outerRadius:s}})),h=i.some((e=>c.some((t=>XE(e,t)))));(l||t||h)&&e.filter((e=>"center"===e.calloutLabel.textAlign)).forEach((e=>{const t=e.calloutLabel;e.midCos<0?t.collisionTextAlign="right":e.midCos>0?t.collisionTextAlign="left":t.collisionTextAlign="center"}))};g(l),g(c),m(h),m(d)}updateCalloutLabelNodes(e){const{radiusScale:t}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:o,color:r}=i,a=new Wy;this.calloutLabelSelection.selectByTag(1).forEach((s=>{const{datum:l}=s,c=l.calloutLabel,h=t.convert(l.radius),d=Math.max(0,h);if(!c?.text||0===d||c.hidden)return void(s.visible=!1);const u=d+n+o,p=l.midCos*u,g=l.midSin*u+c.collisionOffsetY,m={textAlign:c.collisionTextAlign??c.textAlign,textBaseline:c.textBaseline};a.text=c.text,a.x=p,a.y=g,a.setFont(this.properties.calloutLabel),a.setAlign(m);const f=a.getBBox();let y=c.text,v=!0;if(i.avoidCollisions){const{textLength:t,hasVerticalOverflow:i}=this.getLabelOverflow(c.text,f,e);y=c.text.length===t?c.text:`${c.text.substring(0,t)}\u2026`,v=!i}s.text=y,s.x=p,s.y=g,s.setFont(this.properties.calloutLabel),s.setAlign(m),s.fill=r,s.visible=v}))}async computeLabelsBBox(e,t){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:o,maxCollisionOffset:r,minSpacing:a}=i;if(!i.avoidCollisions)return null;await this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new Wy;let h;const{title:d}=this.properties;if(d?.text&&d.enabled){const e=this.getTitleTranslationY();isFinite(e)&&(c.text=d.text,c.x=0,c.y=e,c.setFont(d),c.setAlign({textBaseline:"bottom",textAlign:"center"}),h=c.getBBox(),l.push(h))}return this.calloutNodeData.forEach((i=>{const s=i.calloutLabel;if(!s||0===i.outerRadius)return null;const d=i.outerRadius+n+o,u=i.midCos*d,p=i.midSin*d+s.collisionOffsetY;c.text=s.text,c.x=u,c.y=p,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:s.collisionTextAlign??s.textAlign,textBaseline:s.textBaseline});const g=c.getBBox();if(s.box=g,Math.abs(s.collisionOffsetY)>r)s.hidden=!0;else{if(h){const e=t.y-this.centerY,i=new bp(h.x-a,e,h.width+2*a,h.y+h.height+a-e);if(g.collidesBBox(i))return void(s.hidden=!0)}if(e.hideWhenNecessary){const{textLength:e,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:n}=this.getLabelOverflow(s.text,g,t),o=s.text.length>2&&e<2;if(i||o||n)return void(s.hidden=!0)}s.hidden=!1,l.push(g)}})),0===l.length?null:bp.merge(l)}updateSectorLabelNodes(){const{radiusScale:e}=this,t=e.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:o,positionOffset:r,positionRatio:a,color:l}=this.properties.sectorLabel,c=(e,c)=>{const{sectorLabel:h,outerRadius:d}=c;let u=!1;if(h&&0!==d){const p=t*(1-a)+d*a+r;e.fill=l,e.fontStyle=s,e.fontWeight=n,e.fontSize=i,e.fontFamily=o,e.text=h.text,e.x=c.midCos*p,e.y=c.midSin*p,e.textAlign="center",e.textBaseline="middle";const g=e.getBBox(),m=[[g.x,g.y],[g.x+g.width,g.y],[g.x+g.width,g.y+g.height],[g.x,g.y+g.height]],{startAngle:f,endAngle:y}=c,v={startAngle:f,endAngle:y,innerRadius:t,outerRadius:d};m.every((e=>{let[t,i]=e;return $E(t,i,v)}))&&(u=!0)}e.visible=u};this.labelSelection.each(c),this.highlightLabelSelection.each(c)}updateInnerLabelNodes(){const e=[],t=[];this.innerLabelsSelection.each(((i,s)=>{const{fontStyle:n,fontWeight:o,fontSize:r,fontFamily:a,color:l}=s;i.fontStyle=n,i.fontWeight=o,i.fontSize=r,i.fontFamily=a,i.text=s.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",e.push(i.getBBox()),t.push(s.spacing)}));const i=e=>0===e?0:t[e],s=e=>e===t.length-1?0:t[e],n=e.reduce(((e,t,n)=>e+t.height+i(n)+s(n)),0),o=Math.max(...e.map((e=>e.width))),r=this.getInnerRadius(),a=Math.sqrt(Math.pow(o/2,2)+Math.pow(n/2,2))<=(r>0?r:this.getOuterRadius()),l=[];for(let c=0,h=-n/2;c<e.length;c++){const t=e[c].height+h+i(c);l.push(t),h=t+s(c)}this.innerLabelsSelection.each(((e,t,i)=>{e.y=l[i],e.visible=a}))}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}getDatumLegendName(e){const{angleKey:t,calloutLabelKey:i,sectorLabelKey:s,legendItemKey:n}=this.properties,{sectorLabel:o,calloutLabel:r,legendItem:a}=e;return n&&void 0!==a?a.text:i&&i!==t&&void 0!==r?.text?r.text:s&&s!==t&&void 0!==o?.text?o.text:void 0}pickNodeClosestDatum(e){return fA(this,e)}getTooltipHtml(e){if(!this.properties.isValid())return xv;const{datum:t,angleValue:i,sectorFormat:{fill:s},itemId:n}=e,o=XD(this.properties.title?.text),r=Jp(i)?gp(i):String(i),a=this.getDatumLegendName(e);return this.properties.tooltip.toTooltipHtml({title:o??a,content:o&&a?`${a}: ${r}`:r,backgroundColor:s},{datum:t,itemId:n,title:o,color:s,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey})}getLegendData(e){const{visible:t,processedData:i,dataModel:s}=this;if(!s||!i?.data.length||!this.properties.isValid()||"category"!==e)return[];const{angleKey:n,calloutLabelKey:o,sectorLabelKey:r,legendItemKey:a}=this.properties;if(!a&&(!o||o===n)&&(!r||r===n))return[];const{calloutLabelIdx:l,sectorLabelIdx:c,legendItemIdx:h}=this.getProcessedDataIndexes(s),d=this.properties.title?.showInLegend&&this.properties.title.text,u=[];for(let p=0;p<i.data.length;p++){const{datum:e,values:s}=i.data[p],g=[];d&&g.push(d);const m=this.getLabels(e,2*Math.PI,2*Math.PI,!1,null!=l?s[l]:void 0,null!=c?s[c]:void 0,null!=h?s[h]:void 0);if(a&&void 0!==m.legendItem?g.push(m.legendItem.text):o&&o!==n&&void 0!==m.calloutLabel?.text?g.push(m.calloutLabel?.text):r&&r!==n&&void 0!==m.sectorLabel?.text&&g.push(m.sectorLabel?.text),0===g.length)continue;const f=this.getSectorFormat(e,p,!1);u.push({legendType:"category",id:this.id,itemId:p,seriesId:this.id,enabled:t&&this.legendItemEnabled[p],label:{text:g.join(" - ")},symbols:[{marker:{fill:f.fill,stroke:f.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}}],legendItemName:null!=a?e[a]:void 0})}return u}onLegendItemClick(e){const{enabled:t,itemId:i,series:s,legendItemName:n}=e;s.id===this.id?this.toggleSeriesItem(i,t):null!=n&&this.toggleOtherSeriesItems(n,t)}toggleSeriesItem(e,t){this.seriesItemEnabled[e]=t,this.legendItemEnabled[e]=t,this.nodeData[e]&&(this.nodeData[e].enabled=t),this.nodeDataRefresh=!0}setLegendState(e){this.legendItemEnabled=e,this.ctx.updateService.update(4)}toggleOtherSeriesItems(e,t){if(!this.properties.legendItemKey||!this.dataModel)return;const i=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue");this.processedData?.data.forEach(((s,n)=>{let{values:o}=s;o[i]===e&&this.toggleSeriesItem(n,t)}))}animateEmptyUpdateReady(e){const{animationManager:t}=this.ctx,i=gA(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Tg(this.id,"nodes",t,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,((e,t)=>this.getDatumId(t))),Tg(this.id,"innerCircle",t,[this.innerCircleSelection],i.innerCircle),FI(this,"callout",t,this.calloutLabelSelection),FI(this,"sector",t,this.labelSelection),FI(this,"highlight",t,this.highlightLabelSelection),FI(this,"inner",t,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,processedData:s,radiusScale:n,previousRadiusScale:o}=this,{animationManager:r}=this.ctx,a=s?.reduced?.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=0===(a?.moved.size??0),c=(s?.defs.keys.length??0)>0;l&&c&&(s?.reduced?.animationValidation?.uniqueKeys??!0)||this.ctx.animationManager.skipCurrentBatch();const h=gA(!1,this.properties.rotation,n,o);Tg(this.id,"nodes",r,[e,t,i],h.nodes,((e,t)=>this.getDatumId(t)),a),Tg(this.id,"innerCircle",r,[this.innerCircleSelection],h.innerCircle),FI(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),FI(this,"sector",this.ctx.animationManager,this.labelSelection),FI(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),FI(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,radiusScale:s,previousRadiusScale:n}=this,{animationManager:o}=this.ctx,r=gA(!1,this.properties.rotation,s,n);Tg(this.id,"nodes",o,[e,t,i],r.nodes,((e,t)=>this.getDatumId(t))),Tg(this.id,"innerCircle",o,[this.innerCircleSelection],r.innerCircle),OI(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),OI(this,"sector",this.ctx.animationManager,this.labelSelection),OI(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),OI(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(e){const{calloutLabelKey:t,sectorLabelKey:i,legendItemKey:s}=this.properties;if(this.processedData?.reduced?.animationValidation?.uniqueKeys)return s?e[s]:t?e[t]:i?e[i]:void 0}getDatumId(e){const{index:t}=e,i=this.getDatumIdFromData(e.datum);return null!=i?String(i):`${t}`}onDataChange(){const{data:e,seriesItemEnabled:t,legendItemEnabled:i}=this;this.seriesItemEnabled=e?.map(((e,i)=>t[i]??!0))??[],this.legendItemEnabled=e?.map(((e,t)=>i[t]??!0))??[]}};CA.className="DonutSeries",CA.type="donut";var bA={series:{title:{enabled:!0,fontWeight:"normal",fontSize:14,fontFamily:tD,color:oD,spacing:5},calloutLabel:{enabled:!0,fontSize:12,fontFamily:tD,color:iD,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:tD,color:nD,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:hD,xOffset:3,yOffset:3,blur:5}}},wA=e=>{let{takeColors:t,colorsCount:i}=e;const{fills:s,strokes:n}=t(i);return{fills:s,strokes:n,calloutLine:{colors:n}}},SA={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",moduleFactory:e=>new CA(e),tooltipDefaults:{range:"exact"},themeTemplate:{series:{title:{enabled:!0,fontWeight:"normal",fontSize:14,fontFamily:tD,color:oD,spacing:5},calloutLabel:{enabled:!0,fontSize:12,fontFamily:tD,color:iD,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:tD,color:nD,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:hD,xOffset:3,yOffset:3,blur:5},innerLabels:{fontSize:12,fontFamily:tD,color:iD,spacing:2}}},paletteFactory:wA},xA=class extends Ev{constructor(){super(...arguments),this.showInLegend=!1}};Wd([lm(gm)],xA.prototype,"showInLegend",2);var MA=class extends Pv{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};Wd([lm(bm)],MA.prototype,"offset",2),Wd([lm(Sm)],MA.prototype,"minAngle",2),Wd([lm(bm)],MA.prototype,"minSpacing",2),Wd([lm(bm)],MA.prototype,"maxCollisionOffset",2),Wd([lm(gm)],MA.prototype,"avoidCollisions",2);var DA=class extends Pv{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};Wd([lm(ym)],DA.prototype,"positionOffset",2),Wd([lm(wm)],DA.prototype,"positionRatio",2);var IA=class extends om{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};Wd([lm(Pm,{optional:!0})],IA.prototype,"colors",2),Wd([lm(bm)],IA.prototype,"length",2),Wd([lm(bm)],IA.prototype,"strokeWidth",2);var RA=class extends $x{constructor(){super(...arguments),this.fills=Object.values(oA),this.strokes=Object.values(rA),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.title=new xA,this.shadow=new zI,this.calloutLabel=new MA,this.sectorLabel=new DA,this.calloutLine=new IA,this.tooltip=new WI}};Wd([lm(fm)],RA.prototype,"angleKey",2),Wd([lm(fm,{optional:!0})],RA.prototype,"angleName",2),Wd([lm(fm,{optional:!0})],RA.prototype,"angleFilterKey",2),Wd([lm(fm,{optional:!0})],RA.prototype,"radiusKey",2),Wd([lm(fm,{optional:!0})],RA.prototype,"radiusName",2),Wd([lm(bm,{optional:!0})],RA.prototype,"radiusMin",2),Wd([lm(bm,{optional:!0})],RA.prototype,"radiusMax",2),Wd([lm(fm,{optional:!0})],RA.prototype,"calloutLabelKey",2),Wd([lm(fm,{optional:!0})],RA.prototype,"calloutLabelName",2),Wd([lm(fm,{optional:!0})],RA.prototype,"sectorLabelKey",2),Wd([lm(fm,{optional:!0})],RA.prototype,"sectorLabelName",2),Wd([lm(fm,{optional:!0})],RA.prototype,"legendItemKey",2),Wd([lm(Pm)],RA.prototype,"fills",2),Wd([lm(Pm)],RA.prototype,"strokes",2),Wd([lm(wm)],RA.prototype,"fillOpacity",2),Wd([lm(wm)],RA.prototype,"strokeOpacity",2),Wd([lm(jm)],RA.prototype,"lineDash",2),Wd([lm(bm)],RA.prototype,"lineDashOffset",2),Wd([lm(bm)],RA.prototype,"cornerRadius",2),Wd([lm(mm,{optional:!0})],RA.prototype,"itemStyler",2),Wd([lm(Sm)],RA.prototype,"rotation",2),Wd([lm(ym)],RA.prototype,"outerRadiusOffset",2),Wd([lm(wm)],RA.prototype,"outerRadiusRatio",2),Wd([lm(bm)],RA.prototype,"strokeWidth",2),Wd([lm(ym)],RA.prototype,"sectorSpacing",2),Wd([lm(um)],RA.prototype,"title",2),Wd([lm(um)],RA.prototype,"shadow",2),Wd([lm(um)],RA.prototype,"calloutLabel",2),Wd([lm(um)],RA.prototype,"sectorLabel",2),Wd([lm(um)],RA.prototype,"calloutLine",2),Wd([lm(um)],RA.prototype,"tooltip",2);var EA=class extends sx{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},AA=class extends yA{constructor(e){super({moduleCtx:e,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:mA,label:GI}}),this.properties=new RA,this.phantomNodeData=void 0,this.previousRadiusScale=new aM,this.radiusScale=new aM,this.phantomGroup=this.contentGroup.appendChild(new ny),this.phantomSelection=dy.select(this.phantomGroup,(()=>this.nodeFactory()),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new ny({name:"pieCalloutLabels"})),this.calloutLabelSelection=new dy(this.calloutLabelGroup,ny),this.backgroundGroup=this.rootGroup.appendChild(new kv({name:`${this.id}-background`,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new ny({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Ix),this.seriesItemEnabled=[],this.legendItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=EA,this.angleScale=new aM,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map((e=>e+Math.PI/2)),this.phantomGroup.opacity=.2,this.phantomGroup.zIndexSubOrder=[()=>this._declarationOrder,0]}get calloutNodeData(){return this.phantomNodeData??this.nodeData}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager?.addListener("legend-item-click",(e=>this.onLegendItemClick(e))))}get visible(){return super.visible&&(0===this.seriesItemEnabled.length||this.seriesItemEnabled.includes(!0))}nodeFactory(){const e=new nA;return e.miterLimit=1e9,e}getSeriesDomain(e){return"x"===e?this.angleScale.domain:this.radiusScale.domain}async processData(e){if(null==this.data||!this.properties.isValid())return;let{data:t}=this;const{visible:i,seriesItemEnabled:s}=this,{angleKey:n,angleFilterKey:o,radiusKey:r,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c}=this.properties,h=!this.ctx.animationManager.isSkipped(),d=[],u=[];c?d.push(pI(c,"band",{id:"legendItemKey"})):a?d.push(pI(a,"band",{id:"calloutLabelKey"})):l&&d.push(pI(l,"band",{id:"sectorLabelKey"}));const p=this.radiusScale.type,g=this.radiusScale.type;r&&u.push(mI(r,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax}),gI(r,p,{id:"radiusRaw"}),II("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),a&&u.push(gI(a,"band",{id:"calloutLabelValue"})),l&&u.push(gI(l,"band",{id:"sectorLabelValue"})),c&&u.push(gI(c,"band",{id:"legendItemValue"})),o&&u.push(fI(o,g,{id:"angleFilterValue",onlyPositive:!0}),gI(o,g,{id:"angleFilterRaw"}),II("angleFilterValue",[0,1],0,0)),h&&this.processedData?.reduced?.animationValidation?.uniqueKeys&&d.length>0&&u.push(PI(this.processedData)),u.push(RI()),t=t.map(((e,t)=>i&&s[t]?e:{...e,[n]:0})),await this.requestDataModel(e,t,{props:[...d,fI(n,g,{id:"angleValue",onlyPositive:!0}),gI(n,g,{id:"angleRaw"}),II("angleValue",[0,1],0,0),...u]});for(const m of this.processedData?.defs?.values??[]){const{id:e,missing:t,property:i}=m,s=bS(this,t);"angleRaw"!==e&&s>0&&Xd.warnOnce(`no value was found for the key '${String(i)}' on ${s} data element${s>1?"s":""}`)}this.animationState.transition("updateData")}async maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:e=[],phantomNodeData:t}=await this.createNodeData()??{};this.nodeData=e,this.phantomNodeData=t,this.nodeDataRefresh=!1}getProcessedDataIndexes(e){return{angleIdx:e.resolveProcessedDataIndexById(this,"angleValue"),angleRawIdx:e.resolveProcessedDataIndexById(this,"angleRaw"),angleFilterIdx:null!=this.properties.angleFilterKey?e.resolveProcessedDataIndexById(this,"angleFilterValue"):void 0,angleFilterRawIdx:null!=this.properties.angleFilterKey?e.resolveProcessedDataIndexById(this,"angleFilterRaw"):void 0,radiusIdx:this.properties.radiusKey?e.resolveProcessedDataIndexById(this,"radiusValue"):void 0,radiusRawIdx:this.properties.radiusKey?e.resolveProcessedDataIndexById(this,"radiusRaw"):void 0,calloutLabelIdx:this.properties.calloutLabelKey?e.resolveProcessedDataIndexById(this,"calloutLabelValue"):void 0,sectorLabelIdx:this.properties.sectorLabelKey?e.resolveProcessedDataIndexById(this,"sectorLabelValue"):void 0,legendItemIdx:this.properties.legendItemKey?e.resolveProcessedDataIndexById(this,"legendItemValue"):void 0}}async createNodeData(){const{id:e,processedData:t,dataModel:i,angleScale:s}=this,{rotation:n}=this.properties;if(!t||!i||"ungrouped"!==t.type)return;const{angleIdx:o,angleRawIdx:r,angleFilterIdx:a,angleFilterRawIdx:l,radiusIdx:c,radiusRawIdx:h,calloutLabelIdx:d,sectorLabelIdx:u,legendItemIdx:p}=this.getProcessedDataIndexes(i),g=null!=l&&t.data.some((e=>{let{values:t}=e;return t[l]>t[r]}));let m=0,f=0;const y=[],v=null!=l?[]:void 0;return t.data.forEach(((e,t)=>{const{datum:i,values:C}=e,b=g?C[a]:C[o],w=null==l||g?1:Math.sqrt(C[l]/C[r]),S=s.convert(m)+yy(n);m=b,f+=b;const x=s.convert(m)+yy(n),M=Math.abs(x-S),D=S+M/2,I=C[r],R=(null!=c?C[c]??1:1)*w,E=null!=h?C[h]:void 0,A=null!=p?C[p]:void 0,L=this.getLabels(i,D,M,!0,null!=d?C[d]:void 0,null!=u?C[u]:void 0,A),k=this.getSectorFormat(i,t,!1),T={itemId:t,series:this,datum:i,index:t,angleValue:I,midAngle:D,midCos:Math.cos(D),midSin:Math.sin(D),startAngle:S,endAngle:x,radius:R,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(R),0),sectorFormat:k,radiusValue:E,legendItemValue:A,enabled:this.seriesItemEnabled[t],...L};y.push(T),null!=v&&v.push({...T,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0)})})),this.zerosumOuterRing.visible=0===f,{itemId:e,nodeData:y,labelData:y,phantomNodeData:v}}getLabels(e,t,i,s,n,o,r){const{calloutLabel:a,sectorLabel:l,legendItemKey:c}=this.properties,h=!s||a.enabled?this.properties.calloutLabelKey:void 0,d=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!h&&!d&&!c)return{};const u={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return h&&i>yy(a.minAngle)&&(p.calloutLabel={...this.getTextAlignment(t),text:this.getLabelText(a,{...u,value:n}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),d&&(p.sectorLabel={text:this.getLabelText(l,{...u,value:o})}),null!=c&&null!=r&&(p.legendItem={key:c,text:r}),p}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=my(e)- -.75*Math.PI;return t[mp(Math.floor(i/(Math.PI/2)),t.length)]}getSectorFormat(e,t,i){const{callbackCache:s}=this.ctx,{angleKey:n,radiusKey:o,calloutLabelKey:r,sectorLabelKey:a,legendItemKey:l,fills:c,strokes:h,itemStyler:d}=this.properties,u=h[t%h.length],{fill:p,fillOpacity:g,stroke:m,strokeWidth:f,strokeOpacity:y,lineDash:v,lineDashOffset:C,cornerRadius:b}=ag(i&&this.properties.highlightStyle.item,{fill:c.length>0?c[t%c.length]:void 0,stroke:u,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties);let w;return d&&(w=s.call(d,{datum:e,angleKey:n,radiusKey:o,calloutLabelKey:r,sectorLabelKey:a,legendItemKey:l,fill:p,strokeOpacity:y,stroke:m,strokeWidth:f,fillOpacity:g,lineDash:v,lineDashOffset:C,cornerRadius:b,highlighted:i,seriesId:this.id})),{fill:w?.fill??p,fillOpacity:w?.fillOpacity??g,stroke:w?.stroke??m,strokeWidth:w?.strokeWidth??f,strokeOpacity:w?.strokeOpacity??y,lineDash:w?.lineDash??v,lineDashOffset:w?.lineDashOffset??C,cornerRadius:w?.cornerRadius??b}}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(e){const t=[0,this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t);const i=e=>({...e,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(e.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){const e=Math.max(0,this.radiusScale.range[1]);if(0===e)return NaN;return-e-(2+(this.properties.title?.spacing??0))-Math.max(0,-e)}async update(e){let{seriesRect:t}=e;const{title:i}=this.properties,s={seriesRectWidth:t?.width,seriesRectHeight:t?.height},n=null!=qy(this.nodeDataDependencies,s);if(n&&(this._nodeDataDependencies=s),await this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),i){const e=this.getTitleTranslationY();i.node.y=isFinite(e)?e:0;const t=i.node.getBBox();i.node.visible=i.enabled&&isFinite(e)&&!this.bboxIntersectsSurroundingSeries(t)}this.zerosumOuterRing.fillOpacity=0,this.zerosumOuterRing.stroke=this.properties.calloutLabel.color,this.zerosumOuterRing.strokeWidth=1,this.zerosumOuterRing.strokeOpacity=1,this.updateNodeMidPoint(),await this.updateSelections(),await this.updateNodes(t)}updateTitleNodes(){const{oldTitle:e}=this,{title:t}=this.properties;e!==t&&(e&&this.labelGroup?.removeChild(e.node),t&&(t.node.textBaseline="bottom",this.labelGroup?.appendChild(t.node)),this.oldTitle=t)}updateNodeMidPoint(){const e=e=>{const t=e.innerRadius+(e.outerRadius-e.innerRadius)/2;e.midPoint={x:e.midCos*Math.max(0,t),y:e.midSin*Math.max(0,t)}};this.nodeData.forEach(e),this.phantomNodeData?.forEach(e)}async updateSelections(){await this.updateGroupSelection()}async updateGroupSelection(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,highlightLabelSelection:s,calloutLabelSelection:n,labelSelection:o}=this,r=this.nodeData.map((e=>({...e,sectorFormat:{...e.sectorFormat}}))),a=(e,t)=>{e.update(t,void 0,(e=>this.getDatumId(e))),this.ctx.animationManager.isSkipped()&&e.cleanup()};a(e,this.nodeData),a(t,r),a(i,this.phantomNodeData??[]),n.update(this.calloutNodeData,(e=>{const t=new Oy;t.tag=0,t.pointerEvents=1,e.appendChild(t);const i=new Wy;i.tag=1,i.pointerEvents=1,e.appendChild(i)})),o.update(this.nodeData),s.update(r)}async updateNodes(e){const t=this.ctx.highlightManager.getActiveHighlight(),i=this.visible&&this.seriesItemEnabled.includes(!0);this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&t?.series===this,this.highlightLabel.visible=i&&t?.series===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity();const s=this.ctx.animationManager.isSkipped(),n=(e,t,i,n)=>{const o=this.getSectorFormat(t.datum,t.itemId,n);t.sectorFormat.fill=o.fill,t.sectorFormat.stroke=o.stroke,s&&(e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius),(n||s)&&(e.fill=o.fill,e.stroke=o.stroke),e.strokeWidth=o.strokeWidth,e.fillOpacity=o.fillOpacity,e.strokeOpacity=o.strokeOpacity,e.lineDash=o.lineDash,e.lineDashOffset=o.lineDashOffset,e.cornerRadius=o.cornerRadius,e.fillShadow=this.properties.shadow;const r=Math.max((this.properties.sectorSpacing+(null!=o.stroke?o.strokeWidth:0))/2,0);e.inset=r,e.lineJoin=this.properties.sectorSpacing>=0||r>0?"miter":"round"};this.itemSelection.each(((e,t,i)=>n(e,t,0,!1))),this.highlightSelection.each(((e,i,s)=>{n(e,i,0,!0),e.visible=i.itemId===t?.itemId})),this.phantomSelection.each(((e,t,i)=>n(e,t,0,!1))),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{calloutLine:e}=this.properties,t=e.length,i=e.strokeWidth,s=e.colors??this.properties.strokes,{offset:n}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(((e,o)=>{const r=e.datum,{calloutLabel:a,outerRadius:l}=r;if(a?.text&&!a.hidden&&0!==l){e.visible=!0,e.strokeWidth=i,e.stroke=s[o%s.length],e.fill=void 0;const c=r.midCos*l,h=r.midSin*l;let d=r.midCos*(l+t),u=r.midSin*(l+t);if((a.collisionTextAlign??0!==a.collisionOffsetY)&&null!=a.box){const e=a.box;let t=d,i=u;d<e.x?t=e.x:d>e.x+e.width&&(t=e.x+e.width),u<e.y?i=e.y:u>e.y+e.height&&(i=e.y+e.height);const s=t-d,o=i-u,r=Math.sqrt(Math.pow(s,2)+Math.pow(o,2)),l=r-n;l>0&&(d+=s*l/r,u+=o*l/r)}e.x1=c,e.y1=h,e.x2=d,e.y2=u}else e.visible=!1}))}getLabelOverflow(e,t,i){const s=i.x-this.centerX,n=i.x+i.width-this.centerX,o=i.y-this.centerY,r=i.y+i.height-this.centerY;let a=1;t.x+1<s?a=(t.x+t.width-s)/t.width:t.x+t.width-1>n&&(a=(n-t.x)/t.width);const l=t.y+1<o||t.y+t.height-1>r;return{textLength:1===a?e.length:Math.floor(e.length*a)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(t)}}bboxIntersectsSurroundingSeries(e){const{surroundingRadius:t}=this;if(null==t)return!1;const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],s=t**2;return i.some((e=>e.x**2+e.y**2>s))}computeCalloutLabelCollisionOffsets(){const{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=t,o=e.convert(0),r=this.calloutNodeData,a=r.filter((e=>{return!(!(t=e).calloutLabel||0===t.outerRadius);var t}));if(a.forEach((e=>{const t=e.calloutLabel;null!=t&&(t.hidden=!1,t.collisionTextAlign=void 0,t.collisionOffsetY=0)})),a.length<=1)return;const l=a.filter((e=>e.midCos<0)).sort(((e,t)=>e.midSin-t.midSin)),c=a.filter((e=>e.midCos>=0)).sort(((e,t)=>e.midSin-t.midSin)),h=a.filter((e=>e.midSin<0&&"center"===e.calloutLabel?.textAlign)).sort(((e,t)=>e.midCos-t.midCos)),d=a.filter((e=>e.midSin>=0&&"center"===e.calloutLabel?.textAlign)).sort(((e,t)=>e.midCos-t.midCos)),u=e=>{const t=e.calloutLabel;if(null==t)return bp.zero.clone();const n=e.outerRadius+i.length+s,o=e.midCos*n,r=e.midSin*n+t.collisionOffsetY,a=t.collisionTextAlign??t.textAlign,l=t.textBaseline;return Wy.computeBBox(t.text,o,r,{font:this.properties.calloutLabel,textAlign:a,textBaseline:l})},p=(e,t,i)=>{const s=u(e).grow(n/2),o=u(t).grow(n/2);if(s.x<o.x+o.width&&s.x+s.width>o.x&&("to-top"===i?s.y<o.y+o.height:s.y+s.height>o.y)){const e="to-top"===i?s.y-o.y-o.height:s.y+s.height-o.y;t.calloutLabel.collisionOffsetY=e}},g=e=>{const t=e.slice().sort(((e,t)=>Math.abs(e.midSin)-Math.abs(t.midSin)))[0],i=e.indexOf(t);for(let s=i-1;s>=0;s--){const t=e[s+1],i=e[s];p(t,i,"to-top")}for(let s=i+1;s<e.length;s++){const t=e[s-1],i=e[s];p(t,i,"to-bottom")}},m=e=>{const t=a.some((e=>0!==e.calloutLabel.collisionOffsetY)),i=e.map((e=>u(e))),s=i.map((e=>e.clone().grow(n/2)));let l=!1;for(let n=0;n<s.length&&!l;n++){const t=s[n];for(let i=n+1;i<e.length;i++){const e=s[i];if(t.collidesBBox(e)){l=!0;break}}}const c=r.map((e=>{const{startAngle:t,endAngle:i,outerRadius:s}=e;return{startAngle:t,endAngle:i,innerRadius:o,outerRadius:s}})),h=i.some((e=>c.some((t=>XE(e,t)))));(l||t||h)&&e.filter((e=>"center"===e.calloutLabel.textAlign)).forEach((e=>{const t=e.calloutLabel;e.midCos<0?t.collisionTextAlign="right":e.midCos>0?t.collisionTextAlign="left":t.collisionTextAlign="center"}))};g(l),g(c),m(h),m(d)}updateCalloutLabelNodes(e){const{radiusScale:t}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:o,color:r}=i,a=new Wy;this.calloutLabelSelection.selectByTag(1).forEach((s=>{const{datum:l}=s,c=l.calloutLabel,h=t.convert(l.radius),d=Math.max(0,h);if(!c?.text||0===d||c.hidden)return void(s.visible=!1);const u=d+n+o,p=l.midCos*u,g=l.midSin*u+c.collisionOffsetY,m={textAlign:c.collisionTextAlign??c.textAlign,textBaseline:c.textBaseline};a.text=c.text,a.x=p,a.y=g,a.setFont(this.properties.calloutLabel),a.setAlign(m);const f=a.getBBox();let y=c.text,v=!0;if(i.avoidCollisions){const{textLength:t,hasVerticalOverflow:i}=this.getLabelOverflow(c.text,f,e);y=c.text.length===t?c.text:`${c.text.substring(0,t)}\u2026`,v=!i}s.text=y,s.x=p,s.y=g,s.setFont(this.properties.calloutLabel),s.setAlign(m),s.fill=r,s.visible=v}))}async computeLabelsBBox(e,t){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:o,maxCollisionOffset:r,minSpacing:a}=i;if(!i.avoidCollisions)return null;await this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new Wy;let h;const{title:d}=this.properties;if(d?.text&&d.enabled){const e=this.getTitleTranslationY();isFinite(e)&&(c.text=d.text,c.x=0,c.y=e,c.setFont(d),c.setAlign({textBaseline:"bottom",textAlign:"center"}),h=c.getBBox(),l.push(h))}return this.calloutNodeData.forEach((i=>{const s=i.calloutLabel;if(!s||0===i.outerRadius)return null;const d=i.outerRadius+n+o,u=i.midCos*d,p=i.midSin*d+s.collisionOffsetY;c.text=s.text,c.x=u,c.y=p,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:s.collisionTextAlign??s.textAlign,textBaseline:s.textBaseline});const g=c.getBBox();if(s.box=g,Math.abs(s.collisionOffsetY)>r)s.hidden=!0;else{if(h){const e=t.y-this.centerY,i=new bp(h.x-a,e,h.width+2*a,h.y+h.height+a-e);if(g.collidesBBox(i))return void(s.hidden=!0)}if(e.hideWhenNecessary){const{textLength:e,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:n}=this.getLabelOverflow(s.text,g,t),o=s.text.length>2&&e<2;if(i||o||n)return void(s.hidden=!0)}s.hidden=!1,l.push(g)}})),0===l.length?null:bp.merge(l)}updateSectorLabelNodes(){const{radiusScale:e}=this,t=e.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:o,positionOffset:r,positionRatio:a,color:l}=this.properties.sectorLabel,c=t>0,h=1===this.seriesItemEnabled.filter(Boolean).length,d=(e,d)=>{const{sectorLabel:u,outerRadius:p,startAngle:g,endAngle:m}=d;let f=!1;if(u&&0!==p){const y=t*(1-a)+p*a+r;e.fill=l,e.fontStyle=s,e.fontWeight=n,e.fontSize=i,e.fontFamily=o,e.text=u.text;!c&&h?(e.x=0,e.y=0):(e.x=d.midCos*y,e.y=d.midSin*y),e.textAlign="center",e.textBaseline="middle";const v=e.getBBox(),C=[[v.x,v.y],[v.x+v.width,v.y],[v.x+v.width,v.y+v.height],[v.x,v.y+v.height]],b={startAngle:g,endAngle:m,innerRadius:t,outerRadius:p};C.every((e=>{let[t,i]=e;return $E(t,i,b)}))&&(f=!0)}e.visible=f};this.labelSelection.each(d),this.highlightLabelSelection.each(d)}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius()}getDatumLegendName(e){const{angleKey:t,calloutLabelKey:i,sectorLabelKey:s,legendItemKey:n}=this.properties,{sectorLabel:o,calloutLabel:r,legendItem:a}=e;return n&&void 0!==a?a.text:i&&i!==t&&void 0!==r?.text?r.text:s&&s!==t&&void 0!==o?.text?o.text:void 0}pickNodeClosestDatum(e){return fA(this,e)}getTooltipHtml(e){if(!this.properties.isValid())return xv;const{datum:t,angleValue:i,sectorFormat:{fill:s},itemId:n}=e,o=XD(this.properties.title?.text),r=Jp(i)?gp(i):String(i),a=this.getDatumLegendName(e);return this.properties.tooltip.toTooltipHtml({title:o??a,content:o&&a?`${a}: ${r}`:r,backgroundColor:s},{datum:t,itemId:n,title:o,color:s,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey})}getLegendData(e){const{visible:t,processedData:i,dataModel:s}=this;if(!s||!i?.data.length||"category"!==e)return[];const{angleKey:n,calloutLabelKey:o,sectorLabelKey:r,legendItemKey:a}=this.properties;if(!a&&(!o||o===n)&&(!r||r===n))return[];const{calloutLabelIdx:l,sectorLabelIdx:c,legendItemIdx:h}=this.getProcessedDataIndexes(s),d=this.properties.title?.showInLegend&&this.properties.title.text,u=[];for(let p=0;p<i.data.length;p++){const{datum:e,values:s}=i.data[p],g=[];d&&g.push(d);const m=this.getLabels(e,2*Math.PI,2*Math.PI,!1,null!=l?s[l]:void 0,null!=c?s[c]:void 0,null!=h?s[h]:void 0);if(a&&void 0!==m.legendItem?g.push(m.legendItem.text):o&&o!==n&&void 0!==m.calloutLabel?.text?g.push(m.calloutLabel?.text):r&&r!==n&&void 0!==m.sectorLabel?.text&&g.push(m.sectorLabel?.text),0===g.length)continue;const f=this.getSectorFormat(e,p,!1);u.push({legendType:"category",id:this.id,itemId:p,seriesId:this.id,enabled:t&&this.legendItemEnabled[p],label:{text:g.join(" - ")},symbols:[{marker:{fill:f.fill,stroke:f.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}}],legendItemName:null!=a?e[a]:void 0})}return u}onLegendItemClick(e){const{enabled:t,itemId:i,series:s,legendItemName:n}=e;s.id===this.id?this.toggleSeriesItem(i,t):null!=n&&this.toggleOtherSeriesItems(n,t)}toggleSeriesItem(e,t){this.seriesItemEnabled[e]=t,this.legendItemEnabled[e]=t,this.nodeData[e]&&(this.nodeData[e].enabled=t),this.nodeDataRefresh=!0}setLegendState(e){this.legendItemEnabled=e,this.ctx.updateService.update(4)}toggleOtherSeriesItems(e,t){if(!this.properties.legendItemKey||!this.dataModel)return;const i=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue");this.processedData?.data.forEach(((s,n)=>{let{values:o}=s;o[i]===e&&this.toggleSeriesItem(n,t)}))}animateEmptyUpdateReady(e){const{animationManager:t}=this.ctx,i=gA(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Tg(this.id,"nodes",t,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,((e,t)=>this.getDatumId(t))),FI(this,"callout",t,this.calloutLabelSelection),FI(this,"sector",t,this.labelSelection),FI(this,"highlight",t,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,processedData:s,radiusScale:n,previousRadiusScale:o}=this,{animationManager:r}=this.ctx,a=s?.reduced?.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=0===(a?.moved.size??0),c=(s?.defs.keys.length??0)>0;l&&c&&(s?.reduced?.animationValidation?.uniqueKeys??!0)||this.ctx.animationManager.skipCurrentBatch();const h=gA(!1,this.properties.rotation,n,o);Tg(this.id,"nodes",r,[e,t,i],h.nodes,((e,t)=>this.getDatumId(t)),a),FI(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),FI(this,"sector",this.ctx.animationManager,this.labelSelection),FI(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,radiusScale:s,previousRadiusScale:n}=this,{animationManager:o}=this.ctx,r=gA(!1,this.properties.rotation,s,n);Tg(this.id,"nodes",o,[e,t,i],r.nodes,((e,t)=>this.getDatumId(t))),OI(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),OI(this,"sector",this.ctx.animationManager,this.labelSelection),OI(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(e){const{calloutLabelKey:t,sectorLabelKey:i,legendItemKey:s}=this.properties;if(this.processedData?.reduced?.animationValidation?.uniqueKeys)return s?e[s]:t?e[t]:i?e[i]:void 0}getDatumId(e){const{index:t}=e,i=this.getDatumIdFromData(e.datum);return null!=i?String(i):`${t}`}onDataChange(){const{data:e,seriesItemEnabled:t,legendItemEnabled:i}=this;this.seriesItemEnabled=e?.map(((e,i)=>t[i]??!0))??[],this.legendItemEnabled=e?.map(((e,t)=>i[t]??!0))??[]}};AA.className="PieSeries",AA.type="pie";var LA={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",moduleFactory:e=>new AA(e),tooltipDefaults:{range:"exact"},themeTemplate:bA,paletteFactory:wA},kA={add:function(e,t){if("number"===typeof t)return{x:e.x+t,y:e.y+t};return{x:e.x+t.x,y:e.y+t.y}},angle:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};return Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)},apply:function(e,t){return e.x=t.x,e.y=t.y,e},equal:function(e,t){return e.x===t.x&&e.y===t.y},distance:function(e,t){const i=TA(e,t);return Math.sqrt(i.x*i.x+i.y*i.y)},distanceSquared:function(e,t){const i=TA(e,t);return i.x*i.x+i.y*i.y},from:function(e,t){if("number"===typeof e)return{x:e,y:t};if("regionOffsetX"in e)return{x:e.regionOffsetX,y:e.regionOffsetY};if("offsetWidth"in e)return{x:e.offsetWidth,y:e.offsetHeight};if("width"in e)return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y+e.height}];if("x1"in e)return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}];throw new Error(`Values can not be converted into a vector: [${e}] [${t}]`)},gradient:function(e,t,i){const s=t.x-e.x;return(null==i?t.y-e.y:i-t.y-(i-e.y))/s},intercept:function(e,t,i){return(null==i?e.y:i-e.y)-t*e.x},intersectAtX:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;const n=e===1/0?1/0:e*i+t;return{x:i,y:null==s?n:s-n}},intersectAtY:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;return{x:e===1/0?1/0:(i-t)/e,y:null==s?i:s-i}},length:PA,lengthSquared:function(e){return e.x*e.x+e.y*e.y},multiply:function(e,t){if("number"===typeof t)return{x:e.x*t,y:e.y*t};return{x:e.x*t.x,y:e.y*t.y}},normalized:function(e){const t=PA(e);return{x:e.x/t,y:e.y/t}},origin:NA,required:function(e){return{x:e?.x??0,y:e?.y??0}},rotate:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};const s=PA(e);return{x:i.x+s*Math.cos(t),y:i.y+s*Math.sin(t)}},round:function(e){return{x:Math.round(e.x),y:Math.round(e.y)}},sub:TA};function TA(e,t){return"number"===typeof t?{x:e.x-t,y:e.y-t}:{x:e.x-t.x,y:e.y-t.y}}function PA(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function NA(){return{x:0,y:0}}var FA=class extends om{constructor(e,t){super(),this.onChange=e,this.onButtonsChange=t,this.align="start",this.position="top",this.size="normal",this.buttonOverrides=new Map}buttonConfigurations(){const e=[...this.buttons??[]];return this.draggable&&e.unshift({icon:"drag-handle",tooltip:"toolbarAnnotationsDragHandle",value:"drag",id:"drag"}),e?.map((e=>{const t=e.id??e.value,i=this.buttonOverrides.get(t);return null!=i?{...e,...i}:e}))??[]}buttonsChanged(e){this.onButtonsChange(this.buttonConfigurations(),e)}overrideButtonConfiguration(e,t){let i=this.buttonOverrides.get(e);null==i&&(i=Object.create(null),this.buttonOverrides.set(e,i));for(const s in t){const e=t[s];null==e?delete i[s]:i[s]=e}this.buttonsChanged(!0)}};Wd([cv((e=>{e.onChange(e.enabled)})),lm(gm)],FA.prototype,"enabled",2),Wd([cv((e=>{e.onChange(e.enabled)})),lm(ef([...eS]),{optional:!0})],FA.prototype,"align",2),Wd([cv((e=>{e.onChange(e.enabled)})),lm(ef(nS),{optional:!0})],FA.prototype,"position",2),Wd([lm(gm)],FA.prototype,"draggable",2),Wd([cv((e=>{e.onChange(e.enabled)})),lm(ef(["small","normal"]),{optional:!0})],FA.prototype,"size",2),Wd([cv((e=>{for(const t of e.buttons??[])null!=t.icon&&_d.includes(t.icon)&&Xd.warnOnce(`Icon '${t.icon}' is deprecated, use another icon instead.`),"toolbarAnnotationsColor"===t.ariaLabel&&Xd.warnOnce(`Aria label '${t.ariaLabel}' is deprecated, use 'toolbarAnnotationsLineColor' instead.`);e.buttonsChanged(!1)})),lm(Mm,{optional:!0})],FA.prototype,"buttons",2);var OA="ag-charts-toolbar",GA="ag-charts-toolbar__align",BA="ag-charts-toolbar__section",zA="ag-charts-toolbar__button",HA="ag-charts-toolbar__icon",VA="ag-charts-toolbar__label",jA={top:"ag-charts-toolbar--top",right:"ag-charts-toolbar--right",bottom:"ag-charts-toolbar--bottom",left:"ag-charts-toolbar--left",floating:"ag-charts-toolbar--floating","floating-top":"ag-charts-toolbar--floating-top","floating-bottom":"ag-charts-toolbar--floating-bottom",small:"ag-charts-toolbar--small",normal:"ag-charts-toolbar--normal",hidden:"ag-charts-toolbar--hidden",preventFlash:"ag-charts-toolbar--prevent-flash",floatingHidden:"ag-charts-toolbar--floating-hidden",align:{start:"ag-charts-toolbar__align--start",center:"ag-charts-toolbar__align--center",end:"ag-charts-toolbar__align--end"},button:{first:"ag-charts-toolbar__button--first",last:"ag-charts-toolbar__button--last",active:"ag-charts-toolbar__button--active",hiddenValue:"ag-charts-toolbar__button--hidden-value",hiddenToggled:"ag-charts-toolbar__button--hidden-toggled",fillVisible:"ag-charts-toolbar__button--fill-visible",strokeWidthVisible:"ag-charts-toolbar__button--stroke-width-visible",withTransition:"ag-charts-toolbar__button--with-transition",dragHandle:"ag-charts-toolbar__button--drag-handle",dragging:"ag-charts-toolbar__button--dragging"}},WA=class extends KC{constructor(e){super(),this.ctx=e,this.enabled=!0,this.seriesType=new FA(this.onGroupChanged.bind(this,"seriesType"),this.onGroupButtonsChanged.bind(this,"seriesType")),this.annotations=new FA(this.onGroupChanged.bind(this,"annotations"),this.onGroupButtonsChanged.bind(this,"annotations")),this.annotationOptions=new FA(this.onGroupChanged.bind(this,"annotationOptions"),this.onGroupButtonsChanged.bind(this,"annotationOptions")),this.ranges=new FA(this.onGroupChanged.bind(this,"ranges"),this.onGroupButtonsChanged.bind(this,"ranges")),this.zoom=new FA(this.onGroupChanged.bind(this,"zoom"),this.onGroupButtonsChanged.bind(this,"zoom")),this.dragState={client:{x:0,y:0},position:{x:0,y:0},detached:!1},this.horizontalSpacing=10,this.verticalSpacing=10,this.floatingDetectionRange=38,this.positions={top:new Set,left:new Set,right:new Set,bottom:new Set,floating:new Set,"floating-top":new Set,"floating-bottom":new Set},this.positionAlignments={top:{},left:{},right:{},bottom:{},floating:{},"floating-top":{},"floating-bottom":{}},this.groupCallers={seriesType:new Set,annotations:new Set,annotationOptions:new Set,ranges:new Set,zoom:new Set},this.groupButtons={seriesType:[],annotations:[],annotationOptions:[],ranges:[],zoom:[]},this.ariaToolbars=[{groups:["seriesType","annotations"],destroyFns:[],resetListeners:()=>{}},{groups:["annotationOptions"],destroyFns:[],resetListeners:()=>{}},{groups:["ranges"],destroyFns:[],resetListeners:()=>{}},{groups:["zoom"],destroyFns:[],resetListeners:()=>{}}],this.pendingButtonToggledEvents=[],this.groupProxied=new Map,this.hasNewLocale=!0,this.elements={};for(const i of nS)this.elements[i]=e.domManager.addChild("canvas-overlay",`toolbar-${i}`),this.elements[i].role="presentation",this.renderToolbar(i);this.toggleVisibilities();const t=e.regionManager.getRegion("series");this.destroyFns.push(e.interactionManager.addListener("hover",this.onHover.bind(this),63),e.interactionManager.addListener("leave",this.onLeave.bind(this),63),t.addListener("drag-start",this.toggleNoPointerEvents.bind(this,!0),40),t.addListener("drag-end",this.toggleNoPointerEvents.bind(this,!1),63),e.toolbarManager.addListener("button-toggled",this.onButtonToggled.bind(this)),e.toolbarManager.addListener("button-updated",this.onButtonUpdated.bind(this)),e.toolbarManager.addListener("group-toggled",this.onGroupToggled.bind(this)),e.toolbarManager.addListener("group-updated",this.onGroupUpdated.bind(this)),e.toolbarManager.addListener("floating-anchor-changed",this.onFloatingAnchorChanged.bind(this)),e.toolbarManager.addListener("proxy-group-options",this.onProxyGroupOptions.bind(this)),e.layoutManager.registerElement(2,this.onLayoutStart.bind(this)),e.layoutManager.addListener("layout:complete",this.onLayoutComplete.bind(this)),e.updateService.addListener("pre-dom-update",this.onPreDomUpdate.bind(this)),e.updateService.addListener("update-complete",this.onUpdateComplete.bind(this)),e.localeManager.addListener("locale-changed",(()=>{this.hasNewLocale=!0})),(()=>this.destroyElements()))}destroyElements(){this.ctx.domManager.removeStyles(OA);for(const e of Object.keys(this.elements))this.ctx.domManager.removeChild("canvas-overlay",`toolbar-${e}`)}onHover(e){const{enabled:t,elements:i,floatingDetectionRange:s,ctx:{scene:n}}=this,{offsetY:o,sourceEvent:{target:r}}=e,{FloatingBottom:a,FloatingTop:l}=sS;if(!t)return;const c=i[a],h=i[l],d=o>c.offsetTop-s&&o<n.canvas.element.offsetHeight||r===c,u=h.offsetTop+h.offsetHeight+s,p=o>0&&o<u||r===h;this.translateFloatingElements(a,d),this.translateFloatingElements(l,p)}onLeave(e){const{enabled:t,ctx:{scene:i}}=this,{relatedElement:s,targetElement:n}=e,{FloatingBottom:o,FloatingTop:r}=sS;if(!t||n!==i.canvas.element)return;tS.some((e=>this.groupButtons[e].some((e=>e===s))))||(this.translateFloatingElements(o,!1),this.translateFloatingElements(r,!1))}toggleNoPointerEvents(e){this.groupButtons.annotationOptions.forEach((t=>t.classList.toggle("ag-charts-toolbar__no-pointer-events",e)))}onGroupChanged(e){null==this[e]||this.groupProxied.has(e)||(this.createGroup(e),this.toggleVisibilities())}onGroupButtonsChanged(e,t,i){if(this.enabled&&!this.groupProxied.has(e)){if(i)for(const t of this[e].buttonConfigurations())this.refreshButtonContent(e,t);else this.createGroupButtons(e,t);this.toggleVisibilities()}}onLayoutComplete(e){for(const t of nS)this.elements[t].classList.remove(jA.preventFlash);this.enabled&&this.refreshInnerLayout(e.series.rect)}toggleButtonsTransition(e){const t=jA.button.withTransition;for(const i of Object.values(this.groupButtons).flat())e&&!i.classList.contains(t)&&i.getBoundingClientRect(),i.classList.toggle(t,e)}onPreDomUpdate(){this.toggleButtonsTransition(!1)}onUpdateComplete(){this.toggleButtonsTransition(!0)}onButtonUpdated(e){const{type:t,group:i,id:s,...n}=e;this[i].overrideButtonConfiguration(s,n)}setButtonActive(e,t){e.classList.toggle(jA.button.active,t)}setButtonChecked(e,t){"switch"===e.role&&(e.ariaChecked=t.toString())}setButtonGroupFirstLast(e){const t=Array.from(e.childNodes??[]),i=(e,t,i)=>{const s=!t.classList.contains(jA.button.hiddenToggled);return t.classList.toggle(i,s&&e),!s&&e};let s=!0;t.forEach((e=>s=i(s,e,jA.button.first)));let n=!0;t.toReversed().forEach((e=>n=i(n,e,jA.button.last)))}onButtonToggled(e){const{group:t,id:i,active:s,enabled:n,visible:o,checked:r}=e;if(0===this.groupButtons[t].length)return void this.pendingButtonToggledEvents.push(e);const a=this.groupButtons[t].find((e=>e.dataset.toolbarId===`${i}`));null!=a&&(a.ariaDisabled=`${!n}`,a.classList.toggle(jA.button.hiddenToggled,!o),this.setButtonActive(a,s),this.setButtonChecked(a,r),this.setButtonGroupFirstLast(a.parentNode))}onGroupToggled(e){const{caller:t,group:i,active:s,visible:n}=e;this.toggleGroup(t,i,s,n),this.toggleVisibilities()}onGroupUpdated(e){const{group:t}=e;for(const i of this.ariaToolbars)if(i.groups.includes(t))return void i.resetListeners()}onFloatingAnchorChanged(e){const{elements:t,positions:i,horizontalSpacing:s,verticalSpacing:n}=this,{group:o,anchor:r}=e,a=t.floating;if(this.dragState.detached||a.classList.contains(jA.hidden))return;if(this.dragState.detached=!1,!i.floating.has(o))return;const l=r.position??"above",{offsetWidth:c,offsetHeight:h}=a;let d=r.y-h-n,u=r.x-c/2;"below"===l?d=r.y+n:"right"===l?(d=r.y-h/2,u=r.x+s):"above-left"===l&&(u=r.x);const p=new bp(u,d,c,h);this.positionGroup(a,o,p)}positionGroup(e,t,i){const{ctx:{domManager:s}}=this,n=s.getBoundingClientRect();i.x=ap(0,i.x,n.width-i.width),i.y=ap(0,i.y,n.height-i.height);const o=`${Math.floor(i.x)}px`,r=`${Math.floor(i.y)}px`;(e.style.getPropertyValue("left")!==o||e.style.getPropertyValue("top")!==r)&&(e.style.setProperty("left",o),e.style.setProperty("top",r),this.onGroupMoved(t,i))}onGroupMoved(e,t){const{groupButtons:i,ctx:{toolbarManager:s}}=this;for(const n of i[e]){if(n.classList.contains(jA.button.hiddenToggled))continue;const i=n.offsetParent;s.buttonMoved(e,n.dataset.toolbarId,new bp(n.offsetLeft+(i?.offsetLeft??0),n.offsetTop+(i?.offsetTop??0),n.offsetWidth,n.offsetHeight),t)}}buttonRect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx.domManager.getBoundingClientRect();const i=e.getBoundingClientRect();return new bp(i.left-t.left,i.top-t.top,i.width,i.height)}onProxyGroupOptions(e){if(!this.enabled)return;const{caller:t,group:i,options:s}=e;this.groupProxied.set(i,s),this[i].set(s),this.toggleGroup(t,i,void 0,s.enabled),this.createGroup(i,s.enabled,s.position),s.enabled&&this.createGroupButtons(i,s.buttons)}createGroup(e,t,i){t??(t=this[e].enabled),i??(i=this[e].position);for(const s of nS)t&&i===s?this.positions[s].add(e):this.positions[s].delete(e)}createGroupButtons(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(const h of this.groupButtons[e])h.remove();if(this.groupButtons[e]=[],0===t.length)return;const{align:i,position:s}=this[e],n=this.positionAlignments[s][i];if(!n)return;const o=t=>{const i=Array.from(n.children),s="data-group",o="data-section";let r=i.find((i=>i.getAttribute(s)===e&&i.getAttribute(o)===(t??"")));if(!r){r=qu("div"),r.role="presentation",r.setAttribute(s,e),r.setAttribute(o,t??"");const a=iS[e],l=i.find((e=>{const t=e.getAttribute(s);return iS[t]>a}));null!=l?n.insertBefore(r,l):n.appendChild(r),this.destroyFns.push((()=>r.remove()))}return r.classList.add(BA,jA[this[e].size]),r};let r=t.at(0)?.section,a=o(r);for(const h of t){r!==h.section&&(this.setButtonGroupFirstLast(a),a=o(h.section)),r=h.section;const t=this.createButtonElement(e,h);a.appendChild(t),this.groupButtons[e].push(t)}this.setButtonGroupFirstLast(a);let l,c;oS(s)&&(l=()=>this.translateFloatingElements(s,!0),c=()=>this.translateFloatingElements(s,!1)),this.createAriaToolbar(e,n,l,c,(()=>{this.ctx.toolbarManager.cancel(e)}))}createAriaToolbar(e,t,i,s,n){const o=this.computeAriaOrientation(this[e].position),r=this.getAriaToolbar(e);r.resetListeners=()=>{const e=r.groups.map((e=>this.groupButtons[e])).flat().filter((e=>!e.classList.contains(jA.button.hiddenToggled)&&!e.classList.contains(jA.button.dragHandle)));r.destroyFns.forEach((e=>e())),r.destroyFns=Mb({orientation:o,toolbar:t,buttons:e,onEscape:n,onFocus:i,onBlur:s})},r.resetListeners(),this.updateToolbarAriaLabel(e,t)}computeAriaOrientation(e){return{top:"horizontal",right:"vertical",bottom:"horizontal",left:"vertical",floating:"horizontal","floating-top":"horizontal","floating-bottom":"horizontal"}[e]}toggleGroup(e,t,i,s){if(!0===s?this.groupCallers[t].add(e):!1===s&&this.groupCallers[t].delete(e),null!=i)for(const n of this.groupButtons[t])this.setButtonActive(n,i)}processPendingEvents(){const e=(this.pendingButtonToggledEvents??[]).slice();for(const t of e)this.onButtonToggled(t);this.pendingButtonToggledEvents=[]}onLayoutStart(e){this.enabled&&(this.refreshOuterLayout(e.layoutBox),this.refreshLocale())}refreshOuterLayout(e){const{elements:t,horizontalSpacing:i,verticalSpacing:s}=this;t.top.classList.contains(jA.hidden)||e.shrink(t.top.offsetHeight+s,"top"),t.right.classList.contains(jA.hidden)||e.shrink(t.right.offsetWidth+i,"right"),t.bottom.classList.contains(jA.hidden)||(e.shrink(t.bottom.offsetHeight+s,"bottom"),t.bottom.style.top=`${e.y+e.height+s}px`),t.left.classList.contains(jA.hidden)||e.shrink(t.left.offsetWidth+i,"left")}refreshLocale(){const{hasNewLocale:e}=this;if(e){for(const e of tS){const t=this[e].buttonConfigurations();for(const i of t)this.refreshButtonContent(e,i);this.updateToolbarAriaLabel(e)}this.hasNewLocale=!1}}refreshInnerLayout(e){const{elements:t,verticalSpacing:i}=this,{FloatingBottom:s,FloatingTop:n}=sS;t.top.style.top=e.y-t.top.offsetHeight-i+"px",t.top.style.left=`${e.x}px`,t.top.style.width=`${e.width}px`,t.bottom.style.left=`${e.x}px`,t.bottom.style.width=`${e.width}px`,t.right.style.top=`${e.y}px`,t.right.style.right="0px",t.right.style.height=`${e.height}px`,t.left.style.top=`${e.y}px`,t.left.style.left="0px",t.left.style.height=`${e.height}px`,t[n].style.top=`${e.y}px`,t[s].style.top=e.y+e.height-t[s].offsetHeight+"px"}refreshButtonContent(e,t){const i=this.buttonId(t),s=this.groupProxied.get(e)?.buttons?.find((e=>this.buttonId(e)===i))??t,n=this.groupButtons[e].find((e=>e.getAttribute("data-toolbar-id")===i));null!=n&&this.updateButton(n,s)}toggleVisibilities(){if(null==this.elements)return;const e=e=>this[e].enabled&&this.groupCallers[e].size>0,t=e=>t=>{const i=this.buttonId(t);return null==i||i===e.dataset.toolbarId};for(const i of nS){const t=this.enabled&&Array.from(this.positions[i].values()).some(e);"floating"!==i||t||(this.dragState.detached=!1),this.elements[i].classList.toggle(jA.hidden,!t)}for(const i of tS){if(null==this[i])continue;const s=e(i);for(const e of this.groupButtons[i]){const n=s&&this[i].buttonConfigurations().some(t(e));e.classList.toggle(jA.button.hiddenValue,!n)}}}translateFloatingElements(e,t){const{elements:i,verticalSpacing:s,positionAlignments:n}=this,o=i[e],r=Object.values(n[e]);o.classList.toggle(jA.floatingHidden,!t);const a="floating-bottom"===e?1:-1;for(const l of r)l.style.transform=t&&""!==l.style.transform?"translateY(0)":`translateY(${(o.offsetHeight+s)*a}px)`}renderToolbar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";const t=this.elements[e];t.classList.add(OA,jA[e],jA.preventFlash),oS(e)&&t.classList.add(jA.floatingHidden);for(const i of eS){const s=qu("div");s.role="presentation",s.classList.add(GA,jA.align[i]),t.appendChild(s),this.positionAlignments[e][i]=s}}createButtonElement(e,t){const i=qu("button");return i.classList.add(zA),i.dataset.toolbarGroup=e,fv(i,"tabindex",-1),t.haspopup&&yv(i,{"aria-haspopup":!0,"aria-expanded":!1}),i.dataset.toolbarId=this.buttonId(t),i.addEventListener("click",Eb(i,(s=>this.onButtonPress(s,i,e,t.id,t.value)))),"drag"===t.value&&(i.addEventListener("mousedown",Eb(i,(t=>this.onDragStart(t,i,e)))),i.classList.add(jA.button.dragHandle)),"switch"===t.role&&yv(i,{role:t.role,"aria-checked":!1}),this.updateButton(i,t),this.destroyFns.push((()=>i.remove())),i}getAriaToolbar(e){for(const t of this.ariaToolbars)if(t.groups.includes(e))return t;throw new Error(`AG Charts - cannot find aria-toolbar of '${e}'`)}updateToolbarAriaLabel(e,t){if(!t){const{align:i,position:s}=this[e];if(!(t=this.positionAlignments[s][i]))return}t.ariaLabel=this.ctx.localeManager.t({seriesType:"ariaLabelFinancialCharts",annotations:"ariaLabelFinancialCharts",annotationOptions:"ariaLabelAnnotationOptionsToolbar",ranges:"ariaLabelRangesToolbar",zoom:"ariaLabelZoomToolbar"}[e])}expandButtonConfig(e,t){return"switch"!==t.role||"true"!==e.ariaChecked||void 0===t.checkedOverrides?t:{icon:t.checkedOverrides.icon??t.icon,label:t.checkedOverrides.label??t.label,ariaLabel:t.checkedOverrides.ariaLabel??t.ariaLabel,tooltip:t.checkedOverrides.tooltip??t.tooltip}}updateButton(e,t){const{domManager:i,localeManager:s}=this.ctx,{icon:n,label:o,ariaLabel:r,tooltip:a}=this.expandButtonConfig(e,t);a&&(e.title=s.t(a));let l="";if(null!=n&&(l=`<span class="${i.getIconClassNames(n)} ${HA}"></span>`),null!=o){const e=s.t(o);l=`${l}<span class="${VA}">${e}</span>`}e.innerHTML=l,e.classList.toggle(jA.button.fillVisible,null!=t.fill),e.style.setProperty("--fill",t.fill??null);const c=null!=t.strokeWidth;e.classList.toggle(jA.button.strokeWidthVisible,c),e.style.setProperty("--strokeWidth",c?`${t.strokeWidth}px`:null);fv(e,"aria-label",r?this.ctx.localeManager.t(r):void 0)}onButtonPress(e,t,i,s,n){this.ctx.toolbarManager.pressButton(i,this.buttonId({id:s,value:n}),n,this.buttonRect(t),e)}onDragStart(e,t,i){const s=this.elements.floating;e.preventDefault(),e.stopPropagation(),this.dragState={client:kA.from(e.clientX,e.clientY),position:kA.from(Number(s.style.getPropertyValue("left").replace("px","")),Number(s.style.getPropertyValue("top").replace("px",""))),detached:!0},t.classList.toggle(jA.button.dragging,!0);const n=e=>this.onDrag(e,i),o=Xu();o.addEventListener("mousemove",n),o.addEventListener("mouseup",(()=>{t.classList.toggle(jA.button.dragging,!1),o.removeEventListener("mousemove",n)}),{once:!0}),this.ctx.toolbarManager.groupMoved(i)}onDrag(e,t){const{elements:i,dragState:s}=this,n=i.floating,{offsetWidth:o,offsetHeight:r}=n,a=kA.sub(kA.from(e.clientX,e.clientY),s.client),l=kA.add(s.position,a),c=new bp(l.x,l.y,o,r);this.positionGroup(n,t,c)}buttonId(e){const{id:t,value:i,label:s}=e;return null!=t?t:null!=i&&"object"!==typeof i?String(i):s??""}};Wd([cv((e=>{e.processPendingEvents(),e.toggleVisibilities()})),lm(gm)],WA.prototype,"enabled",2);var UA=864e5,_A=30*UA,YA={type:"root",optionsKey:"toolbar",packageType:"community",chartTypes:["cartesian"],moduleFactory:e=>new WA(e),themeTemplate:{toolbar:{enabled:!0,seriesType:{enabled:!1,position:"left",align:"start",buttons:[{tooltip:"toolbarSeriesTypeDropdown",value:"type",haspopup:!0}]},annotations:{enabled:!0,position:"left",align:"start",buttons:[{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu",section:"line-annotations",haspopup:!0},{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu",section:"text-annotations",haspopup:!0},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu",section:"shape-annotations",haspopup:!0},{icon:"measurer-drawing",tooltip:"toolbarAnnotationsMeasurerAnnotations",value:"measurer-menu",section:"measure-annotations",haspopup:!0},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear",section:"tools"}]},annotationOptions:{enabled:!0,position:"floating",align:"start",draggable:!0,buttons:[{icon:"text-annotation",tooltip:"toolbarAnnotationsTextColor",value:"text-color",haspopup:!0},{icon:"line-color",tooltip:"toolbarAnnotationsLineColor",value:"line-color",haspopup:!0},{icon:"fill-color",tooltip:"toolbarAnnotationsFillColor",value:"fill-color",haspopup:!0},{tooltip:"toolbarAnnotationsTextSize",value:"text-size",haspopup:!0},{tooltip:"toolbarAnnotationsLineStrokeWidth",value:"line-stroke-width",haspopup:!0},{icon:"line-style-solid",tooltip:"toolbarAnnotationsLineStyle",value:"line-style-type",haspopup:!0},{icon:"settings",tooltip:"toolbarAnnotationsSettings",value:"settings",haspopup:!0},{role:"switch",icon:"unlocked",tooltip:"toolbarAnnotationsLock",ariaLabel:"toolbarAnnotationsLock",checkedOverrides:{icon:"locked",tooltip:"toolbarAnnotationsUnlock"},value:"lock"},{icon:"delete",tooltip:"toolbarAnnotationsDelete",value:"delete"}]},ranges:{enabled:!1,position:YD,align:"start",buttons:[{label:"toolbarRange1Month",ariaLabel:"toolbarRange1MonthAria",value:_A},{label:"toolbarRange3Months",ariaLabel:"toolbarRange3MonthsAria",value:3*_A},{label:"toolbarRange6Months",ariaLabel:"toolbarRange6MonthsAria",value:6*_A},{label:"toolbarRangeYearToDate",ariaLabel:"toolbarRangeYearToDateAria",value:(e,t)=>[new Date(`${new Date(t).getFullYear()}-01-01`).getTime(),t],id:"year-to-date"},{label:"toolbarRange1Year",ariaLabel:"toolbarRange1YearAria",value:365*UA},{label:"toolbarRangeAll",ariaLabel:"toolbarRangeAllAria",value:(e,t)=>[e,t],id:"all"}]},zoom:{enabled:!0,position:"top",align:"end",buttons:[{icon:"zoom-out",tooltip:"toolbarZoomZoomOut",value:"zoom-out"},{icon:"zoom-in",tooltip:"toolbarZoomZoomIn",value:"zoom-in"},{icon:"pan-left",tooltip:"toolbarZoomPanLeft",value:"pan-left"},{icon:"pan-right",tooltip:"toolbarZoomPanRight",value:"pan-right"},{icon:"pan-start",tooltip:"toolbarZoomPanStart",value:"pan-start"},{icon:"pan-end",tooltip:"toolbarZoomPanEnd",value:"pan-end"},{icon:"reset",tooltip:"toolbarZoomReset",value:"reset"}]}}}};function KA(){$C.register(CM,BM,rM,WM,YA,lE,LE,OE,jE,YE,SA,LA,zE);for(const e of[cM,NC,uM,YC,dM])RS.register(e.type,{moduleFactory:t=>new e(t),hidden:e===YC})}function ZA(){for(const e of $C.modules){if("enterprise"!==e.packageType||LS(e)||Xd.errorOnce("Unexpected enterprise module registered: "+e.identifier),"root"===e.type&&e.themeTemplate)for(const t of e.chartTypes)OS.set(t,e.themeTemplate);if("series"===e.type){if(e.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${e.identifier}`);GS.register(e.identifier,e)}if("series-option"===e.type&&e.themeTemplate)for(const t of e.seriesTypes)GS.setThemeTemplate(t,e.themeTemplate);if("axis-option"===e.type&&e.themeTemplate)for(const t of e.axisTypes){const i=RS.getThemeTemplate(t),s=ag(e.themeTemplate,i);RS.setThemeTemplate(t,s)}"axis"===e.type&&RS.register(e.identifier,e),"legend"===e.type&&kS.register(e.identifier,e)}if($C.hasEnterpriseModules()){const e=ES.filter((e=>{let{useCount:t}=e;return null==t||0===t}));e.length>0&&Xd.errorOnce("Enterprise modules expected but not registered: ",e)}}var $A=class extends yx{getChartType(){return"flow-proportion"}async updateData(){await super.updateData();const{nodes:e}=this.getOptions();this.series.forEach((t=>{(function(e){return"sankey"===e.type||"chord"===e.type})(t)&&t.setChartNodes(e)}))}performLayout(e){const{seriesRoot:t,annotationRoot:i,highlightRoot:s}=this,{layoutBox:n}=e,o=n.clone();n.shrink(this.seriesArea.padding.toJson()),this.seriesRect=n,this.animationRect=n,t.visible=this.series.some((e=>e.visible));for(const r of[t,i,s])r.translationX=Math.floor(n.x),r.translationY=Math.floor(n.y),r.setClipRect(o.clone());this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:t.visible,rect:o,paddedRect:n}})}};$A.className="FlowProportionChart",$A.type="flow-proportion";var QA=class extends AC{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(e,t){return null}computeRange(){}getAxisLinePoints(){}};Wd([lm(ef(["polygon","circle"],"a polar axis shape"))],QA.prototype,"shape",2),Wd([lm(wm)],QA.prototype,"innerRadiusRatio",2);var XA=class extends yx{getChartType(){return"gauge"}updateRadialGauge(e,t){const i=this.axes.find((e=>"x"===e.direction));if(!(i instanceof QA))return;i.computeRange();const s=e.x,n=s+e.width,o=e.y,r=o+e.height,[a,l]=i.range,c=gy(l-a)>Math.PI,h=c||fy(1.5*Math.PI,a,l),d=c||fy(0*Math.PI,a,l),u=c||fy(.5*Math.PI,a,l),p=c||fy(1*Math.PI,a,l);let g,m;g=p&&!d?"right":!p&&d?"left":"center",m=h&&!u?"bottom":!h&&u?"top":"middle";const f=ZE({startAngle:a,endAngle:l,innerRadius:0,outerRadius:.5}),y=2*-(f.x+f.width/2),v=2*-(f.y+f.height/2),{minimumRadius:C=0,maximumRadius:b}=t,w=Math.max(.5*Math.min(e.width/f.width,e.height/f.height),0);let S=Math.min(b??1/0,Math.max(w,C??0));for(let x=0;x<8;x+=1){const t=S<=C||7===x,a=e.x+e.width/2+y*S,l=e.y+e.height/2+v*S;i.translation.x=a,i.translation.y=l,i.gridLength=S,i.calculateLayout();const c=i.computeLabelsBBox({hideWhenNecessary:t},e);if(t)break;let h=0;if(null!=c){const e=c.x+a,t=e+c.width,i=c.y+l,d=i+c.height;h=Math.max(o-i,s-e,d-r,t-n,0)}if(!(h>0))break;S=Math.max(S-h,C)}i.translation.x=e.x+e.width/2+y*S,i.translation.y=e.y+e.height/2+v*S,t.centerX=e.width/2+y*S,t.centerY=e.height/2+v*S,t.radius=S,t.textAlign=g,t.verticalAlign=m,(0===S||S>w)&&Xd.warnOnce("There was insufficient space to display the Radial Gauge.")}updateLinearGauge(e,t){const i=this.axes.find((e=>"x"===e.direction)),s=this.axes.find((e=>"y"===e.direction));if(!(i instanceof TC))return e;if(!(s instanceof TC))return e;const{horizontal:n,thickness:o}=t;let r=0,a=0;const l=new aM;l.domain=[0,100],l.range=n?i.range:s.range;const c=l.ticks();n?r=t.computeInset("x",c):a=t.computeInset("y",c);const h=e.width-Math.abs(r),d=e.height-Math.abs(a),u=Math.max(n?h:o,0),p=Math.max(n?o:d,0),g=e.x+(h-u)/2+Math.max(r,0),m=e.y+(d-p)/2-Math.min(a,0);i.range=[0,u],i.gridLength=u,i.calculateLayout(),i.translation.x=g,i.translation.y=m+("bottom"===i.position?o:0),s.range=[0,p],s.gridLength=p,s.calculateLayout(),s.translation.x=g+("right"===s.position?o:0),s.translation.y=m,t.originX=g-e.x,t.originY=m-e.y,0!==u&&0!==p||Xd.warnOnce("There was insufficient space to display the Linear Gauge.")}performLayout(e){const{seriesRoot:t,annotationRoot:i,highlightRoot:s,series:n,seriesArea:o}=this,{layoutBox:r}=e,a=r.clone();r.shrink(o.padding.toJson());const l=this.series[0];!function(e){return"radial-gauge"===e.type}(l)?function(e){return"linear-gauge"===e.type}(l)&&this.updateLinearGauge(r,l):this.updateRadialGauge(r,l),this.axes.forEach((e=>e.update())),this.seriesRect=a.clone().translate(a.x-r.x,a.y-r.y),this.animationRect=r,t.visible=n.some((e=>e.visible));for(const c of[t,i,s])c.translationX=Math.floor(r.x),c.translationY=Math.floor(r.y);this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:t.visible,rect:a,paddedRect:r}})}getAriaLabel(){const e=[],t=this.getCaptionText();0!==t.length&&e.push(t);for(const s of this.series)e.push(s.getCaptionText());const i=e.join(". ");return this.ctx.localeManager.t("ariaAnnounceGaugeChart",{caption:i})}};XA.className="GaugeChart",XA.type="gauge";var qA=class extends yx{constructor(e,t){super(e,t)}getChartType(){return"hierarchy"}performLayout(e){const{seriesRoot:t,annotationRoot:i,highlightRoot:s}=this,{layoutBox:n}=e,o=n.clone();n.shrink(this.seriesArea.padding.toJson()),this.seriesRect=n,this.animationRect=n;for(const r of[t,i,s])r.translationX=Math.floor(n.x),r.translationY=Math.floor(n.y);t.visible=this.series[0].visible,t.setClipRect(n.clone()),this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:o,paddedRect:n}})}getAriaLabel(){const e=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:e})}};qA.className="HierarchyChart",qA.type="hierarchy";var JA=class extends yx{constructor(e,t){super(e,t),this.padding=new JC(40),this.ctx.axisManager.axisGroup.zIndex=6}getChartType(){return"polar"}async performLayout(e){const{layoutBox:t}=e,i=t.clone();t.shrink(this.seriesArea.padding.toJson()),this.seriesRect=t,this.animationRect=t,await this.computeCircle(t),this.axes.forEach((e=>e.update())),this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:i,paddedRect:t}})}updateAxes(e,t,i){const s=this.axes.find((e=>"x"===e.direction)),n=this.axes.find((e=>"y"===e.direction));if(!(s instanceof QA)||!(n instanceof QA))return;const o=s.scale,r=n.innerRadiusRatio;s.innerRadiusRatio=r,s.computeRange(),s.gridLength=i,n.gridAngles=o.ticks?.().map((e=>o.convert(e))),n.gridRange=s.range,n.range=[i,i*r],[s,n].forEach((i=>{i.translation.x=e,i.translation.y=t,i.calculateLayout()}))}async computeCircle(e){var t=this;const i=this.series.filter(eL),s=this.axes.filter(tL),n=(e,t,s)=>{this.updateAxes(e,t,s),i.forEach((i=>{i.centerX=e,i.centerY=t,i.radius=s}));const n=i.filter((e=>"donut"===e.type||"pie"===e.type));if(n.length>1){const e=n.map((e=>{const t=e.getInnerRadius();return{series:e,innerRadius:t}})).sort(((e,t)=>e.innerRadius-t.innerRadius));e.at(-1).series.surroundingRadius=void 0;for(let t=0;t<e.length-1;t++)e[t].series.surroundingRadius=e[t+1].innerRadius}},o=e.x+e.width/2,r=e.y+e.height/2,a=Math.max(0,Math.min(e.width,e.height)/2);let l=a;n(o,r,l);const c=async function(){let{hideWhenNecessary:c=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const h=[];for(const t of Wu(s,i)){const i=await t.computeLabelsBBox({hideWhenNecessary:c},e);i&&h.push(i)}if(0===h.length)return void n(o,r,a);const d=bp.merge(h),u=t.refineCircle(d,l,e);n(u.centerX,u.centerY,u.radius),l=u.radius};await c(),await c(),await c(),await c({hideWhenNecessary:!0}),await c({hideWhenNecessary:!0});for(const h of Wu(s,i))await h.computeLabelsBBox({hideWhenNecessary:!0},e);return{radius:l,centerX:o,centerY:r}}refineCircle(e,t,i){const s=-t,n=-t,o=t,r=t;let a=Math.max(0,s-e.x),l=Math.max(0,n-e.y),c=Math.max(0,e.x+e.width-o),h=Math.max(0,e.y+e.height-r);a=c=Math.max(a,c),l=h=Math.max(l,h);const d=i.width-a-c,u=i.height-l-h;let p=Math.min(d,u)/2;const g=.5*i.width/2,m=.5*i.height/2,f=Math.min(g,m);if(p<f){p=f;const e=a+c;if(2*p+(l+h)>i.height){const e=i.height-2*p;2*Math.min(l,h)>e?(l=e/2,h=e/2):l>h?l=e-h:h=e-l}if(2*p+e>i.width){const e=i.width-2*p;2*Math.min(a,c)>e?(a=e/2,c=e/2):a>c?a=e-c:c=e-a}}const y=a+2*p+c,v=l+2*p+h;return{centerX:i.x+(i.width-y)/2+a+p,centerY:i.y+(i.height-v)/2+l+p,radius:p}}};function eL(e){return e instanceof yA}function tL(e){return e instanceof QA}JA.className="PolarChart",JA.type="polar";var iL=class extends yx{constructor(e,t){super(e,t)}getChartType(){return"standalone"}performLayout(e){const{seriesRoot:t,annotationRoot:i,highlightRoot:s}=this,{layoutBox:n}=e,o=n.clone();n.shrink(this.seriesArea.padding.toJson()),this.seriesRect=n,this.animationRect=n;for(const r of[t,i,s])r.translationX=Math.floor(n.x),r.translationY=Math.floor(n.y);t.visible=this.series[0].visible,this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:o,paddedRect:n}})}getAriaLabel(){const e=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:e})}};iL.className="StandaloneChart",iL.type="standalone";var sL=Math.PI/180,nL=e=>e*sL,oL=e=>-Math.log(Math.tan(.25*Math.PI+e*sL*.5)),rL=e=>e/sL,aL=e=>(Math.atan(Math.exp(-e))-.25*Math.PI)/(.5*sL),lL=class e{constructor(t,i){this.domain=t,this.range=i,this.type="mercator",this.bounds=e.bounds(t)}static bounds(e){const[[t,i],[s,n]]=e,o=nL(t),r=oL(i),a=nL(s),l=oL(n);return new bp(Math.min(o,a),Math.min(r,l),Math.abs(a-o),Math.abs(l-r))}static fixedScale(){return new e([[rL(0),aL(0)],[rL(1),aL(1)]],[[0,0],[1,1]])}convert(e){let[t,i]=e;const[[s,n],[o,r]]=this.range,a=(o-s)/this.bounds.width,l=(r-n)/this.bounds.height;return[(nL(t)-this.bounds.x)*a+s,(oL(i)-this.bounds.y)*l+n]}invert(e){let[t,i]=e;const[[s,n],[o,r]]=this.range,a=(o-s)/this.bounds.width,l=(r-n)/this.bounds.height;return[rL((t-s)/a+this.bounds.x),aL((i-n)/l+this.bounds.y)]}};function cL(e){return"map-shape"===e.type||"map-line"===e.type||"map-marker"===e.type||"map-shape-background"===e.type||"map-line-background"===e.type}var hL=class extends yx{constructor(e,t){super(e,t),this.xAxis=new cM(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new cM(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}getChartType(){return"topology"}async updateData(){await super.updateData();const{topology:e}=this.getOptions();this.series.forEach((t=>{cL(t)&&t.setChartTopology(e)}))}performLayout(e){const{seriesRoot:t,annotationRoot:i,highlightRoot:s}=this,{layoutBox:n}=e,o=n.clone();n.shrink(this.seriesArea.padding.toJson()),this.seriesRect=n,this.animationRect=n;const r=this.series.filter(cL),a=r.reduce(((e,t)=>{if(!t.visible)return e;const i=t.topologyBounds;return null==i?e:null==e?i:(e.merge(i),e)}),void 0);let l;if(null!=a){const{lon0:e,lat0:t,lon1:i,lat1:s}=a,o=[[e,t],[i,s]],r=lL.bounds(o),{width:c,height:h}=n,d=Math.min(c/r.width,h/r.height),u=r.width*d,p=r.height*d,g=(c-u)/2,m=(h-p)/2,f=g,y=m,v=g+u,C=m+p,b=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),w=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),S=(v-f)/(b.max-b.min),x=f-S*b.min,M=(C-y)/(1-w.min-(1-w.max)),D=y-M*(1-w.max);l=new lL(o,[[x,D],[x+S,D+M]])}r.forEach((e=>{e.scale=l}));const c=this.series.some((e=>e.visible));t.visible=c;for(const h of[t,i,s])h.translationX=Math.floor(n.x),h.translationY=Math.floor(n.y),h.setClipRect(n.clone());this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:c,rect:o,paddedRect:n}})}};hL.className="TopologyChart",hL.type="topology";var dL=Symbol("IGNORED_PROP");function uL(e,t){const i={};for(const s in t){const n=t[s];n!==dL&&Object.hasOwn(e,s)&&(i[s]=n)}return i}function pL(e,t){if(null==t)return e;const{targets:i,...s}=t;return null!=(e=ag(e,s)).targets&&null!=i&&(e.targets=lg(e.targets,i)),e}function gL(e,t){if(Zp(e))return t(e)}var mL=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"];var fL="range-area";function yL(e,t){return{fill:gL(t,(t=>t.overrides?.[e]?.series?.fill)),stroke:gL(t,(t=>t.overrides?.[e]?.series?.stroke))}}var vL={line:{enabled:!1},title:{enabled:!1},label:{enabled:!1},crosshair:{enabled:!1,strokeOpacity:.25,lineDash:[0],label:{enabled:!1}}},CL={...vL,nice:!1},bL={bottom:{crosshair:{enabled:eD}}},wL={category:bL,number:bL,log:bL,time:bL},SL={position:{type:"sparkline"}},xL={overrides:{common:{animation:{enabled:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:{...CL,interval:{values:[0]}},log:{...CL},time:{...CL},category:{...vL,gridLine:{enabled:!1}}}},bar:{series:{sparklineMode:!0},tooltip:{range:"nearest"}},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},axes:wL,series:{strokeWidth:1,marker:{enabled:!1,size:3},tooltip:SL}},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},axes:wL,series:{strokeWidth:1,fillOpacity:.4,tooltip:SL}}}};function ML(e,t){return"string"===typeof e?{...t,baseTheme:e}:null!=e?{...e,baseTheme:ML(e.baseTheme,t)}:t}var DL={"price-volume":function(e,t,i){const{xKey:s,dateKey:n=s??"date",highKey:o="high",openKey:r="open",lowKey:a="low",closeKey:l="close",volumeKey:c="volume",chartType:h="candlestick",navigator:d=!1,volume:u=!0,rangeToolbar:p,rangeButtons:g=p??!0,statusBar:m=!0,annotations:f,toolbar:y=f??!0,zoom:v=!0,theme:C,data:b,...w}=e;null!=s&&Xd.warnOnce("Property [xKey] is deprecated, use [dateKey] instead."),null!=p&&Xd.warnOnce("Property [rangeToolbar] is deprecated, use [rangeButtons] instead."),null!=f&&Xd.warnOnce("Property [annotations] is deprecated, use [toolbar] instead.");const S=function(e,t,i,s,n,o,r){t===fL&&(Xd.warnOnce(`type '${t}' is deprecated, use 'hlc' chart type instead`),t="hlc");const a={xKey:i,openKey:o,closeKey:r,highKey:s,lowKey:n},l={xKey:i,yKey:r},c={pickOutsideVisibleMinorAxis:!0};switch(t??"candlestick"){case"ohlc":return[{type:"ohlc",focusPriority:0,...c,...a}];case"line":return[{type:"line",focusPriority:0,...c,...l,stroke:gL(e,(e=>e.overrides?.line?.series?.stroke))??CD,marker:gL(e,(e=>e.overrides?.line?.series?.marker))??{enabled:!1}}];case"step-line":return[{type:"line",focusPriority:0,...c,...l,stroke:gL(e,(e=>e.overrides?.line?.series?.stroke))??CD,interpolation:gL(e,(e=>e.overrides?.line?.series?.interpolation))??{type:"step"},marker:gL(e,(e=>e.overrides?.line?.series?.marker))??{enabled:!1}}];case"hlc":{const t=yL(fL,e);return[{type:fL,focusPriority:0,...c,xKey:i,yHighKey:s,yLowKey:r,fill:t.fill??yD,stroke:t.stroke??mD,fillOpacity:gL(e,(e=>e.overrides?.["range-area"]?.series?.fillOpacity))??.3,strokeWidth:gL(e,(e=>e.overrides?.["range-area"]?.series?.strokeWidth))??2},{type:fL,focusPriority:0,...c,xKey:i,yHighKey:r,yLowKey:n,fill:t.fill??vD,stroke:t.stroke??fD,fillOpacity:gL(e,(e=>e.overrides?.["range-area"]?.series?.fillOpacity))??.3,strokeWidth:gL(e,(e=>e.overrides?.["range-area"]?.series?.strokeWidth))??2},{type:"line",...c,...l,stroke:gL(e,(e=>e.overrides?.line?.series?.stroke))??ID,strokeWidth:gL(e,(e=>e.overrides?.line?.series?.strokeWidth))??2,marker:gL(e,(e=>e.overrides?.line?.series?.marker))??{enabled:!1}}]}case"high-low":{const t=yL("range-bar",e);return[{type:"range-bar",focusPriority:0,...c,xKey:i,yHighKey:s,yLowKey:n,fill:t.fill??bD,stroke:t.stroke??CD,tooltip:{range:"nearest"}}]}case"candlestick":return[{type:"candlestick",focusPriority:0,...c,...a}];case"hollow-candlestick":{const t=gL(e,(e=>e.overrides?.candlestick?.series?.item));return[{type:"candlestick",focusPriority:0,...c,...a,item:{up:{fill:t?.up?.fill??"transparent"}}}]}default:return Xd.warnOnce(`unknown chart type: ${t}; expected one of: ${mL.join(", ")}`),[{type:"candlestick",focusPriority:0,...c,...a}]}}(C,h,n,o,a,r,l),x=function(e,t,i,s,n,o){if(!n)return[];const r=gL(e,(e=>e.overrides?.bar?.series?.fill)),a=r?{fill:r}:{itemStyler(e){let{datum:n}=e;const{up:o,down:r}=t().palette;return{fill:n[i]<n[s]?o?.fill:r?.fill}}};return[{type:"bar",xKey:"date",yKey:o,focusPriority:1,tooltip:{enabled:!1},highlight:{enabled:!1},fillOpacity:gL(e,(e=>e.overrides?.bar?.series?.fillOpacity))??.5,...a}]}(C,i,r,l,u,c),M={navigator:{enabled:d,...u?{miniChart:{enabled:d,series:[{type:"line",xKey:n,yKey:c,marker:{enabled:!1}}]}}:null}},D={annotations:{enabled:y,data:b,xKey:n,volumeKey:u?c:void 0}},I=m?{statusBar:{enabled:!0,data:b,highKey:o,openKey:r,lowKey:a,closeKey:l,volumeKey:u?c:void 0}}:null,R={zoom:{enabled:v,enableIndependentAxes:!0}},E={chartToolbar:{enabled:!0},toolbar:{seriesType:{enabled:y},annotationOptions:{enabled:y},annotations:{enabled:y},ranges:{enabled:g}}},A=u?[{type:"number",position:"left",keys:[c],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percentage",align:"end"}}]:[];return{theme:{baseTheme:"string"===typeof C?C:"ag-financial",...ag("object"===typeof C?C:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:5}}}})},animation:{enabled:!1},legend:{enabled:!1},series:[...x,...S],axes:[{type:"number",position:"right",keys:[r,l,o,a],interval:{maxSpacing:gL(C,(e=>e.overrides?.common?.axes?.number?.interval?.maxSpacing))??45},label:{format:gL(C,(e=>e.overrides?.common?.axes?.number?.label?.format))??".2f"},crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percentage",align:"start"}},...A,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],tooltip:{enabled:!1},data:b,...D,...M,...I,...R,...E,...w}},gauge:function(e,t){if(function(e){return"radial-gauge"===e.type}(e)){return function(e){const{animation:t,background:i,container:s,contextMenu:n,footnote:o,height:r,listeners:a,locale:l,minHeight:c,minWidth:h,padding:d,subtitle:u,theme:p,title:g,width:m,type:f,cursor:y,nodeClickRange:v,tooltip:C,value:b,scale:w={},startAngle:S,endAngle:x,highlightStyle:M,segmentation:D,bar:I,needle:R,targets:E,outerRadius:A,innerRadius:L,outerRadiusRatio:k,innerRadiusRatio:T,cornerRadius:P,cornerMode:N,label:F,secondaryLabel:O,spacing:G,...B}=e,{fills:z,fillMode:H,fill:V,fillOpacity:j,stroke:W,strokeWidth:U,strokeOpacity:_,lineDash:Y,lineDashOffset:K,min:Z=0,max:$=1,interval:Q={},label:X={},...q}=w,J=uL(e,{animation:t,background:i,container:s,contextMenu:n,footnote:o,height:r,listeners:a,locale:l,minHeight:c,minWidth:h,padding:d,subtitle:u,theme:p,title:g,width:m}),ee=uL(w,{fills:z,fillMode:H,fill:V,fillOpacity:j,stroke:W,strokeWidth:U,strokeOpacity:_,lineDash:Y,lineDashOffset:K});return{...J,series:[uL(e,{startAngle:dL,endAngle:dL,needle:null!=R?{enabled:!0,...R}:dL,scale:ee,type:f,cursor:y,nodeClickRange:v,listeners:a,tooltip:C,value:b,highlightStyle:M,segmentation:D,bar:I,targets:E,outerRadius:A,innerRadius:L,outerRadiusRatio:k,innerRadiusRatio:T,cornerRadius:P,cornerMode:N,label:F,secondaryLabel:O,spacing:G,...B})],axes:[{type:"angle-number",min:Z,max:$,startAngle:S,endAngle:x,interval:Q??{},label:X??{}},{type:"radius-number"}]}}(pL(e,t))}if(function(e){return"linear-gauge"===e.type}(e)){return function(e){const{animation:t,background:i,container:s,contextMenu:n,footnote:o,height:r,listeners:a,locale:l,minHeight:c,minWidth:h,padding:d,subtitle:u,theme:p,title:g,width:m,type:f,cursor:y,nodeClickRange:v,tooltip:C,value:b,scale:w={},direction:S="vertical",thickness:x,highlightStyle:M,segmentation:D,bar:I,targets:R,cornerRadius:E,cornerMode:A,label:L,...k}=e,{fills:T,fillMode:P,fill:N,fillOpacity:F,stroke:O,strokeWidth:G,strokeOpacity:B,lineDash:z,lineDashOffset:H,min:V=0,max:j=1,interval:W={},label:U={},..._}=w,Y=uL(e,{animation:t,background:i,container:s,contextMenu:n,footnote:o,height:r,listeners:a,locale:l,minHeight:c,minWidth:h,padding:d,subtitle:u,theme:p,title:g,width:m}),K=uL(w,{fills:T,fillMode:P,fill:N,fillOpacity:F,stroke:O,strokeWidth:G,strokeOpacity:B,lineDash:z,lineDashOffset:H}),Z=uL(e,{scale:K,type:f,cursor:y,nodeClickRange:v,listeners:a,tooltip:C,value:b,direction:S,thickness:x,highlightStyle:M,segmentation:D,bar:I,targets:R,cornerRadius:E,cornerMode:A,label:L,...k}),{placement:$,...Q}=U;let X,q;const J="horizontal"===S;J?(X="before"===$?"top":"bottom",q="left"):(X="after"===$?"right":"left",q="bottom");const ee={type:"number",position:X,min:V,max:j,reverse:!J,interval:W,label:Q,nice:!1},te={type:"number",position:q,min:0,max:1,label:{enabled:!1}};return{...Y,series:[Z],axes:J?[ee,te]:[te,ee]}}(pL(e,t))}const{animation:i,background:s,container:n,contextMenu:o,footnote:r,height:a,listeners:l,locale:c,minHeight:h,minWidth:d,padding:u,subtitle:p,theme:g,title:m,width:f}=e;return uL(e,{animation:i,background:s,container:n,contextMenu:o,footnote:r,height:a,listeners:l,locale:c,minHeight:h,minWidth:d,padding:u,subtitle:p,theme:g,title:m,width:f})},sparkline:function(e){const{background:t,container:i,height:s,listeners:n,locale:o,minHeight:r,minWidth:a,padding:l,width:c,theme:h,data:d,xAxis:u,yAxis:p,...g}=e,m=g,f="bar"!==m.type||"horizontal"!==m.direction,y=uL(e,{background:t,container:i,height:s,listeners:n,locale:o,minHeight:r,minWidth:a,padding:l,width:c,data:d,xAxis:dL,yAxis:dL,theme:dL});return y.theme=ML(h,xL),y.series=[m],y.axes=f?[{type:"number",...p,position:"left"},{type:"category",...u,position:"bottom"}]:[{type:"category",...u,position:"left"},{type:"number",...p,position:"bottom"}],y}};function IL(e,t){let i=[];const s=QS(e),n=WS(e),o=n?NS.get(n):"unknown";for(const{type:r,chartTypes:a,optionsKey:l,optionsInnerKey:c,identifier:h}of ES)if("unknown"===o||a.includes(o))if("root"===r||"legend"===r){const t=e[l];if(null==t)continue;c?t[c]&&(i.push(`${l}.${c}`),delete t[c]):(i.push(l),delete e[l])}else if("axis"===r){if(!("axes"in e)||!e.axes?.some((e=>e.type===h)))continue;i.push(`axis[type=${h}]`),e.axes=e.axes.filter((e=>e.type!==h))}else if("axis-option"===r){if(!("axes"in e)||!e.axes?.some((e=>e[l])))continue;i.push(`axis.${l}`),e.axes.forEach((e=>{e[l]&&delete e[l]}))}else if("series"===r){if(!e.series?.some((e=>e.type===h)))continue;i.push(`series[type=${h}]`),e.series=e.series.filter((e=>e.type!==h))}else if("series-option"===r){if(!e.series?.some((e=>e[l])))continue;i.push(`series.${l}`),e.series.forEach((e=>{e[l]&&delete e[l]}))}if(i.length&&!t){s&&(i=["AgCharts.createGauge"]);let t="ag-charts-enterprise",n="https://ag-grid.com/charts/javascript/installation/";"integrated"===e.mode&&(t="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",n="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),Xd.warnOnce([`unable to use these enterprise features as '${t}' has not been loaded:`,"",...i,"",`See: ${n}`].join("\n"))}}var RL=Symbol("description"),EL=Symbol("required");function AL(e,t,i){const{errors:s}=kL(e,t,i);for(const{message:n}of s)Xd.warn(n);return 0===s.length}function LL(e,t,i){const s=Xp(i)?i:i[RL],n=s?`; expecting ${s}`:"";return`${e?`Option \`${e}\``:"Value"} cannot be set to \`${function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;switch(typeof e){case"undefined":return"undefined";case"number":if(isNaN(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";default:return(e=JSON.stringify(e)).length>t?`${e.slice(0,t)}... (+${e.length-t} characters)`:e}}(t)}\`${n}, ignoring.`}function kL(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!Zp(e))return{valid:null,errors:[{path:i,value:e,message:LL(i,e,"an object")}]};const s=new Set(Object.keys(e)),n=[],o={};function r(e){return jp(t)?`${i}[${e}]`:i?`${i}.${e}`:e}for(const[a,l]of Object.entries(t)){s.delete(a);const t=e[a];if(l[EL]||"undefined"!==typeof t)if(Kp(l))l(t)?o[a]=t:n.push({key:a,path:i,value:t,message:LL(r(a),t,l)});else{const e=kL(t,l,r(a));o[a]=e.valid,n.push(...e.errors)}}for(const a of s)n.push({key:a,path:i,unknown:!0,message:`Unknown option \`${r(a)}\`, ignoring.`});return{valid:o,errors:n}}function TL(e,t){return Object.assign((t=>e(t)),{[RL]:t})}TL(jp,"an array"),TL(Wp,"a boolean"),TL(Kp,"a function"),TL(Jp,"a number");var PL=TL(Zp,"an object"),NL=TL(Xp,"a string"),FL=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return TL((i=>Jp(i)&&(i>e||t&&i===e)),`a number greater than ${t?"or equal to ":""}${e}`)},OL=(e,t)=>TL((i=>Jp(i)&&i>=e&&i<=t),`a number between ${e} and ${t} inclusive`),GL=(FL(0),FL(1),OL(0,1),OL(0,360),(e,t)=>TL((t=>jp(t)&&t.every(e)),t??`${e[RL]} array`));function BL(e){return e?.up||e?.down||e?.neutral?"user-full":e?.fills||e?.strokes?"user-indexed":"inbuilt"}var zL="white",HL={get cartesian(){return{seriesTypes:NS.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:NS.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:NS.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:NS.topologyTypes,commonOptions:[]}},get"flow-proportion"(){return{seriesTypes:NS.flowProportionTypes,commonOptions:[]}},get standalone(){return{seriesTypes:NS.standaloneTypes,commonOptions:[]}},get gauge(){return{seriesTypes:NS.gaugeTypes,commonOptions:[]}}},VL={"radial-gauge":!0,"linear-gauge":!0};function jL(e){return!0===VL[e]}var WL=Object.values(HL).reduce(((e,t)=>{let{commonOptions:i}=t;return e.concat(i)}),[]),UL=class e{static getAxisDefaults(e){return ag(e,{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:"normal",fontSize:13,fontFamily:tD,color:iD},label:{fontSize:12,fontFamily:tD,padding:5,color:iD,avoidCollisions:!0},line:{enabled:!0,width:1,stroke:aD},tick:{enabled:!1,width:1,stroke:aD},gridLine:{enabled:!0,style:[{stroke:rD,lineDash:[]}]},crossLines:{enabled:!1,fill:lD,stroke:lD,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:tD,padding:5,color:iD}},crosshair:{enabled:!0}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:cD},padding:{top:uD,right:uD,bottom:uD,left:uD},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",fontWeight:"normal",fontSize:17,fontFamily:tD,color:iD,wrapping:"hyphenate",layoutStyle:pD,textAlign:gD},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontSize:13,fontFamily:tD,color:oD,wrapping:"hyphenate",layoutStyle:pD,textAlign:gD},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:13,fontFamily:tD,color:"rgb(140, 140, 140)",wrapping:"hyphenate",layoutStyle:pD,textAlign:gD},legend:{position:"bottom",spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:iD,fontSize:12,fontFamily:tD}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:iD},inactiveStyle:{fill:oD},highlightStyle:{fill:iD},label:{color:iD}}},tooltip:{enabled:!0,darkTheme:qM,delay:0},overlays:{darkTheme:qM},listeners:{}}}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{overrides:t,palette:i}=Jy(e),s=this.createChartConfigPerChartType(this.getDefaults()),n={};t&&this.mergeOverrides(s,n,t);const{fills:o,strokes:r,...a}=this.getDefaultColors();this.palette=ag(i,{fills:Object.values(o),strokes:Object.values(r),...a}),this.paletteType=BL(i),this.config=Object.freeze(this.templateTheme(s)),this.presets=n}mergeOverrides(e,t,i){for(const{seriesTypes:s,commonOptions:n}of Object.values(HL)){const t={...i.common};for(const e of WL)n.includes(e)||delete t[e];if(t)for(const i of s){const s=i;jL(s)||(e[s]=ag(t,e[s]))}}NS.seriesTypes.forEach((s=>{const n=s,o=i[n];jL(n)?t[n]=o:e[n]=ag(o,e[n])}))}createChartConfigPerChartType(e){for(const[t,{seriesTypes:i}]of Object.entries(HL)){const s=OS.get(t);for(const t of i)e[t]||(e[t]=Jy(s))}return e}getDefaults(){const t=(t,i)=>{const s={},n={axes:{},...kS.getThemeTemplates(),...this.getChartDefaults(),...OS.get(t)};for(const o of i){s[o]=ag(GS.getThemeTemplate(o),s[o]??Jy(n));const{axes:t}=s[o];for(const i of RS.keys())t[i]=ag(t[i],RS.getThemeTemplate(i),e.cartesianAxisDefault[i])}return s};return ag(t("cartesian",NS.cartesianTypes),t("polar",NS.polarTypes),t("hierarchy",NS.hierarchyTypes),t("topology",NS.topologyTypes),t("flow-proportion",NS.flowProportionTypes),t("standalone",NS.standaloneTypes),t("gauge",NS.gaugeTypes))}templateTheme(e){const t=Jy(e),i=this.getTemplateParameters();return tv(t,(e=>{if(jp(e))for(let t=0;t<e.length;t++){const s=e[t];i.has(s)&&(e[t]=i.get(s))}else for(const[t,s]of Object.entries(e))i.has(s)&&(e[t]=i.get(s))})),Jy(t)}getDefaultColors(){return{fills:oA,strokes:rA,up:{fill:oA.GREEN,stroke:rA.GREEN},down:{fill:oA.RED,stroke:rA.RED},neutral:{fill:oA.GRAY,stroke:rA.GRAY},altUp:{fill:oA.BLUE,stroke:rA.BLUE},altDown:{fill:oA.ORANGE,stroke:rA.ORANGE},altNeutral:{fill:oA.GRAY,stroke:rA.GRAY}}}getTemplateParameters(){const{isEnterprise:e}=mv,t=new Map;t.set(qM,!1),t.set(eD,e),t.set(JM,!e),t.set(tD,"Verdana, sans-serif"),t.set(iD,"rgb(70, 70, 70)"),t.set(sD,"white"),t.set(oD,"rgb(140, 140, 140)"),t.set(rD,"rgb(224,234,241)"),t.set(aD,"rgb(195, 195, 195)"),t.set(lD,"rgb(70, 70, 70)"),t.set(nD,zL),t.set(cD,zL),t.set(hD,"rgba(0, 0, 0, 0.5)"),t.set(ED,[oA.ORANGE,oA.YELLOW,oA.GREEN]),t.set(AD,[oA.GREEN,oA.YELLOW,oA.RED]),t.set(LD,["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"]),t.set(uD,20),t.set(pD,"block"),t.set(gD,"center"),t.set(kD,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),t.set(TD,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),t.set(RD,zL),t.set(PD,oA.BLUE),t.set(ND,oA.BLUE),t.set(FD,oA.BLUE),t.set(OD,zL),t.set(GD,"#fafafa"),t.set(BD,"#dddddd"),t.set(zD,"#000000"),t.set(HD,"#181d1f"),t.set(VD,"#e35c5c"),t.set(jD,"#e35c5c"),t.set(WD,"#fafafa"),t.set(UD,"#dddddd"),t.set(_D,"#000000"),t.set(YD,"top"),t.set(KD,!1);const i=this.getDefaultColors();return t.set(mD,this.palette.up?.stroke??i.up.stroke),t.set(yD,this.palette.up?.fill??i.up.fill),t.set(fD,this.palette.down?.stroke??i.down.stroke),t.set(vD,this.palette.down?.fill??i.down.fill),t.set(CD,this.palette.neutral?.stroke??i.neutral.stroke),t.set(bD,this.palette.neutral?.fill??i.neutral.fill),t.set(wD,this.palette.altUp?.stroke??i.up.stroke),t.set(xD,this.palette.altUp?.fill??i.up.fill),t.set(SD,this.palette.altDown?.stroke??i.down.stroke),t.set(MD,this.palette.altDown?.fill??i.down.fill),t.set(DD,this.palette.altNeutral?.fill??i.altNeutral.fill),t.set(ID,this.palette.altNeutral?.stroke??i.altNeutral.stroke),t}};UL.cartesianAxisDefault={number:UL.getAxisDefaults({line:{enabled:!1}}),log:UL.getAxisDefaults({base:10,line:{enabled:!1},interval:{minSpacing:NaN}}),category:UL.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:KD},crosshair:{enabled:!1}}),time:UL.getAxisDefaults({gridLine:{enabled:KD}}),"ordinal-time":UL.getAxisDefaults({groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:KD}}),"angle-category":UL.getAxisDefaults({gridLine:{enabled:KD}}),"angle-number":UL.getAxisDefaults({gridLine:{enabled:KD}}),"radius-category":UL.getAxisDefaults({line:{enabled:!1}}),"radius-number":UL.getAxisDefaults({line:{enabled:!1}}),"grouped-category":UL.getAxisDefaults({tick:{enabled:!0}})};var _L=UL,YL="#192232",KL={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},ZL={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},$L=class extends _L{getDefaultColors(){return{fills:KL,strokes:ZL,up:{fill:KL.GREEN,stroke:ZL.GREEN},down:{fill:KL.RED,stroke:ZL.RED},neutral:{fill:KL.GRAY,stroke:ZL.GRAY},altUp:{fill:KL.BLUE,stroke:ZL.BLUE},altDown:{fill:KL.ORANGE,stroke:ZL.ORANGE},altNeutral:{fill:KL.GRAY,stroke:ZL.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(qM,!0),e.set(RD,YL),e.set(iD,"white"),e.set(oD,"#7D91A0"),e.set(rD,"#545A6E"),e.set(lD,"white"),e.set(ED,[KL.ORANGE,KL.YELLOW,KL.GREEN]),e.set(AD,[KL.GREEN,KL.YELLOW,KL.RED]),e.set(LD,["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"]),e.set(kD,["#192834","#253746","#324859","#3f596c","#4d6a80"]),e.set(TD,["#192834","#3b5164","#496275","#577287","#668399"]),e.set(cD,YL),e.set(nD,YL),e.set(PD,KL.BLUE),e.set(ND,"white"),e.set(FD,KL.BLUE),e.set(OD,YL),e.set(GD,"#28313e"),e.set(BD,"#4b525d"),e.set(zD,"#ffffff"),e.set(HD,"#ffffff"),e.set(WD,"#28313e"),e.set(UD,"#4b525d"),e.set(_D,"#ffffff"),e}constructor(e){super(e)}},QL={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},XL={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},qL=class extends $L{getDefaultColors(){return{fills:{...QL},strokes:{...XL},up:{fill:QL.GREEN,stroke:XL.GREEN},down:{fill:QL.RED,stroke:XL.RED},neutral:{fill:QL.BLUE,stroke:XL.BLUE},altUp:{fill:QL.GREEN,stroke:XL.GREEN},altDown:{fill:QL.RED,stroke:XL.RED},altNeutral:{fill:QL.GRAY,stroke:XL.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(ED,[QL.GREEN,QL.BLUE,QL.RED]),e.set(PD,QL.BLUE),e.set(FD,QL.BLUE),e.set(rD,"#343A4E"),e.set(uD,0),e.set(pD,"overlay"),e.set(gD,"left"),e.set(YD,"bottom"),e.set(KD,!0),e}},JL={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},ek={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},tk=class extends _L{getDefaultColors(){return{fills:{...JL},strokes:{...ek},up:{fill:JL.GREEN,stroke:ek.GREEN},down:{fill:JL.RED,stroke:ek.RED},neutral:{fill:JL.BLUE,stroke:ek.BLUE},altUp:{fill:JL.GREEN,stroke:ek.GREEN},altDown:{fill:JL.RED,stroke:ek.RED},altNeutral:{fill:JL.GRAY,stroke:ek.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(ED,[JL.GREEN,JL.BLUE,JL.RED]),e.set(PD,JL.BLUE),e.set(FD,JL.BLUE),e.set(rD,"#F2F3F3"),e.set(uD,0),e.set(pD,"overlay"),e.set(gD,"left"),e.set(YD,"bottom"),e.set(KD,!0),e}},ik={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},sk={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},nk=class extends $L{getDefaultColors(){return{fills:ik,strokes:sk,up:{fill:ik.GREEN,stroke:sk.GREEN},down:{fill:ik.RED,stroke:sk.RED},neutral:{fill:ik.GRAY,stroke:sk.GRAY},altUp:{fill:ik.BLUE,stroke:sk.BLUE},altDown:{fill:ik.RED,stroke:sk.RED},altNeutral:{fill:ik.GRAY,stroke:sk.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(ED,[ik.ORANGE,ik.YELLOW,ik.GREEN]),e.set(LD,["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"]),e.set(AD,[ik.GREEN,ik.YELLOW,ik.RED]),e.set(PD,ik.BLUE),e.set(FD,ik.BLUE),e}},ok={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},rk={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},ak=class extends _L{getDefaultColors(){return{fills:ok,strokes:rk,up:{fill:ok.GREEN,stroke:rk.GREEN},down:{fill:ok.RED,stroke:rk.RED},neutral:{fill:ok.GRAY,stroke:rk.GRAY},altUp:{fill:ok.BLUE,stroke:rk.BLUE},altDown:{fill:ok.RED,stroke:rk.RED},altNeutral:{fill:ok.GRAY,stroke:rk.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(ED,[ok.ORANGE,ok.YELLOW,ok.GREEN]),e.set(LD,["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"]),e.set(AD,[ok.GREEN,ok.YELLOW,ok.RED]),e.set(PD,ok.BLUE),e.set(FD,ok.BLUE),e}},lk={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},ck={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},hk=class extends $L{getDefaultColors(){return{fills:lk,strokes:ck,up:{fill:lk.GREEN,stroke:ck.GREEN},down:{fill:lk.RED,stroke:ck.RED},neutral:{fill:lk.GRAY,stroke:ck.GRAY},altUp:{fill:lk.BLUE,stroke:ck.BLUE},altDown:{fill:lk.RED,stroke:ck.RED},altNeutral:{fill:lk.GRAY,stroke:ck.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(ED,[lk.BLUE,lk.RED]),e.set(LD,[lk.BLUE,lk.PURPLE,lk.MAGENTA,lk.PINK,lk.RED,lk.ORANGE,lk.YELLOW,lk.GREEN]),e.set(AD,[lk.BLUE,lk.RED]),e.set(PD,lk.BLUE),e.set(FD,lk.BLUE),e}},dk={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},uk={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},pk=class extends _L{getDefaultColors(){return{fills:dk,strokes:uk,up:{fill:dk.GREEN,stroke:uk.GREEN},down:{fill:dk.RED,stroke:uk.RED},neutral:{fill:dk.GRAY,stroke:uk.GRAY},altUp:{fill:dk.BLUE,stroke:uk.BLUE},altDown:{fill:dk.RED,stroke:uk.RED},altNeutral:{fill:dk.GRAY,stroke:uk.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(ED,[dk.BLUE,dk.RED]),e.set(LD,[dk.BLUE,dk.PURPLE,dk.MAGENTA,dk.PINK,dk.RED,dk.ORANGE,dk.YELLOW,dk.GREEN]),e.set(AD,[dk.BLUE,dk.RED]),e.set(PD,dk.BLUE),e.set(FD,dk.BLUE),e}},gk={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},mk={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},fk=class extends $L{getDefaultColors(){return{fills:{...gk,RED:gk.ORANGE},strokes:{...mk,RED:mk.ORANGE},up:{fill:gk.GREEN,stroke:mk.GREEN},down:{fill:gk.ORANGE,stroke:mk.ORANGE},neutral:{fill:gk.GRAY,stroke:mk.GRAY},altUp:{fill:gk.BLUE,stroke:mk.BLUE},altDown:{fill:gk.ORANGE,stroke:mk.ORANGE},altNeutral:{fill:gk.GRAY,stroke:mk.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(ED,[gk.ORANGE,gk.YELLOW,gk.GREEN]),e.set(AD,[gk.GREEN,gk.YELLOW,gk.ORANGE]),e.set(PD,gk.BLUE),e.set(FD,gk.BLUE),e}},yk={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},vk={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},Ck=class extends _L{getDefaultColors(){return{fills:{...yk,RED:yk.ORANGE},strokes:{...vk,RED:vk.ORANGE},up:{fill:yk.GREEN,stroke:vk.GREEN},down:{fill:yk.ORANGE,stroke:vk.ORANGE},neutral:{fill:vk.GRAY,stroke:vk.GRAY},altUp:{fill:yk.BLUE,stroke:vk.BLUE},altDown:{fill:yk.ORANGE,stroke:vk.ORANGE},altNeutral:{fill:yk.GRAY,stroke:vk.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(ED,[yk.ORANGE,yk.YELLOW,yk.GREEN]),e.set(AD,[yk.GREEN,yk.YELLOW,yk.ORANGE]),e.set(PD,yk.BLUE),e.set(FD,yk.BLUE),e}},bk={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},wk={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},Sk=class extends $L{getDefaultColors(){return{fills:bk,strokes:wk,up:{fill:bk.GREEN,stroke:wk.GREEN},down:{fill:bk.RED,stroke:wk.RED},neutral:{fill:bk.GRAY,stroke:wk.GRAY},altUp:{fill:bk.BLUE,stroke:wk.BLUE},altDown:{fill:bk.ORANGE,stroke:wk.ORANGE},altNeutral:{fill:bk.GRAY,stroke:wk.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(ED,[bk.ORANGE,bk.YELLOW,bk.GREEN]),e.set(LD,["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"]),e.set(AD,[bk.GREEN,bk.YELLOW,bk.RED]),e.set(PD,bk.BLUE),e.set(FD,bk.BLUE),e}},xk={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Mk={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},Dk=class extends _L{getDefaultColors(){return{fills:xk,strokes:Mk,up:{fill:xk.GREEN,stroke:Mk.GREEN},down:{fill:xk.RED,stroke:Mk.RED},neutral:{fill:xk.GRAY,stroke:Mk.GRAY},altUp:{fill:xk.BLUE,stroke:Mk.BLUE},altDown:{fill:xk.ORANGE,stroke:Mk.ORANGE},altNeutral:{fill:xk.GRAY,stroke:Mk.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(ED,[xk.ORANGE,xk.YELLOW,xk.GREEN]),e.set(LD,["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"]),e.set(AD,[xk.GREEN,xk.YELLOW,xk.RED]),e.set(PD,xk.BLUE),e.set(FD,xk.BLUE),e}},Ik=()=>new _L,Rk={"ag-default-dark":()=>new $L,"ag-sheets-dark":()=>new fk,"ag-polychroma-dark":()=>new hk,"ag-vivid-dark":()=>new Sk,"ag-material-dark":()=>new nk,"ag-financial-dark":()=>new qL,null:Ik,undefined:Ik,"ag-default":Ik,"ag-sheets":()=>new Ck,"ag-polychroma":()=>new pk,"ag-vivid":()=>new Dk,"ag-material":()=>new ak,"ag-financial":()=>new tk};function Ek(e){if(e instanceof _L)return e;if(null==e||"string"===typeof e){const t=Rk[e];return t?t():(Xd.warnOnce(`the theme [${e}] is invalid, using [ag-default] instead.`),Ik())}if(AL(e,Ak,"theme")){const t=function(e){let t,i=e;const s=[];for(;"object"===typeof i;)t??(t=i.palette),i.overrides&&s.push(i.overrides),i=i.baseTheme;return{baseTheme:i,overrides:ag(...s),palette:t}}(e);return new((t.baseTheme?Ek(t.baseTheme):Ik()).constructor)(t)}return Ik()}var Ak={baseTheme:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return TL((e=>t.some((t=>t(e)))),t.map((e=>e[RL])).filter(Boolean).join(" or "))}(NL,PL),overrides:PL,palette:{fills:GL(NL),strokes:GL(NL),up:{fill:NL,stroke:NL},down:{fill:NL,stroke:NL},neutral:{fill:NL,stroke:NL}}},Lk=new Set(["map-shape-background","map-line-background"]),kk=class{constructor(e,t,i,s){var n;this.debug=hy.create(!0,"opts"),this.optionMetadata=s??{},this.processedOverrides=t??{};const o={shallow:["data"]};this.userOptions=Jy(e,o);let r=Jy(e,o);const{presetType:a}=this.optionMetadata;if(null!=a){const e=DL[a],t=r,i=r.type,s=null!=i?Ek(r.theme).presets[i]:void 0;this.debug(">>> AgCharts.createOrUpdate() - applying preset",t),r=e?.(t,s,(()=>this.activeTheme))??r}mv.isEnterprise||IL(r),this.activeTheme=Ek(r.theme),a&&(r=this.activeTheme.templateTheme(r)),this.sanityCheckAndCleanup(r),this.defaultAxes=this.getDefaultAxes(r),this.specialOverrides=this.specialOverridesDefaults({...i});const l=this.optionsType(r),{axes:c={},annotations:{axesButtons:h=null,...d}={},series:u,...p}=this.getSeriesThemeConfig(l);this.processedOptions=Jy(ag(t,r,null!=h?{annotations:{axesButtons:h}}:{},p,this.defaultAxes),o),this.processAxesOptions(this.processedOptions,c),this.processSeriesOptions(this.processedOptions),this.processMiniChartSeriesOptions(this.processedOptions),this.annotationThemes=d,(US(this.processedOptions)||function(e){const t=WS(e);return _S(e)&&"pie"!==t&&"donut"!==t}(this.processedOptions))&&null==this.processedOptions.legend?.enabled&&((n=this.processedOptions).legend??(n.legend={}),this.processedOptions.legend.enabled=this.processedOptions.series.length>1),this.enableConfiguredOptions(this.processedOptions,r),mv.isEnterprise||IL(this.processedOptions,!0)}getOptions(){return this.processedOptions??{}}diffOptions(e){return qy(e,this.processedOptions)}getSeriesThemeConfig(e){const t=Jy(this.activeTheme?.config[e]??{});return this.removeLeftoverSymbols(t),t}getDefaultAxes(e){const t=this.optionsType(e),i=e.series?.find((e=>(e.type??"line")===t))??{};return GS.cloneDefaultAxes(t,i)}optionsType(e){return e.series?.[0]?.type??"line"}sanityCheckAndCleanup(e){this.deprecationWarnings(e),this.axesTypeIntegrity(e),this.seriesTypeIntegrity(e),this.soloSeriesIntegrity(e),this.removeDisabledOptions(e),this.removeLeftoverSymbols(e),e.series?.some((e=>"bullet"===e.type))&&null!=e.sync&&!1!==e.sync.enabled&&(Xd.warnOnce("bullet series cannot be synced, disabling synchronization."),delete e.sync)}processAxesOptions(e,t){"axes"in e&&(e.axes=e.axes.map((e=>{const{crossLines:i,...s}=ag(t[e.type]?.[e.position],t[e.type]);e.crossLines&&(e.crossLines=lg(e.crossLines,i));const n=s.gridLine?.style;e.gridLine?.style&&n?.length&&(e.gridLine.style=e.gridLine.style.map(((e,t)=>null!=e.stroke||null!=e.lineDash?ag(e,n.at(t%n.length)):e)));const{top:o,right:r,bottom:a,left:l,...c}=ag(e,s);return c})))}processSeriesOptions(e){const t=this.getTooltipPositionDefaults(e),i=Zp(e.theme)?BL(e.theme?.palette):"inbuilt",s={colourIndex:0,userPalette:i},n=e.series?.map((n=>{n.type??(n.type=this.getDefaultSeriesType(e));const{innerLabels:o,...r}=this.getSeriesThemeConfig(n.type).series??{},a=Lk.has(n.type)?{colourIndex:0,userPalette:i}:s,l=this.getSeriesPalette(n.type,a),c=this.getTooltipRangeDefaults(e,n.type),h=ag(this.getSeriesGroupingOptions(n),n,t,c,r,l,{visible:!0});return h.innerLabels&&(h.innerLabels=lg(h.innerLabels,o)),this.activeTheme.templateTheme(h)}));e.series=this.setSeriesGroupingOptions(n??[])}processMiniChartSeriesOptions(e){let t=e.navigator?.miniChart?.series;if(null==t)return;const i={colourIndex:0,userPalette:Zp(e.theme)?BL(e.theme.palette):"inbuilt"};t=t.map((e=>{e.type??(e.type="line");const{innerLabels:t,...s}=this.getSeriesThemeConfig(e.type).series??{},n=ag(this.getSeriesGroupingOptions(e),e,s,this.getSeriesPalette(e.type,i));return this.activeTheme.templateTheme(n)})),e.navigator.miniChart.series=this.setSeriesGroupingOptions(t)}getSeriesPalette(e,t){const i=GS.getPaletteFactory(e),{colourIndex:s,userPalette:n}=t,{fills:o=[],strokes:r=[]}=this.activeTheme.palette;return i?.({userPalette:n,colorsCount:Math.max(o.length,r.length),themeTemplateParameters:this.activeTheme.getTemplateParameters(),palette:this.activeTheme.palette,takeColors:e=>(t.colourIndex+=e,{fills:Ug(o,e,s),strokes:Ug(r,e,s)})})}getSeriesGroupingOptions(e){const t=GS.isGroupable(e.type),i=GS.isStackable(e.type),s=GS.isStackedByDefault(e.type);e.grouped&&!t&&Xd.warnOnce(`unsupported grouping of series type "${e.type}".`),!e.stacked&&!e.stackGroup||i||Xd.warnOnce(`unsupported stacking of series type "${e.type}".`);let{grouped:n,stacked:o}=e;return o??(o=(s||null!=e.stackGroup)&&!(t&&n)),n??(n=!0),{stacked:i&&o,grouped:t&&n&&!(i&&o)}}setSeriesGroupingOptions(e){const t=this.getSeriesGrouping(e);this.debug("setSeriesGroupingOptions() - series grouping: ",t);const i={},s=t.reduce(((e,t)=>{var i;return"default"===t.groupType||(e[i=t.seriesType]??(e[i]=0),e[t.seriesType]+="stack"===t.groupType?1:t.series.length),e}),{});return t.flatMap((e=>{var t;switch(i[t=e.seriesType]??(i[t]=0),e.groupType){case"stack":{const t=i[e.seriesType]++;return e.series.map(((i,n)=>Object.assign(i,{seriesGrouping:{groupId:e.groupId,groupIndex:t,groupCount:s[e.seriesType],stackIndex:n,stackCount:e.series.length}})))}case"group":return e.series.map((t=>Object.assign(t,{seriesGrouping:{groupId:e.groupId,groupIndex:i[e.seriesType]++,groupCount:s[e.seriesType],stackIndex:0,stackCount:0}})))}return e.series})).map((e=>{let{stacked:t,grouped:i,...s}=e;return s}))}getSeriesGroupId(e){return[e.type,e.xKey,e.stacked?e.stackGroup??"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(e){const t=new Map;return e.reduce(((e,i)=>{const s=i.type;if(i.stacked||i.grouped){const n=this.getSeriesGroupId(i);if(!t.has(n)){const o={groupType:i.stacked?"stack":"group",seriesType:s,series:[],groupId:n};t.set(n,o),e.push(o)}t.get(n).series.push(i)}else e.push({groupType:"default",seriesType:s,series:[i],groupId:"__default__"});return e}),[])}getDefaultSeriesType(e){if(US(e))return"line";if(_S(e))return"pie";if(YS(e))return"treemap";if(KS(e))return"map-shape";if(ZS(e))return"sankey";if($S(e))return"pyramid";if(QS(e))return"radial-gauge";throw new Error("Invalid chart options type detected.")}getTooltipPositionDefaults(e){const t=e.tooltip?.position;if(!Qp(t))return;const{type:i,xOffset:s,yOffset:n}=t,o={};return Xp(i)&&ig(Yd,i)&&(o.type=i),Jp(s)&&(o.xOffset=s),Jp(n)&&(o.yOffset=n),{tooltip:{position:o}}}getTooltipRangeDefaults(e,t){return{tooltip:{range:e.tooltip?.range??GS.getTooltipDefauls(t)?.range}}}deprecationWarnings(e){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach((t=>{let[i,s]=t;e.series?.some((e=>null!=e[i]))&&Xd.warnOnce(`Property [series.${i}] is deprecated, please use [series.${s}] and multiple series instead.`)}))}axesTypeIntegrity(e){if("axes"in e){const i=e.axes??[];for(const{type:s}of i)if(null==(t=s)||!RS.has(t)){delete e.axes;const t=RS.publicKeys().join(", ");Xd.warnOnce(`unknown axis type: ${s}; expected one of: ${t}`)}}var t}seriesTypeIntegrity(e){e.series=e.series?.filter((e=>{let{type:t}=e;if(null==t||null!=(i=t)&&NS.has(i)||function(e){return ES.some((t=>"series"===t.type&&t.identifier===e))}(t))return!0;var i;Xd.warnOnce(`unknown series type: ${t}; expected one of: ${FS.seriesTypes.join(", ")}`)}))}soloSeriesIntegrity(e){const t=e.series;if(t&&t.length>1&&t.some((e=>GS.isSolo(e.type)))){const i=this.optionsType(e);if(GS.isSolo(i))Xd.warn(`series[0] of type '${i}' is incompatible with other series types. Only processing series[0]`),e.series=t.slice(0,1);else{const{solo:i,nonSolo:s}=Wg(t,(e=>GS.isSolo(e.type)?"solo":"nonSolo")),n=jg(i.map((e=>e.type))).join(", ");Xd.warn(`Unable to mix these series types with the lead series type: ${n}`),e.series=s}}}enableConfiguredOptions(e,t){tv(t,((e,t)=>{t&&"enabled"in t&&!t._enabledFromTheme&&null==e.enabled&&(t.enabled=!0)}),{skip:["data","theme"]},e),tv(e,(e=>{null!=e._enabledFromTheme&&delete e._enabledFromTheme}),{skip:["data","theme"]})}removeDisabledOptions(e){tv(e,(e=>{"enabled"in e&&!1===e.enabled&&Object.keys(e).forEach((t=>{"enabled"!==t&&delete e[t]}))}),{skip:["data","theme"]})}removeLeftoverSymbols(e){tv(e,(e=>{if(e&&Zp(e))for(const[t,i]of Object.entries(e))sg(i)&&delete e[t]}),{skip:["data"]})}specialOverridesDefaults(e){if(null!=e.window?ip(e.window):"undefined"!==typeof window?e.window=window:"undefined"!==typeof global&&(e.window=global.window),null!=e.document?tp(e.document):"undefined"!==typeof document?e.document=document:"undefined"!==typeof global&&(e.document=global.document),null==e.window)throw new Error("AG Charts - unable to resolve global window");if(null==e.document)throw new Error("AG Charts - unable to resolve global document");return e}},Tk=hy.create(!0,"opts");function Pk(e){if(US(e))return"cartesian";if(_S(e))return"polar";if(YS(e))return"hierarchy";if(KS(e))return"topology";if(ZS(e))return"flow-proportion";if($S(e))return"standalone";if(QS(e))return"gauge";throw new Error(`AG Chart - unknown type of chart for options with type: ${e.type}`)}var Nk=class{static licenseCheck(e){this.licenseChecked||(this.licenseManager=mv.licenseManager?.(e),this.licenseManager?.setLicenseKey(this.licenseKey,this.gridContext),this.licenseManager?.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(e){this.licenseKey=e}static setGridContext(e){this.gridContext=e}static getLicenseDetails(e){return mv.licenseManager?.({}).getLicenseDetails(e)}static getInstance(e){return Ok.getInstance(e)}static create(e,t){this.licenseCheck(e);const i=Ok.createOrUpdate({userOptions:e,licenseManager:this.licenseManager,styles:null!=mv.styles?[["ag-charts-enterprise",mv.styles]]:[],optionsMetadata:t});return this.licenseManager?.isDisplayWatermark()&&this.licenseManager&&mv.injectWatermark?.(i.chart.ctx.domManager,this.licenseManager.getWatermarkMessage()),i}static createFinancialChart(e){return this.create(e,{presetType:"price-volume"})}static createGauge(e){return this.create(e,{presetType:"gauge"})}static __createSparkline(e){return this.create(e,{presetType:"sparkline"})}};Nk.licenseChecked=!1,Nk.gridContext=!1;var Fk=class e{static getInstance(e){const t=yx.getInstance(e);return t?nM.chartInstances.get(t):void 0}static initialiseModules(){e.initialised||(KA(),ZA(),e.initialised=!0)}static createOrUpdate(t){let{proxy:i}=t;const{userOptions:s,licenseManager:n,styles:o,processedOverrides:r=i?.chart.chartOptions.processedOverrides??{},specialOverrides:a=i?.chart.chartOptions.specialOverrides??{},optionsMetadata:l=i?.chart.chartOptions.optionMetadata??{}}=t,{presetType:c}=l;e.initialiseModules(),Tk(">>> AgCharts.createOrUpdate() user options",s);let h=s;Nk.optionsMutationFn&&(h=Nk.optionsMutationFn(h,c),Tk(">>> AgCharts.createOrUpdate() MUTATED user options",h));const{overrideDevicePixelRatio:d,document:u,window:p,styleContainer:g,...m}=h,f=new kk(m,r,{...a,document:u,window:p,overrideDevicePixelRatio:d,styleContainer:g},l);let y=i?.chart;return null!=y&&Pk(f.processedOptions)===Pk(y?.chartOptions.processedOptions)||(y=e.createChartInstance(f,y),o?.forEach((e=>{let[t,i]=e;y?.ctx.domManager.addStyles(t,i)}))),null==i?i=new nM(y,e.callbackApi,n):i.chart=y,Tk.check()&&"undefined"!==typeof window&&(window.agChartInstances??(window.agChartInstances={}),window.agChartInstances[y.id]=y),y.queuedUserOptions.push(s),y.requestFactoryUpdate((e=>{e.applyOptions(f);const t=e.queuedUserOptions.indexOf(s)+1;e.queuedUserOptions.splice(0,t)})),i}static updateUserDelta(t,i){tv(i=Jy(i,{shallow:["data"]}),(e=>{if("object"===typeof e)for(const[t,i]of Object.entries(e))"undefined"===typeof i&&Object.assign(e,{[t]:Symbol("UNSET")})}),{skip:["data"]});const{chart:s}=t,n=s.getOptions(),o=ag(i,n);Tk(">>> AgCharts.updateUserDelta() user delta",i),Tk("AgCharts.updateUserDelta() - base options",n),e.createOrUpdate({userOptions:o,proxy:t})}static createChartInstance(t,i){const s=i?.destroy({keepTransferableResources:!0});return new(e.getChartByOptions(t.processedOptions))(t,s)}static getChartByOptions(e){if(US(e))return iM;if(YS(e))return qA;if(_S(e))return JA;if(KS(e))return hL;if(ZS(e))return $A;if($S(e))return iL;if(QS(e))return XA;throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}};Fk.caretaker=new gb(db),Fk.initialised=!1,Fk.callbackApi={caretaker:Fk.caretaker,create:(e,t,i,s)=>Fk.createOrUpdate({userOptions:e,processedOverrides:t,specialOverrides:i,optionsMetadata:s}),update:(e,t)=>Fk.createOrUpdate({userOptions:e,proxy:t}),updateUserDelta:(e,t)=>Fk.updateUserDelta(e,t)};var Ok=Fk;jd({},{Arc:()=>Gk,ArrowDown:()=>_k,ArrowUp:()=>Uk,BBox:()=>bp,BandScale:()=>nm,Caption:()=>Ev,ChangeDetectableProperties:()=>BI,Circle:()=>Ix,ConicGradient:()=>Bk,ContinuousScale:()=>Gg,Diamond:()=>Lx,DropShadow:()=>zI,ExtendedPath2D:()=>Kb,Gradient:()=>ky,Group:()=>ny,HdpiCanvas:()=>rw,Image:()=>xM,Label:()=>Pv,Layer:()=>Lv,Line:()=>Oy,LinearGradient:()=>Ty,LinearScale:()=>aM,Marker:()=>Dx,Node:()=>Ip,OrdinalTimeScale:()=>Hf,Path:()=>$b,PointerEvents:()=>Mp,RadialColumnShape:()=>Hk,Rect:()=>yM,RedrawType:()=>wp,Rotatable:()=>Jf,RotatableGroup:()=>ry,RotatableText:()=>Uy,Scalable:()=>ey,ScalableGroup:()=>oy,Scene:()=>vw,SceneChangeDetection:()=>Sp,ScenePathChangeDetection:()=>Zb,Sector:()=>nA,SectorBox:()=>KE,Selection:()=>dy,Shape:()=>Fy,Square:()=>Fx,SvgPath:()=>jk,Text:()=>Wy,Tooltip:()=>Rv,Transformable:()=>iy,TransformableText:()=>_y,Translatable:()=>ty,TranslatableGroup:()=>ay,TranslatableLayer:()=>kv,Triangle:()=>Bx,calculateDerivativeExtrema:()=>_b,calculateDerivativeExtremaXY:()=>Yb,drawCorner:()=>pM,easing:()=>mg,evaluateBezier:()=>jb,getFont:()=>Kk,getMarker:()=>jx,getRadialColumnWidth:()=>Vk,motion:()=>Yk,sectorBox:()=>ZE,solveBezier:()=>Wb,splitBezier:()=>Ub,toRadians:()=>yy,toTooltipHtml:()=>Dv});var Gk=class extends $b{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return dp(py(this.startAngle),py(this.endAngle))}updatePath(){const e=this.path;e.clear(),e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),1===this.type?e.closePath():2!==this.type||this.fullPie||(e.lineTo(this.centerX,this.centerY),e.closePath())}computeBBox(){return new bp(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(e,t){const i=this.getBBox();return 0!==this.type&&i.containsPoint(e,t)&&this.path.isPointInPath(e,t)}};Gk.className="Arc",Gk.defaultStyles={...Fy.defaultStyles,lineWidth:1,fillStyle:null},Wd([Zb()],Gk.prototype,"centerX",2),Wd([Zb()],Gk.prototype,"centerY",2),Wd([Zb()],Gk.prototype,"radius",2),Wd([Zb()],Gk.prototype,"startAngle",2),Wd([Zb()],Gk.prototype,"endAngle",2),Wd([Zb()],Gk.prototype,"counterClockwise",2),Wd([Zb()],Gk.prototype,"type",2);var Bk=class extends ky{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(e,t,arguments.length>3?arguments[3]:void 0),this.angle=i}createCanvasGradient(e,t){const{colorSpace:i,stops:s,angle:n}=this,o=py(yy(n+90));if(!("createConicGradient"in e)){return new Ty(i,s,n).createCanvasGradient(e,t)}const r=t.x+.5*t.width,a=t.y+.5*t.height;return e.createConicGradient(o,r,a)}};function zk(e,t,i){const s=Math.sqrt(e**2+t**2),n=Math.atan2(t,e)+i;return{x:Math.cos(n)*s,y:Math.sin(n)*s}}var Hk=class extends $b{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(e){}computeBBox(){const{innerRadius:e,outerRadius:t,columnWidth:i}=this,s=this.getRotation(),n=-i/2,o=i/2,r=-t,a=-e;let l=1/0,c=1/0,h=-1/0,d=-1/0;for(let u=0;u<4;u+=1){const{x:e,y:t}=zk(u%2===0?n:o,u<2?r:a,s);l=Math.min(e,l),c=Math.min(t,c),h=Math.max(e,h),d=Math.max(t,d)}return new bp(l,c,h-l,d-c)}getRotation(){const{startAngle:e,endAngle:t}=this;return py(e+by(e,t)/2+Math.PI/2)}updatePath(){const{isBeveled:e}=this;e?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:e,innerRadius:t,outerRadius:i,path:s}=this,n=-e/2,o=e/2,r=-i,a=-t,l=this.getRotation(),c=[[n,a],[n,r],[o,r],[o,a]].map((e=>{let[t,i]=e;return zk(t,i,l)}));s.clear(!0),s.moveTo(c[0].x,c[0].y),s.lineTo(c[1].x,c[1].y),s.lineTo(c[2].x,c[2].y),s.lineTo(c[3].x,c[3].y),s.closePath()}updateBeveledPath(){const{columnWidth:e,path:t,outerRadius:i,innerRadius:s,axisInnerRadius:n,axisOuterRadius:o,isRadiusAxisReversed:r}=this,a=dp(s,n),l=Math.asin(e/2/s),c=this.getRotation(),h=(e,t)=>zk(e,t,c),d=(e,t)=>Math.sqrt(e**2+t**2),u=(e,t)=>t>e?0:Math.sqrt(e**2-t**2),p=(e,t,i)=>i?e<t:e>t,g=a&&!isNaN(l)&&l<Math.PI/6;let m=-e/2,f=e/2;const y=-i,v=-s*(g?Math.cos(l):1),C=p(o,d(s,e/2),!r);if(C){const e=u(o,s);m=-e,f=e}t.clear(!0);const b=h(m,v);t.moveTo(b.x,b.y);const w=dp(s,i),S=p(o,d(i,e/2),!r);if(w&&g)t.arc(0,0,s,py(-l-Math.PI/2)+c,py(l-Math.PI/2)+c,!1);else if(S){const s=-u(o,e/2),n=u(o,i);if(!C){const e=h(m,s);t.lineTo(e.x,e.y)}if(t.arc(0,0,o,Math.atan2(s,m)+c,Math.atan2(y,-n)+c,!1),!dp(n,0)){const e=h(n,y);t.lineTo(e.x,e.y)}t.arc(0,0,o,Math.atan2(y,n)+c,Math.atan2(s,f)+c,!1)}else{const e=h(m,y),i=h(f,y);t.lineTo(e.x,e.y),t.lineTo(i.x,i.y)}const x=h(f,v);if(t.lineTo(x.x,x.y),g)t.arc(0,0,s,py(l-Math.PI/2)+c,py(-l-Math.PI/2)+c,!0);else{const e=h(m,v);t.lineTo(e.x,e.y)}t.closePath()}};function Vk(e,t,i,s,n){const o=by(e,t),r=o*(1-s)/2;if(e+=r,t-=r,o<.001)return 2*i*n;if(o>=2*Math.PI){const i=e+o/2;e=i-Math.PI,t=i+Math.PI}const a=i*Math.cos(e),l=i*Math.sin(e),c=i*Math.cos(t),h=i*Math.sin(t),d=Math.floor(Math.sqrt((a-c)**2+(l-h)**2)),u=2*i*n;return Math.max(1,Math.min(u,d))}Hk.className="RadialColumnShape",Wd([Zb()],Hk.prototype,"isBeveled",2),Wd([Zb()],Hk.prototype,"columnWidth",2),Wd([Zb()],Hk.prototype,"startAngle",2),Wd([Zb()],Hk.prototype,"endAngle",2),Wd([Zb()],Hk.prototype,"outerRadius",2),Wd([Zb()],Hk.prototype,"innerRadius",2),Wd([Zb()],Hk.prototype,"axisInnerRadius",2),Wd([Zb()],Hk.prototype,"axisOuterRadius",2),Wd([Zb()],Hk.prototype,"isRadiusAxisReversed",2);var jk=class extends $b{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";super(),this.x=0,this.y=0,this.commands=[],this._d="",this.d=e}get d(){return this._d}set d(e){if(e!==this._d){this._d=e,this.commands.length=0;for(const[t,i,s]of e.matchAll(/([A-Z])([0-9. ]*)/g)){const e=s.split(/\s+/g).map(Number);this.commands.push([i,e])}this.checkPathDirty()}}updatePath(){const{path:e,x:t,y:i}=this;e.clear();let s=t,n=i;for(const[o,r]of this.commands)switch(o){case"M":e.moveTo(t+r[0],i+r[1]),s=t+r[0];break;case"C":e.cubicCurveTo(t+r[0],i+r[1],t+r[2],i+r[3],t+r[4],i+r[5]),s=t+r[4],n=i+r[5];break;case"H":e.lineTo(t+r[0],n),s=i+r[0];break;case"L":e.lineTo(t+r[0],i+r[1]),s=t+r[0],n=i+r[1];break;case"V":e.lineTo(s,i+r[0]),n=i+r[0];break;case"Z":e.closePath();break;default:throw new Error(`Could not translate command '${o}' with '${r.join(" ")}'`)}e.closePath()}};Wd([Zb()],jk.prototype,"x",2),Wd([Zb()],jk.prototype,"y",2);var Wk=class e extends Dx{updatePath(){const t=this.size/2;super.applyPath(t,e.moves)}};Wk.className="ArrowUp",Wk.moves=[{x:0,y:0,t:"move"},{x:1,y:1.2},{x:-.5,y:0},{x:0,y:.8},{x:-1,y:0},{x:0,y:-.8},{x:-.5,y:0}];var Uk=Wk,_k=class extends Dx{updatePath(){const e=this.size/2;super.applyPath(e,Uk.moves.map((e=>({x:-1*e.x,y:-1*e.y}))))}};_k.className="ArrowDown";var Yk={...Bu,...hf},Kk=Hy.toFontString;jd({},{CARTESIAN_AXIS_TYPE:()=>$M,CARTESIAN_POSITION:()=>ZM,ChartTheme:()=>_L,DEFAULT_ANNOTATION_BACKGROUND_FILL:()=>FD,DEFAULT_ANNOTATION_COLOR:()=>PD,DEFAULT_ANNOTATION_HANDLE_FILL:()=>OD,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>zD,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>HD,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>VD,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>jD,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>GD,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>BD,DEFAULT_AXIS_GRID_COLOUR:()=>rD,DEFAULT_AXIS_LINE_COLOUR:()=>aD,DEFAULT_BACKGROUND_COLOUR:()=>cD,DEFAULT_CAPTION_ALIGNMENT:()=>gD,DEFAULT_CAPTION_LAYOUT_STYLE:()=>pD,DEFAULT_COLOURS:()=>dD,DEFAULT_CROSS_LINES_COLOUR:()=>lD,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:()=>ED,DEFAULT_FONT_FAMILY:()=>tD,DEFAULT_FUNNEL_SERIES_COLOR_RANGE:()=>LD,DEFAULT_GAUGE_SERIES_COLOR_RANGE:()=>AD,DEFAULT_GRIDLINE_ENABLED:()=>KD,DEFAULT_HIERARCHY_FILLS:()=>kD,DEFAULT_HIERARCHY_STROKES:()=>TD,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>nD,DEFAULT_INVERTED_LABEL_COLOUR:()=>sD,DEFAULT_LABEL_COLOUR:()=>iD,DEFAULT_MUTED_LABEL_COLOUR:()=>oD,DEFAULT_PADDING:()=>uD,DEFAULT_POLAR_SERIES_STROKE:()=>RD,DEFAULT_SHADOW_COLOUR:()=>hD,DEFAULT_TEXTBOX_COLOR:()=>_D,DEFAULT_TEXTBOX_FILL:()=>WD,DEFAULT_TEXTBOX_STROKE:()=>UD,DEFAULT_TEXT_ANNOTATION_COLOR:()=>ND,DEFAULT_TOOLBAR_POSITION:()=>YD,FONT_SIZE:()=>YM,FONT_WEIGHT:()=>KM,IS_COMMUNITY:()=>JM,IS_DARK_THEME:()=>qM,IS_ENTERPRISE:()=>eD,PALETTE_ALT_DOWN_FILL:()=>MD,PALETTE_ALT_DOWN_STROKE:()=>SD,PALETTE_ALT_NEUTRAL_FILL:()=>DD,PALETTE_ALT_NEUTRAL_STROKE:()=>ID,PALETTE_ALT_UP_FILL:()=>xD,PALETTE_ALT_UP_STROKE:()=>wD,PALETTE_DOWN_FILL:()=>vD,PALETTE_DOWN_STROKE:()=>fD,PALETTE_NEUTRAL_FILL:()=>bD,PALETTE_NEUTRAL_STROKE:()=>CD,PALETTE_UP_FILL:()=>yD,PALETTE_UP_STROKE:()=>mD,POLAR_AXIS_SHAPE:()=>XM,POLAR_AXIS_TYPE:()=>QM,getChartTheme:()=>Ek,markerPaletteFactory:()=>_M,singleSeriesPaletteFactory:()=>UM,swapAxisCondition:()=>cE,themes:()=>Zk});var Zk=cg(Rk,(e=>e?.()));jd({},{BandScale:()=>nm,ColorScale:()=>Ly,ContinuousScale:()=>Gg,Invalidating:()=>Fg,LinearScale:()=>aM,OrdinalTimeScale:()=>Hf,TimeScale:()=>Gf});jd({},{Color:()=>kp,Debug:()=>hy,Logger:()=>Xd,Padding:()=>JC,TimeInterval:()=>qd,angleBetween:()=>by,angleDiff:()=>Cy,arcDistanceSquared:()=>Iy,areArrayNumbersEqual:()=>Qy,checkDatum:()=>jv,clamp:()=>ap,clampArray:()=>lp,clockwiseAngle:()=>Sy,clockwiseAngles:()=>xy,countFractionDigits:()=>fp,createId:()=>Vu,day:()=>vu,deepClone:()=>Jy,displacePointFromVector:()=>wy,extent:()=>Bg,findMinMax:()=>cp,findRangeExtent:()=>hp,formatNormalizedPercentage:()=>yp,formatPercentage:()=>vp,friday:()=>Iu,generateUUID:()=>ju,getAttribute:()=>vv,hour:()=>fu,interpolateColor:()=>Pp,interpolateNumber:()=>Tp,isBetweenAngles:()=>fy,isContinuous:()=>Vv,isDate:()=>_p,isDenseInterval:()=>Nf,isEqual:()=>dp,isNegative:()=>up,isNumber:()=>Jp,isNumberEqual:()=>dp,isNumberObject:()=>Hv,isString:()=>Xp,isStringObject:()=>zv,jsonApply:()=>iv,jsonDiff:()=>qy,jsonWalk:()=>tv,lineDistanceSquared:()=>Dy,millisecond:()=>eu,minute:()=>pu,mod:()=>mp,monday:()=>Su,month:()=>Au,normalisedExtentWithMetadata:()=>zg,normalizeAngle180:()=>my,normalizeAngle360:()=>py,normalizeAngle360Inclusive:()=>gy,range:()=>Pf,resetIds:()=>Hu,round:()=>pp,sanitizeHtml:()=>XD,saturday:()=>Ru,second:()=>hu,setAttribute:()=>fv,setAttributes:()=>yv,setElementStyle:()=>Cv,shallowClone:()=>ev,sunday:()=>wu,thursday:()=>Du,tickFormat:()=>Tf,tickStep:()=>Lf,ticks:()=>Ef,toDegrees:()=>vy,toFixed:()=>gp,toRadians:()=>yy,transformIntegratedCategoryValue:()=>Wv,tuesday:()=>xu,utcDay:()=>Fu,utcHour:()=>Nu,utcMinute:()=>Pu,utcMonth:()=>Ou,utcYear:()=>Gu,wednesday:()=>Mu,year:()=>ku});function $k(){return(e,t)=>{const i=[`Property [${e}] is deprecated.`,t].filter(Boolean).join(" ");Xd.warnOnce(i)}}function Qk(e,t){const i=$k(),s=t?.default;return Gp(((t,n,o)=>(o!==s&&i(n.toString(),e),o)))}function Xk(e,t){const i=$k();return Gp(((s,n,o)=>(o!==s[e]&&(i(n.toString(),`Use [${e}] instead.`),pg(s,e,t?t(o):o)),Np)),((t,s)=>(i(s.toString(),`Use [${e}] instead.`),dg(t,e))))}function qk(e,t,i){if(e>t)return;let s;for(;t>=e;){const n=Math.floor((t+e)/2),o=i(n);null==o?t=n-1:(s=o,e=n+1)}return s}jd({},{AND:()=>hm,ARRAY:()=>Mm,ARRAY_OF:()=>Dm,AbstractBarSeries:()=>pE,AbstractBarSeriesProperties:()=>uE,ActionOnSet:()=>lv,Animation:()=>Lg,AnimationManager:()=>Ow,Axis:()=>AC,AxisInterval:()=>gC,AxisLabel:()=>mC,AxisTick:()=>yC,AxisTicks:()=>rT,BOOLEAN:()=>gm,BOOLEAN_ARRAY:()=>Nm,Background:()=>vM,BackgroundModule:()=>CM,BaseModuleInstance:()=>KC,BaseProperties:()=>om,COLOR_STRING:()=>Tm,COLOR_STRING_ARRAY:()=>Pm,CachedTextMeasurer:()=>zy,CachedTextMeasurerPool:()=>By,CartesianAxis:()=>TC,CartesianSeries:()=>eM,CartesianSeriesNodeEvent:()=>qx,CartesianSeriesProperties:()=>Jx,CategoryAxis:()=>NC,ChartAxisDirection:()=>lf,ChartEventManager:()=>Gw,ChartOptions:()=>kk,ChartUpdateType:()=>dS,ContextMenuRegistry:()=>Bw,Cursor:()=>Hw,CursorManager:()=>Vw,DATE:()=>Am,DATE_ARRAY:()=>Gm,DATE_OR_DATETIME_MS:()=>Lm,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>Qx,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>Xx,DEFAULT_TOOLTIP_CLASS:()=>wv,DEFAULT_TOOLTIP_DARK_CLASS:()=>Sv,DEGREE:()=>Sm,DIRECTION:()=>Qm,DOMManager:()=>Ob,DRAG_INTERACTION_TYPES:()=>Iw,DataController:()=>IS,DataModel:()=>MS,DataModelSeries:()=>Wx,DataService:()=>Sw,Default:()=>uC,Deprecated:()=>Qk,DeprecatedAndRenamedTo:()=>Xk,EMPTY_TOOLTIP_CONTENT:()=>xv,FONT_STYLE:()=>Um,FONT_WEIGHT:()=>_m,FUNCTION:()=>mm,GREATER_THAN:()=>Em,GestureDetector:()=>Ww,GroupedCategoryAxis:()=>YC,HierarchyNode:()=>tT,HierarchySeries:()=>iT,HierarchySeriesProperties:()=>sT,HighlightManager:()=>Uw,HighlightProperties:()=>Kx,HighlightStyle:()=>Zx,INTERACTION_RANGE:()=>qm,INTERPOLATION_STEP_POSITION:()=>_I,INTERPOLATION_TYPE:()=>UI,InteractionManager:()=>Nw,InteractionState:()=>lb,InterpolationProperties:()=>YI,KeyNavManager:()=>_w,LABEL_PLACEMENT:()=>Jm,LARGEST_KEY_INTERVAL:()=>wI,LESS_THAN:()=>Rm,LINE_CAP:()=>zm,LINE_DASH:()=>jm,LINE_JOIN:()=>Hm,LINE_STYLE:()=>Vm,LayoutElement:()=>ib,LayoutManager:()=>sb,LonLatBBox:()=>nT,MARKER_SHAPE:()=>HI,MATCHING_CROSSLINE_TYPE:()=>Uv,MAX_SPACING:()=>sf,MIN_SPACING:()=>tf,MercatorScale:()=>lL,ModuleRegistry:()=>ZC,Motion:()=>mg,NAN:()=>Cm,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>kg,NUMBER:()=>ym,NUMBER_ARRAY:()=>Fm,NUMBER_OR_NAN:()=>xm,Navigator:()=>jM,NavigatorModule:()=>WM,NodeRegionBBoxProvider:()=>Kw,OBJECT:()=>um,OBJECT_ARRAY:()=>Bm,OR:()=>dm,OVERFLOW_STRATEGY:()=>$m,ObserveChanges:()=>cv,PHASE_METADATA:()=>Ig,PHASE_ORDER:()=>Dg,PLACEMENT:()=>Xm,PLAIN_OBJECT:()=>pm,POINTER_INTERACTION_TYPES:()=>Rw,POSITION:()=>Wm,POSITION_TOP_COORDINATES:()=>Qv,POSITIVE_NUMBER:()=>bm,PolarAxis:()=>QA,PolarSeries:()=>yA,PropertiesArray:()=>rm,ProxyOnWrite:()=>rv,ProxyProperty:()=>ov,ProxyPropertyOnWrite:()=>av,QUICK_TRANSITION:()=>Mg,RATIO:()=>wm,REAL_NUMBER:()=>vm,REGIONS:()=>Yw,RegionManager:()=>Jw,RepeatType:()=>Rg,SKIP_JS_BUILTINS:()=>ug,SMALLEST_KEY_INTERVAL:()=>bI,SORT_DOMAIN_GROUPS:()=>SI,STRING:()=>fm,STRING_ARRAY:()=>Om,Series:()=>ox,SeriesGroupingChangedEvent:()=>nx,SeriesItemHighlightStyle:()=>Ux,SeriesMarker:()=>VI,SeriesNodeEvent:()=>sx,SeriesNodePickMode:()=>ix,SeriesProperties:()=>$x,SeriesTooltip:()=>WI,SimpleRegionBBoxProvider:()=>Zw,SimpleTextMeasurer:()=>Vy,StateMachine:()=>pv,TEXT_ALIGN:()=>Km,TEXT_WRAP:()=>Ym,TICK_INTERVAL:()=>pC,TOOLBAR_ALIGNMENTS:()=>eS,TOOLBAR_GROUPS:()=>tS,TOOLBAR_GROUP_ORDERING:()=>iS,TOOLBAR_POSITIONS:()=>nS,TextUtils:()=>Hy,TextWrapper:()=>gv,ToolbarManager:()=>rS,ToolbarPosition:()=>sS,Tooltip:()=>Rv,TooltipManager:()=>aS,TooltipPosition:()=>Iv,UNION:()=>ef,UpdateService:()=>uS,VERTICAL_ALIGN:()=>Zm,Validate:()=>lm,Vec2:()=>kA,Vec4:()=>Jk,ZIndexMap:()=>Bv,ZoomManager:()=>lS,__FORCE_MODULE_DETECTION:()=>aT,accumulateGroup:()=>LI,accumulateStack:()=>TI,accumulatedValue:()=>aI,accumulativeValueProperty:()=>fI,addHitTestersToQuadtree:()=>hE,adjustLabelPlacement:()=>RE,animationValidation:()=>RI,area:()=>rI,arraysEqual:()=>Hg,backfillPathPointData:()=>vR,buildFormatter:()=>Jg,buildResetPathFn:()=>RR,calculateDefaultTimeTickFormat:()=>im,calculateLabelChartPadding:()=>$v,calculateLabelTranslation:()=>Zv,calculatePlacement:()=>bv,checkCrisp:()=>vE,circularSliceArray:()=>Ug,clamp:()=>ap,clampArray:()=>lp,collapsedStartingBarPosition:()=>bE,computeBarFocusBounds:()=>ME,computeMarkerFocusBounds:()=>pR,convertValuesToScaleByDefs:()=>ax,countFractionDigits:()=>fp,createButton:()=>lT,createCheckbox:()=>cT,createDatumId:()=>NI,createDeprecationWarning:()=>$k,createElement:()=>qu,createElementId:()=>rp,createElementNS:()=>Ju,createIcon:()=>uT,createSelect:()=>hT,createTextArea:()=>dT,dateToNumber:()=>em,deconstructSelectionsOrNodes:()=>Eg,deepClone:()=>Jy,deepMerge:()=>rg,defaultTimeTickFormat:()=>tm,determinePathStatus:()=>jR,diff:()=>PI,downloadUrl:()=>ep,enterpriseModule:()=>mv,excludesType:()=>ng,extent:()=>Bg,extractDecoratedProperties:()=>Hp,findMaxValue:()=>qk,findMinMax:()=>cp,findQuadtreeMatch:()=>dE,findRangeExtent:()=>hp,fixNumericExtent:()=>CS,focusCursorAtEnd:()=>np,formatNormalizedPercentage:()=>yp,formatPercentage:()=>vp,formatValue:()=>$D,fromToMotion:()=>Tg,getDocument:()=>Qu,getLastFocus:()=>Lb,getMissCount:()=>bS,getPath:()=>dg,getPathComponents:()=>SS,getRectConfig:()=>yE,getWindow:()=>Xu,groupAccumulativeValueProperty:()=>vI,groupAverage:()=>oI,groupBy:()=>Wg,groupCount:()=>nI,groupStackValueProperty:()=>CI,groupSum:()=>iI,initMenuKeyNav:()=>Rb,initRovingTabIndex:()=>Db,initToolbarKeyNav:()=>Mb,isAnimatingFloatingPosition:()=>oS,isArray:()=>jp,isBoolean:()=>Wp,isButtonClickEvent:()=>Ab,isDate:()=>Up,isDecoratedObject:()=>Bp,isDefined:()=>Vp,isEnumKey:()=>tg,isEnumValue:()=>ig,isEqual:()=>dp,isFiniteNumber:()=>Jp,isFunction:()=>Kp,isHtmlElement:()=>eg,isNegative:()=>up,isNumber:()=>qp,isObject:()=>Zp,isObjectLike:()=>$p,isPlainObject:()=>Qp,isProperties:()=>am,isRegExp:()=>Yp,isString:()=>Xp,isSymbol:()=>sg,isValidDate:()=>_p,jsonApply:()=>iv,jsonDiff:()=>qy,jsonWalk:()=>tv,keyProperty:()=>pI,labelDirectionHandling:()=>nC,listDecoratedProperties:()=>zp,makeAccessibleClickListener:()=>Eb,mapValues:()=>cg,markerFadeInAnimation:()=>aR,markerPaletteFactory:()=>_M,markerScaleInAnimation:()=>lR,markerSwipeScaleInAnimation:()=>cR,mergeArrayDefaults:()=>lg,mergeDefaults:()=>ag,midpointStartingBarPosition:()=>wE,minMax:()=>mR,mod:()=>mp,moduleRegistry:()=>$C,nearestSquared:()=>Ku,nearestSquaredInContainer:()=>Zu,normaliseGroupTo:()=>MI,normalisePropertyTo:()=>II,normalisedExtentWithMetadata:()=>zg,objectEqualWith:()=>og,pairCategoryData:()=>VR,pairContinuousData:()=>HR,partialAssign:()=>gg,pathFadeInAnimation:()=>DR,pathFadeOutAnimation:()=>IR,pathRangePoints:()=>FR,pathRangePointsReverse:()=>OR,pathRanges:()=>NR,pathSwipeInAnimation:()=>MR,pickByMatchingAngle:()=>fA,pickNode:()=>lx,plotPath:()=>wR,predicateWithMessage:()=>nf,prepareAreaPathAnimation:()=>rE,prepareAxisAnimationContext:()=>CC,prepareAxisAnimationFunctions:()=>SC,prepareBarAnimationFunctions:()=>SE,prepareLinePathAnimation:()=>_R,prepareLinePathAnimationFns:()=>UR,prepareLinePathPropertyAnimation:()=>WR,prepareMarkerAnimation:()=>uR,preparePieSeriesAnimationFunctions:()=>gA,range:()=>sI,rangedValueProperty:()=>mI,renderPartialPath:()=>xR,resetAxisGroupFn:()=>xC,resetAxisLabelSelectionFn:()=>DC,resetAxisLineSelectionFn:()=>IC,resetAxisSelectionFn:()=>MC,resetBarSelectionsFn:()=>xE,resetIds:()=>Hu,resetLabelFn:()=>GI,resetMarkerFn:()=>hR,resetMarkerPositionFn:()=>dR,resetMotion:()=>df,resetPieSelectionsFn:()=>mA,round:()=>pp,scale:()=>GR,seriesLabelFadeInAnimation:()=>FI,seriesLabelFadeOutAnimation:()=>OI,setDocument:()=>tp,setElementBBox:()=>sp,setPath:()=>pg,setWindow:()=>ip,shallowClone:()=>ev,singleSeriesPaletteFactory:()=>UM,sortBasedOnArray:()=>_g,splitPairData:()=>SR,staticFromToMotion:()=>Pg,stopPageScrolling:()=>kb,stringify:()=>af,sum:()=>tI,sumValues:()=>eI,toArray:()=>Vg,toFixed:()=>gp,toTooltipHtml:()=>Dv,trailingAccumulatedValue:()=>lI,trailingAccumulatedValueProperty:()=>yI,unique:()=>jg,updateClipPath:()=>ER,updateLabelNode:()=>DE,updateRect:()=>fE,validateCrossLineValues:()=>_v,valueProperty:()=>gI,without:()=>hg});var Jk={bottomCenter:function(e){return{x:(e.x1+e.x2)/2,y:Math.max(e.y1,e.y2)}},center:function(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}},clone:function(e){return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}},end:function(e){return{x:e.x2,y:e.y2}},from:function(e,t,i,s){if("number"===typeof e)return{x1:e,y1:t,x2:i,y2:s};if("width"in e)return{x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height};throw new Error(`Values can not be converted into a vector4: [${e}] [${t}] [${i}] [${s}]`)},height:function(e){return Math.abs(e.y2-e.y1)},round:function(e){return{x1:Math.round(e.x1),y1:Math.round(e.y1),x2:Math.round(e.x2),y2:Math.round(e.y2)}},start:function(e){return{x:e.x1,y:e.y1}},topCenter:function(e){return{x:(e.x1+e.x2)/2,y:Math.min(e.y1,e.y2)}},origin:function(){return{x1:0,y1:0,x2:0,y2:0}},width:function(e){return Math.abs(e.x2-e.x1)}};var eT=class e{constructor(e,t,i,s,n,o,r,a,l,c,h){this.series=e,this.index=t,this.datum=i,this.size=s,this.colorValue=n,this.fill=o,this.stroke=r,this.sumSize=a,this.depth=l,this.parent=c,this.children=h,this.midPoint={x:0,y:0}}contains(e){let t=e;for(;null!=t&&t.index>=this.index;){if(t===this)return!0;t=t.parent}return!1}walk(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.Walk.PreOrder;i===e.Walk.PreOrder&&t(this),this.children.forEach((e=>{e.walk(t,i)})),i===e.Walk.PostOrder&&t(this)}*[Symbol.iterator](){yield this;for(const e of this.children)yield*e}};eT.Walk={PreOrder:0,PostOrder:1};var tT=eT,iT=class extends ox{constructor(e){super({moduleCtx:e,pickModes:[1,0],contentGroupVirtual:!1}),this.rootNode=new tT(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.focusPath=[],this.animationState=new pv("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}async processData(){const{childrenKey:e,sizeKey:t,colorKey:i,fills:s,strokes:n,colorRange:o}=this.properties;let r=0;let a=0,l=1/0,c=-1/0;const h=new Array((this.data?.length??0)+1).fill(void 0),d=(s,n)=>{const o=(r+=1,r),d=null!=n.depth?n.depth+1:0,p=null!=e?s[e]:void 0,g=null==p||0===p.length;let m=null!=t?s[t]:void 0;m=Number.isFinite(m)?Math.max(m,0):g?1:0;const f=m;a=Math.max(a,d);const y=null!=i?s[i]:void 0;return"number"===typeof y&&(h[o]=y,l=Math.min(l,y),c=Math.max(c,y)),u(new tT(this,o,s,m,y,void 0,void 0,f,d,n,[]),p)},u=(e,t)=>(t?.forEach((t=>{const i=d(t,e);e.children.push(i),e.sumSize+=i.sumSize})),e),p=u(new tT(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),g=[l,c];let m;null!=o&&Number.isFinite(l)&&Number.isFinite(c)&&(m=new Ly,m.domain=g,m.range=o,m.update()),p.children.forEach(((e,t)=>{e.walk((e=>{let i;const o=h[e.index];null!=o&&(i=m?.convert(o)),i??(i=s?.[t%s.length]),e.fill=i,e.stroke=null==m?n?.[t%n.length]:"rgba(0, 0, 0, 0.2)"}))})),this.rootNode=p,this.maxDepth=a,this.colorDomain=g,this.focusPath=[{nodeDatum:this.rootNode,childIndex:0}]}async update(e){let{seriesRect:t}=e;await this.updateSelections(),await this.updateNodes();const i=this.getAnimationData();this.checkResize(t)&&this.animationState.transition("resize",i),this.animationState.transition("update",i)}resetAllAnimation(e){const t=this.animationResetFns?.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),null!=t&&df(e.datumSelections,t)}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){const t=this.animationResetFns?.datum;null!=t&&df([e],t)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(e){const{colorKey:t,colorName:i,colorRange:s,visible:n}=this.properties;return"gradient"===e&&null!=t&&null!=s?[{legendType:"gradient",enabled:n,seriesId:this.id,colorName:i,colorRange:s,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(e){return`${e.index}`}getDatumId(e){return this.getDatumIdFromData(e)}pickFocus(e){if(0===this.rootNode.children.length)return;0===this.focusPath.length&&Xd.error("this.focusPath should not be empty");const{datumIndexDelta:t,otherIndexDelta:i}=e,{focusPath:s}=this,n=s.length-2;if(0!==i||1===s.length){const e=Math.max(0,n+i);if(void 0!==s[e+1])return s.length=e+2,this.computeFocusOutputs(s[e+1]);{let t=s[s.length-1];for(;t.nodeDatum.children.length>0&&(t.nodeDatum.depth??-1)<e;){const e={nodeDatum:t.nodeDatum.children[0],childIndex:0};s.push(e),t=e}return this.computeFocusOutputs(t)}}if(0===t)return this.computeFocusOutputs(s[s.length-1]);{const e=s[n+1].childIndex+t,i=s[n].nodeDatum,o=i?.children?.length;if(void 0!==o){const t=ap(0,e,o-1),r={nodeDatum:i.children[t],childIndex:t};return s[n+1]=r,s.length=n+2,this.computeFocusOutputs(r)}}}getDatumAriaText(e,t){if(e instanceof tT)return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(e.depth??-1)+1,count:e.children.length,description:t});Xd.error(`datum is not HierarchyNode: ${e}`)}computeFocusOutputs(e){let{nodeDatum:t,childIndex:i}=e;const s=this.computeFocusBounds(t);if(s)return{datum:t,datumIndex:i,otherIndex:t.depth,bounds:s,showFocusBox:!0}}},sT=class extends $x{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(oA),this.strokes=Object.values(rA)}};Wd([lm(fm)],sT.prototype,"childrenKey",2),Wd([lm(fm,{optional:!0})],sT.prototype,"sizeKey",2),Wd([lm(fm,{optional:!0})],sT.prototype,"colorKey",2),Wd([lm(fm,{optional:!0})],sT.prototype,"colorName",2),Wd([lm(Pm)],sT.prototype,"fills",2),Wd([lm(Pm)],sT.prototype,"strokes",2),Wd([lm(Pm,{optional:!0})],sT.prototype,"colorRange",2);var nT=class{constructor(e,t,i,s){this.lon0=e,this.lat0=t,this.lon1=i,this.lat1=s}merge(e){this.lon0=Math.min(this.lon0,e.lon0),this.lat0=Math.min(this.lat0,e.lat0),this.lon1=Math.max(this.lon1,e.lon1),this.lat1=Math.max(this.lat1,e.lat1)}};var oT=class e{constructor(){this.id=Vu(this),this.axisGroup=new ay({name:`${this.id}-AxisTicks`,zIndex:2}),this.labelSelection=dy.select(this.axisGroup,Wy),this.interval=new gC,this.label=new mC,this.scale=new aM,this.position="bottom",this.translationX=0,this.translationY=0,this.padding=0}attachAxis(e){e.appendChild(this.axisGroup)}calculateLayout(){this.scale.interval=this.interval.step;const e=[],t=this.generateTicks(),{translationX:i,translationY:s}=this;return this.labelSelection.update(t.ticks.map((e=>this.createLabelDatum(e))),void 0,(e=>e.tickId)),this.labelSelection.each(((t,i)=>{t.setProperties(i),i.visible&&e.push(t.getBBox())})),this.axisGroup.setProperties({translationX:i,translationY:s}),bp.merge(e)}getLabelParams(e){const{padding:t}=this,{translate:i}=e;switch(this.position){case"top":case"bottom":return{x:i,y:t,textAlign:"center",textBaseline:"top"};case"left":case"right":return{x:t,y:i,textAlign:"start",textBaseline:"middle"}}}inRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001;const[i,s]=cp(this.scale.range);return e>=i-t&&e<=s+t}createLabelDatum(e){const{x:t,y:i,textBaseline:s,textAlign:n}=this.getLabelParams(e);return{visible:Boolean(e.tickLabel),tickId:e.tickId,fill:this.label.color,fontFamily:this.label.fontFamily,fontSize:this.label.fontSize,fontStyle:this.label.fontStyle,fontWeight:this.label.fontWeight,rotation:0,rotationCenterX:0,text:e.tickLabel,textAlign:n,textBaseline:s,x:t,y:i}}generateTicks(){const{minSpacing:t,maxSpacing:i}=this.interval,s=pp(hp(this.scale.range),2),{maxTickCount:n,minTickCount:o,tickCount:r}=function(e,t,i,s,n){n=Math.max(n,e/(s+1)),isNaN(t)&&(t=n),isNaN(i)&&(i=e),t>i&&(t===n?t=i:i=t);const o=ap(1,Math.floor(e/t),Math.min(Math.floor(e),100)),r=Math.min(o,Math.ceil(e/i));return{minTickCount:r,maxTickCount:o,tickCount:ap(r,s,o)}}(s,t,i,e.DefaultTickCount,e.DefaultMinSpacing);r&&(this.scale.tickCount=r,this.scale.minTickCount=o,this.scale.maxTickCount=n);const a=this.getTicksData();if("bottom"===this.position||"top"===this.position){const e=By.getMeasurer({font:this.label}),t=this.scale.getDomain(),i=t[0]>t[1]?-1:1;let s=-1/0*i;a.ticks=a.ticks.filter((t=>Math.sign(t.translate-s)===i&&(s=t.translate+e.textWidth(t.tickLabel,!0)*i,!0)))}return a}getTicksData(){const e=[],t=this.scale.ticks(),i=t.reduce(((e,t)=>Math.max(e,"number"===typeof t?fp(t):0)),0),s=function(){const e=new Map;return t=>{const i=e.get(t);return i?(e.set(t,i+1),`${t}${i}`):(e.set(t,1),t)}}(),n=this.label.format?this.scale.tickFormat({ticks:t,specifier:this.label.format}):e=>qp(e)?e.toFixed(i):String(e);for(let o=0;o<t.length;o++){const r=t[o],a=this.scale.convert(r);if(!this.inRange(a))continue;const l=this.label.formatter?.({value:r,index:o,fractionDigits:i})??n(r),c=s(l);e.push({tick:r,tickId:c,tickLabel:l,translate:a})}return{rawTicks:t,fractionDigits:i,ticks:e}}};oT.DefaultTickCount=5,oT.DefaultMinSpacing=50;var rT=oT,aT=0;function lT(e,t){const i=qu("button",pT("ag-charts-input ag-charts-button",t));return void 0!==e.label?i.append(e.label):(i.append(uT(e.icon)),i.ariaLabel=e.altText),i.addEventListener("click",e.onPress),yv(i,t),i}function cT(e,t){const i=qu("input",pT("ag-charts-input ag-charts-checkbox",t));return i.type="checkbox",i.checked=e.checked,i.addEventListener("change",(t=>e.onChange(i.checked,t))),i.addEventListener("keydown",(e=>{Ab(e)&&(e.preventDefault(),i.click())})),yv(i,t),i}function hT(e,t){const i=qu("select",pT("ag-charts-input ag-charts-select",t));return i.append(...e.options.map((e=>{const t=qu("option");return t.value=e.value,t.textContent=e.label,t}))),fv(i,"data-preventdefault",!1),i.value=e.value,i.addEventListener("change",(t=>e.onChange(i.value,t))),yv(i,t),i}function dT(e,t){const i=qu("textarea",pT("ag-charts-input ag-charts-textarea",t));return i.value=e.value,i.addEventListener("input",(t=>e.onChange(i.value,t))),yv(i,t),i}function uT(e){const t=qu("span",`ag-charts-icon ag-charts-icon-${e}`);return fv(t,"aria-hidden",!0),t}function pT(e,t){return null==t?e:`${e} ${t.class}`}function gT(e,t){return{...e,container:t.current}}function mT(e,t){const i=(0,s.forwardRef)((function(t,i){const{options:n,style:o,className:r}=t,a=(0,s.useRef)(null),l=(0,s.useRef)();(0,s.useLayoutEffect)((()=>{const t=e(gT(n,a));return l.current=t,()=>{t.destroy()}}),[]);const c=void 0===l.current;return(0,s.useEffect)((()=>{c||l.current?.update(gT(n,a))}),[n]),(0,s.useImperativeHandle)(i,(()=>l.current),[]),(0,s.useMemo)((()=>(0,s.createElement)("div",{ref:a,style:o,className:r})),[o,r])}));return i.displayName=t,i}var fT=mT((e=>Nk.create(e)),"AgCharts");const yT=e=>{let{data:t}=e;return(0,E.jsx)("div",{style:{height:"100%",width:"50%",margin:30},children:(0,E.jsx)(fT,{options:{data:t,series:[{type:"line",xKey:"line",yKey:"left",yName:"Left"},{type:"line",xKey:"line",yKey:"right",yName:"Right"}],legend:{enabled:!1},axes:[{type:"number",position:"left",label:{format:",.0f"},title:{text:"chars"}},{type:"number",position:"bottom",label:{format:",.0f"},title:{text:"line#"}}]}})})};function vT(e,t){function i(e){return""===e?0:e.split("\n").length}function s(e){return e.trim().split(/\s+/).filter(Boolean).length}function n(e){return e.split("").filter((e=>!/\s/.test(e))).length}function o(e){return e.split("").filter((e=>/\s/.test(e))).length}const r=[{stat:"rows",left:0,right:0,diff:0},{stat:"words",left:0,right:0,diff:0},{stat:"chars",left:0,right:0,diff:0},{stat:"whitechars",left:0,right:0,diff:0}];return r[0].left=i(e),r[0].right=i(t),r[0].diff=Math.abs(r[0].left-r[0].right),r[1].left=s(e),r[1].right=s(t),r[1].diff=Math.abs(r[1].left-r[1].right),r[2].left=n(e),r[2].right=n(t),r[2].diff=Math.abs(r[2].left-r[2].right),r[3].left=o(e),r[3].right=o(t),r[3].diff=Math.abs(r[3].left-r[3].right),r}function CT(e,t){if(""===e&&""===t)return[{line:0,left:0,right:0}];const i=e.split("\n"),s=t.split("\n"),n=i.map((e=>e.replace(/\s/g,""))),o=s.map((e=>e.replace(/\s/g,""))),r=n.length,a=o.length,l=[],c=Math.max(r,a);for(let h=0;h<c;h++)l.push({line:h+1,left:n[h]?n[h].length:0,right:o[h]?o[h].length:0});return l}const bT=()=>{const[e,t]=(0,s.useState)(""),[i,n]=(0,s.useState)(""),[o,r]=(0,s.useState)([]),[l,c]=(0,s.useState)(vT("","")),[h,d]=(0,s.useState)(CT("","")),u=e=>{const t=e.target.scrollLeft;document.querySelectorAll(".text-viewer").forEach((i=>{i!==e.target&&(i.scrollLeft=t)}))};return(0,E.jsxs)("div",{children:[(0,E.jsxs)("div",{className:"app-container",children:[(0,E.jsx)("div",{className:"panel-container",children:(0,E.jsx)(A,{buttonText:"Paste",buttonOnClick:async()=>{const e=await navigator.clipboard.readText();t(e.replace(/\n$/,"")),c(vT(e,i)),d(CT(e,i))},viewerText:e,viewerOnScroll:u})}),(0,E.jsx)("div",{className:"panel-container",children:(0,E.jsx)(A,{buttonText:"Paste",buttonOnClick:async()=>{const t=await navigator.clipboard.readText();n(t.replace(/\n$/,"")),c(vT(e,t)),d(CT(e,t))},viewerText:i,viewerOnScroll:u})}),(0,E.jsx)("div",{className:"panel-container",children:(0,E.jsx)(A,{buttonText:"Compare",buttonOnClick:()=>{if(e===i)return void r("texts are indentical..");let t;if(e.includes("\n")||i.includes("\n")){t=w(e,i,{ignoreWhitespace:!0}).map(((e,t)=>{const i=e.added?"text-viewer-token-added":e.removed?"text-viewer-token-removed":"";return(0,E.jsx)("div",{className:i,children:e.value},t)}))}else{t=(s=e,n=i,a.diff(s,n,o)).map(((e,t)=>{const i=e.added?"text-viewer-token-added":e.removed?"text-viewer-token-removed":"";return(0,E.jsx)("span",{className:i,children:e.value},t)}))}var s,n,o;r(t)},viewerText:o,viewerOnScroll:u})})]}),(0,E.jsxs)("div",{className:"grid-container",children:[(0,E.jsx)(zd,{data:l}),(0,E.jsx)(yT,{data:h})]})]})};(0,n.H)(document.getElementById("root")).render((0,E.jsx)(s.StrictMode,{children:(0,E.jsx)(bT,{})}))})();
//# sourceMappingURL=main.c18cbf27.js.map